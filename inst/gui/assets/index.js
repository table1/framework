(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wd(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const _t={},ar=[],wi=()=>{},Nm=()=>!1,Ia=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Sd=s=>s.startsWith("onUpdate:"),Kt=Object.assign,_d=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},Kb=Object.prototype.hasOwnProperty,pt=(s,e)=>Kb.call(s,e),We=Array.isArray,ur=s=>Yo(s)==="[object Map]",Or=s=>Yo(s)==="[object Set]",Jf=s=>Yo(s)==="[object Date]",Qe=s=>typeof s=="function",$t=s=>typeof s=="string",Zs=s=>typeof s=="symbol",kt=s=>s!==null&&typeof s=="object",Um=s=>(kt(s)||Qe(s))&&Qe(s.then)&&Qe(s.catch),Fm=Object.prototype.toString,Yo=s=>Fm.call(s),qb=s=>Yo(s).slice(8,-1),zm=s=>Yo(s)==="[object Object]",Cd=s=>$t(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,ro=wd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ba=s=>{const e=Object.create(null);return(t=>e[t]||(e[t]=s(t)))},Gb=/-\w/g,Ks=Ba(s=>s.replace(Gb,e=>e.slice(1).toUpperCase())),Jb=/\B([A-Z])/g,qn=Ba(s=>s.replace(Jb,"-$1").toLowerCase()),Na=Ba(s=>s.charAt(0).toUpperCase()+s.slice(1)),yu=Ba(s=>s?`on${Na(s)}`:""),an=(s,e)=>!Object.is(s,e),zl=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},Hm=(s,e,t,i=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:i,value:t})},na=s=>{const e=parseFloat(s);return isNaN(e)?s:e},Yb=s=>{const e=$t(s)?Number(s):NaN;return isNaN(e)?s:e};let Yf;const Ua=()=>Yf||(Yf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wo(s){if(We(s)){const e={};for(let t=0;t<s.length;t++){const i=s[t],n=$t(i)?e1(i):wo(i);if(n)for(const r in n)e[r]=n[r]}return e}else if($t(s)||kt(s))return s}const Qb=/;(?![^(]*\))/g,Xb=/:([^]+)/,Zb=/\/\*[^]*?\*\//g;function e1(s){const e={};return s.replace(Zb,"").split(Qb).forEach(t=>{if(t){const i=t.split(Xb);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Ae(s){let e="";if($t(s))e=s;else if(We(s))for(let t=0;t<s.length;t++){const i=Ae(s[t]);i&&(e+=i+" ")}else if(kt(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const t1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s1=wd(t1);function Wm(s){return!!s||s===""}function i1(s,e){if(s.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<s.length;i++)t=Nn(s[i],e[i]);return t}function Nn(s,e){if(s===e)return!0;let t=Jf(s),i=Jf(e);if(t||i)return t&&i?s.getTime()===e.getTime():!1;if(t=Zs(s),i=Zs(e),t||i)return s===e;if(t=We(s),i=We(e),t||i)return t&&i?i1(s,e):!1;if(t=kt(s),i=kt(e),t||i){if(!t||!i)return!1;const n=Object.keys(s).length,r=Object.keys(e).length;if(n!==r)return!1;for(const o in s){const l=s.hasOwnProperty(o),a=e.hasOwnProperty(o);if(l&&!a||!l&&a||!Nn(s[o],e[o]))return!1}}return String(s)===String(e)}function Ad(s,e){return s.findIndex(t=>Nn(t,e))}const Km=s=>!!(s&&s.__v_isRef===!0),ee=s=>$t(s)?s:s==null?"":We(s)||kt(s)&&(s.toString===Fm||!Qe(s.toString))?Km(s)?ee(s.value):JSON.stringify(s,qm,2):String(s),qm=(s,e)=>Km(e)?qm(s,e.value):ur(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],r)=>(t[bu(i,r)+" =>"]=n,t),{})}:Or(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>bu(t))}:Zs(e)?bu(e):kt(e)&&!We(e)&&!zm(e)?String(e):e,bu=(s,e="")=>{var t;return Zs(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ss;class n1{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ss,!e&&Ss&&(this.index=(Ss.scopes||(Ss.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Ss;try{return Ss=this,e()}finally{Ss=t}}}on(){++this._on===1&&(this.prevScope=Ss,Ss=this)}off(){this._on>0&&--this._on===0&&(Ss=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function r1(){return Ss}let Mt;const ku=new WeakSet;class Gm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ss&&Ss.active&&Ss.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ku.has(this)&&(ku.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ym(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Qf(this),Qm(this);const e=Mt,t=Ys;Mt=this,Ys=!0;try{return this.fn()}finally{Xm(this),Mt=e,Ys=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ed(e);this.deps=this.depsTail=void 0,Qf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ku.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ac(this)&&this.run()}get dirty(){return ac(this)}}let Jm=0,oo,lo;function Ym(s,e=!1){if(s.flags|=8,e){s.next=lo,lo=s;return}s.next=oo,oo=s}function Md(){Jm++}function Dd(){if(--Jm>0)return;if(lo){let e=lo;for(lo=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;oo;){let e=oo;for(oo=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){s||(s=i)}e=t}}if(s)throw s}function Qm(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Xm(s){let e,t=s.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),Ed(i),o1(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=e,s.depsTail=t}function ac(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function Zm(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===So)||(s.globalVersion=So,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!ac(s))))return;s.flags|=2;const e=s.dep,t=Mt,i=Ys;Mt=s,Ys=!0;try{Qm(s);const n=s.fn(s._value);(e.version===0||an(n,s._value))&&(s.flags|=128,s._value=n,e.version++)}catch(n){throw e.version++,n}finally{Mt=t,Ys=i,Xm(s),s.flags&=-3}}function Ed(s,e=!1){const{dep:t,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),t.subs===s&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Ed(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function o1(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let Ys=!0;const eg=[];function Ii(){eg.push(Ys),Ys=!1}function Bi(){const s=eg.pop();Ys=s===void 0?!0:s}function Qf(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=Mt;Mt=void 0;try{e()}finally{Mt=t}}}let So=0;class l1{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Td{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Mt||!Ys||Mt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Mt)t=this.activeLink=new l1(Mt,this),Mt.deps?(t.prevDep=Mt.depsTail,Mt.depsTail.nextDep=t,Mt.depsTail=t):Mt.deps=Mt.depsTail=t,tg(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=Mt.depsTail,t.nextDep=void 0,Mt.depsTail.nextDep=t,Mt.depsTail=t,Mt.deps===t&&(Mt.deps=i)}return t}trigger(e){this.version++,So++,this.notify(e)}notify(e){Md();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Dd()}}}function tg(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)tg(i)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const uc=new WeakMap,Rn=Symbol(""),cc=Symbol(""),_o=Symbol("");function ss(s,e,t){if(Ys&&Mt){let i=uc.get(s);i||uc.set(s,i=new Map);let n=i.get(t);n||(i.set(t,n=new Td),n.map=i,n.key=t),n.track()}}function Pi(s,e,t,i,n,r){const o=uc.get(s);if(!o){So++;return}const l=a=>{a&&a.trigger()};if(Md(),e==="clear")o.forEach(l);else{const a=We(s),c=a&&Cd(t);if(a&&t==="length"){const u=Number(i);o.forEach((d,h)=>{(h==="length"||h===_o||!Zs(h)&&h>=u)&&l(d)})}else switch((t!==void 0||o.has(void 0))&&l(o.get(t)),c&&l(o.get(_o)),e){case"add":a?c&&l(o.get("length")):(l(o.get(Rn)),ur(s)&&l(o.get(cc)));break;case"delete":a||(l(o.get(Rn)),ur(s)&&l(o.get(cc)));break;case"set":ur(s)&&l(o.get(Rn));break}}Dd()}function Zn(s){const e=ft(s);return e===s?e:(ss(e,"iterate",_o),Fs(s)?e:e.map(Gt))}function Fa(s){return ss(s=ft(s),"iterate",_o),s}const a1={__proto__:null,[Symbol.iterator](){return xu(this,Symbol.iterator,Gt)},concat(...s){return Zn(this).concat(...s.map(e=>We(e)?Zn(e):e))},entries(){return xu(this,"entries",s=>(s[1]=Gt(s[1]),s))},every(s,e){return Mi(this,"every",s,e,void 0,arguments)},filter(s,e){return Mi(this,"filter",s,e,t=>t.map(Gt),arguments)},find(s,e){return Mi(this,"find",s,e,Gt,arguments)},findIndex(s,e){return Mi(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return Mi(this,"findLast",s,e,Gt,arguments)},findLastIndex(s,e){return Mi(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return Mi(this,"forEach",s,e,void 0,arguments)},includes(...s){return wu(this,"includes",s)},indexOf(...s){return wu(this,"indexOf",s)},join(s){return Zn(this).join(s)},lastIndexOf(...s){return wu(this,"lastIndexOf",s)},map(s,e){return Mi(this,"map",s,e,void 0,arguments)},pop(){return Hr(this,"pop")},push(...s){return Hr(this,"push",s)},reduce(s,...e){return Xf(this,"reduce",s,e)},reduceRight(s,...e){return Xf(this,"reduceRight",s,e)},shift(){return Hr(this,"shift")},some(s,e){return Mi(this,"some",s,e,void 0,arguments)},splice(...s){return Hr(this,"splice",s)},toReversed(){return Zn(this).toReversed()},toSorted(s){return Zn(this).toSorted(s)},toSpliced(...s){return Zn(this).toSpliced(...s)},unshift(...s){return Hr(this,"unshift",s)},values(){return xu(this,"values",Gt)}};function xu(s,e,t){const i=Fa(s),n=i[e]();return i!==s&&!Fs(s)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=t(r.value)),r}),n}const u1=Array.prototype;function Mi(s,e,t,i,n,r){const o=Fa(s),l=o!==s&&!Fs(s),a=o[e];if(a!==u1[e]){const d=a.apply(s,r);return l?Gt(d):d}let c=t;o!==s&&(l?c=function(d,h){return t.call(this,Gt(d),h,s)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,s)}));const u=a.call(o,c,i);return l&&n?n(u):u}function Xf(s,e,t,i){const n=Fa(s);let r=t;return n!==s&&(Fs(s)?t.length>3&&(r=function(o,l,a){return t.call(this,o,l,a,s)}):r=function(o,l,a){return t.call(this,o,Gt(l),a,s)}),n[e](r,...i)}function wu(s,e,t){const i=ft(s);ss(i,"iterate",_o);const n=i[e](...t);return(n===-1||n===!1)&&Pd(t[0])?(t[0]=ft(t[0]),i[e](...t)):n}function Hr(s,e,t=[]){Ii(),Md();const i=ft(s)[e].apply(s,t);return Dd(),Bi(),i}const c1=wd("__proto__,__v_isRef,__isVue"),sg=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Zs));function d1(s){Zs(s)||(s=String(s));const e=ft(this);return ss(e,"has",s),e.hasOwnProperty(s)}class ig{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(n?r?x1:lg:r?og:rg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=We(e);if(!n){let a;if(o&&(a=a1[t]))return a;if(t==="hasOwnProperty")return d1}const l=Reflect.get(e,t,os(e)?e:i);if((Zs(t)?sg.has(t):c1(t))||(n||ss(e,"get",t),r))return l;if(os(l)){const a=o&&Cd(t)?l:l.value;return n&&kt(a)?fc(a):a}return kt(l)?n?fc(l):Is(l):l}}class ng extends ig{constructor(e=!1){super(!1,e)}set(e,t,i,n){let r=e[t];if(!this._isShallow){const a=dn(r);if(!Fs(i)&&!dn(i)&&(r=ft(r),i=ft(i)),!We(e)&&os(r)&&!os(i))return a||(r.value=i),!0}const o=We(e)&&Cd(t)?Number(t)<e.length:pt(e,t),l=Reflect.set(e,t,i,os(e)?e:n);return e===ft(n)&&(o?an(i,r)&&Pi(e,"set",t,i):Pi(e,"add",t,i)),l}deleteProperty(e,t){const i=pt(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Pi(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!Zs(t)||!sg.has(t))&&ss(e,"has",t),i}ownKeys(e){return ss(e,"iterate",We(e)?"length":Rn),Reflect.ownKeys(e)}}class f1 extends ig{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const h1=new ng,p1=new f1,m1=new ng(!0);const dc=s=>s,hl=s=>Reflect.getPrototypeOf(s);function g1(s,e,t){return function(...i){const n=this.__v_raw,r=ft(n),o=ur(r),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,c=n[s](...i),u=t?dc:e?ra:Gt;return!e&&ss(r,"iterate",a?cc:Rn),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:l?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function pl(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function v1(s,e){const t={get(n){const r=this.__v_raw,o=ft(r),l=ft(n);s||(an(n,l)&&ss(o,"get",n),ss(o,"get",l));const{has:a}=hl(o),c=e?dc:s?ra:Gt;if(a.call(o,n))return c(r.get(n));if(a.call(o,l))return c(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!s&&ss(ft(n),"iterate",Rn),n.size},has(n){const r=this.__v_raw,o=ft(r),l=ft(n);return s||(an(n,l)&&ss(o,"has",n),ss(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,a=ft(l),c=e?dc:s?ra:Gt;return!s&&ss(a,"iterate",Rn),l.forEach((u,d)=>n.call(r,c(u),c(d),o))}};return Kt(t,s?{add:pl("add"),set:pl("set"),delete:pl("delete"),clear:pl("clear")}:{add(n){!e&&!Fs(n)&&!dn(n)&&(n=ft(n));const r=ft(this);return hl(r).has.call(r,n)||(r.add(n),Pi(r,"add",n,n)),this},set(n,r){!e&&!Fs(r)&&!dn(r)&&(r=ft(r));const o=ft(this),{has:l,get:a}=hl(o);let c=l.call(o,n);c||(n=ft(n),c=l.call(o,n));const u=a.call(o,n);return o.set(n,r),c?an(r,u)&&Pi(o,"set",n,r):Pi(o,"add",n,r),this},delete(n){const r=ft(this),{has:o,get:l}=hl(r);let a=o.call(r,n);a||(n=ft(n),a=o.call(r,n)),l&&l.call(r,n);const c=r.delete(n);return a&&Pi(r,"delete",n,void 0),c},clear(){const n=ft(this),r=n.size!==0,o=n.clear();return r&&Pi(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=g1(n,s,e)}),t}function Vd(s,e){const t=v1(s,e);return(i,n,r)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(pt(t,n)&&n in i?t:i,n,r)}const y1={get:Vd(!1,!1)},b1={get:Vd(!1,!0)},k1={get:Vd(!0,!1)};const rg=new WeakMap,og=new WeakMap,lg=new WeakMap,x1=new WeakMap;function w1(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function S1(s){return s.__v_skip||!Object.isExtensible(s)?0:w1(qb(s))}function Is(s){return dn(s)?s:Od(s,!1,h1,y1,rg)}function ag(s){return Od(s,!1,m1,b1,og)}function fc(s){return Od(s,!0,p1,k1,lg)}function Od(s,e,t,i,n){if(!kt(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=S1(s);if(r===0)return s;const o=n.get(s);if(o)return o;const l=new Proxy(s,r===2?i:t);return n.set(s,l),l}function cr(s){return dn(s)?cr(s.__v_raw):!!(s&&s.__v_isReactive)}function dn(s){return!!(s&&s.__v_isReadonly)}function Fs(s){return!!(s&&s.__v_isShallow)}function Pd(s){return s?!!s.__v_raw:!1}function ft(s){const e=s&&s.__v_raw;return e?ft(e):s}function _1(s){return!pt(s,"__v_skip")&&Object.isExtensible(s)&&Hm(s,"__v_skip",!0),s}const Gt=s=>kt(s)?Is(s):s,ra=s=>kt(s)?fc(s):s;function os(s){return s?s.__v_isRef===!0:!1}function ie(s){return ug(s,!1)}function C1(s){return ug(s,!0)}function ug(s,e){return os(s)?s:new A1(s,e)}class A1{constructor(e,t){this.dep=new Td,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ft(e),this._value=t?e:Gt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Fs(e)||dn(e);e=i?e:ft(e),an(e,t)&&(this._rawValue=e,this._value=i?e:Gt(e),this.dep.trigger())}}function vt(s){return os(s)?s.value:s}const M1={get:(s,e,t)=>e==="__v_raw"?s:vt(Reflect.get(s,e,t)),set:(s,e,t,i)=>{const n=s[e];return os(n)&&!os(t)?(n.value=t,!0):Reflect.set(s,e,t,i)}};function cg(s){return cr(s)?s:new Proxy(s,M1)}class D1{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Td(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=So-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Mt!==this)return Ym(this,!0),!0}get value(){const e=this.dep.track();return Zm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function E1(s,e,t=!1){let i,n;return Qe(s)?i=s:(i=s.get,n=s.set),new D1(i,n,t)}const ml={},oa=new WeakMap;let Dn;function T1(s,e=!1,t=Dn){if(t){let i=oa.get(t);i||oa.set(t,i=[]),i.push(s)}}function V1(s,e,t=_t){const{immediate:i,deep:n,once:r,scheduler:o,augmentJob:l,call:a}=t,c=G=>n?G:Fs(G)||n===!1||n===0?$i(G,1):$i(G);let u,d,h,m,y=!1,x=!1;if(os(s)?(d=()=>s.value,y=Fs(s)):cr(s)?(d=()=>c(s),y=!0):We(s)?(x=!0,y=s.some(G=>cr(G)||Fs(G)),d=()=>s.map(G=>{if(os(G))return G.value;if(cr(G))return c(G);if(Qe(G))return a?a(G,2):G()})):Qe(s)?e?d=a?()=>a(s,2):s:d=()=>{if(h){Ii();try{h()}finally{Bi()}}const G=Dn;Dn=u;try{return a?a(s,3,[m]):s(m)}finally{Dn=G}}:d=wi,e&&n){const G=d,N=n===!0?1/0:n;d=()=>$i(G(),N)}const S=r1(),p=()=>{u.stop(),S&&S.active&&_d(S.effects,u)};if(r&&e){const G=e;e=(...N)=>{G(...N),p()}}let j=x?new Array(s.length).fill(ml):ml;const B=G=>{if(!(!(u.flags&1)||!u.dirty&&!G))if(e){const N=u.run();if(n||y||(x?N.some((O,_)=>an(O,j[_])):an(N,j))){h&&h();const O=Dn;Dn=u;try{const _=[N,j===ml?void 0:x&&j[0]===ml?[]:j,m];j=N,a?a(e,3,_):e(..._)}finally{Dn=O}}}else u.run()};return l&&l(B),u=new Gm(d),u.scheduler=o?()=>o(B,!1):B,m=G=>T1(G,!1,u),h=u.onStop=()=>{const G=oa.get(u);if(G){if(a)a(G,4);else for(const N of G)N();oa.delete(u)}},e?i?B(!0):j=u.run():o?o(B.bind(null,!0),!0):u.run(),p.pause=u.pause.bind(u),p.resume=u.resume.bind(u),p.stop=p,p}function $i(s,e=1/0,t){if(e<=0||!kt(s)||s.__v_skip||(t=t||new Map,(t.get(s)||0)>=e))return s;if(t.set(s,e),e--,os(s))$i(s.value,e,t);else if(We(s))for(let i=0;i<s.length;i++)$i(s[i],e,t);else if(Or(s)||ur(s))s.forEach(i=>{$i(i,e,t)});else if(zm(s)){for(const i in s)$i(s[i],e,t);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&$i(s[i],e,t)}return s}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qo(s,e,t,i){try{return i?s(...i):s()}catch(n){za(n,e,t)}}function ei(s,e,t,i){if(Qe(s)){const n=Qo(s,e,t,i);return n&&Um(n)&&n.catch(r=>{za(r,e,t)}),n}if(We(s)){const n=[];for(let r=0;r<s.length;r++)n.push(ei(s[r],e,t,i));return n}}function za(s,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||_t;if(e){let l=e.parent;const a=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const u=l.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](s,a,c)===!1)return}l=l.parent}if(r){Ii(),Qo(r,null,10,[s,a,c]),Bi();return}}O1(s,t,n,i,o)}function O1(s,e,t,i=!0,n=!1){if(n)throw s;console.error(s)}const gs=[];let mi=-1;const dr=[];let Yi=null,er=0;const dg=Promise.resolve();let la=null;function Qs(s){const e=la||dg;return s?e.then(this?s.bind(this):s):e}function P1(s){let e=mi+1,t=gs.length;for(;e<t;){const i=e+t>>>1,n=gs[i],r=Co(n);r<s||r===s&&n.flags&2?e=i+1:t=i}return e}function $d(s){if(!(s.flags&1)){const e=Co(s),t=gs[gs.length-1];!t||!(s.flags&2)&&e>=Co(t)?gs.push(s):gs.splice(P1(e),0,s),s.flags|=1,fg()}}function fg(){la||(la=dg.then(pg))}function $1(s){We(s)?dr.push(...s):Yi&&s.id===-1?Yi.splice(er+1,0,s):s.flags&1||(dr.push(s),s.flags|=1),fg()}function Zf(s,e,t=mi+1){for(;t<gs.length;t++){const i=gs[t];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;gs.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function hg(s){if(dr.length){const e=[...new Set(dr)].sort((t,i)=>Co(t)-Co(i));if(dr.length=0,Yi){Yi.push(...e);return}for(Yi=e,er=0;er<Yi.length;er++){const t=Yi[er];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Yi=null,er=0}}const Co=s=>s.id==null?s.flags&2?-1:1/0:s.id;function pg(s){try{for(mi=0;mi<gs.length;mi++){const e=gs[mi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mi<gs.length;mi++){const e=gs[mi];e&&(e.flags&=-2)}mi=-1,gs.length=0,hg(),la=null,(gs.length||dr.length)&&pg()}}let Qt=null,mg=null;function aa(s){const e=Qt;return Qt=s,mg=s&&s.type.__scopeId||null,e}function Z(s,e=Qt,t){if(!e||s._n)return s;const i=(...n)=>{i._d&&fa(-1);const r=aa(e);let o;try{o=s(...n)}finally{aa(r),i._d&&fa(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function nt(s,e){if(Qt===null)return s;const t=Ja(Qt),i=s.dirs||(s.dirs=[]);for(let n=0;n<e.length;n++){let[r,o,l,a=_t]=e[n];r&&(Qe(r)&&(r={mounted:r,updated:r}),r.deep&&$i(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:l,modifiers:a}))}return s}function Sn(s,e,t,i){const n=s.dirs,r=e&&e.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let a=l.dir[i];a&&(Ii(),ei(a,t,8,[s.el,l,s,e]),Bi())}}const gg=Symbol("_vte"),vg=s=>s.__isTeleport,ao=s=>s&&(s.disabled||s.disabled===""),eh=s=>s&&(s.defer||s.defer===""),th=s=>typeof SVGElement<"u"&&s instanceof SVGElement,sh=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,hc=(s,e)=>{const t=s&&s.to;return $t(t)?e?e(t):null:t},yg={name:"Teleport",__isTeleport:!0,process(s,e,t,i,n,r,o,l,a,c){const{mc:u,pc:d,pbc:h,o:{insert:m,querySelector:y,createText:x,createComment:S}}=c,p=ao(e.props);let{shapeFlag:j,children:B,dynamicChildren:G}=e;if(s==null){const N=e.el=x(""),O=e.anchor=x("");m(N,t,i),m(O,t,i);const _=(K,oe)=>{j&16&&u(B,K,oe,n,r,o,l,a)},V=()=>{const K=e.target=hc(e.props,y),oe=kg(K,e,x,m);K&&(o!=="svg"&&th(K)?o="svg":o!=="mathml"&&sh(K)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(K),p||(_(K,oe),Hl(e,!1)))};p&&(_(t,O),Hl(e,!0)),eh(e.props)?(e.el.__isMounted=!1,hs(()=>{V(),delete e.el.__isMounted},r)):V()}else{if(eh(e.props)&&s.el.__isMounted===!1){hs(()=>{yg.process(s,e,t,i,n,r,o,l,a,c)},r);return}e.el=s.el,e.targetStart=s.targetStart;const N=e.anchor=s.anchor,O=e.target=s.target,_=e.targetAnchor=s.targetAnchor,V=ao(s.props),K=V?t:O,oe=V?N:_;if(o==="svg"||th(O)?o="svg":(o==="mathml"||sh(O))&&(o="mathml"),G?(h(s.dynamicChildren,G,K,n,r,o,l),Rd(s,e,!0)):a||d(s,e,K,oe,n,r,o,l,!1),p)V?e.props&&s.props&&e.props.to!==s.props.to&&(e.props.to=s.props.to):gl(e,t,N,c,1);else if((e.props&&e.props.to)!==(s.props&&s.props.to)){const ne=e.target=hc(e.props,y);ne&&gl(e,ne,null,c,0)}else V&&gl(e,O,_,c,1);Hl(e,p)}},remove(s,e,t,{um:i,o:{remove:n}},r){const{shapeFlag:o,children:l,anchor:a,targetStart:c,targetAnchor:u,target:d,props:h}=s;if(d&&(n(c),n(u)),r&&n(a),o&16){const m=r||!ao(h);for(let y=0;y<l.length;y++){const x=l[y];i(x,e,t,m,!!x.dynamicChildren)}}},move:gl,hydrate:j1};function gl(s,e,t,{o:{insert:i},m:n},r=2){r===0&&i(s.targetAnchor,e,t);const{el:o,anchor:l,shapeFlag:a,children:c,props:u}=s,d=r===2;if(d&&i(o,e,t),(!d||ao(u))&&a&16)for(let h=0;h<c.length;h++)n(c[h],e,t,2);d&&i(l,e,t)}function j1(s,e,t,i,n,r,{o:{nextSibling:o,parentNode:l,querySelector:a,insert:c,createText:u}},d){function h(x,S,p,j){S.anchor=d(o(x),S,l(x),t,i,n,r),S.targetStart=p,S.targetAnchor=j}const m=e.target=hc(e.props,a),y=ao(e.props);if(m){const x=m._lpa||m.firstChild;if(e.shapeFlag&16)if(y)h(s,e,x,x&&o(x));else{e.anchor=o(s);let S=x;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,m._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||kg(m,e,u,c),d(x&&o(x),e,m,t,i,n,r)}Hl(e,y)}else y&&e.shapeFlag&16&&h(s,e,s,o(s));return e.anchor&&o(e.anchor)}const bg=yg;function Hl(s,e){const t=s.ctx;if(t&&t.ut){let i,n;for(e?(i=s.el,n=s.anchor):(i=s.targetStart,n=s.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function kg(s,e,t,i){const n=e.targetStart=t(""),r=e.targetAnchor=t("");return n[gg]=r,s&&(i(n,s),i(r,s)),r}const Oi=Symbol("_leaveCb"),vl=Symbol("_enterCb");function L1(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ls(()=>{s.isMounted=!0}),Eg(()=>{s.isUnmounting=!0}),s}const Rs=[Function,Array],xg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rs,onEnter:Rs,onAfterEnter:Rs,onEnterCancelled:Rs,onBeforeLeave:Rs,onLeave:Rs,onAfterLeave:Rs,onLeaveCancelled:Rs,onBeforeAppear:Rs,onAppear:Rs,onAfterAppear:Rs,onAppearCancelled:Rs},wg=s=>{const e=s.subTree;return e.component?wg(e.component):e},R1={name:"BaseTransition",props:xg,setup(s,{slots:e}){const t=Bd(),i=L1();return()=>{const n=e.default&&Cg(e.default(),!0);if(!n||!n.length)return;const r=Sg(n),o=ft(s),{mode:l}=o;if(i.isLeaving)return Su(r);const a=ih(r);if(!a)return Su(r);let c=pc(a,o,i,t,d=>c=d);a.type!==is&&Ao(a,c);let u=t.subTree&&ih(t.subTree);if(u&&u.type!==is&&!Vn(u,a)&&wg(t).type!==is){let d=pc(u,o,i,t);if(Ao(u,d),l==="out-in"&&a.type!==is)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete d.afterLeave,u=void 0},Su(r);l==="in-out"&&a.type!==is?d.delayLeave=(h,m,y)=>{const x=_g(i,u);x[String(u.key)]=u,h[Oi]=()=>{m(),h[Oi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function Sg(s){let e=s[0];if(s.length>1){for(const t of s)if(t.type!==is){e=t;break}}return e}const I1=R1;function _g(s,e){const{leavingVNodes:t}=s;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function pc(s,e,t,i,n){const{appear:r,mode:o,persisted:l=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:h,onLeave:m,onAfterLeave:y,onLeaveCancelled:x,onBeforeAppear:S,onAppear:p,onAfterAppear:j,onAppearCancelled:B}=e,G=String(s.key),N=_g(t,s),O=(K,oe)=>{K&&ei(K,i,9,oe)},_=(K,oe)=>{const ne=oe[1];O(K,oe),We(K)?K.every(R=>R.length<=1)&&ne():K.length<=1&&ne()},V={mode:o,persisted:l,beforeEnter(K){let oe=a;if(!t.isMounted)if(r)oe=S||a;else return;K[Oi]&&K[Oi](!0);const ne=N[G];ne&&Vn(s,ne)&&ne.el[Oi]&&ne.el[Oi](),O(oe,[K])},enter(K){let oe=c,ne=u,R=d;if(!t.isMounted)if(r)oe=p||c,ne=j||u,R=B||d;else return;let le=!1;const se=K[vl]=$=>{le||(le=!0,$?O(R,[K]):O(ne,[K]),V.delayedLeave&&V.delayedLeave(),K[vl]=void 0)};oe?_(oe,[K,se]):se()},leave(K,oe){const ne=String(s.key);if(K[vl]&&K[vl](!0),t.isUnmounting)return oe();O(h,[K]);let R=!1;const le=K[Oi]=se=>{R||(R=!0,oe(),se?O(x,[K]):O(y,[K]),K[Oi]=void 0,N[ne]===s&&delete N[ne])};N[ne]=s,m?_(m,[K,le]):le()},clone(K){const oe=pc(K,e,t,i,n);return n&&n(oe),oe}};return V}function Su(s){if(Ha(s))return s=fn(s),s.children=null,s}function ih(s){if(!Ha(s))return vg(s.type)&&s.children?Sg(s.children):s;if(s.component)return s.component.subTree;const{shapeFlag:e,children:t}=s;if(t){if(e&16)return t[0];if(e&32&&Qe(t.default))return t.default()}}function Ao(s,e){s.shapeFlag&6&&s.component?(s.transition=e,Ao(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function Cg(s,e=!1,t){let i=[],n=0;for(let r=0;r<s.length;r++){let o=s[r];const l=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===me?(o.patchFlag&128&&n++,i=i.concat(Cg(o.children,e,l))):(e||o.type!==is)&&i.push(l!=null?fn(o,{key:l}):o)}if(n>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function Ag(s,e){return Qe(s)?Kt({name:s.name},e,{setup:s}):s}function Mg(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}const ua=new WeakMap;function uo(s,e,t,i,n=!1){if(We(s)){s.forEach((y,x)=>uo(y,e&&(We(e)?e[x]:e),t,i,n));return}if(fr(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&uo(s,e,t,i.component.subTree);return}const r=i.shapeFlag&4?Ja(i.component):i.el,o=n?null:r,{i:l,r:a}=s,c=e&&e.r,u=l.refs===_t?l.refs={}:l.refs,d=l.setupState,h=ft(d),m=d===_t?Nm:y=>pt(h,y);if(c!=null&&c!==a){if(nh(e),$t(c))u[c]=null,m(c)&&(d[c]=null);else if(os(c)){c.value=null;const y=e;y.k&&(u[y.k]=null)}}if(Qe(a))Qo(a,l,12,[o,u]);else{const y=$t(a),x=os(a);if(y||x){const S=()=>{if(s.f){const p=y?m(a)?d[a]:u[a]:a.value;if(n)We(p)&&_d(p,r);else if(We(p))p.includes(r)||p.push(r);else if(y)u[a]=[r],m(a)&&(d[a]=u[a]);else{const j=[r];a.value=j,s.k&&(u[s.k]=j)}}else y?(u[a]=o,m(a)&&(d[a]=o)):x&&(a.value=o,s.k&&(u[s.k]=o))};if(o){const p=()=>{S(),ua.delete(s)};p.id=-1,ua.set(s,p),hs(p,t)}else nh(s),S()}}}function nh(s){const e=ua.get(s);e&&(e.flags|=8,ua.delete(s))}Ua().requestIdleCallback;Ua().cancelIdleCallback;const fr=s=>!!s.type.__asyncLoader,Ha=s=>s.type.__isKeepAlive;function B1(s,e){Dg(s,"a",e)}function N1(s,e){Dg(s,"da",e)}function Dg(s,e,t=ns){const i=s.__wdc||(s.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(Wa(e,i,t),t){let n=t.parent;for(;n&&n.parent;)Ha(n.parent.vnode)&&U1(i,e,t,n),n=n.parent}}function U1(s,e,t,i){const n=Wa(e,s,i,!0);Pr(()=>{_d(i[e],n)},t)}function Wa(s,e,t=ns,i=!1){if(t){const n=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{Ii();const l=Xo(t),a=ei(e,t,s,o);return l(),Bi(),a});return i?n.unshift(r):n.push(r),r}}const zi=s=>(e,t=ns)=>{(!Eo||s==="sp")&&Wa(s,(...i)=>e(...i),t)},F1=zi("bm"),ls=zi("m"),z1=zi("bu"),H1=zi("u"),Eg=zi("bum"),Pr=zi("um"),W1=zi("sp"),K1=zi("rtg"),q1=zi("rtc");function G1(s,e=ns){Wa("ec",s,e)}const Tg="components";function ca(s,e){return Og(Tg,s,!0,e)||s}const Vg=Symbol.for("v-ndc");function Es(s){return $t(s)?Og(Tg,s,!1)||s:s||Vg}function Og(s,e,t=!0,i=!1){const n=Qt||ns;if(n){const r=n.type;{const l=Rk(r,!1);if(l&&(l===e||l===Ks(e)||l===Na(Ks(e))))return r}const o=rh(n[s]||r[s],e)||rh(n.appContext[s],e);return!o&&i?r:o}}function rh(s,e){return s&&(s[e]||s[Ks(e)]||s[Na(Ks(e))])}function Ee(s,e,t,i){let n;const r=t,o=We(s);if(o||$t(s)){const l=o&&cr(s);let a=!1,c=!1;l&&(a=!Fs(s),c=dn(s),s=Fa(s)),n=new Array(s.length);for(let u=0,d=s.length;u<d;u++)n[u]=e(a?c?ra(Gt(s[u])):Gt(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=e(l+1,l,void 0,r)}else if(kt(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>e(l,a,void 0,r));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];n[a]=e(s[u],u,a,r)}}else n=[];return n}function J1(s,e){for(let t=0;t<e.length;t++){const i=e[t];if(We(i))for(let n=0;n<i.length;n++)s[i[n].name]=i[n].fn;else i&&(s[i.name]=i.key?(...n)=>{const r=i.fn(...n);return r&&(r.key=i.key),r}:i.fn)}return s}function gt(s,e,t={},i,n){if(Qt.ce||Qt.parent&&fr(Qt.parent)&&Qt.parent.ce){const c=Object.keys(t).length>0;return e!=="default"&&(t.name=e),g(),be(me,null,[w("slot",t,i&&i())],c?-2:64)}let r=s[e];r&&r._c&&(r._d=!1),g();const o=r&&Pg(r(t)),l=t.key||o&&o.key,a=be(me,{key:(l&&!Zs(l)?l:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&s._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Pg(s){return s.some(e=>Do(e)?!(e.type===is||e.type===me&&!Pg(e.children)):!0)?s:null}const mc=s=>s?Xg(s)?Ja(s):mc(s.parent):null,co=Kt(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>mc(s.parent),$root:s=>mc(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>jg(s),$forceUpdate:s=>s.f||(s.f=()=>{$d(s.update)}),$nextTick:s=>s.n||(s.n=Qs.bind(s.proxy)),$watch:s=>yk.bind(s)}),_u=(s,e)=>s!==_t&&!s.__isScriptSetup&&pt(s,e),Y1={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:r,accessCache:o,type:l,appContext:a}=s;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return r[e]}else{if(_u(i,e))return o[e]=1,i[e];if(n!==_t&&pt(n,e))return o[e]=2,n[e];if((c=s.propsOptions[0])&&pt(c,e))return o[e]=3,r[e];if(t!==_t&&pt(t,e))return o[e]=4,t[e];gc&&(o[e]=0)}}const u=co[e];let d,h;if(u)return e==="$attrs"&&ss(s.attrs,"get",""),u(s);if((d=l.__cssModules)&&(d=d[e]))return d;if(t!==_t&&pt(t,e))return o[e]=4,t[e];if(h=a.config.globalProperties,pt(h,e))return h[e]},set({_:s},e,t){const{data:i,setupState:n,ctx:r}=s;return _u(n,e)?(n[e]=t,!0):i!==_t&&pt(i,e)?(i[e]=t,!0):pt(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:r,type:o}},l){let a,c;return!!(t[l]||s!==_t&&l[0]!=="$"&&pt(s,l)||_u(e,l)||(a=r[0])&&pt(a,l)||pt(i,l)||pt(co,l)||pt(n.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:pt(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Q1(){return X1().slots}function X1(s){const e=Bd();return e.setupContext||(e.setupContext=e0(e))}function oh(s){return We(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let gc=!0;function Z1(s){const e=jg(s),t=s.proxy,i=s.ctx;gc=!1,e.beforeCreate&&lh(e.beforeCreate,s,"bc");const{data:n,computed:r,methods:o,watch:l,provide:a,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:m,updated:y,activated:x,deactivated:S,beforeDestroy:p,beforeUnmount:j,destroyed:B,unmounted:G,render:N,renderTracked:O,renderTriggered:_,errorCaptured:V,serverPrefetch:K,expose:oe,inheritAttrs:ne,components:R,directives:le,filters:se}=e;if(c&&ek(c,i,null),o)for(const Y in o){const de=o[Y];Qe(de)&&(i[Y]=de.bind(t))}if(n){const Y=n.call(t,t);kt(Y)&&(s.data=Is(Y))}if(gc=!0,r)for(const Y in r){const de=r[Y],ye=Qe(de)?de.bind(t,t):Qe(de.get)?de.get.bind(t,t):wi,Ke=!Qe(de)&&Qe(de.set)?de.set.bind(t):wi,_e=W({get:ye,set:Ke});Object.defineProperty(i,Y,{enumerable:!0,configurable:!0,get:()=>_e.value,set:Le=>_e.value=Le})}if(l)for(const Y in l)$g(l[Y],i,t,Y);if(a){const Y=Qe(a)?a.call(t):a;Reflect.ownKeys(Y).forEach(de=>{Wl(de,Y[de])})}u&&lh(u,s,"c");function q(Y,de){We(de)?de.forEach(ye=>Y(ye.bind(t))):de&&Y(de.bind(t))}if(q(F1,d),q(ls,h),q(z1,m),q(H1,y),q(B1,x),q(N1,S),q(G1,V),q(q1,O),q(K1,_),q(Eg,j),q(Pr,G),q(W1,K),We(oe))if(oe.length){const Y=s.exposed||(s.exposed={});oe.forEach(de=>{Object.defineProperty(Y,de,{get:()=>t[de],set:ye=>t[de]=ye,enumerable:!0})})}else s.exposed||(s.exposed={});N&&s.render===wi&&(s.render=N),ne!=null&&(s.inheritAttrs=ne),R&&(s.components=R),le&&(s.directives=le),K&&Mg(s)}function ek(s,e,t=wi){We(s)&&(s=vc(s));for(const i in s){const n=s[i];let r;kt(n)?"default"in n?r=Xs(n.from||i,n.default,!0):r=Xs(n.from||i):r=Xs(n),os(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function lh(s,e,t){ei(We(s)?s.map(i=>i.bind(e.proxy)):s.bind(e.proxy),e,t)}function $g(s,e,t,i){let n=i.includes(".")?qg(t,i):()=>t[i];if($t(s)){const r=e[s];Qe(r)&&Ne(n,r)}else if(Qe(s))Ne(n,s.bind(t));else if(kt(s))if(We(s))s.forEach(r=>$g(r,e,t,i));else{const r=Qe(s.handler)?s.handler.bind(t):e[s.handler];Qe(r)&&Ne(n,r,s)}}function jg(s){const e=s.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,l=r.get(e);let a;return l?a=l:!n.length&&!t&&!i?a=e:(a={},n.length&&n.forEach(c=>da(a,c,o,!0)),da(a,e,o)),kt(e)&&r.set(e,a),a}function da(s,e,t,i=!1){const{mixins:n,extends:r}=e;r&&da(s,r,t,!0),n&&n.forEach(o=>da(s,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const l=tk[o]||t&&t[o];s[o]=l?l(s[o],e[o]):e[o]}return s}const tk={data:ah,props:uh,emits:uh,methods:eo,computed:eo,beforeCreate:fs,created:fs,beforeMount:fs,mounted:fs,beforeUpdate:fs,updated:fs,beforeDestroy:fs,beforeUnmount:fs,destroyed:fs,unmounted:fs,activated:fs,deactivated:fs,errorCaptured:fs,serverPrefetch:fs,components:eo,directives:eo,watch:ik,provide:ah,inject:sk};function ah(s,e){return e?s?function(){return Kt(Qe(s)?s.call(this,this):s,Qe(e)?e.call(this,this):e)}:e:s}function sk(s,e){return eo(vc(s),vc(e))}function vc(s){if(We(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function fs(s,e){return s?[...new Set([].concat(s,e))]:e}function eo(s,e){return s?Kt(Object.create(null),s,e):e}function uh(s,e){return s?We(s)&&We(e)?[...new Set([...s,...e])]:Kt(Object.create(null),oh(s),oh(e??{})):e}function ik(s,e){if(!s)return e;if(!e)return s;const t=Kt(Object.create(null),s);for(const i in e)t[i]=fs(s[i],e[i]);return t}function Lg(){return{app:null,config:{isNativeTag:Nm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nk=0;function rk(s,e){return function(i,n=null){Qe(i)||(i=Kt({},i)),n!=null&&!kt(n)&&(n=null);const r=Lg(),o=new WeakSet,l=[];let a=!1;const c=r.app={_uid:nk++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:Bk,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&Qe(u.install)?(o.add(u),u.install(c,...d)):Qe(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!a){const m=c._ceVNode||w(i,n);return m.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),s(m,u,h),a=!0,c._container=u,u.__vue_app__=c,Ja(m.component)}},onUnmount(u){l.push(u)},unmount(){a&&(ei(l,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=hr;hr=c;try{return u()}finally{hr=d}}};return c}}let hr=null;function Wl(s,e){if(ns){let t=ns.provides;const i=ns.parent&&ns.parent.provides;i===t&&(t=ns.provides=Object.create(i)),t[s]=e}}function Xs(s,e,t=!1){const i=Bd();if(i||hr){let n=hr?hr._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return t&&Qe(e)?e.call(i&&i.proxy):e}}const Rg={},Ig=()=>Object.create(Rg),Bg=s=>Object.getPrototypeOf(s)===Rg;function ok(s,e,t,i=!1){const n={},r=Ig();s.propsDefaults=Object.create(null),Ng(s,e,n,r);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);t?s.props=i?n:ag(n):s.type.props?s.props=n:s.props=r,s.attrs=r}function lk(s,e,t,i){const{props:n,attrs:r,vnode:{patchFlag:o}}=s,l=ft(n),[a]=s.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Ka(s.emitsOptions,h))continue;const m=e[h];if(a)if(pt(r,h))m!==r[h]&&(r[h]=m,c=!0);else{const y=Ks(h);n[y]=yc(a,l,y,m,s,!1)}else m!==r[h]&&(r[h]=m,c=!0)}}}else{Ng(s,e,n,r)&&(c=!0);let u;for(const d in l)(!e||!pt(e,d)&&((u=qn(d))===d||!pt(e,u)))&&(a?t&&(t[d]!==void 0||t[u]!==void 0)&&(n[d]=yc(a,l,d,void 0,s,!0)):delete n[d]);if(r!==l)for(const d in r)(!e||!pt(e,d))&&(delete r[d],c=!0)}c&&Pi(s.attrs,"set","")}function Ng(s,e,t,i){const[n,r]=s.propsOptions;let o=!1,l;if(e)for(let a in e){if(ro(a))continue;const c=e[a];let u;n&&pt(n,u=Ks(a))?!r||!r.includes(u)?t[u]=c:(l||(l={}))[u]=c:Ka(s.emitsOptions,a)||(!(a in i)||c!==i[a])&&(i[a]=c,o=!0)}if(r){const a=ft(t),c=l||_t;for(let u=0;u<r.length;u++){const d=r[u];t[d]=yc(n,a,d,c[d],s,!pt(c,d))}}return o}function yc(s,e,t,i,n,r){const o=s[t];if(o!=null){const l=pt(o,"default");if(l&&i===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Qe(a)){const{propsDefaults:c}=n;if(t in c)i=c[t];else{const u=Xo(n);i=c[t]=a.call(null,e),u()}}else i=a;n.ce&&n.ce._setProp(t,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===qn(t))&&(i=!0))}return i}const ak=new WeakMap;function Ug(s,e,t=!1){const i=t?ak:e.propsCache,n=i.get(s);if(n)return n;const r=s.props,o={},l=[];let a=!1;if(!Qe(s)){const u=d=>{a=!0;const[h,m]=Ug(d,e,!0);Kt(o,h),m&&l.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!a)return kt(s)&&i.set(s,ar),ar;if(We(r))for(let u=0;u<r.length;u++){const d=Ks(r[u]);ch(d)&&(o[d]=_t)}else if(r)for(const u in r){const d=Ks(u);if(ch(d)){const h=r[u],m=o[d]=We(h)||Qe(h)?{type:h}:Kt({},h),y=m.type;let x=!1,S=!0;if(We(y))for(let p=0;p<y.length;++p){const j=y[p],B=Qe(j)&&j.name;if(B==="Boolean"){x=!0;break}else B==="String"&&(S=!1)}else x=Qe(y)&&y.name==="Boolean";m[0]=x,m[1]=S,(x||pt(m,"default"))&&l.push(d)}}const c=[o,l];return kt(s)&&i.set(s,c),c}function ch(s){return s[0]!=="$"&&!ro(s)}const jd=s=>s==="_"||s==="_ctx"||s==="$stable",Ld=s=>We(s)?s.map(gi):[gi(s)],uk=(s,e,t)=>{if(e._n)return e;const i=Z((...n)=>Ld(e(...n)),t);return i._c=!1,i},Fg=(s,e,t)=>{const i=s._ctx;for(const n in s){if(jd(n))continue;const r=s[n];if(Qe(r))e[n]=uk(n,r,i);else if(r!=null){const o=Ld(r);e[n]=()=>o}}},zg=(s,e)=>{const t=Ld(e);s.slots.default=()=>t},Hg=(s,e,t)=>{for(const i in e)(t||!jd(i))&&(s[i]=e[i])},ck=(s,e,t)=>{const i=s.slots=Ig();if(s.vnode.shapeFlag&32){const n=e._;n?(Hg(i,e,t),t&&Hm(i,"_",n,!0)):Fg(e,i)}else e&&zg(s,e)},dk=(s,e,t)=>{const{vnode:i,slots:n}=s;let r=!0,o=_t;if(i.shapeFlag&32){const l=e._;l?t&&l===1?r=!1:Hg(n,e,t):(r=!e.$stable,Fg(e,n)),o=e}else e&&(zg(s,e),o={default:1});if(r)for(const l in n)!jd(l)&&o[l]==null&&delete n[l]},hs=Ak;function fk(s){return hk(s)}function hk(s,e){const t=Ua();t.__VUE__=!0;const{insert:i,remove:n,patchProp:r,createElement:o,createText:l,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:m=wi,insertStaticContent:y}=s,x=(D,T,F,re=null,ue=null,ce=null,Ce=void 0,xe=null,we=!!T.dynamicChildren)=>{if(D===T)return;D&&!Vn(D,T)&&(re=U(D),Le(D,ue,ce,!0),D=null),T.patchFlag===-2&&(we=!1,T.dynamicChildren=null);const{type:Q,ref:Re,shapeFlag:ke}=T;switch(Q){case qa:S(D,T,F,re);break;case is:p(D,T,F,re);break;case Kl:D==null&&j(T,F,re,Ce);break;case me:R(D,T,F,re,ue,ce,Ce,xe,we);break;default:ke&1?N(D,T,F,re,ue,ce,Ce,xe,we):ke&6?le(D,T,F,re,ue,ce,Ce,xe,we):(ke&64||ke&128)&&Q.process(D,T,F,re,ue,ce,Ce,xe,we,X)}Re!=null&&ue?uo(Re,D&&D.ref,ce,T||D,!T):Re==null&&D&&D.ref!=null&&uo(D.ref,null,ce,D,!0)},S=(D,T,F,re)=>{if(D==null)i(T.el=l(T.children),F,re);else{const ue=T.el=D.el;T.children!==D.children&&c(ue,T.children)}},p=(D,T,F,re)=>{D==null?i(T.el=a(T.children||""),F,re):T.el=D.el},j=(D,T,F,re)=>{[D.el,D.anchor]=y(D.children,T,F,re,D.el,D.anchor)},B=({el:D,anchor:T},F,re)=>{let ue;for(;D&&D!==T;)ue=h(D),i(D,F,re),D=ue;i(T,F,re)},G=({el:D,anchor:T})=>{let F;for(;D&&D!==T;)F=h(D),n(D),D=F;n(T)},N=(D,T,F,re,ue,ce,Ce,xe,we)=>{T.type==="svg"?Ce="svg":T.type==="math"&&(Ce="mathml"),D==null?O(T,F,re,ue,ce,Ce,xe,we):K(D,T,ue,ce,Ce,xe,we)},O=(D,T,F,re,ue,ce,Ce,xe)=>{let we,Q;const{props:Re,shapeFlag:ke,transition:$e,dirs:Fe}=D;if(we=D.el=o(D.type,ce,Re&&Re.is,Re),ke&8?u(we,D.children):ke&16&&V(D.children,we,null,re,ue,Cu(D,ce),Ce,xe),Fe&&Sn(D,null,re,"created"),_(we,D,D.scopeId,Ce,re),Re){for(const it in Re)it!=="value"&&!ro(it)&&r(we,it,null,Re[it],ce,re);"value"in Re&&r(we,"value",null,Re.value,ce),(Q=Re.onVnodeBeforeMount)&&ci(Q,re,D)}Fe&&Sn(D,null,re,"beforeMount");const qe=pk(ue,$e);qe&&$e.beforeEnter(we),i(we,T,F),((Q=Re&&Re.onVnodeMounted)||qe||Fe)&&hs(()=>{Q&&ci(Q,re,D),qe&&$e.enter(we),Fe&&Sn(D,null,re,"mounted")},ue)},_=(D,T,F,re,ue)=>{if(F&&m(D,F),re)for(let ce=0;ce<re.length;ce++)m(D,re[ce]);if(ue){let ce=ue.subTree;if(T===ce||Jg(ce.type)&&(ce.ssContent===T||ce.ssFallback===T)){const Ce=ue.vnode;_(D,Ce,Ce.scopeId,Ce.slotScopeIds,ue.parent)}}},V=(D,T,F,re,ue,ce,Ce,xe,we=0)=>{for(let Q=we;Q<D.length;Q++){const Re=D[Q]=xe?Qi(D[Q]):gi(D[Q]);x(null,Re,T,F,re,ue,ce,Ce,xe)}},K=(D,T,F,re,ue,ce,Ce)=>{const xe=T.el=D.el;let{patchFlag:we,dynamicChildren:Q,dirs:Re}=T;we|=D.patchFlag&16;const ke=D.props||_t,$e=T.props||_t;let Fe;if(F&&_n(F,!1),(Fe=$e.onVnodeBeforeUpdate)&&ci(Fe,F,T,D),Re&&Sn(T,D,F,"beforeUpdate"),F&&_n(F,!0),(ke.innerHTML&&$e.innerHTML==null||ke.textContent&&$e.textContent==null)&&u(xe,""),Q?oe(D.dynamicChildren,Q,xe,F,re,Cu(T,ue),ce):Ce||de(D,T,xe,null,F,re,Cu(T,ue),ce,!1),we>0){if(we&16)ne(xe,ke,$e,F,ue);else if(we&2&&ke.class!==$e.class&&r(xe,"class",null,$e.class,ue),we&4&&r(xe,"style",ke.style,$e.style,ue),we&8){const qe=T.dynamicProps;for(let it=0;it<qe.length;it++){const Ze=qe[it],xt=ke[Ze],He=$e[Ze];(He!==xt||Ze==="value")&&r(xe,Ze,xt,He,ue,F)}}we&1&&D.children!==T.children&&u(xe,T.children)}else!Ce&&Q==null&&ne(xe,ke,$e,F,ue);((Fe=$e.onVnodeUpdated)||Re)&&hs(()=>{Fe&&ci(Fe,F,T,D),Re&&Sn(T,D,F,"updated")},re)},oe=(D,T,F,re,ue,ce,Ce)=>{for(let xe=0;xe<T.length;xe++){const we=D[xe],Q=T[xe],Re=we.el&&(we.type===me||!Vn(we,Q)||we.shapeFlag&198)?d(we.el):F;x(we,Q,Re,null,re,ue,ce,Ce,!0)}},ne=(D,T,F,re,ue)=>{if(T!==F){if(T!==_t)for(const ce in T)!ro(ce)&&!(ce in F)&&r(D,ce,T[ce],null,ue,re);for(const ce in F){if(ro(ce))continue;const Ce=F[ce],xe=T[ce];Ce!==xe&&ce!=="value"&&r(D,ce,xe,Ce,ue,re)}"value"in F&&r(D,"value",T.value,F.value,ue)}},R=(D,T,F,re,ue,ce,Ce,xe,we)=>{const Q=T.el=D?D.el:l(""),Re=T.anchor=D?D.anchor:l("");let{patchFlag:ke,dynamicChildren:$e,slotScopeIds:Fe}=T;Fe&&(xe=xe?xe.concat(Fe):Fe),D==null?(i(Q,F,re),i(Re,F,re),V(T.children||[],F,Re,ue,ce,Ce,xe,we)):ke>0&&ke&64&&$e&&D.dynamicChildren?(oe(D.dynamicChildren,$e,F,ue,ce,Ce,xe),(T.key!=null||ue&&T===ue.subTree)&&Rd(D,T,!0)):de(D,T,F,Re,ue,ce,Ce,xe,we)},le=(D,T,F,re,ue,ce,Ce,xe,we)=>{T.slotScopeIds=xe,D==null?T.shapeFlag&512?ue.ctx.activate(T,F,re,Ce,we):se(T,F,re,ue,ce,Ce,we):$(D,T,we)},se=(D,T,F,re,ue,ce,Ce)=>{const xe=D.component=Pk(D,re,ue);if(Ha(D)&&(xe.ctx.renderer=X),$k(xe,!1,Ce),xe.asyncDep){if(ue&&ue.registerDep(xe,q,Ce),!D.el){const we=xe.subTree=w(is);p(null,we,T,F),D.placeholder=we.el}}else q(xe,D,T,F,ue,ce,Ce)},$=(D,T,F)=>{const re=T.component=D.component;if(_k(D,T,F))if(re.asyncDep&&!re.asyncResolved){Y(re,T,F);return}else re.next=T,re.update();else T.el=D.el,re.vnode=T},q=(D,T,F,re,ue,ce,Ce)=>{const xe=()=>{if(D.isMounted){let{next:ke,bu:$e,u:Fe,parent:qe,vnode:it}=D;{const M=Wg(D);if(M){ke&&(ke.el=it.el,Y(D,ke,Ce)),M.asyncDep.then(()=>{D.isUnmounted||xe()});return}}let Ze=ke,xt;_n(D,!1),ke?(ke.el=it.el,Y(D,ke,Ce)):ke=it,$e&&zl($e),(xt=ke.props&&ke.props.onVnodeBeforeUpdate)&&ci(xt,qe,ke,it),_n(D,!0);const He=fh(D),z=D.subTree;D.subTree=He,x(z,He,d(z.el),U(z),D,ue,ce),ke.el=He.el,Ze===null&&Ck(D,He.el),Fe&&hs(Fe,ue),(xt=ke.props&&ke.props.onVnodeUpdated)&&hs(()=>ci(xt,qe,ke,it),ue)}else{let ke;const{el:$e,props:Fe}=T,{bm:qe,m:it,parent:Ze,root:xt,type:He}=D,z=fr(T);_n(D,!1),qe&&zl(qe),!z&&(ke=Fe&&Fe.onVnodeBeforeMount)&&ci(ke,Ze,T),_n(D,!0);{xt.ce&&xt.ce._def.shadowRoot!==!1&&xt.ce._injectChildStyle(He);const M=D.subTree=fh(D);x(null,M,F,re,D,ue,ce),T.el=M.el}if(it&&hs(it,ue),!z&&(ke=Fe&&Fe.onVnodeMounted)){const M=T;hs(()=>ci(ke,Ze,M),ue)}(T.shapeFlag&256||Ze&&fr(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&D.a&&hs(D.a,ue),D.isMounted=!0,T=F=re=null}};D.scope.on();const we=D.effect=new Gm(xe);D.scope.off();const Q=D.update=we.run.bind(we),Re=D.job=we.runIfDirty.bind(we);Re.i=D,Re.id=D.uid,we.scheduler=()=>$d(Re),_n(D,!0),Q()},Y=(D,T,F)=>{T.component=D;const re=D.vnode.props;D.vnode=T,D.next=null,lk(D,T.props,re,F),dk(D,T.children,F),Ii(),Zf(D),Bi()},de=(D,T,F,re,ue,ce,Ce,xe,we=!1)=>{const Q=D&&D.children,Re=D?D.shapeFlag:0,ke=T.children,{patchFlag:$e,shapeFlag:Fe}=T;if($e>0){if($e&128){Ke(Q,ke,F,re,ue,ce,Ce,xe,we);return}else if($e&256){ye(Q,ke,F,re,ue,ce,Ce,xe,we);return}}Fe&8?(Re&16&&st(Q,ue,ce),ke!==Q&&u(F,ke)):Re&16?Fe&16?Ke(Q,ke,F,re,ue,ce,Ce,xe,we):st(Q,ue,ce,!0):(Re&8&&u(F,""),Fe&16&&V(ke,F,re,ue,ce,Ce,xe,we))},ye=(D,T,F,re,ue,ce,Ce,xe,we)=>{D=D||ar,T=T||ar;const Q=D.length,Re=T.length,ke=Math.min(Q,Re);let $e;for($e=0;$e<ke;$e++){const Fe=T[$e]=we?Qi(T[$e]):gi(T[$e]);x(D[$e],Fe,F,null,ue,ce,Ce,xe,we)}Q>Re?st(D,ue,ce,!0,!1,ke):V(T,F,re,ue,ce,Ce,xe,we,ke)},Ke=(D,T,F,re,ue,ce,Ce,xe,we)=>{let Q=0;const Re=T.length;let ke=D.length-1,$e=Re-1;for(;Q<=ke&&Q<=$e;){const Fe=D[Q],qe=T[Q]=we?Qi(T[Q]):gi(T[Q]);if(Vn(Fe,qe))x(Fe,qe,F,null,ue,ce,Ce,xe,we);else break;Q++}for(;Q<=ke&&Q<=$e;){const Fe=D[ke],qe=T[$e]=we?Qi(T[$e]):gi(T[$e]);if(Vn(Fe,qe))x(Fe,qe,F,null,ue,ce,Ce,xe,we);else break;ke--,$e--}if(Q>ke){if(Q<=$e){const Fe=$e+1,qe=Fe<Re?T[Fe].el:re;for(;Q<=$e;)x(null,T[Q]=we?Qi(T[Q]):gi(T[Q]),F,qe,ue,ce,Ce,xe,we),Q++}}else if(Q>$e)for(;Q<=ke;)Le(D[Q],ue,ce,!0),Q++;else{const Fe=Q,qe=Q,it=new Map;for(Q=qe;Q<=$e;Q++){const ge=T[Q]=we?Qi(T[Q]):gi(T[Q]);ge.key!=null&&it.set(ge.key,Q)}let Ze,xt=0;const He=$e-qe+1;let z=!1,M=0;const k=new Array(He);for(Q=0;Q<He;Q++)k[Q]=0;for(Q=Fe;Q<=ke;Q++){const ge=D[Q];if(xt>=He){Le(ge,ue,ce,!0);continue}let tt;if(ge.key!=null)tt=it.get(ge.key);else for(Ze=qe;Ze<=$e;Ze++)if(k[Ze-qe]===0&&Vn(ge,T[Ze])){tt=Ze;break}tt===void 0?Le(ge,ue,ce,!0):(k[tt-qe]=Q+1,tt>=M?M=tt:z=!0,x(ge,T[tt],F,null,ue,ce,Ce,xe,we),xt++)}const te=z?mk(k):ar;for(Ze=te.length-1,Q=He-1;Q>=0;Q--){const ge=qe+Q,tt=T[ge],Ot=T[ge+1],yt=ge+1<Re?Ot.el||Ot.placeholder:re;k[Q]===0?x(null,tt,F,yt,ue,ce,Ce,xe,we):z&&(Ze<0||Q!==te[Ze]?_e(tt,F,yt,2):Ze--)}}},_e=(D,T,F,re,ue=null)=>{const{el:ce,type:Ce,transition:xe,children:we,shapeFlag:Q}=D;if(Q&6){_e(D.component.subTree,T,F,re);return}if(Q&128){D.suspense.move(T,F,re);return}if(Q&64){Ce.move(D,T,F,X);return}if(Ce===me){i(ce,T,F);for(let ke=0;ke<we.length;ke++)_e(we[ke],T,F,re);i(D.anchor,T,F);return}if(Ce===Kl){B(D,T,F);return}if(re!==2&&Q&1&&xe)if(re===0)xe.beforeEnter(ce),i(ce,T,F),hs(()=>xe.enter(ce),ue);else{const{leave:ke,delayLeave:$e,afterLeave:Fe}=xe,qe=()=>{D.ctx.isUnmounted?n(ce):i(ce,T,F)},it=()=>{ce._isLeaving&&ce[Oi](!0),ke(ce,()=>{qe(),Fe&&Fe()})};$e?$e(ce,qe,it):it()}else i(ce,T,F)},Le=(D,T,F,re=!1,ue=!1)=>{const{type:ce,props:Ce,ref:xe,children:we,dynamicChildren:Q,shapeFlag:Re,patchFlag:ke,dirs:$e,cacheIndex:Fe}=D;if(ke===-2&&(ue=!1),xe!=null&&(Ii(),uo(xe,null,F,D,!0),Bi()),Fe!=null&&(T.renderCache[Fe]=void 0),Re&256){T.ctx.deactivate(D);return}const qe=Re&1&&$e,it=!fr(D);let Ze;if(it&&(Ze=Ce&&Ce.onVnodeBeforeUnmount)&&ci(Ze,T,D),Re&6)dt(D.component,F,re);else{if(Re&128){D.suspense.unmount(F,re);return}qe&&Sn(D,null,T,"beforeUnmount"),Re&64?D.type.remove(D,T,F,X,re):Q&&!Q.hasOnce&&(ce!==me||ke>0&&ke&64)?st(Q,T,F,!1,!0):(ce===me&&ke&384||!ue&&Re&16)&&st(we,T,F),re&&rt(D)}(it&&(Ze=Ce&&Ce.onVnodeUnmounted)||qe)&&hs(()=>{Ze&&ci(Ze,T,D),qe&&Sn(D,null,T,"unmounted")},F)},rt=D=>{const{type:T,el:F,anchor:re,transition:ue}=D;if(T===me){ct(F,re);return}if(T===Kl){G(D);return}const ce=()=>{n(F),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(D.shapeFlag&1&&ue&&!ue.persisted){const{leave:Ce,delayLeave:xe}=ue,we=()=>Ce(F,ce);xe?xe(D.el,ce,we):we()}else ce()},ct=(D,T)=>{let F;for(;D!==T;)F=h(D),n(D),D=F;n(T)},dt=(D,T,F)=>{const{bum:re,scope:ue,job:ce,subTree:Ce,um:xe,m:we,a:Q}=D;dh(we),dh(Q),re&&zl(re),ue.stop(),ce&&(ce.flags|=8,Le(Ce,D,T,F)),xe&&hs(xe,T),hs(()=>{D.isUnmounted=!0},T)},st=(D,T,F,re=!1,ue=!1,ce=0)=>{for(let Ce=ce;Ce<D.length;Ce++)Le(D[Ce],T,F,re,ue)},U=D=>{if(D.shapeFlag&6)return U(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const T=h(D.anchor||D.el),F=T&&T[gg];return F?h(F):T};let J=!1;const C=(D,T,F)=>{D==null?T._vnode&&Le(T._vnode,null,null,!0):x(T._vnode||null,D,T,null,null,null,F),T._vnode=D,J||(J=!0,Zf(),hg(),J=!1)},X={p:x,um:Le,m:_e,r:rt,mt:se,mc:V,pc:de,pbc:oe,n:U,o:s};return{render:C,hydrate:void 0,createApp:rk(C)}}function Cu({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function _n({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function pk(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Rd(s,e,t=!1){const i=s.children,n=e.children;if(We(i)&&We(n))for(let r=0;r<i.length;r++){const o=i[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=Qi(n[r]),l.el=o.el),!t&&l.patchFlag!==-2&&Rd(o,l)),l.type===qa&&l.patchFlag!==-1&&(l.el=o.el),l.type===is&&!l.el&&(l.el=o.el)}}function mk(s){const e=s.slice(),t=[0];let i,n,r,o,l;const a=s.length;for(i=0;i<a;i++){const c=s[i];if(c!==0){if(n=t[t.length-1],s[n]<c){e[i]=n,t.push(i);continue}for(r=0,o=t.length-1;r<o;)l=r+o>>1,s[t[l]]<c?r=l+1:o=l;c<s[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function Wg(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Wg(e)}function dh(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const gk=Symbol.for("v-scx"),vk=()=>Xs(gk);function Ne(s,e,t){return Kg(s,e,t)}function Kg(s,e,t=_t){const{immediate:i,deep:n,flush:r,once:o}=t,l=Kt({},t),a=e&&i||!e&&r!=="post";let c;if(Eo){if(r==="sync"){const m=vk();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!a){const m=()=>{};return m.stop=wi,m.resume=wi,m.pause=wi,m}}const u=ns;l.call=(m,y,x)=>ei(m,u,y,x);let d=!1;r==="post"?l.scheduler=m=>{hs(m,u&&u.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(m,y)=>{y?m():$d(m)}),l.augmentJob=m=>{e&&(m.flags|=4),d&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const h=V1(s,e,l);return Eo&&(c?c.push(h):a&&h()),h}function yk(s,e,t){const i=this.proxy,n=$t(s)?s.includes(".")?qg(i,s):()=>i[s]:s.bind(i,i);let r;Qe(e)?r=e:(r=e.handler,t=e);const o=Xo(this),l=Kg(n,r.bind(i),t);return o(),l}function qg(s,e){const t=e.split(".");return()=>{let i=s;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const bk=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${Ks(e)}Modifiers`]||s[`${qn(e)}Modifiers`];function kk(s,e,...t){if(s.isUnmounted)return;const i=s.vnode.props||_t;let n=t;const r=e.startsWith("update:"),o=r&&bk(i,e.slice(7));o&&(o.trim&&(n=t.map(u=>$t(u)?u.trim():u)),o.number&&(n=t.map(na)));let l,a=i[l=yu(e)]||i[l=yu(Ks(e))];!a&&r&&(a=i[l=yu(qn(e))]),a&&ei(a,s,6,n);const c=i[l+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,ei(c,s,6,n)}}const xk=new WeakMap;function Gg(s,e,t=!1){const i=t?xk:e.emitsCache,n=i.get(s);if(n!==void 0)return n;const r=s.emits;let o={},l=!1;if(!Qe(s)){const a=c=>{const u=Gg(c,e,!0);u&&(l=!0,Kt(o,u))};!t&&e.mixins.length&&e.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!r&&!l?(kt(s)&&i.set(s,null),null):(We(r)?r.forEach(a=>o[a]=null):Kt(o,r),kt(s)&&i.set(s,o),o)}function Ka(s,e){return!s||!Ia(e)?!1:(e=e.slice(2).replace(/Once$/,""),pt(s,e[0].toLowerCase()+e.slice(1))||pt(s,qn(e))||pt(s,e))}function fh(s){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:a,render:c,renderCache:u,props:d,data:h,setupState:m,ctx:y,inheritAttrs:x}=s,S=aa(s);let p,j;try{if(t.shapeFlag&4){const G=n||i,N=G;p=gi(c.call(N,G,u,d,m,h,y)),j=l}else{const G=e;p=gi(G.length>1?G(d,{attrs:l,slots:o,emit:a}):G(d,null)),j=e.props?l:wk(l)}}catch(G){fo.length=0,za(G,s,1),p=w(is)}let B=p;if(j&&x!==!1){const G=Object.keys(j),{shapeFlag:N}=B;G.length&&N&7&&(r&&G.some(Sd)&&(j=Sk(j,r)),B=fn(B,j,!1,!0))}return t.dirs&&(B=fn(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(t.dirs):t.dirs),t.transition&&Ao(B,t.transition),p=B,aa(S),p}const wk=s=>{let e;for(const t in s)(t==="class"||t==="style"||Ia(t))&&((e||(e={}))[t]=s[t]);return e},Sk=(s,e)=>{const t={};for(const i in s)(!Sd(i)||!(i.slice(9)in e))&&(t[i]=s[i]);return t};function _k(s,e,t){const{props:i,children:n,component:r}=s,{props:o,children:l,patchFlag:a}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&a>=0){if(a&1024)return!0;if(a&16)return i?hh(i,o,c):!!o;if(a&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==i[h]&&!Ka(c,h))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?hh(i,o,c):!0:!!o;return!1}function hh(s,e,t){const i=Object.keys(e);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const r=i[n];if(e[r]!==s[r]&&!Ka(t,r))return!0}return!1}function Ck({vnode:s,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=e.vnode).el=t,e=e.parent;else break}}const Jg=s=>s.__isSuspense;function Ak(s,e){e&&e.pendingBranch?We(s)?e.effects.push(...s):e.effects.push(s):$1(s)}const me=Symbol.for("v-fgt"),qa=Symbol.for("v-txt"),is=Symbol.for("v-cmt"),Kl=Symbol.for("v-stc"),fo=[];let js=null;function g(s=!1){fo.push(js=s?null:[])}function Mk(){fo.pop(),js=fo[fo.length-1]||null}let Mo=1;function fa(s,e=!1){Mo+=s,s<0&&js&&e&&(js.hasOnce=!0)}function Yg(s){return s.dynamicChildren=Mo>0?js||ar:null,Mk(),Mo>0&&js&&js.push(s),s}function v(s,e,t,i,n,r){return Yg(f(s,e,t,i,n,r,!0))}function be(s,e,t,i,n){return Yg(w(s,e,t,i,n,!0))}function Do(s){return s?s.__v_isVNode===!0:!1}function Vn(s,e){return s.type===e.type&&s.key===e.key}const Qg=({key:s})=>s??null,ql=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?$t(s)||os(s)||Qe(s)?{i:Qt,r:s,k:e,f:!!t}:s:null);function f(s,e=null,t=null,i=0,n=null,r=s===me?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&Qg(e),ref:e&&ql(e),scopeId:mg,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Qt};return l?(Id(a,t),r&128&&s.normalize(a)):t&&(a.shapeFlag|=$t(t)?8:16),Mo>0&&!o&&js&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&js.push(a),a}const w=Dk;function Dk(s,e=null,t=null,i=0,n=null,r=!1){if((!s||s===Vg)&&(s=is),Do(s)){const l=fn(s,e,!0);return t&&Id(l,t),Mo>0&&!r&&js&&(l.shapeFlag&6?js[js.indexOf(s)]=l:js.push(l)),l.patchFlag=-2,l}if(Ik(s)&&(s=s.__vccOpts),e){e=Ek(e);let{class:l,style:a}=e;l&&!$t(l)&&(e.class=Ae(l)),kt(a)&&(Pd(a)&&!We(a)&&(a=Kt({},a)),e.style=wo(a))}const o=$t(s)?1:Jg(s)?128:vg(s)?64:kt(s)?4:Qe(s)?2:0;return f(s,e,t,i,n,o,r,!0)}function Ek(s){return s?Pd(s)||Bg(s)?Kt({},s):s:null}function fn(s,e,t=!1,i=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:a}=s,c=e?Tk(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&Qg(c),ref:e&&e.ref?t&&r?We(r)?r.concat(ql(e)):[r,ql(e)]:ql(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==me?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&fn(s.ssContent),ssFallback:s.ssFallback&&fn(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&i&&Ao(u,a.clone(u)),u}function he(s=" ",e=0){return w(qa,null,s,e)}function Ga(s,e){const t=w(Kl,null,s);return t.staticCount=e,t}function I(s="",e=!1){return e?(g(),be(is,null,s)):w(is,null,s)}function gi(s){return s==null||typeof s=="boolean"?w(is):We(s)?w(me,null,s.slice()):Do(s)?Qi(s):w(qa,null,String(s))}function Qi(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:fn(s)}function Id(s,e){let t=0;const{shapeFlag:i}=s;if(e==null)e=null;else if(We(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),Id(s,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!Bg(e)?e._ctx=Qt:n===3&&Qt&&(Qt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Qe(e)?(e={default:e,_ctx:Qt},t=32):(e=String(e),i&64?(t=16,e=[he(e)]):t=8);s.children=e,s.shapeFlag|=t}function Tk(...s){const e={};for(let t=0;t<s.length;t++){const i=s[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Ae([e.class,i.class]));else if(n==="style")e.style=wo([e.style,i.style]);else if(Ia(n)){const r=e[n],o=i[n];o&&r!==o&&!(We(r)&&r.includes(o))&&(e[n]=r?[].concat(r,o):o)}else n!==""&&(e[n]=i[n])}return e}function ci(s,e,t,i=null){ei(s,e,7,[t,i])}const Vk=Lg();let Ok=0;function Pk(s,e,t){const i=s.type,n=(e?e.appContext:s.appContext)||Vk,r={uid:Ok++,vnode:s,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ug(i,n),emitsOptions:Gg(i,n),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:i.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=kk.bind(null,r),s.ce&&s.ce(r),r}let ns=null;const Bd=()=>ns||Qt;let ha,bc;{const s=Ua(),e=(t,i)=>{let n;return(n=s[t])||(n=s[t]=[]),n.push(i),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};ha=e("__VUE_INSTANCE_SETTERS__",t=>ns=t),bc=e("__VUE_SSR_SETTERS__",t=>Eo=t)}const Xo=s=>{const e=ns;return ha(s),s.scope.on(),()=>{s.scope.off(),ha(e)}},ph=()=>{ns&&ns.scope.off(),ha(null)};function Xg(s){return s.vnode.shapeFlag&4}let Eo=!1;function $k(s,e=!1,t=!1){e&&bc(e);const{props:i,children:n}=s.vnode,r=Xg(s);ok(s,i,r,e),ck(s,n,t||e);const o=r?jk(s,e):void 0;return e&&bc(!1),o}function jk(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,Y1);const{setup:i}=t;if(i){Ii();const n=s.setupContext=i.length>1?e0(s):null,r=Xo(s),o=Qo(i,s,0,[s.props,n]),l=Um(o);if(Bi(),r(),(l||s.sp)&&!fr(s)&&Mg(s),l){if(o.then(ph,ph),e)return o.then(a=>{mh(s,a)}).catch(a=>{za(a,s,0)});s.asyncDep=o}else mh(s,o)}else Zg(s)}function mh(s,e,t){Qe(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:kt(e)&&(s.setupState=cg(e)),Zg(s)}function Zg(s,e,t){const i=s.type;s.render||(s.render=i.render||wi);{const n=Xo(s);Ii();try{Z1(s)}finally{Bi(),n()}}}const Lk={get(s,e){return ss(s,"get",""),s[e]}};function e0(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Lk),slots:s.slots,emit:s.emit,expose:e}}function Ja(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(cg(_1(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in co)return co[t](s)},has(e,t){return t in e||t in co}})):s.proxy}function Rk(s,e=!0){return Qe(s)?s.displayName||s.name:s.name||e&&s.__name}function Ik(s){return Qe(s)&&"__vccOpts"in s}const W=(s,e)=>E1(s,e,Eo);function Rt(s,e,t){try{fa(-1);const i=arguments.length;return i===2?kt(e)&&!We(e)?Do(e)?w(s,null,[e]):w(s,e):w(s,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Do(t)&&(t=[t]),w(s,e,t))}finally{fa(1)}}const Bk="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kc;const gh=typeof window<"u"&&window.trustedTypes;if(gh)try{kc=gh.createPolicy("vue",{createHTML:s=>s})}catch{}const t0=kc?s=>kc.createHTML(s):s=>s,Nk="http://www.w3.org/2000/svg",Uk="http://www.w3.org/1998/Math/MathML",Vi=typeof document<"u"?document:null,vh=Vi&&Vi.createElement("template"),Fk={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,i)=>{const n=e==="svg"?Vi.createElementNS(Nk,s):e==="mathml"?Vi.createElementNS(Uk,s):t?Vi.createElement(s,{is:t}):Vi.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>Vi.createTextNode(s),createComment:s=>Vi.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Vi.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,i,n,r){const o=t?t.previousSibling:e.lastChild;if(n&&(n===r||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===r||!(n=n.nextSibling)););else{vh.innerHTML=t0(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const l=vh.content;if(i==="svg"||i==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Gi="transition",Wr="animation",To=Symbol("_vtc"),s0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},zk=Kt({},xg,s0),Hk=s=>(s.displayName="Transition",s.props=zk,s),Nd=Hk((s,{slots:e})=>Rt(I1,Wk(s),e)),Cn=(s,e=[])=>{We(s)?s.forEach(t=>t(...e)):s&&s(...e)},yh=s=>s?We(s)?s.some(e=>e.length>1):s.length>1:!1;function Wk(s){const e={};for(const R in s)R in s0||(e[R]=s[R]);if(s.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:a=r,appearActiveClass:c=o,appearToClass:u=l,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=s,y=Kk(n),x=y&&y[0],S=y&&y[1],{onBeforeEnter:p,onEnter:j,onEnterCancelled:B,onLeave:G,onLeaveCancelled:N,onBeforeAppear:O=p,onAppear:_=j,onAppearCancelled:V=B}=e,K=(R,le,se,$)=>{R._enterCancelled=$,An(R,le?u:l),An(R,le?c:o),se&&se()},oe=(R,le)=>{R._isLeaving=!1,An(R,d),An(R,m),An(R,h),le&&le()},ne=R=>(le,se)=>{const $=R?_:j,q=()=>K(le,R,se);Cn($,[le,q]),bh(()=>{An(le,R?a:r),Di(le,R?u:l),yh($)||kh(le,i,x,q)})};return Kt(e,{onBeforeEnter(R){Cn(p,[R]),Di(R,r),Di(R,o)},onBeforeAppear(R){Cn(O,[R]),Di(R,a),Di(R,c)},onEnter:ne(!1),onAppear:ne(!0),onLeave(R,le){R._isLeaving=!0;const se=()=>oe(R,le);Di(R,d),R._enterCancelled?(Di(R,h),Sh(R)):(Sh(R),Di(R,h)),bh(()=>{R._isLeaving&&(An(R,d),Di(R,m),yh(G)||kh(R,i,S,se))}),Cn(G,[R,se])},onEnterCancelled(R){K(R,!1,void 0,!0),Cn(B,[R])},onAppearCancelled(R){K(R,!0,void 0,!0),Cn(V,[R])},onLeaveCancelled(R){oe(R),Cn(N,[R])}})}function Kk(s){if(s==null)return null;if(kt(s))return[Au(s.enter),Au(s.leave)];{const e=Au(s);return[e,e]}}function Au(s){return Yb(s)}function Di(s,e){e.split(/\s+/).forEach(t=>t&&s.classList.add(t)),(s[To]||(s[To]=new Set)).add(e)}function An(s,e){e.split(/\s+/).forEach(i=>i&&s.classList.remove(i));const t=s[To];t&&(t.delete(e),t.size||(s[To]=void 0))}function bh(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let qk=0;function kh(s,e,t,i){const n=s._endId=++qk,r=()=>{n===s._endId&&i()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:l,propCount:a}=Gk(s,e);if(!o)return i();const c=o+"end";let u=0;const d=()=>{s.removeEventListener(c,h),r()},h=m=>{m.target===s&&++u>=a&&d()};setTimeout(()=>{u<a&&d()},l+1),s.addEventListener(c,h)}function Gk(s,e){const t=window.getComputedStyle(s),i=y=>(t[y]||"").split(", "),n=i(`${Gi}Delay`),r=i(`${Gi}Duration`),o=xh(n,r),l=i(`${Wr}Delay`),a=i(`${Wr}Duration`),c=xh(l,a);let u=null,d=0,h=0;e===Gi?o>0&&(u=Gi,d=o,h=r.length):e===Wr?c>0&&(u=Wr,d=c,h=a.length):(d=Math.max(o,c),u=d>0?o>c?Gi:Wr:null,h=u?u===Gi?r.length:a.length:0);const m=u===Gi&&/\b(?:transform|all)(?:,|$)/.test(i(`${Gi}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:m}}function xh(s,e){for(;s.length<e.length;)s=s.concat(s);return Math.max(...e.map((t,i)=>wh(t)+wh(s[i])))}function wh(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function Sh(s){return(s?s.ownerDocument:document).body.offsetHeight}function Jk(s,e,t){const i=s[To];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const pa=Symbol("_vod"),i0=Symbol("_vsh"),mt={name:"show",beforeMount(s,{value:e},{transition:t}){s[pa]=s.style.display==="none"?"":s.style.display,t&&e?t.beforeEnter(s):Kr(s,e)},mounted(s,{value:e},{transition:t}){t&&e&&t.enter(s)},updated(s,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(s),Kr(s,!0),i.enter(s)):i.leave(s,()=>{Kr(s,!1)}):Kr(s,e))},beforeUnmount(s,{value:e}){Kr(s,e)}};function Kr(s,e){s.style.display=e?s[pa]:"none",s[i0]=!e}const Yk=Symbol(""),Qk=/(?:^|;)\s*display\s*:/;function Xk(s,e,t){const i=s.style,n=$t(t);let r=!1;if(t&&!n){if(e)if($t(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();t[l]==null&&Gl(i,l,"")}else for(const o in e)t[o]==null&&Gl(i,o,"");for(const o in t)o==="display"&&(r=!0),Gl(i,o,t[o])}else if(n){if(e!==t){const o=i[Yk];o&&(t+=";"+o),i.cssText=t,r=Qk.test(t)}}else e&&s.removeAttribute("style");pa in s&&(s[pa]=r?i.display:"",s[i0]&&(i.display="none"))}const _h=/\s*!important$/;function Gl(s,e,t){if(We(t))t.forEach(i=>Gl(s,e,i));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const i=Zk(s,e);_h.test(t)?s.setProperty(qn(i),t.replace(_h,""),"important"):s[i]=t}}const Ch=["Webkit","Moz","ms"],Mu={};function Zk(s,e){const t=Mu[e];if(t)return t;let i=Ks(e);if(i!=="filter"&&i in s)return Mu[e]=i;i=Na(i);for(let n=0;n<Ch.length;n++){const r=Ch[n]+i;if(r in s)return Mu[e]=r}return e}const Ah="http://www.w3.org/1999/xlink";function Mh(s,e,t,i,n,r=s1(e)){i&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(Ah,e.slice(6,e.length)):s.setAttributeNS(Ah,e,t):t==null||r&&!Wm(t)?s.removeAttribute(e):s.setAttribute(e,r?"":Zs(t)?String(t):t)}function Dh(s,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?t0(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?s.getAttribute("value")||"":s.value,a=t==null?s.type==="checkbox"?"on":"":String(t);(l!==a||!("_value"in s))&&(s.value=a),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const l=typeof s[e];l==="boolean"?t=Wm(t):t==null&&l==="string"?(t="",o=!0):l==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(n||e)}function ji(s,e,t,i){s.addEventListener(e,t,i)}function ex(s,e,t,i){s.removeEventListener(e,t,i)}const Eh=Symbol("_vei");function tx(s,e,t,i,n=null){const r=s[Eh]||(s[Eh]={}),o=r[e];if(i&&o)o.value=i;else{const[l,a]=sx(e);if(i){const c=r[e]=rx(i,n);ji(s,l,c,a)}else o&&(ex(s,l,o,a),r[e]=void 0)}}const Th=/(?:Once|Passive|Capture)$/;function sx(s){let e;if(Th.test(s)){e={};let i;for(;i=s.match(Th);)s=s.slice(0,s.length-i[0].length),e[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):qn(s.slice(2)),e]}let Du=0;const ix=Promise.resolve(),nx=()=>Du||(ix.then(()=>Du=0),Du=Date.now());function rx(s,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;ei(ox(i,t.value),e,5,[i])};return t.value=s,t.attached=nx(),t}function ox(s,e){if(We(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const Vh=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,lx=(s,e,t,i,n,r)=>{const o=n==="svg";e==="class"?Jk(s,i,o):e==="style"?Xk(s,t,i):Ia(e)?Sd(e)||tx(s,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ax(s,e,i,o))?(Dh(s,e,i),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Mh(s,e,i,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!$t(i))?Dh(s,Ks(e),i,r,e):(e==="true-value"?s._trueValue=i:e==="false-value"&&(s._falseValue=i),Mh(s,e,i,o))};function ax(s,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in s&&Vh(e)&&Qe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Vh(e)&&$t(t)?!1:e in s}const hn=s=>{const e=s.props["onUpdate:modelValue"]||!1;return We(e)?t=>zl(e,t):e};function ux(s){s.target.composing=!0}function Oh(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const zs=Symbol("_assign"),kr={created(s,{modifiers:{lazy:e,trim:t,number:i}},n){s[zs]=hn(n);const r=i||n.props&&n.props.type==="number";ji(s,e?"change":"input",o=>{if(o.target.composing)return;let l=s.value;t&&(l=l.trim()),r&&(l=na(l)),s[zs](l)}),t&&ji(s,"change",()=>{s.value=s.value.trim()}),e||(ji(s,"compositionstart",ux),ji(s,"compositionend",Oh),ji(s,"change",Oh))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:i,trim:n,number:r}},o){if(s[zs]=hn(o),s.composing)return;const l=(r||s.type==="number")&&!/^0\d/.test(s.value)?na(s.value):s.value,a=e??"";l!==a&&(document.activeElement===s&&s.type!=="range"&&(i&&e===t||n&&s.value.trim()===a)||(s.value=a))}},cx={deep:!0,created(s,e,t){s[zs]=hn(t),ji(s,"change",()=>{const i=s._modelValue,n=xr(s),r=s.checked,o=s[zs];if(We(i)){const l=Ad(i,n),a=l!==-1;if(r&&!a)o(i.concat(n));else if(!r&&a){const c=[...i];c.splice(l,1),o(c)}}else if(Or(i)){const l=new Set(i);r?l.add(n):l.delete(n),o(l)}else o(r0(s,r))})},mounted:Ph,beforeUpdate(s,e,t){s[zs]=hn(t),Ph(s,e,t)}};function Ph(s,{value:e,oldValue:t},i){s._modelValue=e;let n;if(We(e))n=Ad(e,i.props.value)>-1;else if(Or(e))n=e.has(i.props.value);else{if(e===t)return;n=Nn(e,r0(s,!0))}s.checked!==n&&(s.checked=n)}const xc={created(s,{value:e},t){s.checked=Nn(e,t.props.value),s[zs]=hn(t),ji(s,"change",()=>{s[zs](xr(s))})},beforeUpdate(s,{value:e,oldValue:t},i){s[zs]=hn(i),e!==t&&(s.checked=Nn(e,i.props.value))}},n0={deep:!0,created(s,{value:e,modifiers:{number:t}},i){const n=Or(e);ji(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>t?na(xr(o)):xr(o));s[zs](s.multiple?n?new Set(r):r:r[0]),s._assigning=!0,Qs(()=>{s._assigning=!1})}),s[zs]=hn(i)},mounted(s,{value:e}){$h(s,e)},beforeUpdate(s,e,t){s[zs]=hn(t)},updated(s,{value:e}){s._assigning||$h(s,e)}};function $h(s,e){const t=s.multiple,i=We(e);if(!(t&&!i&&!Or(e))){for(let n=0,r=s.options.length;n<r;n++){const o=s.options[n],l=xr(o);if(t)if(i){const a=typeof l;a==="string"||a==="number"?o.selected=e.some(c=>String(c)===String(l)):o.selected=Ad(e,l)>-1}else o.selected=e.has(l);else if(Nn(xr(o),e)){s.selectedIndex!==n&&(s.selectedIndex=n);return}}!t&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function xr(s){return"_value"in s?s._value:s.value}function r0(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const dx={created(s,e,t){yl(s,e,t,null,"created")},mounted(s,e,t){yl(s,e,t,null,"mounted")},beforeUpdate(s,e,t,i){yl(s,e,t,i,"beforeUpdate")},updated(s,e,t,i){yl(s,e,t,i,"updated")}};function fx(s,e){switch(s){case"SELECT":return n0;case"TEXTAREA":return kr;default:switch(e){case"checkbox":return cx;case"radio":return xc;default:return kr}}}function yl(s,e,t,i,n){const o=fx(s.tagName,t.props&&t.props.type)[n];o&&o(s,e,t,i)}const hx=["ctrl","shift","alt","meta"],px={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>hx.some(t=>s[`${t}Key`]&&!e.includes(t))},Ht=(s,e)=>{const t=s._withMods||(s._withMods={}),i=e.join(".");return t[i]||(t[i]=((n,...r)=>{for(let o=0;o<e.length;o++){const l=px[e[o]];if(l&&l(n,e))return}return s(n,...r)}))},mx=Kt({patchProp:lx},Fk);let jh;function gx(){return jh||(jh=fk(mx))}const vx=((...s)=>{const e=gx().createApp(...s),{mount:t}=e;return e.mount=i=>{const n=bx(i);if(!n)return;const r=e._component;!Qe(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=t(n,!1,yx(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e});function yx(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function bx(s){return $t(s)?document.querySelector(s):s}const kx="/framework-logo.png";/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const tr=typeof document<"u";function o0(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function xx(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&o0(s.default)}const ht=Object.assign;function Eu(s,e){const t={};for(const i in e){const n=e[i];t[i]=ti(n)?n.map(s):s(n)}return t}const ho=()=>{},ti=Array.isArray;function Lh(s,e){const t={};for(const i in s)t[i]=i in e?e[i]:s[i];return t}const l0=/#/g,wx=/&/g,Sx=/\//g,_x=/=/g,Cx=/\?/g,a0=/\+/g,Ax=/%5B/g,Mx=/%5D/g,u0=/%5E/g,Dx=/%60/g,c0=/%7B/g,Ex=/%7C/g,d0=/%7D/g,Tx=/%20/g;function Ud(s){return s==null?"":encodeURI(""+s).replace(Ex,"|").replace(Ax,"[").replace(Mx,"]")}function Vx(s){return Ud(s).replace(c0,"{").replace(d0,"}").replace(u0,"^")}function wc(s){return Ud(s).replace(a0,"%2B").replace(Tx,"+").replace(l0,"%23").replace(wx,"%26").replace(Dx,"`").replace(c0,"{").replace(d0,"}").replace(u0,"^")}function Ox(s){return wc(s).replace(_x,"%3D")}function Px(s){return Ud(s).replace(l0,"%23").replace(Cx,"%3F")}function $x(s){return Px(s).replace(Sx,"%2F")}function Vo(s){if(s==null)return null;try{return decodeURIComponent(""+s)}catch{}return""+s}const jx=/\/$/,Lx=s=>s.replace(jx,"");function Tu(s,e,t="/"){let i,n={},r="",o="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(i=e.slice(0,a),r=e.slice(a,l>0?l:e.length),n=s(r.slice(1))),l>=0&&(i=i||e.slice(0,l),o=e.slice(l,e.length)),i=Nx(i??e,t),{fullPath:i+r+o,path:i,query:n,hash:Vo(o)}}function Rx(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Rh(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function Ix(s,e,t){const i=e.matched.length-1,n=t.matched.length-1;return i>-1&&i===n&&wr(e.matched[i],t.matched[n])&&f0(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function wr(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function f0(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!Bx(s[t],e[t]))return!1;return!0}function Bx(s,e){return ti(s)?Ih(s,e):ti(e)?Ih(e,s):s===e}function Ih(s,e){return ti(e)?s.length===e.length&&s.every((t,i)=>t===e[i]):s.length===1&&s[0]===e}function Nx(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),i=s.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let r=t.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Ji={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Sc=(function(s){return s.pop="pop",s.push="push",s})({}),Vu=(function(s){return s.back="back",s.forward="forward",s.unknown="",s})({});function Ux(s){if(!s)if(tr){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),Lx(s)}const Fx=/^[^#]+#/;function zx(s,e){return s.replace(Fx,"#")+e}function Hx(s,e){const t=document.documentElement.getBoundingClientRect(),i=s.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const Ya=()=>({left:window.scrollX,top:window.scrollY});function Wx(s){let e;if("el"in s){const t=s.el,i=typeof t=="string"&&t.startsWith("#"),n=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!n)return;e=Hx(n,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Bh(s,e){return(history.state?history.state.position-e:-1)+s}const _c=new Map;function Kx(s,e){_c.set(s,e)}function qx(s){const e=_c.get(s);return _c.delete(s),e}function Gx(s){return typeof s=="string"||s&&typeof s=="object"}function h0(s){return typeof s=="string"||typeof s=="symbol"}let jt=(function(s){return s[s.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",s[s.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",s[s.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",s[s.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",s[s.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",s})({});const p0=Symbol("");jt.MATCHER_NOT_FOUND+"",jt.NAVIGATION_GUARD_REDIRECT+"",jt.NAVIGATION_ABORTED+"",jt.NAVIGATION_CANCELLED+"",jt.NAVIGATION_DUPLICATED+"";function Sr(s,e){return ht(new Error,{type:s,[p0]:!0},e)}function Ei(s,e){return s instanceof Error&&p0 in s&&(e==null||!!(s.type&e))}const Jx=["params","query","hash"];function Yx(s){if(typeof s=="string")return s;if(s.path!=null)return s.path;const e={};for(const t of Jx)t in s&&(e[t]=s[t]);return JSON.stringify(e,null,2)}function Qx(s){const e={};if(s===""||s==="?")return e;const t=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<t.length;++i){const n=t[i].replace(a0," "),r=n.indexOf("="),o=Vo(r<0?n:n.slice(0,r)),l=r<0?null:Vo(n.slice(r+1));if(o in e){let a=e[o];ti(a)||(a=e[o]=[a]),a.push(l)}else e[o]=l}return e}function Nh(s){let e="";for(let t in s){const i=s[t];if(t=Ox(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(ti(i)?i.map(n=>n&&wc(n)):[i&&wc(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+t,n!=null&&(e+="="+n))})}return e}function Xx(s){const e={};for(const t in s){const i=s[t];i!==void 0&&(e[t]=ti(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const Zx=Symbol(""),Uh=Symbol(""),Qa=Symbol(""),Fd=Symbol(""),Cc=Symbol("");function qr(){let s=[];function e(i){return s.push(i),()=>{const n=s.indexOf(i);n>-1&&s.splice(n,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function Xi(s,e,t,i,n,r=o=>o()){const o=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const c=h=>{h===!1?a(Sr(jt.NAVIGATION_ABORTED,{from:t,to:e})):h instanceof Error?a(h):Gx(h)?a(Sr(jt.NAVIGATION_GUARD_REDIRECT,{from:e,to:h})):(o&&i.enterCallbacks[n]===o&&typeof h=="function"&&o.push(h),l())},u=r(()=>s.call(i&&i.instances[n],e,t,c));let d=Promise.resolve(u);s.length<3&&(d=d.then(c)),d.catch(h=>a(h))})}function Ou(s,e,t,i,n=r=>r()){const r=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(o0(a)){const c=(a.__vccOpts||a)[e];c&&r.push(Xi(c,t,i,o,l,n))}else{let c=a();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=xx(u)?u.default:u;o.mods[l]=u,o.components[l]=d;const h=(d.__vccOpts||d)[e];return h&&Xi(h,t,i,o,l,n)()}))}}return r}function ew(s,e){const t=[],i=[],n=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const l=e.matched[o];l&&(s.matched.find(c=>wr(c,l))?i.push(l):t.push(l));const a=s.matched[o];a&&(e.matched.find(c=>wr(c,a))||n.push(a))}return[t,i,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let tw=()=>location.protocol+"//"+location.host;function m0(s,e){const{pathname:t,search:i,hash:n}=e,r=s.indexOf("#");if(r>-1){let o=n.includes(s.slice(r))?s.slice(r).length:1,l=n.slice(o);return l[0]!=="/"&&(l="/"+l),Rh(l,"")}return Rh(t,s)+i+n}function sw(s,e,t,i){let n=[],r=[],o=null;const l=({state:h})=>{const m=m0(s,location),y=t.value,x=e.value;let S=0;if(h){if(t.value=m,e.value=h,o&&o===y){o=null;return}S=x?h.position-x.position:0}else i(m);n.forEach(p=>{p(t.value,y,{delta:S,type:Sc.pop,direction:S?S>0?Vu.forward:Vu.back:Vu.unknown})})};function a(){o=t.value}function c(h){n.push(h);const m=()=>{const y=n.indexOf(h);y>-1&&n.splice(y,1)};return r.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:h}=window;if(!h.state)return;h.replaceState(ht({},h.state,{scroll:Ya()}),"")}}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:a,listen:c,destroy:d}}function Fh(s,e,t,i=!1,n=!1){return{back:s,current:e,forward:t,replaced:i,position:window.history.length,scroll:n?Ya():null}}function iw(s){const{history:e,location:t}=window,i={value:m0(s,t)},n={value:e.state};n.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(a,c,u){const d=s.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?s:s.slice(d))+a:tw()+s+a;try{e[u?"replaceState":"pushState"](c,"",h),n.value=c}catch(m){console.error(m),t[u?"replace":"assign"](h)}}function o(a,c){r(a,ht({},e.state,Fh(n.value.back,a,n.value.forward,!0),c,{position:n.value.position}),!0),i.value=a}function l(a,c){const u=ht({},n.value,e.state,{forward:a,scroll:Ya()});r(u.current,u,!0),r(a,ht({},Fh(i.value,a,null),{position:u.position+1},c),!1),i.value=a}return{location:i,state:n,push:l,replace:o}}function nw(s){s=Ux(s);const e=iw(s),t=sw(s,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const n=ht({location:"",base:s,go:i,createHref:zx.bind(null,s)},e,t);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function rw(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),nw(s)}let $n=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.Group=2]="Group",s})({});var Nt=(function(s){return s[s.Static=0]="Static",s[s.Param=1]="Param",s[s.ParamRegExp=2]="ParamRegExp",s[s.ParamRegExpEnd=3]="ParamRegExpEnd",s[s.EscapeNext=4]="EscapeNext",s})(Nt||{});const ow={type:$n.Static,value:""},lw=/[a-zA-Z0-9_]/;function aw(s){if(!s)return[[]];if(s==="/")return[[ow]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(m){throw new Error(`ERR (${t})/"${c}": ${m}`)}let t=Nt.Static,i=t;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,a,c="",u="";function d(){c&&(t===Nt.Static?r.push({type:$n.Static,value:c}):t===Nt.Param||t===Nt.ParamRegExp||t===Nt.ParamRegExpEnd?(r.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:$n.Param,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&t!==Nt.ParamRegExp){i=t,t=Nt.EscapeNext;continue}switch(t){case Nt.Static:a==="/"?(c&&d(),o()):a===":"?(d(),t=Nt.Param):h();break;case Nt.EscapeNext:h(),t=i;break;case Nt.Param:a==="("?t=Nt.ParamRegExp:lw.test(a)?h():(d(),t=Nt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case Nt.ParamRegExp:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:t=Nt.ParamRegExpEnd:u+=a;break;case Nt.ParamRegExpEnd:d(),t=Nt.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:e("Unknown state");break}}return t===Nt.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}const zh="[^/]+?",uw={sensitive:!1,strict:!1,start:!0,end:!0};var ps=(function(s){return s[s._multiplier=10]="_multiplier",s[s.Root=90]="Root",s[s.Segment=40]="Segment",s[s.SubSegment=30]="SubSegment",s[s.Static=40]="Static",s[s.Dynamic=20]="Dynamic",s[s.BonusCustomRegExp=10]="BonusCustomRegExp",s[s.BonusWildcard=-50]="BonusWildcard",s[s.BonusRepeatable=-20]="BonusRepeatable",s[s.BonusOptional=-8]="BonusOptional",s[s.BonusStrict=.7000000000000001]="BonusStrict",s[s.BonusCaseSensitive=.25]="BonusCaseSensitive",s})(ps||{});const cw=/[.+*?^${}()[\]/\\]/g;function dw(s,e){const t=ht({},uw,e),i=[];let n=t.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[ps.Root];t.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const h=c[d];let m=ps.Segment+(t.sensitive?ps.BonusCaseSensitive:0);if(h.type===$n.Static)d||(n+="/"),n+=h.value.replace(cw,"\\$&"),m+=ps.Static;else if(h.type===$n.Param){const{value:y,repeatable:x,optional:S,regexp:p}=h;r.push({name:y,repeatable:x,optional:S});const j=p||zh;if(j!==zh){m+=ps.BonusCustomRegExp;try{`${j}`}catch(G){throw new Error(`Invalid custom RegExp for param "${y}" (${j}): `+G.message)}}let B=x?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;d||(B=S&&c.length<2?`(?:/${B})`:"/"+B),S&&(B+="?"),n+=B,m+=ps.Dynamic,S&&(m+=ps.BonusOptional),x&&(m+=ps.BonusRepeatable),j===".*"&&(m+=ps.BonusWildcard)}u.push(m)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=ps.BonusStrict}t.strict||(n+="/?"),t.end?n+="$":t.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,t.sensitive?"":"i");function l(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const m=u[h]||"",y=r[h-1];d[y.name]=m&&y.repeatable?m.split("/"):m}return d}function a(c){let u="",d=!1;for(const h of s){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const m of h)if(m.type===$n.Static)u+=m.value;else if(m.type===$n.Param){const{value:y,repeatable:x,optional:S}=m,p=y in c?c[y]:"";if(ti(p)&&!x)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const j=ti(p)?p.join("/"):p;if(!j)if(S)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${y}"`);u+=j}}return u||"/"}return{re:o,score:i,keys:r,parse:l,stringify:a}}function fw(s,e){let t=0;for(;t<s.length&&t<e.length;){const i=e[t]-s[t];if(i)return i;t++}return s.length<e.length?s.length===1&&s[0]===ps.Static+ps.Segment?-1:1:s.length>e.length?e.length===1&&e[0]===ps.Static+ps.Segment?1:-1:0}function g0(s,e){let t=0;const i=s.score,n=e.score;for(;t<i.length&&t<n.length;){const r=fw(i[t],n[t]);if(r)return r;t++}if(Math.abs(n.length-i.length)===1){if(Hh(i))return 1;if(Hh(n))return-1}return n.length-i.length}function Hh(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const hw={strict:!1,end:!0,sensitive:!1};function pw(s,e,t){const i=dw(aw(s.path),t),n=ht(i,{record:s,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function mw(s,e){const t=[],i=new Map;e=Lh(hw,e);function n(d){return i.get(d)}function r(d,h,m){const y=!m,x=Kh(d);x.aliasOf=m&&m.record;const S=Lh(e,d),p=[x];if("alias"in d){const G=typeof d.alias=="string"?[d.alias]:d.alias;for(const N of G)p.push(Kh(ht({},x,{components:m?m.record.components:x.components,path:N,aliasOf:m?m.record:x})))}let j,B;for(const G of p){const{path:N}=G;if(h&&N[0]!=="/"){const O=h.record.path,_=O[O.length-1]==="/"?"":"/";G.path=h.record.path+(N&&_+N)}if(j=pw(G,h,S),m?m.alias.push(j):(B=B||j,B!==j&&B.alias.push(j),y&&d.name&&!qh(j)&&o(d.name)),v0(j)&&a(j),x.children){const O=x.children;for(let _=0;_<O.length;_++)r(O[_],j,m&&m.children[_])}m=m||j}return B?()=>{o(B)}:ho}function o(d){if(h0(d)){const h=i.get(d);h&&(i.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return t}function a(d){const h=yw(d,t);t.splice(h,0,d),d.record.name&&!qh(d)&&i.set(d.record.name,d)}function c(d,h){let m,y={},x,S;if("name"in d&&d.name){if(m=i.get(d.name),!m)throw Sr(jt.MATCHER_NOT_FOUND,{location:d});S=m.record.name,y=ht(Wh(h.params,m.keys.filter(B=>!B.optional).concat(m.parent?m.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),d.params&&Wh(d.params,m.keys.map(B=>B.name))),x=m.stringify(y)}else if(d.path!=null)x=d.path,m=t.find(B=>B.re.test(x)),m&&(y=m.parse(x),S=m.record.name);else{if(m=h.name?i.get(h.name):t.find(B=>B.re.test(h.path)),!m)throw Sr(jt.MATCHER_NOT_FOUND,{location:d,currentLocation:h});S=m.record.name,y=ht({},h.params,d.params),x=m.stringify(y)}const p=[];let j=m;for(;j;)p.unshift(j.record),j=j.parent;return{name:S,path:x,params:y,matched:p,meta:vw(p)}}s.forEach(d=>r(d));function u(){t.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function Wh(s,e){const t={};for(const i of e)i in s&&(t[i]=s[i]);return t}function Kh(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:gw(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function gw(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const i in s.components)e[i]=typeof t=="object"?t[i]:t;return e}function qh(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function vw(s){return s.reduce((e,t)=>ht(e,t.meta),{})}function yw(s,e){let t=0,i=e.length;for(;t!==i;){const r=t+i>>1;g0(s,e[r])<0?i=r:t=r+1}const n=bw(s);return n&&(i=e.lastIndexOf(n,i-1)),i}function bw(s){let e=s;for(;e=e.parent;)if(v0(e)&&g0(s,e)===0)return e}function v0({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function Gh(s){const e=Xs(Qa),t=Xs(Fd),i=W(()=>{const a=vt(s.to);return e.resolve(a)}),n=W(()=>{const{matched:a}=i.value,{length:c}=a,u=a[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(wr.bind(null,u));if(h>-1)return h;const m=Jh(a[c-2]);return c>1&&Jh(u)===m&&d[d.length-1].path!==m?d.findIndex(wr.bind(null,a[c-2])):h}),r=W(()=>n.value>-1&&_w(t.params,i.value.params)),o=W(()=>n.value>-1&&n.value===t.matched.length-1&&f0(t.params,i.value.params));function l(a={}){if(Sw(a)){const c=e[vt(s.replace)?"replace":"push"](vt(s.to)).catch(ho);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:W(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}function kw(s){return s.length===1?s[0]:s}const xw=Ag({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Gh,setup(s,{slots:e}){const t=Is(Gh(s)),{options:i}=Xs(Qa),n=W(()=>({[Yh(s.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Yh(s.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&kw(e.default(t));return s.custom?r:Rt("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:n.value},r)}}}),ww=xw;function Sw(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function _w(s,e){for(const t in e){const i=e[t],n=s[t];if(typeof i=="string"){if(i!==n)return!1}else if(!ti(n)||n.length!==i.length||i.some((r,o)=>r!==n[o]))return!1}return!0}function Jh(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Yh=(s,e,t)=>s??e??t,Cw=Ag({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const i=Xs(Cc),n=W(()=>s.route||i.value),r=Xs(Uh,0),o=W(()=>{let c=vt(r);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),l=W(()=>n.value.matched[o.value]);Wl(Uh,W(()=>o.value+1)),Wl(Zx,l),Wl(Cc,n);const a=ie();return Ne(()=>[a.value,l.value,s.name],([c,u,d],[h,m,y])=>{u&&(u.instances[d]=c,m&&m!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!wr(u,m)||!h)&&(u.enterCallbacks[d]||[]).forEach(x=>x(c))},{flush:"post"}),()=>{const c=n.value,u=s.name,d=l.value,h=d&&d.components[u];if(!h)return Qh(t.default,{Component:h,route:c});const m=d.props[u],y=m?m===!0?c.params:typeof m=="function"?m(c):m:null,S=Rt(h,ht({},y,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(d.instances[u]=null)},ref:a}));return Qh(t.default,{Component:S,route:c})||S}}});function Qh(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const Aw=Cw;function Mw(s){const e=mw(s.routes,s),t=s.parseQuery||Qx,i=s.stringifyQuery||Nh,n=s.history,r=qr(),o=qr(),l=qr(),a=C1(Ji);let c=Ji;tr&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Eu.bind(null,U=>""+U),d=Eu.bind(null,$x),h=Eu.bind(null,Vo);function m(U,J){let C,X;return h0(U)?(C=e.getRecordMatcher(U),X=J):X=U,e.addRoute(X,C)}function y(U){const J=e.getRecordMatcher(U);J&&e.removeRoute(J)}function x(){return e.getRoutes().map(U=>U.record)}function S(U){return!!e.getRecordMatcher(U)}function p(U,J){if(J=ht({},J||a.value),typeof U=="string"){const F=Tu(t,U,J.path),re=e.resolve({path:F.path},J),ue=n.createHref(F.fullPath);return ht(F,re,{params:h(re.params),hash:Vo(F.hash),redirectedFrom:void 0,href:ue})}let C;if(U.path!=null)C=ht({},U,{path:Tu(t,U.path,J.path).path});else{const F=ht({},U.params);for(const re in F)F[re]==null&&delete F[re];C=ht({},U,{params:d(F)}),J.params=d(J.params)}const X=e.resolve(C,J),Oe=U.hash||"";X.params=u(h(X.params));const D=Rx(i,ht({},U,{hash:Vx(Oe),path:X.path})),T=n.createHref(D);return ht({fullPath:D,hash:Oe,query:i===Nh?Xx(U.query):U.query||{}},X,{redirectedFrom:void 0,href:T})}function j(U){return typeof U=="string"?Tu(t,U,a.value.path):ht({},U)}function B(U,J){if(c!==U)return Sr(jt.NAVIGATION_CANCELLED,{from:J,to:U})}function G(U){return _(U)}function N(U){return G(ht(j(U),{replace:!0}))}function O(U,J){const C=U.matched[U.matched.length-1];if(C&&C.redirect){const{redirect:X}=C;let Oe=typeof X=="function"?X(U,J):X;return typeof Oe=="string"&&(Oe=Oe.includes("?")||Oe.includes("#")?Oe=j(Oe):{path:Oe},Oe.params={}),ht({query:U.query,hash:U.hash,params:Oe.path!=null?{}:U.params},Oe)}}function _(U,J){const C=c=p(U),X=a.value,Oe=U.state,D=U.force,T=U.replace===!0,F=O(C,X);if(F)return _(ht(j(F),{state:typeof F=="object"?ht({},Oe,F.state):Oe,force:D,replace:T}),J||C);const re=C;re.redirectedFrom=J;let ue;return!D&&Ix(i,X,C)&&(ue=Sr(jt.NAVIGATION_DUPLICATED,{to:re,from:X}),_e(X,X,!0,!1)),(ue?Promise.resolve(ue):oe(re,X)).catch(ce=>Ei(ce)?Ei(ce,jt.NAVIGATION_GUARD_REDIRECT)?ce:Ke(ce):de(ce,re,X)).then(ce=>{if(ce){if(Ei(ce,jt.NAVIGATION_GUARD_REDIRECT))return _(ht({replace:T},j(ce.to),{state:typeof ce.to=="object"?ht({},Oe,ce.to.state):Oe,force:D}),J||re)}else ce=R(re,X,!0,T,Oe);return ne(re,X,ce),ce})}function V(U,J){const C=B(U,J);return C?Promise.reject(C):Promise.resolve()}function K(U){const J=ct.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(U):U()}function oe(U,J){let C;const[X,Oe,D]=ew(U,J);C=Ou(X.reverse(),"beforeRouteLeave",U,J);for(const F of X)F.leaveGuards.forEach(re=>{C.push(Xi(re,U,J))});const T=V.bind(null,U,J);return C.push(T),st(C).then(()=>{C=[];for(const F of r.list())C.push(Xi(F,U,J));return C.push(T),st(C)}).then(()=>{C=Ou(Oe,"beforeRouteUpdate",U,J);for(const F of Oe)F.updateGuards.forEach(re=>{C.push(Xi(re,U,J))});return C.push(T),st(C)}).then(()=>{C=[];for(const F of D)if(F.beforeEnter)if(ti(F.beforeEnter))for(const re of F.beforeEnter)C.push(Xi(re,U,J));else C.push(Xi(F.beforeEnter,U,J));return C.push(T),st(C)}).then(()=>(U.matched.forEach(F=>F.enterCallbacks={}),C=Ou(D,"beforeRouteEnter",U,J,K),C.push(T),st(C))).then(()=>{C=[];for(const F of o.list())C.push(Xi(F,U,J));return C.push(T),st(C)}).catch(F=>Ei(F,jt.NAVIGATION_CANCELLED)?F:Promise.reject(F))}function ne(U,J,C){l.list().forEach(X=>K(()=>X(U,J,C)))}function R(U,J,C,X,Oe){const D=B(U,J);if(D)return D;const T=J===Ji,F=tr?history.state:{};C&&(X||T?n.replace(U.fullPath,ht({scroll:T&&F&&F.scroll},Oe)):n.push(U.fullPath,Oe)),a.value=U,_e(U,J,C,T),Ke()}let le;function se(){le||(le=n.listen((U,J,C)=>{if(!dt.listening)return;const X=p(U),Oe=O(X,dt.currentRoute.value);if(Oe){_(ht(Oe,{replace:!0,force:!0}),X).catch(ho);return}c=X;const D=a.value;tr&&Kx(Bh(D.fullPath,C.delta),Ya()),oe(X,D).catch(T=>Ei(T,jt.NAVIGATION_ABORTED|jt.NAVIGATION_CANCELLED)?T:Ei(T,jt.NAVIGATION_GUARD_REDIRECT)?(_(ht(j(T.to),{force:!0}),X).then(F=>{Ei(F,jt.NAVIGATION_ABORTED|jt.NAVIGATION_DUPLICATED)&&!C.delta&&C.type===Sc.pop&&n.go(-1,!1)}).catch(ho),Promise.reject()):(C.delta&&n.go(-C.delta,!1),de(T,X,D))).then(T=>{T=T||R(X,D,!1),T&&(C.delta&&!Ei(T,jt.NAVIGATION_CANCELLED)?n.go(-C.delta,!1):C.type===Sc.pop&&Ei(T,jt.NAVIGATION_ABORTED|jt.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),ne(X,D,T)}).catch(ho)}))}let $=qr(),q=qr(),Y;function de(U,J,C){Ke(U);const X=q.list();return X.length?X.forEach(Oe=>Oe(U,J,C)):console.error(U),Promise.reject(U)}function ye(){return Y&&a.value!==Ji?Promise.resolve():new Promise((U,J)=>{$.add([U,J])})}function Ke(U){return Y||(Y=!U,se(),$.list().forEach(([J,C])=>U?C(U):J()),$.reset()),U}function _e(U,J,C,X){const{scrollBehavior:Oe}=s;if(!tr||!Oe)return Promise.resolve();const D=!C&&qx(Bh(U.fullPath,0))||(X||!C)&&history.state&&history.state.scroll||null;return Qs().then(()=>Oe(U,J,D)).then(T=>T&&Wx(T)).catch(T=>de(T,U,J))}const Le=U=>n.go(U);let rt;const ct=new Set,dt={currentRoute:a,listening:!0,addRoute:m,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:x,resolve:p,options:s,push:G,replace:N,go:Le,back:()=>Le(-1),forward:()=>Le(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:q.add,isReady:ye,install(U){U.component("RouterLink",ww),U.component("RouterView",Aw),U.config.globalProperties.$router=dt,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>vt(a)}),tr&&!rt&&a.value===Ji&&(rt=!0,G(n.location).catch(X=>{}));const J={};for(const X in Ji)Object.defineProperty(J,X,{get:()=>a.value[X],enumerable:!0});U.provide(Qa,dt),U.provide(Fd,ag(J)),U.provide(Cc,a);const C=U.unmount;ct.add(U),U.unmount=function(){ct.delete(U),ct.size<1&&(c=Ji,le&&le(),le=null,a.value=Ji,rt=!1,Y=!1),C()}}};function st(U){return U.reduce((J,C)=>J.then(()=>K(C)),Promise.resolve())}return dt}function Xa(){return Xs(Qa)}function $r(s){return Xs(Fd)}const Ti=ie(!1);function Dw(){const s=()=>{Ti.value=!Ti.value},e=()=>{Ti.value=!0},t=()=>{Ti.value=!1};return Ne(Ti,i=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},{immediate:!1}),ls(()=>{const i=localStorage.getItem("theme");i?Ti.value=i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches&&(Ti.value=!0),Ti.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),{isDark:Ti,toggle:s,enable:e,disable:t}}function Ew(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 3.75V16.5m-6-9V3.75m0 3.75a1.5 1.5 0 0 1 0 3m0-3a1.5 1.5 0 0 0 0 3m0 9.75V10.5"})])}function Tw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Vw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Ow(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"})])}function zd(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function Hd(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function Ac(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Pw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function $w(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function jw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ma(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Za(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function eu(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function Lw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Wd(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"})])}function Rw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Iw(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Bw={key:0,class:"pointer-events-auto w-full max-w-sm rounded-lg bg-white shadow-lg outline-1 outline-black/5 dark:bg-gray-800 dark:-outline-offset-1 dark:outline-white/10"},Nw={class:"p-4"},Uw={key:0,class:"shrink-0"},Fw={key:0,class:"w-0 flex-1 text-sm font-medium text-gray-900 dark:text-white"},zw={class:"text-sm font-medium text-gray-900 dark:text-white"},Hw={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ww={__name:"Toast",props:{title:{type:String,required:!0},description:{type:String,default:null},type:{type:String,default:"success",validator:s=>["success","error","warning","info"].includes(s)},variant:{type:String,default:"regular",validator:s=>["regular","condensed"].includes(s)},action:{type:String,default:null},duration:{type:Number,default:5e3},autoClose:{type:Boolean,default:!0}},emits:["close","action"],setup(s,{emit:e}){const t=s,i=e,n=ie(!1);let r=null;const o=W(()=>{const c={success:Tw,error:Iw,warning:Pw,info:Za},u={success:"text-sky-400",error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},d=c[t.type],h=u[t.type];return()=>Rt(d,{class:`size-6 ${h}`})}),l=()=>{n.value=!1,r&&clearTimeout(r),setTimeout(()=>i("close"),200)},a=()=>{i("action"),l()};return ls(()=>{n.value=!0,t.autoClose&&t.duration>0&&(r=setTimeout(l,t.duration))}),Ne(()=>t.duration,c=>{r&&clearTimeout(r),t.autoClose&&c>0&&(r=setTimeout(l,c))}),(c,u)=>(g(),be(Nd,{"enter-active-class":"transform transition duration-300 ease-out","enter-from-class":"translate-y-2 opacity-0 sm:translate-x-2 sm:translate-y-0","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[n.value?(g(),v("div",Bw,[f("div",Nw,[f("div",{class:Ae(s.variant==="condensed"?"flex items-center":"flex items-start")},[s.variant==="regular"?(g(),v("div",Uw,[(g(),be(Es(o.value),{class:"size-6"}))])):I("",!0),f("div",{class:Ae([s.variant==="regular"?"ml-3 w-0 flex-1 pt-0.5":"flex w-0 flex-1 justify-between"])},[s.variant==="condensed"?(g(),v("p",Fw,ee(s.title),1)):(g(),v(me,{key:1},[f("p",zw,ee(s.title),1),s.description?(g(),v("p",Hw,ee(s.description),1)):I("",!0)],64)),s.variant==="condensed"&&s.action?(g(),v("button",{key:2,type:"button",onClick:a,class:"ml-3 shrink-0 rounded-md bg-white text-sm font-medium text-sky-600 hover:text-sky-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-500 dark:bg-gray-800 dark:text-sky-400 dark:hover:text-sky-300 dark:focus:outline-sky-400"},ee(s.action),1)):I("",!0)],2),f("div",{class:"ml-4 flex shrink-0"},[f("button",{type:"button",onClick:l,class:"inline-flex rounded-md text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-sky-600 dark:hover:text-white dark:focus:outline-sky-500"},[...u[0]||(u[0]=[f("span",{class:"sr-only"},"Close",-1),f("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[f("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])])])],2)])])):I("",!0)]),_:1}))}},Kw={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6 z-50"},qw={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},Gw={__name:"ToastContainer",setup(s,{expose:e}){const t=ie([]);let i=1;const n=a=>{const c={id:i++,title:a.title,description:a.description||null,type:a.type||"success",variant:a.variant||"regular",action:a.action||null,duration:a.duration!==void 0?a.duration:5e3,autoClose:a.autoClose!==void 0?a.autoClose:!0,onAction:a.onAction||null};return t.value.push(c),c.id},r=a=>{const c=t.value.findIndex(u=>u.id===a);c>-1&&t.value.splice(c,1)},o=a=>{a.onAction&&a.onAction()};return e({addToast:n,removeToast:r,clearAll:()=>{t.value=[]}}),(a,c)=>(g(),be(bg,{to:"body"},[f("div",Kw,[f("div",qw,[(g(!0),v(me,null,Ee(t.value,u=>(g(),be(Ww,{key:u.id,title:u.title,description:u.description,type:u.type,variant:u.variant,action:u.action,duration:u.duration,"auto-close":u.autoClose,onClose:d=>r(u.id),onAction:d=>o(u)},null,8,["title","description","type","variant","action","duration","auto-close","onClose","onAction"]))),128))])])]))}};let En=null;function Jw(s){En=s}function tu(){const s=l=>{if(!En){console.warn('ToastContainer not initialized. Add <ToastContainer ref="toastContainer" /> to your App.vue');return}return En.addToast(l)};return{show:s,success:(l,a=null,c={})=>s({title:l,description:a,type:"success",...c}),error:(l,a=null,c={})=>s({title:l,description:a,type:"error",...c}),warning:(l,a=null,c={})=>s({title:l,description:a,type:"warning",...c}),info:(l,a=null,c={})=>s({title:l,description:a,type:"info",...c}),remove:l=>{En&&En.removeToast(l)},clearAll:()=>{En&&En.clearAll()}}}const Yw={class:"flex min-h-screen bg-white dark:bg-zinc-900"},Qw={class:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col xl:w-80"},Xw={class:"flex grow flex-col overflow-y-auto border-r border-zinc-900/10 px-6 pb-8 pt-4 dark:border-white/10"},Zw={key:0,class:"mt-6"},e2={class:"mt-10"},t2={role:"list"},s2={class:"relative mt-6"},i2={class:"relative mt-3 pl-2"},n2={role:"list",class:"border-l border-transparent"},r2={class:"truncate"},o2={key:0,class:"relative mt-6"},l2={class:"relative mt-3 pl-2"},a2={role:"list",class:"border-l border-transparent"},u2={class:"truncate"},c2={key:0,class:"text-xs text-zinc-400 dark:text-zinc-500"},d2={class:"sticky bottom-0 mt-6 border-t border-zinc-900/10 pt-6 dark:border-white/10"},f2={class:"lg:pl-72 xl:pl-80 w-full"},h2={class:"h-screen overflow-auto"},p2={__name:"App",setup(s){const e=ie(null),t=$r(),{isDark:i,toggle:n}=Dw(),r=ie([]),o=h=>d.findIndex(y=>y.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(y.to)),l=()=>r.value.findIndex(h=>t.path===`/project/${h.id}`),a=h=>h.to==="/projects"&&t.path==="/projects/new"?!1:t.path.startsWith(h.to),c=()=>Rt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Rt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})]),u=()=>Rt("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Rt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})]),d=[{id:"projects",label:"Projects",to:"/projects"},{id:"settings",label:"New Project Defaults",to:"/settings"}];return ls(async()=>{Jw(e.value);try{const m=await(await fetch("/api/settings/get")).json();r.value=m.projects||[]}catch(h){console.error("Failed to load projects:",h)}}),(h,m)=>{const y=ca("router-link"),x=ca("router-view");return g(),v("div",Yw,[f("div",Qw,[f("div",Xw,[w(y,{to:"/",class:"flex items-center gap-3"},{default:Z(()=>[...m[1]||(m[1]=[f("img",{src:kx,alt:"Framework",class:"h-10 w-10"},null,-1),f("span",{class:"text-lg font-semibold text-zinc-900 dark:text-white"},"Framework",-1)])]),_:1}),h.$route.path!=="/projects/new"?(g(),v("div",Zw,[w(y,{to:"/projects/new",class:"flex w-full items-center justify-center gap-2 rounded-lg bg-white px-4 py-2.5 text-sm font-medium text-zinc-900 ring-1 ring-zinc-900/10 transition hover:bg-zinc-50 hover:ring-zinc-900/20 dark:bg-white/5 dark:text-white dark:ring-white/10 dark:hover:bg-white/10"},{default:Z(()=>[...m[2]||(m[2]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),he(" New Project ",-1)])]),_:1})])):I("",!0),f("nav",e2,[f("ul",t2,[f("li",s2,[m[4]||(m[4]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Framework ",-1)),f("div",i2,[m[3]||(m[3]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),o()>=0?(g(),v("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:wo({top:`${o()*32+4}px`})},null,4)):I("",!0),f("ul",n2,[(g(),v(me,null,Ee(d,S=>f("li",{key:S.id,class:"relative"},[w(y,{to:S.to,class:Ae(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",a(S)?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[f("span",r2,ee(S.label),1)]),_:2},1032,["to","class"])])),64))])])]),r.value.length>0?(g(),v("li",o2,[m[6]||(m[6]=f("h2",{class:"text-xs font-semibold text-zinc-900 dark:text-white"}," Your Projects ",-1)),f("div",l2,[m[5]||(m[5]=f("div",{class:"absolute inset-y-0 left-2 w-px bg-zinc-900/10 dark:bg-white/5"},null,-1)),l()>=0?(g(),v("div",{key:0,class:"absolute left-2 h-6 w-px bg-sky-500 transition-all duration-200",style:wo({top:`${l()*32+4}px`})},null,4)):I("",!0),f("ul",a2,[(g(!0),v(me,null,Ee(r.value,S=>(g(),v("li",{key:S.id,class:"relative"},[w(y,{to:`/project/${S.id}`,class:Ae(["flex justify-between gap-2 py-1 pl-4 pr-3 text-sm transition",h.$route.path===`/project/${S.id}`?"text-zinc-900 dark:text-white":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"])},{default:Z(()=>[f("span",u2,ee(S.name),1),S.type?(g(),v("span",c2,ee(S.type==="project"?"":S.type==="course"?"":""),1)):I("",!0)]),_:2},1032,["to","class"])]))),128))])])])):I("",!0),f("li",d2,[f("button",{onClick:m[0]||(m[0]=(...S)=>vt(n)&&vt(n)(...S)),class:"flex w-full items-center gap-3 text-sm text-zinc-600 transition hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white"},[(g(),be(Es(vt(i)?u:c),{class:"h-5 w-5 shrink-0"})),he(" "+ee(vt(i)?"Light Mode":"Dark Mode"),1)])])])])])]),f("div",f2,[f("main",h2,[w(x)])]),w(Gw,{ref_key:"toastContainer",ref:e},null,512)])}}},m2={key:0,class:"flex items-center justify-center py-12"},g2={key:1,class:"max-w-4xl prose prose-slate dark:prose-invert"},v2={class:"not-prose mb-8"},y2={class:"flex items-center gap-3 mb-2"},b2={class:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-sm font-medium"},k2={class:"text-4xl font-bold text-slate-900 dark:text-white mb-4"},x2={class:"text-lg text-slate-600 dark:text-slate-400"},w2={class:"not-prose mb-8"},S2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto"},_2={class:"text-sm text-slate-100"},C2={key:0,class:"not-prose mb-8"},A2={class:"space-y-4"},M2={class:"flex items-baseline gap-2 mb-1"},D2={class:"text-base font-mono font-semibold text-slate-900 dark:text-white"},E2={class:"text-sm text-slate-500 dark:text-slate-400"},T2={key:0,class:"text-xs text-red-600 dark:text-red-400 font-medium"},V2={key:1,class:"text-xs text-slate-500 dark:text-slate-400"},O2={class:"text-sm text-slate-600 dark:text-slate-400"},P2={class:"not-prose mb-8"},$2={class:"text-slate-700 dark:text-slate-300"},j2={key:1,class:"not-prose mb-8"},L2={class:"text-slate-700 dark:text-slate-300 whitespace-pre-line"},R2={key:2,class:"not-prose mb-8"},I2={class:"space-y-6"},B2={class:"bg-slate-900 dark:bg-slate-950 rounded-lg p-4 overflow-x-auto mb-2"},N2={class:"text-sm text-slate-100"},U2={class:"text-sm text-slate-600 dark:text-slate-400"},F2={key:3,class:"not-prose mb-8"},z2={class:"space-y-2"},H2={class:"text-indigo-600 dark:text-indigo-400 font-mono font-semibold"},W2={class:"text-slate-700 dark:text-slate-300"},K2={key:4,class:"not-prose mb-8"},q2={class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},G2={class:"list-disc list-inside space-y-1 text-sm text-amber-800 dark:text-amber-300"},J2={key:5,class:"not-prose"},Y2={class:"flex items-center gap-2 flex-wrap"},Q2={key:2,class:"text-center py-12"},X2={__name:"DocViewer",props:{functionName:{type:String,required:!0}},setup(s){const e=s,t=ie(null),i=ie(!0),n=async()=>{i.value=!0;try{const r=await fetch(`/docs/${e.functionName}.json`);r.ok?t.value=await r.json():t.value=null}catch(r){console.error("Failed to load documentation:",r),t.value=null}finally{i.value=!1}};return Ne(()=>e.functionName,n),ls(n),(r,o)=>i.value?(g(),v("div",m2,[...o[0]||(o[0]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):t.value?(g(),v("div",g2,[f("div",v2,[f("div",y2,[f("span",b2,ee(t.value.category),1)]),f("h1",k2,ee(t.value.title),1),f("p",x2,ee(t.value.description),1)]),f("div",w2,[o[1]||(o[1]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Usage",-1)),f("div",S2,[f("pre",_2,[f("code",null,ee(t.value.usage),1)])])]),t.value.params&&t.value.params.length>0?(g(),v("div",C2,[o[3]||(o[3]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Parameters",-1)),f("div",A2,[(g(!0),v(me,null,Ee(t.value.params,l=>(g(),v("div",{key:l.name,class:"border-l-4 border-indigo-500 pl-4"},[f("div",M2,[f("code",D2,ee(l.name),1),f("span",E2,ee(l.type),1),l.required?(g(),v("span",T2," required ")):I("",!0),l.default?(g(),v("span",V2,[o[2]||(o[2]=he(" default: ",-1)),f("code",null,ee(l.default),1)])):I("",!0)]),f("p",O2,ee(l.description),1)]))),128))])])):I("",!0),f("div",P2,[o[4]||(o[4]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Returns",-1)),f("p",$2,ee(t.value.returns),1)]),t.value.details?(g(),v("div",j2,[o[5]||(o[5]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Details",-1)),f("div",L2,ee(t.value.details),1)])):I("",!0),t.value.examples&&t.value.examples.length>0?(g(),v("div",R2,[o[6]||(o[6]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"Examples",-1)),f("div",I2,[(g(!0),v(me,null,Ee(t.value.examples,(l,a)=>(g(),v("div",{key:a},[f("div",B2,[f("pre",N2,[f("code",null,ee(l.code),1)])]),f("p",U2,ee(l.description),1)]))),128))])])):I("",!0),t.value.see_also&&t.value.see_also.length>0?(g(),v("div",F2,[o[7]||(o[7]=f("h2",{class:"text-2xl font-bold text-slate-900 dark:text-white mb-4"},"See Also",-1)),f("ul",z2,[(g(!0),v(me,null,Ee(t.value.see_also,l=>(g(),v("li",{key:l.name},[f("code",H2,ee(l.name)+"() ",1),f("span",W2," - "+ee(l.description),1)]))),128))])])):I("",!0),t.value.notes&&t.value.notes.length>0?(g(),v("div",K2,[f("div",q2,[o[8]||(o[8]=f("h3",{class:"text-lg font-semibold text-amber-900 dark:text-amber-200 mb-2"},"Notes",-1)),f("ul",G2,[(g(!0),v(me,null,Ee(t.value.notes,(l,a)=>(g(),v("li",{key:a},ee(l),1))),128))])])])):I("",!0),t.value.tags&&t.value.tags.length>0?(g(),v("div",J2,[f("div",Y2,[o[9]||(o[9]=f("span",{class:"text-sm text-slate-500 dark:text-slate-400"},"Tags:",-1)),(g(!0),v(me,null,Ee(t.value.tags,l=>(g(),v("span",{key:l,class:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded text-xs"},ee(l),1))),128))])])):I("",!0)])):(g(),v("div",Q2,[...o[10]||(o[10]=[f("p",{class:"text-slate-600 dark:text-slate-400"},"Documentation not found.",-1)])]))}},Z2={class:"flex h-full"},eS={class:"w-64 flex-shrink-0 border-r border-zinc-900/10 dark:border-white/10 overflow-y-auto"},tS={class:"p-4"},sS={class:"mt-3 space-y-1"},iS={class:"mt-3 space-y-1"},nS={class:"mt-3 space-y-1"},rS={class:"flex-1 overflow-y-auto"},oS={key:1,class:"flex h-full items-center justify-center p-8"},Xh={__name:"DocsView",setup(s){const e=$r(),t=W(()=>e.params.functionName),i=[{name:"scaffold",title:"scaffold()"}],n=[{name:"data_load",title:"data_load()"}],r=[{name:"cache_get",title:"cache_get()"}];return(o,l)=>{const a=ca("router-link");return g(),v("div",Z2,[f("div",eS,[f("div",tS,[l[0]||(l[0]=f("h2",{class:"text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Core Functions ",-1)),f("ul",sS,[(g(),v(me,null,Ee(i,c=>f("li",{key:c.name},[w(a,{to:`/docs/${c.name}`,class:Ae(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===c.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:Z(()=>[he(ee(c.title),1)]),_:2},1032,["to","class"])])),64))]),l[1]||(l[1]=f("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Data Functions ",-1)),f("ul",iS,[(g(),v(me,null,Ee(n,c=>f("li",{key:c.name},[w(a,{to:`/docs/${c.name}`,class:Ae(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===c.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:Z(()=>[he(ee(c.title),1)]),_:2},1032,["to","class"])])),64))]),l[2]||(l[2]=f("h2",{class:"mt-6 text-xs font-semibold uppercase tracking-wide text-zinc-500 dark:text-zinc-400"}," Cache Functions ",-1)),f("ul",nS,[(g(),v(me,null,Ee(r,c=>f("li",{key:c.name},[w(a,{to:`/docs/${c.name}`,class:Ae(["block rounded-md px-3 py-2 text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-800",t.value===c.name?"bg-sky-50 text-sky-600 dark:bg-sky-400/10 dark:text-sky-400":"text-zinc-700 dark:text-zinc-300"])},{default:Z(()=>[he(ee(c.title),1)]),_:2},1032,["to","class"])])),64))])])]),f("div",rS,[t.value?(g(),be(X2,{key:0,functionName:t.value},null,8,["functionName"])):(g(),v("div",oS,[...l[3]||(l[3]=[f("div",{class:"text-center"},[f("h2",{class:"text-2xl font-bold text-zinc-900 dark:text-white"},"Framework Documentation"),f("p",{class:"mt-2 text-zinc-600 dark:text-zinc-400"}," Select a function from the sidebar to view its documentation. ")],-1)])]))])])}}},lS={key:0,class:"px-4 py-5 sm:px-6"},aS={class:"px-4 py-5 sm:p-6"},uS={key:1,class:"px-4 py-4 sm:px-6"},cS={__name:"Card",setup(s){const e=Q1(),t=W(()=>{const i=["overflow-hidden","rounded-lg","bg-white","shadow-sm","dark:bg-gray-800/50","dark:shadow-none","dark:outline","dark:-outline-offset-1","dark:outline-white/10"];return(e.header||e.footer)&&i.push("divide-y","divide-gray-200","dark:divide-white/10"),i.join(" ")});return(i,n)=>(g(),v("div",{class:Ae(t.value)},[i.$slots.header?(g(),v("div",lS,[gt(i.$slots,"header")])):I("",!0),f("div",aS,[gt(i.$slots,"default")]),i.$slots.footer?(g(),v("div",uS,[gt(i.$slots,"footer")])):I("",!0)],2))}},Ye={__name:"Button",props:{variant:{type:String,default:"primary",validator:s=>["primary","secondary","soft"].includes(s)},size:{type:String,default:"md",validator:s=>["xs","sm","md","lg","xl"].includes(s)},rounded:{type:String,default:"md",validator:s=>["sm","md","full"].includes(s)},type:{type:String,default:"button"},href:{type:String,default:null},icon:{type:[Object,Function],default:null},iconPosition:{type:String,default:"left",validator:s=>["left","right"].includes(s)},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,i=e,n=l=>{i("click",l)},r=W(()=>{const l=["font-semibold","focus-visible:outline-2","focus-visible:outline-offset-2"],a={xs:t.iconOnly?"p-2":"px-3 py-2 text-xs",sm:t.iconOnly?"p-2.5":"px-3 py-2 text-sm",md:t.iconOnly?"p-3":"px-3.5 py-2.5 text-sm",lg:t.iconOnly?"p-3":"px-4 py-3 text-sm",xl:t.iconOnly?"p-3.5":"px-4.5 py-3.5 text-sm"};l.push(a[t.size]);const c={sm:"rounded-sm",md:"rounded-md",full:"rounded-full"};return l.push(c[t.rounded]),t.variant==="primary"?l.push("bg-sky-600","text-white","shadow-xs","hover:bg-sky-500","focus-visible:outline-sky-600","dark:bg-sky-500","dark:shadow-none","dark:hover:bg-sky-400","dark:focus-visible:outline-sky-500"):t.variant==="secondary"?l.push("bg-white","text-gray-900","shadow-xs","inset-ring","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"):t.variant==="soft"&&l.push("bg-sky-50","text-sky-600","shadow-xs","hover:bg-sky-100","dark:bg-sky-500/20","dark:text-sky-400","dark:shadow-none","dark:hover:bg-sky-500/30"),t.icon&&!t.iconOnly&&(l.push("inline-flex","items-center"),l.push(t.size==="xl"?"gap-x-2":"gap-x-1.5")),l.join(" ")}),o=W(()=>{const l=[];return t.iconOnly?l.push("size-5"):(l.push("size-5"),t.iconPosition==="left"?l.push("-ml-0.5"):l.push("-mr-0.5")),l.join(" ")});return(l,a)=>(g(),be(Es(s.href?"a":"button"),{href:s.href,type:s.href?void 0:s.type,class:Ae(r.value),onClick:n},{default:Z(()=>[s.icon&&s.iconPosition==="left"?(g(),v("svg",{key:0,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ae(o.value)},[(g(),be(Es(s.icon)))],2)):I("",!0),gt(l.$slots,"default"),s.icon&&s.iconPosition==="right"?(g(),v("svg",{key:1,viewBox:"0 0 20 20",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:Ae(o.value)},[(g(),be(Es(s.icon)))],2)):I("",!0)]),_:3},8,["href","type","class"]))}},dS=["for"],fS={key:1,class:"mt-2 flex"},hS={class:"flex shrink-0 items-center rounded-l-md bg-gray-100 px-2 text-base text-gray-500 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6 dark:bg-white/5 dark:text-gray-400 dark:outline-white/10 font-mono"},pS=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],mS={key:2,class:"mt-2"},gS=["id","type","value","placeholder","required","disabled","aria-invalid","aria-describedby"],vS={key:0,viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-red-500 sm:size-4 dark:text-red-400"},yS=["id"],bS=["id"],ae={__name:"Input",props:{id:{type:String,default:()=>`input-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},label:{type:String,default:null},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:String,default:null},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},prefix:{type:String,default:null}},emits:["update:modelValue","blur"],setup(s){const e=s,t=W(()=>{const n=["block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("col-start-1","row-start-1","pr-10","pl-3","text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","sm:pr-9","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")}),i=W(()=>{const n=["-ml-px","block","w-full","grow","rounded-r-md","bg-white","px-3","py-1.5","text-base","outline-1","-outline-offset-1","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","sm:text-sm/6","dark:bg-white/5","dark:placeholder:text-gray-500"];return e.monospace&&n.push("font-mono"),e.error?n.push("text-red-900","outline-red-300","placeholder:text-red-300","focus:outline-red-600","dark:text-red-400","dark:outline-red-500/50","dark:placeholder:text-red-400/70","dark:focus:outline-red-400"):n.push("text-gray-900","outline-gray-300","focus:outline-sky-600","dark:text-white","dark:outline-white/10","dark:focus:outline-sky-500"),n.join(" ")});return(n,r)=>(g(),v("div",null,[s.label?(g(),v("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},ee(s.label),9,dS)):I("",!0),s.prefix?(g(),v("div",fS,[f("div",hS,ee(s.prefix),1),f("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[0]||(r[0]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[1]||(r[1]=o=>n.$emit("blur",o)),class:Ae(i.value)},null,42,pS)])):(g(),v("div",mS,[f("input",{id:s.id,type:s.type,value:s.modelValue,placeholder:s.placeholder,required:s.required,disabled:s.disabled,"aria-invalid":s.error?"true":void 0,"aria-describedby":s.error?`${s.id}-error`:s.hint?`${s.id}-description`:void 0,onInput:r[2]||(r[2]=o=>n.$emit("update:modelValue",o.target.value)),onBlur:r[3]||(r[3]=o=>n.$emit("blur",o)),class:Ae(t.value)},null,42,gS),s.error?(g(),v("svg",vS,[...r[4]||(r[4]=[f("path",{d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd","fill-rule":"evenodd"},null,-1)])])):I("",!0)])),s.error?(g(),v("p",{key:3,id:`${s.id}-error`,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ee(s.error),9,yS)):I("",!0),s.hint&&!s.error?(g(),v("p",{key:4,id:`${s.id}-description`,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ee(s.hint),9,bS)):I("",!0)]))}},kS={class:"flex gap-3"},xS={class:"flex h-6 shrink-0 items-center"},wS={class:"group grid size-4 grid-cols-1"},SS=["id","name","checked","aria-describedby"],_S={class:"text-sm/6"},CS=["for"],AS=["id"],sn={__name:"Checkbox",props:{id:{type:String,required:!0},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},description:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(g(),v("div",kS,[f("div",xS,[f("div",wS,[f("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,"aria-describedby":s.description?`${s.id}-description`:void 0,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",i.target.checked)),class:"col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-sky-600 checked:bg-sky-600 indeterminate:border-sky-600 indeterminate:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:indeterminate:border-sky-500 dark:indeterminate:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto"},null,40,SS),t[1]||(t[1]=f("svg",{viewBox:"0 0 14 14",fill:"none",class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25 dark:group-has-disabled:stroke-white/25"},[f("path",{d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-checked:opacity-100"}),f("path",{d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"opacity-0 group-has-indeterminate:opacity-100"})],-1))])]),f("div",_S,[f("label",{for:s.id,class:"font-medium text-gray-900 dark:text-white"},[gt(e.$slots,"default")],8,CS),s.description?(g(),v("p",{key:0,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},ee(s.description),9,AS)):I("",!0)])]))}};function MS(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function DS(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function ES(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function TS(s,e){return g(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}const VS={class:"flex gap-3"},OS={class:"flex-1"},Os={__name:"Alert",props:{type:{type:String,default:"info",validator:s=>["success","error","warning","info"].includes(s)},title:{type:String,default:null},description:{type:String,default:null},dismissible:{type:Boolean,default:!1}},emits:["dismiss"],setup(s,{emit:e}){const t=s,i=e,n={success:{container:"bg-sky-50 dark:bg-sky-900/20 inset-ring inset-ring-sky-200 dark:inset-ring-sky-800",icon:"text-sky-600 dark:text-sky-400",title:"text-sky-800 dark:text-sky-200",description:"text-sky-700 dark:text-sky-300",dismiss:"text-sky-600 hover:text-sky-700 dark:text-sky-400 dark:hover:text-sky-300"},error:{container:"bg-red-50 dark:bg-red-900/20 inset-ring inset-ring-red-200 dark:inset-ring-red-800",icon:"text-red-600 dark:text-red-400",title:"text-red-800 dark:text-red-200",description:"text-red-700 dark:text-red-300",dismiss:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},warning:{container:"bg-yellow-50 dark:bg-yellow-900/20 inset-ring inset-ring-yellow-200 dark:inset-ring-yellow-800",icon:"text-yellow-600 dark:text-yellow-400",title:"text-yellow-800 dark:text-yellow-200",description:"text-yellow-700 dark:text-yellow-300",dismiss:"text-yellow-600 hover:text-yellow-700 dark:text-yellow-400 dark:hover:text-yellow-300"},info:{container:"bg-blue-50 dark:bg-blue-900/20 inset-ring inset-ring-blue-200 dark:inset-ring-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-800 dark:text-blue-200",description:"text-blue-700 dark:text-blue-300",dismiss:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"}},r=W(()=>`rounded-lg p-4 ${n[t.type].container}`),o=W(()=>`text-sm font-medium ${n[t.type].title}`),l=W(()=>{const d=[`text-sm ${n[t.type].description}`];return t.title&&d.push("mt-1"),d.join(" ")}),a=W(()=>`rounded-md p-1 ${n[t.type].dismiss} focus:outline-2 focus:outline-offset-2`),c=W(()=>({success:MS,error:TS,warning:DS,info:ES})[t.type]),u=()=>{i("dismiss")};return(d,h)=>(g(),v("div",{class:Ae(r.value),role:"alert"},[f("div",VS,[(g(),be(Es(c.value),{class:Ae(["h-5 w-5 shrink-0",n[s.type].icon])},null,8,["class"])),f("div",OS,[s.title?(g(),v("p",{key:0,class:Ae(o.value)},ee(s.title),3)):I("",!0),s.description||d.$slots.default?(g(),v("p",{key:1,class:Ae(l.value)},[gt(d.$slots,"default",{},()=>[he(ee(s.description),1)])],2)):I("",!0)]),s.dismissible?(g(),v("button",{key:0,type:"button",onClick:u,class:Ae(a.value)},[...h[0]||(h[0]=[f("span",{class:"sr-only"},"Dismiss",-1),f("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"size-5"},[f("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1)])],2)):I("",!0)])],2))}},PS={class:"flex items-center justify-between"},$S={class:"space-y-6"},jS={key:0,class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},LS={key:0},RS={class:"font-mono"},IS={key:1},BS={class:"font-mono"},NS={class:"space-y-2"},US=["onClick"],FS={class:"flex items-start gap-3"},zS={class:"text-2xl mt-0.5"},HS={class:"flex-1"},WS={class:"font-semibold text-gray-900 dark:text-white"},KS={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},qS={key:0,class:"text-sky-600 dark:text-sky-400"},GS={key:1,class:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4"},JS={class:"space-y-3"},YS={class:"list-decimal list-inside mt-1 space-y-1"},QS={class:"flex items-center justify-end gap-3"},XS={__name:"ProjectWizard",props:{mode:{type:String,default:"modal",validator:s=>["modal","page"].includes(s)},projectsRoot:{type:String,default:""}},emits:["close","created"],setup(s,{emit:e}){const t=s,i=e,n=W(()=>t.mode==="modal"),r=W(()=>(t.projectsRoot||"").trim()),o=O=>/^([A-Za-z]:[\\/]|\\\\|\/|~)/.test(O),l=(O,_)=>{if(!O)return _;const V=_.replace(/^[\\/]+/,"");if(!V)return O;if(O.endsWith("/")||O.endsWith("\\"))return`${O}${V}`;const K=O.includes("\\")&&!O.includes("/")?"\\":"/";return`${O}${K}${V}`},a=W(()=>n.value?"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4":"flex w-full justify-center"),c=W(()=>n.value?"max-w-2xl w-full max-h-[90vh] overflow-y-auto":"w-full max-w-2xl shadow-xl"),u=Is({directory:"",name:"",type:"project",sensitive:!1,use_git:!0,use_renv:!1,attach_defaults:!0}),d=W(()=>{const O=u.directory.trim();return O?o(O)||!r.value?O:l(r.value,O):r.value||""}),h=W(()=>{const O=u.directory.trim();return O?r.value.length>0||o(O):!1}),m=W(()=>r.value?`Folder will be created inside ${r.value}`:"The directory where your project will be created"),y=W(()=>r.value?"analytics-project":"my-analysis"),x=[{id:"project",title:"Data Analysis",description:"Full-featured project with notebooks, scripts, data management, and results tracking",icon:""},{id:"course",title:"Course Materials",description:"Teaching materials with slides, assignments, and course documentation",icon:""},{id:"presentation",title:"Presentation",description:"Single talk or presentation with minimal structure",icon:""}],S=ie(!1),p=ie(""),j=ie(!1),B=()=>{n.value&&i("close")},G=()=>{!u.name&&u.directory&&(u.name=u.directory.split(/[-_]/).map(O=>O.charAt(0).toUpperCase()+O.slice(1)).join(" "))},N=async()=>{p.value="",j.value=!1,S.value=!0;try{const O=d.value||u.directory,_=await fetch("/api/project/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:O,project_name:u.name||u.directory,type:u.type,sensitive:u.sensitive,use_git:u.use_git,use_renv:u.use_renv,attach_defaults:u.attach_defaults})}),V=await _.json();_.ok&&V.success?(j.value=!0,V&&!V.path&&(V.path=O),i("created",V),n.value&&setTimeout(()=>{i("close")},3e3)):p.value=V.error||"Failed to create project"}catch(O){p.value="Network error: "+O.message}finally{S.value=!1}};return(O,_)=>(g(),v("div",{class:Ae(a.value),onClick:Ht(B,["self"])},[w(cS,{class:Ae(c.value)},{header:Z(()=>[f("div",PS,[_[9]||(_[9]=f("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create New Project",-1)),n.value?(g(),v("button",{key:0,onClick:_[0]||(_[0]=V=>O.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition"},[..._[8]||(_[8]=[f("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):I("",!0)])]),footer:Z(()=>[f("div",QS,[w(Ye,{variant:"secondary",onClick:_[7]||(_[7]=V=>O.$emit("close"))},{default:Z(()=>[..._[23]||(_[23]=[he(" Cancel ",-1)])]),_:1}),w(Ye,{variant:"primary",onClick:N,disabled:S.value||!u.directory},{default:Z(()=>[he(ee(S.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),default:Z(()=>[f("div",$S,[w(ae,{modelValue:u.directory,"onUpdate:modelValue":_[1]||(_[1]=V=>u.directory=V),label:"Project Directory",placeholder:y.value,hint:m.value,onInput:G},null,8,["modelValue","placeholder","hint"]),r.value||h.value?(g(),v("div",jS,[r.value?(g(),v("p",LS,[_[10]||(_[10]=he(" Projects will be created inside ",-1)),f("span",RS,ee(r.value),1),_[11]||(_[11]=he(". ",-1))])):I("",!0),h.value?(g(),v("p",IS,[_[12]||(_[12]=he(" Full path: ",-1)),f("span",BS,ee(d.value),1)])):I("",!0)])):I("",!0),w(ae,{modelValue:u.name,"onUpdate:modelValue":_[2]||(_[2]=V=>u.name=V),label:"Project Name",placeholder:"My Analysis"},null,8,["modelValue"]),f("div",null,[_[14]||(_[14]=f("label",{class:"block text-sm/6 font-medium text-gray-900 dark:text-white mb-3"}," Project Type ",-1)),f("div",NS,[(g(),v(me,null,Ee(x,V=>f("div",{key:V.id,onClick:K=>u.type=V.id,class:Ae(["border-2 rounded-lg p-4 cursor-pointer transition",u.type===V.id?"border-sky-600 bg-sky-50 dark:bg-sky-900/20 dark:border-sky-500":"border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-600"])},[f("div",FS,[f("div",zS,ee(V.icon),1),f("div",HS,[f("h3",WS,ee(V.title),1),f("p",KS,ee(V.description),1)]),u.type===V.id?(g(),v("div",qS,[..._[13]||(_[13]=[f("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):I("",!0)])],10,US)),64))])]),u.type==="project"?(g(),v("div",GS,[w(sn,{modelValue:u.sensitive,"onUpdate:modelValue":_[3]||(_[3]=V=>u.sensitive=V),id:"sensitive",description:"Creates separate public/private directories for inputs, reference materials, and outputs. Recommended for PHI, PII, or IRB-restricted data."},{default:Z(()=>[..._[15]||(_[15]=[he(" Privacy-first mode ",-1)])]),_:1},8,["modelValue"])])):I("",!0),f("div",JS,[w(sn,{modelValue:u.use_git,"onUpdate:modelValue":_[4]||(_[4]=V=>u.use_git=V),id:"use_git"},{default:Z(()=>[..._[16]||(_[16]=[he(" Initialize git repository ",-1)])]),_:1},8,["modelValue"]),w(sn,{modelValue:u.use_renv,"onUpdate:modelValue":_[5]||(_[5]=V=>u.use_renv=V),id:"use_renv"},{default:Z(()=>[..._[17]||(_[17]=[he(" Enable renv for package management ",-1)])]),_:1},8,["modelValue"]),w(sn,{modelValue:u.attach_defaults,"onUpdate:modelValue":_[6]||(_[6]=V=>u.attach_defaults=V),id:"attach_defaults"},{default:Z(()=>[..._[18]||(_[18]=[he(" Auto-load common packages (dplyr, tidyr, ggplot2) ",-1)])]),_:1},8,["modelValue"])]),p.value?(g(),be(Os,{key:2,type:"error",description:p.value},null,8,["description"])):I("",!0),j.value?(g(),be(Os,{key:3,type:"success",title:"Project created successfully!"},{default:Z(()=>[_[22]||(_[22]=f("p",{class:"mt-2"},"Next steps:",-1)),f("ol",YS,[f("li",null,"cd "+ee(d.value),1),_[19]||(_[19]=f("li",null,"R",-1)),_[20]||(_[20]=f("li",null,"library(framework)",-1)),_[21]||(_[21]=f("li",null,"scaffold()",-1))])]),_:1})):I("",!0)])]),_:1},8,["class"])],2))}},ZS={class:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"},e_={key:0,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t_={key:1,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},s_={key:2,class:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},i_={__name:"ProjectTypeIcon",props:{type:{type:String,required:!0,validator:s=>["project","course","presentation"].includes(s)}},setup(s){return(e,t)=>(g(),v("div",ZS,[s.type==="project"?(g(),v("svg",e_,[...t[0]||(t[0]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1)])])):s.type==="course"?(g(),v("svg",t_,[...t[1]||(t[1]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},null,-1)])])):(g(),v("svg",s_,[...t[2]||(t[2]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"},null,-1)])]))]))}},n_={class:"flex items-center gap-2 text-xs text-zinc-600 dark:text-zinc-400"},r_={class:"truncate"},o_={__name:"ProjectAuthor",props:{author:{type:Object,required:!0}},setup(s){return(e,t)=>(g(),v("div",n_,[t[1]||(t[1]=f("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),f("span",null,ee(s.author.author),1),s.author.author_email?(g(),v(me,{key:0},[t[0]||(t[0]=f("span",{class:"text-zinc-400 dark:text-zinc-500"},"",-1)),f("span",r_,ee(s.author.author_email),1)],64)):I("",!0)]))}},l_={class:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500"},a_={__name:"ProjectCreatedDate",props:{date:{type:String,required:!0}},setup(s){return(e,t)=>(g(),v("div",l_,[t[0]||(t[0]=f("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),f("span",null,"Created "+ee(s.date),1)]))}},su={__name:"Badge",props:{variant:{type:String,default:"gray",validator:s=>["gray","red","yellow","green","blue","indigo","purple","pink","sky"].includes(s)},pill:{type:Boolean,default:!1},dot:{type:Boolean,default:!1}},setup(s){const e=s,t=W(()=>{const n=["inline-flex","items-center","px-2","py-1","text-xs","font-medium","inset-ring"];n.push(e.pill?"rounded-full":"rounded-md"),e.dot&&n.push("gap-x-1.5");const o={gray:{bg:"bg-gray-50",text:"text-gray-600",ring:"inset-ring-gray-500/10",darkBg:"dark:bg-gray-400/10",darkText:e.dot?"dark:text-gray-200":"dark:text-gray-400",darkRing:e.dot?"dark:inset-ring-white/10":"dark:inset-ring-gray-400/20"},red:{bg:"bg-red-50",text:"text-red-700",ring:"inset-ring-red-600/10",darkBg:"dark:bg-red-400/10",darkText:"dark:text-red-400",darkRing:"dark:inset-ring-red-400/20"},yellow:{bg:"bg-yellow-50",text:"text-yellow-800",ring:"inset-ring-yellow-600/20",darkBg:"dark:bg-yellow-400/10",darkText:"dark:text-yellow-500",darkRing:"dark:inset-ring-yellow-400/20"},green:{bg:"bg-green-50",text:"text-green-700",ring:"inset-ring-green-600/20",darkBg:"dark:bg-green-400/10",darkText:"dark:text-green-400",darkRing:"dark:inset-ring-green-500/20"},sky:{bg:"bg-sky-50",text:"text-sky-700",ring:"inset-ring-sky-600/20",darkBg:"dark:bg-sky-400/10",darkText:"dark:text-sky-400",darkRing:"dark:inset-ring-sky-500/20"},blue:{bg:"bg-blue-50",text:"text-blue-700",ring:"inset-ring-blue-700/10",darkBg:"dark:bg-blue-400/10",darkText:"dark:text-blue-400",darkRing:"dark:inset-ring-blue-400/30"},indigo:{bg:"bg-indigo-50",text:"text-indigo-700",ring:"inset-ring-indigo-700/10",darkBg:"dark:bg-indigo-400/10",darkText:"dark:text-indigo-400",darkRing:"dark:inset-ring-indigo-400/30"},purple:{bg:"bg-purple-50",text:"text-purple-700",ring:"inset-ring-purple-700/10",darkBg:"dark:bg-purple-400/10",darkText:"dark:text-purple-400",darkRing:"dark:inset-ring-purple-400/30"},pink:{bg:"bg-pink-50",text:"text-pink-700",ring:"inset-ring-pink-700/10",darkBg:"dark:bg-pink-400/10",darkText:"dark:text-pink-400",darkRing:"dark:inset-ring-pink-400/20"}}[e.variant];return e.dot?n.push("text-gray-900","inset-ring-gray-200","dark:text-white","dark:inset-ring-white/10"):n.push(o.bg,o.text,o.ring,o.darkBg,o.darkText,o.darkRing),n.join(" ")}),i=W(()=>`size-1.5 ${{gray:"fill-gray-500 dark:fill-gray-400",red:"fill-red-500 dark:fill-red-400",yellow:"fill-yellow-500 dark:fill-yellow-400",green:"fill-green-500 dark:fill-green-400",sky:"fill-sky-500 dark:fill-sky-400",blue:"fill-blue-500 dark:fill-blue-400",indigo:"fill-indigo-500 dark:fill-indigo-400",purple:"fill-purple-500 dark:fill-purple-400",pink:"fill-pink-500 dark:fill-pink-400"}[e.variant]}`);return(n,r)=>(g(),v("span",{class:Ae(t.value)},[s.dot?(g(),v("svg",{key:0,viewBox:"0 0 6 6","aria-hidden":"true",class:Ae(i.value)},[...r[0]||(r[0]=[f("circle",{r:"3",cx:"3",cy:"3"},null,-1)])],2)):I("",!0),gt(n.$slots,"default")],2))}},u_={class:"group relative overflow-hidden rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm transition-all duration-300 hover:shadow-xl hover:shadow-zinc-900/5 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:shadow-sky-500/5"},c_={class:"relative"},d_={class:"flex items-start justify-between"},f_={class:"flex-1"},h_={class:"flex items-center gap-3"},p_={class:"mt-4 text-xl font-bold text-zinc-900 dark:text-white"},m_={class:"mt-2 text-sm text-zinc-600 dark:text-zinc-400 font-mono truncate"},g_={class:"mt-6 flex gap-2"},v_={__name:"ProjectCard",props:{project:{type:Object,required:!0},typeLabel:{type:String,required:!0}},emits:["view","details"],setup(s){return(e,t)=>(g(),v("div",u_,[t[4]||(t[4]=f("div",{class:"absolute -right-6 -top-6 h-24 w-24 rounded-full bg-gradient-to-br from-sky-500/10 to-sky-600/10 blur-2xl transition-all duration-300 group-hover:scale-150"},null,-1)),f("div",c_,[f("div",d_,[f("div",f_,[f("div",h_,[w(i_,{type:s.project.type},null,8,["type"]),w(su,{variant:"sky"},{default:Z(()=>[he(ee(s.typeLabel),1)]),_:1})]),f("h3",p_,ee(s.project.name),1),f("p",m_,ee(s.project.path),1),s.project.author?(g(),be(o_,{key:0,author:s.project,class:"mt-3"},null,8,["author"])):I("",!0),w(a_,{date:s.project.created,class:"mt-3"},null,8,["date"])])]),f("div",g_,[w(Ye,{variant:"primary",size:"md",onClick:t[0]||(t[0]=i=>e.$emit("view",s.project)),class:"flex-1"},{default:Z(()=>[...t[2]||(t[2]=[he(" View Project ",-1)])]),_:1}),w(Ye,{variant:"secondary",size:"md",onClick:t[1]||(t[1]=i=>e.$emit("details",s.project)),class:"flex-1"},{default:Z(()=>[...t[3]||(t[3]=[he(" See More ",-1)])]),_:1})])])]))}},y_={class:"flex items-start justify-between"},b_={class:"text-3xl font-bold tracking-tight text-gray-900 dark:text-white"},k_={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},x_={key:0},jr={__name:"PageHeader",props:{title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(g(),v("div",y_,[f("div",null,[f("h1",b_,ee(s.title),1),s.description?(g(),v("p",k_,ee(s.description),1)):I("",!0)]),e.$slots.actions?(g(),v("div",x_,[gt(e.$slots,"actions")])):I("",!0)]))}},y0=(s,e)=>{const t=s.__vccOpts||s;for(const[i,n]of e)t[i]=n;return t},w_={key:0,class:"relative z-50"},S_={class:"fixed inset-0 z-10 overflow-y-auto"},__={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},C_=["aria-labelledby"],A_=["id"],M_={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},D_={__name:"Modal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["success","error","warning","info"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg","xl"].includes(s)},variant:{type:String,default:"centered",validator:s=>["centered","side-icon","left"].includes(s)},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:modelValue","close"],setup(s,{expose:e,emit:t}){const i=s,n=t,r=W(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),o={sm:"sm:max-w-sm",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl"},l=W(()=>["relative","transform","overflow-hidden","rounded-lg","bg-white","px-4","pt-5","pb-4","text-left","shadow-xl","transition-all","sm:my-8","sm:w-full","sm:p-6","dark:bg-gray-800","dark:outline","dark:-outline-offset-1","dark:outline-white/10",o[i.size]].join(" ")),a=W(()=>{const p=["flex","items-center","justify-center","rounded-full"];i.variant==="centered"?p.push("mx-auto","size-12"):p.push("shrink-0","sm:mx-0","sm:size-10");const j={success:"bg-sky-100 text-sky-600 dark:bg-sky-500/10 dark:text-sky-400",error:"bg-red-100 text-red-600 dark:bg-red-500/10 dark:text-red-400",warning:"bg-yellow-100 text-yellow-600 dark:bg-yellow-500/10 dark:text-yellow-400",info:"bg-blue-100 text-blue-600 dark:bg-blue-500/10 dark:text-blue-400"};return i.icon&&p.push(j[i.icon]),p.join(" ")}),c=W(()=>{const p=[];return i.variant==="centered"?p.push("mt-3","text-center","sm:mt-5"):i.variant==="left"?p.push("text-left"):p.push("mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left"),i.variant==="side-icon"&&(i.icon||i.$slots.icon)&&p.push("sm:flex","sm:items-start"),p.join(" ")}),u=W(()=>i.variant==="left"?"text-lg font-bold text-gray-900 dark:text-white mb-4":"text-base font-semibold text-gray-900 dark:text-white"),d=W(()=>(i.variant==="centered","mt-2")),h=W(()=>i.variant==="left"?"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex gap-3 justify-between":i.variant==="centered"?"mt-5 sm:mt-6 flex gap-3 justify-end":"mt-5 sm:mt-4 flex gap-3 justify-end"),m=W(()=>i.icon==="success"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="m4.5 12.75 6 6 9-13.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="error"||i.icon==="warning"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:i.icon==="info"?{template:`
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      `}:null),y=()=>{i.closeOnBackdrop&&S()},x=p=>{p.key==="Escape"&&i.modelValue&&S()},S=()=>{n("update:modelValue",!1),n("close")};return ls(()=>{window.addEventListener("keydown",x)}),Pr(()=>{window.removeEventListener("keydown",x)}),e({close:S}),(p,j)=>(g(),be(bg,{to:"body"},[w(Nd,{name:"modal"},{default:Z(()=>[s.modelValue?(g(),v("div",w_,[f("div",{class:"fixed inset-0 bg-gray-500/75 transition-opacity dark:bg-gray-900/50",onClick:y}),f("div",S_,[f("div",__,[f("div",{class:Ae(l.value),role:"dialog","aria-modal":"true","aria-labelledby":r.value},[p.$slots.icon||s.icon?(g(),v("div",{key:0,class:Ae(a.value)},[gt(p.$slots,"icon",{},()=>[s.icon?(g(),be(Es(m.value),{key:0,class:"size-6"})):I("",!0)],!0)],2)):I("",!0),f("div",{class:Ae(c.value)},[s.title?(g(),v("h3",{key:0,id:r.value,class:Ae(u.value)},ee(s.title),11,A_)):I("",!0),s.description||p.$slots.default?(g(),v("div",{key:1,class:Ae(d.value)},[s.description?(g(),v("p",M_,ee(s.description),1)):gt(p.$slots,"default",{key:1},void 0,!0)],2)):I("",!0)],2),p.$slots.actions?(g(),v("div",{key:1,class:Ae(h.value)},[gt(p.$slots,"actions",{},void 0,!0)],2)):I("",!0)],10,C_)])])])):I("",!0)]),_:3})]))}},un=y0(D_,[["__scopeId","data-v-2e078ad9"]]),E_=["title"],T_={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V_={key:1,class:"h-4 w-4 text-sky-600 dark:text-sky-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},O_={key:2},pr={__name:"CopyButton",props:{value:{type:String,required:!0},showLabel:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:s=>["default","ghost","bare"].includes(s)},successMessage:{type:String,default:"Copied to clipboard"}},setup(s){const e=s,t=tu(),i=ie(!1);let n=null;const r=W(()=>e.variant==="bare"?"inline-flex items-center text-sm font-medium transition-all":"inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-sm font-medium transition-all"),o=W(()=>e.variant==="ghost"?"text-zinc-600 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800":e.variant==="bare"?"gap-2 rounded-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-sky-500":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700"),l=async()=>{try{await navigator.clipboard.writeText(e.value),i.value=!0,t.success("Copied!",e.successMessage),n&&clearTimeout(n),n=setTimeout(()=>{i.value=!1},2e3)}catch(a){t.error("Copy failed","Could not copy to clipboard"),console.error("Failed to copy:",a)}};return(a,c)=>(g(),v("button",{type:"button",onClick:l,class:Ae([r.value,o.value,i.value&&"ring-2 ring-sky-500/20"]),title:i.value?"Copied!":"Copy to clipboard"},[gt(a.$slots,"default",{copied:i.value},()=>[i.value?(g(),v("svg",V_,[...c[1]||(c[1]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),v("svg",T_,[...c[0]||(c[0]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),s.showLabel?(g(),v("span",O_,ee(i.value?"Copied!":"Copy"),1)):I("",!0)])],10,E_))}},P_={class:"flex flex-col gap-3 rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm dark:border-zinc-800 dark:bg-zinc-900 sm:flex-row sm:items-center sm:justify-between"},$_={class:"min-w-0"},j_={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},L_={class:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400 truncate"},R_={class:"flex items-center gap-2"},I_={__name:"InfoCard",props:{label:{type:String,required:!0},value:{type:String,required:!0},copyable:{type:Boolean,default:!1},copyMessage:{type:String,default:"Copied!"}},setup(s){return(e,t)=>(g(),v("div",P_,[f("div",$_,[f("p",j_,ee(s.label),1),f("p",L_,ee(s.value),1)]),f("div",R_,[s.copyable?(g(),be(pr,{key:0,value:s.value,variant:"ghost","show-label":"","success-message":s.copyMessage},null,8,["value","success-message"])):I("",!0),gt(e.$slots,"actions")])]))}},B_={class:"mx-auto max-w-5xl p-10"},N_={class:"flex gap-3"},U_={key:1,class:"mt-10 grid gap-6 sm:grid-cols-2"},F_={key:2,class:"mt-12 overflow-hidden rounded-3xl bg-gradient-to-br from-sky-600 via-sky-500 to-teal-500 p-12 shadow-2xl shadow-sky-500/20"},z_={class:"space-y-4"},H_={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},W_={class:"flex gap-3 justify-end"},K_={key:0,class:"space-y-6"},q_={class:"text-lg font-semibold text-zinc-900 dark:text-white mb-3"},G_={class:"grid gap-4"},J_={class:"text-sm text-zinc-600 dark:text-zinc-400 font-mono bg-zinc-50 dark:bg-zinc-800 px-3 py-2 rounded-lg"},Y_={key:0,class:"grid grid-cols-2 gap-4"},Q_={class:"text-sm text-zinc-600 dark:text-zinc-400"},X_={key:0},Z_={class:"text-sm text-zinc-600 dark:text-zinc-400"},e4={class:"text-sm text-zinc-600 dark:text-zinc-400"},t4={class:"flex gap-3 justify-end"},s4={__name:"ProjectsView",setup(s){const e=Xa(),t=$r(),i=ie(!1),n=ie(!1),r=ie(!1),o=ie(""),l=ie(""),a=ie(!1),c=ie(null),u=ie({projects:[]}),d=ie(""),h=ie(null),m=O=>{if(!O)return"Unknown";const _=h.value?.project_types?.[O]?.label;return _||O.split("_").map(V=>V.charAt(0).toUpperCase()+V.slice(1)).join(" ")},y=async()=>{try{const _=await(await fetch("/api/settings/get")).json();u.value.projects=_.projects||[],d.value=_.global?.projects_root&&_.global.projects_root!==""?_.global.projects_root:""}catch(O){console.error("Failed to load settings:",O)}},x=()=>{t.path==="/projects/new"?i.value=!0:e.push("/projects/new")},S=()=>{i.value=!1,t.path==="/projects/new"&&e.push("/projects")},p=O=>{i.value=!1,y(),O?.id?e.push(`/project/${O.id}`):e.push("/projects")},j=()=>{n.value=!1,o.value="",l.value=""},B=O=>{c.value=O,r.value=!0},G=async()=>{l.value="",a.value=!0;try{const O=await fetch("/api/project/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_dir:o.value})}),_=await O.text();if(!_){l.value="Server returned empty response",a.value=!1;return}const V=JSON.parse(_);O.ok?(j(),y()):l.value=V.error||"Failed to import project"}catch(O){l.value="Network error: "+O.message}finally{a.value=!1}},N=async()=>{try{const _=await(await fetch("/api/settings-catalog")).json();_.error||(h.value=_)}catch(O){console.error("Failed to load settings catalog:",O)}};return ls(()=>{y(),N(),i.value=t.path==="/projects/new"}),Ne(()=>t.path,O=>{i.value=O==="/projects/new"},{immediate:!0}),(O,_)=>(g(),v("div",B_,[w(jr,{title:"Your Projects",description:"Framework projects you've created."},{actions:Z(()=>[f("div",N_,[w(Ye,{size:"lg",variant:"secondary",onClick:_[0]||(_[0]=V=>n.value=!0)},{default:Z(()=>[..._[7]||(_[7]=[he(" Import Project ",-1)])]),_:1}),w(Ye,{size:"lg",onClick:x},{default:Z(()=>[..._[8]||(_[8]=[he(" New Project ",-1)])]),_:1})])]),_:1}),d.value?(g(),be(I_,{key:0,class:"mt-6",label:"Projects Root",value:d.value,copyable:"","copy-message":"Root path copied"},{actions:Z(()=>[w(Ye,{size:"sm",variant:"secondary",onClick:_[1]||(_[1]=V=>vt(e).push("/settings"))},{default:Z(()=>[..._[9]||(_[9]=[he(" Edit ",-1)])]),_:1})]),_:1},8,["value"])):I("",!0),u.value.projects&&u.value.projects.length>0?(g(),v("div",U_,[(g(!0),v(me,null,Ee(u.value.projects,(V,K)=>(g(),be(v_,{key:K,project:V,"type-label":m(V.type),onView:oe=>O.$router.push(`/project/${V.id}`),onDetails:B},null,8,["project","type-label","onView"]))),128))])):(g(),v("div",F_,[f("div",{class:"relative"},[_[12]||(_[12]=f("div",{class:"absolute -right-10 -top-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),_[13]||(_[13]=f("div",{class:"absolute -bottom-10 -left-10 h-40 w-40 rounded-full bg-white/10 blur-3xl"},null,-1)),f("div",{class:"relative text-center"},[_[11]||(_[11]=Ga('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-white/20 backdrop-blur-sm"><svg class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div><h2 class="mt-6 text-3xl font-bold text-white">Ready to start?</h2><p class="mt-3 text-lg text-sky-50"> Create a new Framework project with a sensible structure and best practices built-in. </p>',3)),f("button",{onClick:x,class:"mt-8 inline-flex items-center gap-2 rounded-xl bg-white px-6 py-3 text-base font-semibold text-sky-600 shadow-xl transition-all duration-200 hover:scale-105 hover:shadow-2xl focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"},[..._[10]||(_[10]=[f("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),he(" Create Your First Project ",-1)])])])])])),i.value?(g(),be(XS,{key:3,"projects-root":d.value,onClose:S,onCreated:p},null,8,["projects-root"])):I("",!0),w(un,{modelValue:n.value,"onUpdate:modelValue":_[3]||(_[3]=V=>n.value=V),title:"Import Existing Project",size:"md"},{actions:Z(()=>[f("div",W_,[w(Ye,{variant:"secondary",onClick:j},{default:Z(()=>[..._[17]||(_[17]=[he(" Cancel ",-1)])]),_:1}),w(Ye,{variant:"primary",onClick:G,disabled:!o.value||a.value},{default:Z(()=>[he(ee(a.value?"Importing...":"Import"),1)]),_:1},8,["disabled"])])]),default:Z(()=>[f("div",z_,[_[16]||(_[16]=f("p",{class:"text-sm text-zinc-600 dark:text-zinc-400"}," Import an existing Framework project that isn't in your registry yet. ",-1)),f("div",null,[_[14]||(_[14]=f("label",{for:"import-path",class:"block text-sm font-medium text-zinc-900 dark:text-white mb-2"}," Project Directory Path ",-1)),nt(f("input",{id:"import-path","onUpdate:modelValue":_[2]||(_[2]=V=>o.value=V),type:"text",placeholder:"/Users/you/projects/my-framework-project",class:Ae(["block w-full rounded-lg border-0 px-4 py-2.5 text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 placeholder:text-zinc-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 dark:bg-zinc-800 dark:text-white dark:ring-zinc-700 dark:placeholder:text-zinc-500 dark:focus:ring-sky-500 sm:text-sm sm:leading-6 font-mono",{"ring-red-500 dark:ring-red-500":l.value}])},null,2),[[kr,o.value]]),_[15]||(_[15]=f("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-500"}," Enter the full path to the Framework project directory ",-1)),l.value?(g(),v("p",H_,ee(l.value),1)):I("",!0)])])]),_:1},8,["modelValue"]),w(un,{modelValue:r.value,"onUpdate:modelValue":_[6]||(_[6]=V=>r.value=V),title:"Project Details",size:"lg"},{actions:Z(()=>[f("div",t4,[w(Ye,{variant:"secondary",onClick:_[4]||(_[4]=V=>r.value=!1)},{default:Z(()=>[..._[22]||(_[22]=[he(" Close ",-1)])]),_:1}),w(Ye,{variant:"primary",onClick:_[5]||(_[5]=V=>{O.$router.push(`/project/${c.value.id}`),r.value=!1})},{default:Z(()=>[..._[23]||(_[23]=[he(" View Full Details ",-1)])]),_:1})])]),default:Z(()=>[c.value?(g(),v("div",K_,[f("div",null,[f("h3",q_,ee(c.value.name),1),w(su,{variant:"sky",class:"mb-4"},{default:Z(()=>[he(ee(c.value.type),1)]),_:1})]),f("div",G_,[f("div",null,[_[18]||(_[18]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Location ",-1)),f("p",J_,ee(c.value.path),1)]),c.value.author?(g(),v("div",Y_,[f("div",null,[_[19]||(_[19]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Author ",-1)),f("p",Q_,ee(c.value.author),1)]),c.value.author_email?(g(),v("div",X_,[_[20]||(_[20]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Email ",-1)),f("p",Z_,ee(c.value.author_email),1)])):I("",!0)])):I("",!0),f("div",null,[_[21]||(_[21]=f("label",{class:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1"}," Created ",-1)),f("p",e4,ee(c.value.created),1)])])])):I("",!0)]),_:1},8,["modelValue"])]))}},i4=["for"],n4={class:"mt-2 grid grid-cols-1"},r4=["id","value"],o4={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},si={__name:"Select",props:{id:{type:String,default:()=>`select-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:[String,Number],default:""},label:{type:String,default:null},hint:{type:String,default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(g(),v("div",null,[s.label?(g(),v("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},ee(s.label),9,i4)):I("",!0),f("div",n4,[f("select",{id:s.id,value:s.modelValue,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",i.target.value)),class:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-sky-500"},[gt(e.$slots,"default")],40,r4),t[1]||(t[1]=f("svg",{viewBox:"0 0 16 16",fill:"currentColor","data-slot":"icon","aria-hidden":"true",class:"pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400"},[f("path",{d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd","fill-rule":"evenodd"})],-1))]),s.hint?(g(),v("p",o4,ee(s.hint),1)):I("",!0)]))}},l4={class:"flex items-center gap-3"},a4=["id","name","checked","disabled","aria-label"],u4={key:0,class:"text-sm/6"},c4=["for"],d4=["id"],Ue={__name:"Toggle",props:{id:{type:String,default:()=>`toggle-${Math.random().toString(36).substr(2,9)}`},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},label:{type:String,default:null},description:{type:String,default:null},ariaLabel:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,i=e,n=r=>{if(!t.disabled){const o=r.target.checked;i("update:modelValue",o),i("change",o)}};return(r,o)=>(g(),v("div",l4,[f("div",{class:Ae(["group relative inline-flex w-11 shrink-0 rounded-full p-0.5 inset-ring inset-ring-gray-900/5 outline-offset-2 transition-colors duration-200 ease-in-out dark:inset-ring-white/10",[s.modelValue?"bg-sky-600 outline-sky-600 dark:bg-sky-500 dark:outline-sky-500":"bg-gray-200 outline-sky-600 dark:bg-white/5 dark:outline-sky-500",s.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer"]])},[f("span",{class:Ae(["size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",{"translate-x-5":s.modelValue}])},null,2),f("input",{id:s.id,type:"checkbox",name:s.name,checked:s.modelValue,disabled:s.disabled,"aria-label":s.ariaLabel||s.label,class:"absolute inset-0 appearance-none focus:outline-hidden cursor-pointer disabled:cursor-not-allowed",onChange:n},null,40,a4)],2),s.label||s.description?(g(),v("div",u4,[s.label?(g(),v("label",{key:0,for:s.id,class:Ae(["font-medium text-gray-900 cursor-pointer dark:text-white",{"cursor-not-allowed opacity-50":s.disabled}])},ee(s.label),11,c4)):I("",!0),s.description?(g(),v("p",{key:1,id:`${s.id}-description`,class:"text-gray-500 dark:text-gray-400"},ee(s.description),9,d4)):I("",!0)])):I("",!0)]))}},f4={class:"flex items-center"},h4=["id","name","value","checked"],p4=["for"],bl={__name:"Radio",props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0},modelValue:{type:[String,Number,Boolean],default:null}},emits:["update:modelValue"],setup(s){return(e,t)=>(g(),v("div",f4,[f("input",{id:s.id,type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,onChange:t[0]||(t[0]=i=>e.$emit("update:modelValue",s.value)),class:"relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-sky-600 checked:bg-sky-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-sky-500 dark:checked:bg-sky-500 dark:focus-visible:outline-sky-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden"},null,40,h4),f("label",{for:s.id,class:"ml-3 block text-sm/6 font-medium text-gray-900 dark:text-white"},[gt(e.$slots,"default")],8,p4)]))}},m4={class:"text-sm/6 font-semibold text-gray-900 dark:text-white"},g4={key:0,class:"mt-1 text-sm/6 text-gray-600 dark:text-gray-400"},v4={class:"mt-6 space-y-6"},Pu={__name:"RadioGroup",props:{legend:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(e,t)=>(g(),v("fieldset",null,[f("legend",m4,ee(s.legend),1),s.description?(g(),v("p",g4,ee(s.description),1)):I("",!0),f("div",v4,[gt(e.$slots,"default")])]))}},y4={class:"space-y-4"},b4={class:"flex items-start gap-4"},k4={class:"flex-1"},x4=["onClick"],_s={__name:"Repeater",props:{modelValue:{type:Array,default:()=>[]},addLabel:{type:String,default:"Add Item"},defaultItem:{type:[Object,Function],default:()=>({})}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=()=>{const l=typeof t.defaultItem=="function"?t.defaultItem():{...t.defaultItem,_id:Date.now()};i("update:modelValue",[...t.modelValue,l])},r=l=>{const a=t.modelValue.filter((c,u)=>u!==l);i("update:modelValue",a)},o=(l,a,c)=>{const u=[...t.modelValue];u[l]={...u[l],[a]:c},i("update:modelValue",u)};return(l,a)=>(g(),v("div",y4,[(g(!0),v(me,null,Ee(s.modelValue,(c,u)=>(g(),v("div",{key:c._id||u,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[f("div",b4,[f("div",k4,[gt(l.$slots,"default",{item:c,index:u,update:(d,h)=>o(u,d,h)})]),f("button",{type:"button",onClick:d=>r(u),class:"shrink-0 rounded-md p-1.5 text-gray-400 transition hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-900/20 dark:hover:text-red-400",title:"Remove"},[...a[0]||(a[0]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,x4)])]))),128)),w(Ye,{variant:"secondary",size:"sm",onClick:n,class:"inline-flex items-center"},{default:Z(()=>[a[1]||(a[1]=f("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),he(" "+ee(s.addLabel),1)]),_:1})]))}};let Mc=[],b0=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?b0:Mc).push(t=t+s[e])})();function w4(s){if(s<768)return!1;for(let e=0,t=Mc.length;;){let i=e+t>>1;if(s<Mc[i])t=i;else if(s>=b0[i])e=i+1;else return!0;if(e==t)return!1}}function Zh(s){return s>=127462&&s<=127487}const ep=8205;function S4(s,e,t=!0,i=!0){return(t?k0:_4)(s,e,i)}function k0(s,e,t){if(e==s.length)return e;e&&x0(s.charCodeAt(e))&&w0(s.charCodeAt(e-1))&&e--;let i=$u(s,e);for(e+=tp(i);e<s.length;){let n=$u(s,e);if(i==ep||n==ep||t&&w4(n))e+=tp(n),i=n;else if(Zh(n)){let r=0,o=e-2;for(;o>=0&&Zh($u(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function _4(s,e,t){for(;e>0;){let i=k0(s,e-2,t);if(i<e)return i;e--}return 0}function $u(s,e){let t=s.charCodeAt(e);if(!w0(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return x0(i)?(t-55296<<10)+(i-56320)+65536:t}function x0(s){return s>=56320&&s<57344}function w0(s){return s>=55296&&s<56320}function tp(s){return s<65536?1:2}class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=_r(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),vi.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=_r(this,e,t);let i=[];return this.decompose(e,t,i,0),vi.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new po(this),r=new po(e);for(let o=t,l=t;;){if(n.next(o),r.next(o),o=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new po(this,e)}iterRange(e,t=this.length){return new S0(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new _0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new Lt(e):vi.from(Lt.split(e,[]))}}class Lt extends ut{constructor(e,t=C4(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.text[r],l=n+o.length;if((t?i:l)>=e)return new A4(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new Lt(sp(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Jl(r.text,o.text.slice(),0,r.length);if(l.length<=32)i.push(new Lt(l,o.length+r.length));else{let a=l.length>>1;i.push(new Lt(l.slice(0,a)),new Lt(l.slice(a)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof Lt))return super.replace(e,t,i);[e,t]=_r(this,e,t);let n=Jl(this.text,Jl(i.text,sp(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new Lt(n,r):vi.from(Lt.split(n,[]),r)}sliceString(e,t=this.length,i=`
`){[e,t]=_r(this,e,t);let n="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let l=this.text[o],a=r+l.length;r>e&&o&&(n+=i),e<a&&t>r&&(n+=l.slice(Math.max(0,e-r),t-r)),r=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,i.length==32&&(t.push(new Lt(i,n)),i=[],n=-1);return n>-1&&t.push(new Lt(i,n)),t}}class vi extends ut{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let r=0;;r++){let o=this.children[r],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let l=this.children[r],a=o+l.length;if(e<=a&&t>=o){let c=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=a+1}}replace(e,t,i){if([e,t]=_r(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],l=r+o.length;if(e>=r&&t<=l){let a=o.replace(e-r,t-r,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[n]=a,new vi(u,this.length-(t-e)+i.length)}return super.replace(r,l,a)}r=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=_r(this,e,t);let n="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let l=this.children[r],a=o+l.length;o>e&&r&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof vi))return 0;let i=0,[n,r,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==o||r==l)return i;let a=this.children[n],c=e.children[r];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let y of e)y.flatten(m);return new Lt(m,t)}let n=Math.max(32,i>>5),r=n<<1,o=n>>1,l=[],a=0,c=-1,u=[];function d(m){let y;if(m.lines>r&&m instanceof vi)for(let x of m.children)d(x);else m.lines>o&&(a>o||!a)?(h(),l.push(m)):m instanceof Lt&&a&&(y=u[u.length-1])instanceof Lt&&m.lines+y.lines<=32?(a+=m.lines,c+=m.length+1,u[u.length-1]=new Lt(y.text.concat(m.text),y.length+1+m.length)):(a+m.lines>n&&h(),a+=m.lines,c+=m.length+1,u.push(m))}function h(){a!=0&&(l.push(u.length==1?u[0]:vi.from(u,c)),c=-1,a=u.length=0)}for(let m of e)d(m);return h(),l.length==1?l[0]:new vi(l,t)}}ut.empty=new Lt([""],0);function C4(s){let e=-1;for(let t of s)e+=t.length+1;return e}function Jl(s,e,t=0,i=1e9){for(let n=0,r=0,o=!0;r<s.length&&n<=i;r++){let l=s[r],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function sp(s,e,t){return Jl(s,[""],e,t)}class po{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Lt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],o=r>>1,l=n instanceof Lt?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Lt){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Lt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class S0{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new po(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class _0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},po.prototype[Symbol.iterator]=S0.prototype[Symbol.iterator]=_0.prototype[Symbol.iterator]=function(){return this});class A4{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function _r(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function Xt(s,e,t=!0,i=!0){return S4(s,e,t,i)}function M4(s){return s>=56320&&s<57344}function D4(s){return s>=55296&&s<56320}function Cs(s,e){let t=s.charCodeAt(e);if(!D4(t)||e+1==s.length)return t;let i=s.charCodeAt(e+1);return M4(i)?(t-55296<<10)+(i-56320)+65536:t}function Kd(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function yi(s){return s<65536?1:2}const Dc=/\r\n?|\n/;var vs=(function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s})(vs||(vs={}));class Si{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,r),n+=r):n+=o,i+=r}}iterChangedRanges(e,t=!1){Ec(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new Si(e)}composeDesc(e){return this.empty?e:e.empty?this:C0(this,e)}mapDesc(e,t=!1){return e.empty?this:Tc(this,e,t)}mapPos(e,t=-1,i=vs.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=n+l;if(a<0){if(c>e)return r+(e-n);r+=l}else{if(i!=vs.Simple&&c>=e&&(i==vs.TrackDel&&n<e&&c>e||i==vs.TrackBefore&&n<e||i==vs.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==n||t<0?r:r+a;r+=a}n=c}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=this.sections[i++],o=this.sections[i++],l=n+r;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Si(e)}static create(e){return new Si(e)}}class Ut extends Si{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ec(this,(t,i,n,r,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return Tc(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(ut.empty);i.push(o?e.slice(r,r+o):ut.empty)}r+=o}return new Ut(t,i)}compose(e){return this.empty?e:e.empty?this:C0(this,e,!0)}map(e,t=!1){return e.empty?this:Tc(this,e,t,!0)}iterChanges(e,t=!1){Ec(this,e,t)}get desc(){return Si.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new Oo(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,a-l);ts(n,u,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;ts(t,u,d),d>0&&nn(i,t,r.text),r.forward(u),l+=u}let c=e[o++];for(;l<c;){if(r.done)break e;let u=Math.min(r.len,c-l);ts(t,u,-1),ts(n,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),l+=u}}return{changes:new Ut(t,i),filtered:Si.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],o=0,l=null;function a(u=!1){if(!u&&!n.length)return;o<t&&ts(n,t-o,-1);let d=new Ut(n,r);l=l?l.compose(d.map(l)):d,n=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof Ut){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:d,to:h=d,insert:m}=u;if(d>h||d<0||h>t)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${t})`);let y=m?typeof m=="string"?ut.of(m.split(i||Dc)):m:ut.empty,x=y.length;if(d==h&&x==0)return;d<o&&a(),d>o&&ts(n,d-o,-1),ts(n,h-d,x),nn(r,n,y),o=h}}return c(e),a(!l),l}static empty(e){return new Ut(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;i.length<n;)i.push(ut.empty);i[n]=ut.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new Ut(t,i)}static createSet(e,t){return new Ut(e,t)}}function ts(s,e,t,i=!1){if(e==0&&t<=0)return;let n=s.length-2;n>=0&&t<=0&&t==s[n+1]?s[n]+=e:n>=0&&e==0&&s[n]==0?s[n+1]+=t:i?(s[n]+=e,s[n+1]+=t):s.push(e,t)}function nn(s,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<i;)s.push(ut.empty);s.push(t)}}function Ec(s,e,t){let i=s.inserted;for(let n=0,r=0,o=0;o<s.sections.length;){let l=s.sections[o++],a=s.sections[o++];if(a<0)n+=l,r+=l;else{let c=n,u=r,d=ut.empty;for(;c+=l,u+=a,a&&i&&(d=d.append(i[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)l=s.sections[o++],a=s.sections[o++];e(n,c,r,u,d),n=c,r=u}}}function Tc(s,e,t,i=!1){let n=[],r=i?[]:null,o=new Oo(s),l=new Oo(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);ts(n,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(ts(n,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(ts(n,0,o.ins),r&&nn(r,n,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let d=Math.min(u,l.len);c+=d,u-=d,l.forward(d)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;ts(n,c,a<o.i?o.ins:0),r&&a<o.i&&nn(r,n,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return r?Ut.createSet(n,r):Si.create(n);throw new Error("Mismatched change set lengths")}}}function C0(s,e,t=!1){let i=[],n=t?[]:null,r=new Oo(s),o=new Oo(e);for(let l=!1;;){if(r.done&&o.done)return n?Ut.createSet(i,n):Si.create(i);if(r.ins==0)ts(i,r.len,0,l),r.next();else if(o.len==0&&!o.done)ts(i,0,o.ins,l),n&&nn(n,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ts(i,a,u,l),n&&u&&nn(n,i,o.text)}else o.ins==-1?(ts(i,r.off?0:r.len,a,l),n&&nn(n,i,r.textBit(a))):(ts(i,r.off?0:r.len,o.off?0:o.ins,l),n&&!o.off&&nn(n,i,o.text));l=(r.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),r.forward2(a),o.forward(a)}}}}class Oo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ut.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?ut.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class jn{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new jn(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return fe.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return fe.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,t,i){return new jn(e,t,i)}}class fe{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:fe.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,t=!0){return fe.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,fe.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(t=>jn.fromJSON(t)),e.main)}static single(e,t=e){return new fe([fe.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return fe.normalized(e.slice(),t);i=r.to}return new fe(e,t)}static cursor(e,t=0,i,n){return jn.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let r=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?jn.create(t,e,48|r):jn.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort((n,r)=>n.from-r.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let l=o.from,a=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?fe.range(a,l):fe.range(l,a))}}return new fe(e,t)}}function A0(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let qd=0;class je{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=qd++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new je(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Gd),!!e.static,e.enables)}of(e){return new Yl([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Yl(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Yl(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Gd(s,e){return s==e||s.length==e.length&&s.every((t,i)=>t===e[i])}class Yl{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=qd++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,o=e[r]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?a=!0:d=="selection"?c=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||Vc(d,u)){let m=i(d);if(l?!ip(m,d.values[o],n):!n(m,d.values[o]))return d.values[o]=m,1}return 0},reconfigure:(d,h)=>{let m,y=h.config.address[r];if(y!=null){let x=va(h,y);if(this.dependencies.every(S=>S instanceof je?h.facet(S)===d.facet(S):S instanceof Zt?h.field(S,!1)==d.field(S,!1):!0)||(l?ip(m=i(d),x,n):n(m=i(d),x)))return d.values[o]=x,0}else m=i(d);return d.values[o]=m,1}}}}function ip(s,e,t){if(s.length!=e.length)return!1;for(let i=0;i<s.length;i++)if(!t(s[i],e[i]))return!1;return!0}function Vc(s,e){let t=!1;for(let i of e)mo(s,i)&1&&(t=!0);return t}function E4(s,e,t){let i=t.map(a=>s[a.id]),n=t.map(a=>a.type),r=i.filter(a=>!(a&1)),o=s[e.id]>>1;function l(a){let c=[];for(let u=0;u<i.length;u++){let d=va(a,i[u]);if(n[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(a){for(let c of i)mo(a,c);return a.values[o]=l(a),1},update(a,c){if(!Vc(a,r))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=Vc(a,i),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&Gd(t,d))return a.values[o]=h,0;let m=l(a);return e.compare(m,h)?(a.values[o]=h,0):(a.values[o]=m,1)}}}const kl=je.define({static:!0});class Zt{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new Zt(qd++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(kl).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let r=i.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>{let r=i.facet(kl),o=n.facet(kl),l;return(l=r.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[t]=l.create(i),1):n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,kl.of({field:this,create:e})]}get extension(){return this}}const On={lowest:4,low:3,default:2,high:1,highest:0};function Gr(s){return e=>new M0(e,s)}const Gn={highest:Gr(On.highest),high:Gr(On.high),default:Gr(On.default),low:Gr(On.low),lowest:Gr(On.lowest)};class M0{constructor(e,t){this.inner=e,this.prec=t}}class iu{of(e){return new Oc(this,e)}reconfigure(e){return iu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Oc{constructor(e,t){this.compartment=e,this.inner=t}}class ga{constructor(e,t,i,n,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),o=new Map;for(let h of T4(e,t,o))h instanceof Zt?n.push(h):(r[h.facet.id]||(r[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of n)l[h.id]=c.length<<1,c.push(m=>h.slot(m));let u=i?.config.facets;for(let h in r){let m=r[h],y=m[0].facet,x=u&&u[h]||[];if(m.every(S=>S.type==0))if(l[y.id]=a.length<<1|1,Gd(x,m))a.push(i.facet(y));else{let S=y.combine(m.map(p=>p.value));a.push(i&&y.compare(S,i.facet(y))?i.facet(y):S)}else{for(let S of m)S.type==0?(l[S.id]=a.length<<1|1,a.push(S.value)):(l[S.id]=c.length<<1,c.push(p=>S.dynamicSlot(p)));l[y.id]=c.length<<1,c.push(S=>E4(S,y,m))}}let d=c.map(h=>h(l));return new ga(e,o,d,l,a,r)}}function T4(s,e,t){let i=[[],[],[],[],[]],n=new Map;function r(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof Oc&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let c of o)r(c,l);else if(o instanceof Oc){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,l)}else if(o instanceof M0)r(o.inner,o.prec);else if(o instanceof Zt)i[l].push(o),o.provides&&r(o.provides,l);else if(o instanceof Yl)i[l].push(o),o.facet.extensions&&r(o.facet.extensions,On.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,l)}}return r(s,On.default),i.reduce((o,l)=>o.concat(l))}function mo(s,e){if(e&1)return 2;let t=e>>1,i=s.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;s.status[t]=4;let n=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|n}function va(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const D0=je.define(),Pc=je.define({combine:s=>s.some(e=>e),static:!0}),E0=je.define({combine:s=>s.length?s[0]:void 0,static:!0}),T0=je.define(),V0=je.define(),O0=je.define(),P0=je.define({combine:s=>s.length?s[0]:!1});class Hi{constructor(e,t){this.type=e,this.value=t}static define(){return new V4}}class V4{of(e){return new Hi(this,e)}}class O4{constructor(e){this.map=e}of(e){return new et(this,e)}}class et{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new et(this.type,t)}is(e){return this.type==e}static define(e={}){return new O4(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let r=n.map(t);r&&i.push(r)}return i}}et.reconfigure=et.define();et.appendConfig=et.define();class Ft{constructor(e,t,i,n,r,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&A0(i,t.newLength),r.some(l=>l.type==Ft.time)||(this.annotations=r.concat(Ft.time.of(Date.now())))}static create(e,t,i,n,r,o){return new Ft(e,t,i,n,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ft.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ft.time=Hi.define();Ft.userEvent=Hi.define();Ft.addToHistory=Hi.define();Ft.remote=Hi.define();function P4(s,e){let t=[];for(let i=0,n=0;;){let r,o;if(i<s.length&&(n==e.length||e[n]>=s[i]))r=s[i++],o=s[i++];else if(n<e.length)r=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function $0(s,e,t){var i;let n,r,o;return t?(n=e.changes,r=Ut.empty(e.changes.length),o=s.changes.compose(e.changes)):(n=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(r):(i=s.selection)===null||i===void 0?void 0:i.map(n),effects:et.mapEffects(s.effects,n).concat(et.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function $c(s,e,t){let i=e.selection,n=mr(e.annotations);return e.userEvent&&(n=n.concat(Ft.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ut?e.changes:Ut.of(e.changes||[],t,s.facet(E0)),selection:i&&(i instanceof fe?i:fe.single(i.anchor,i.head)),effects:mr(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function j0(s,e,t){let i=$c(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;i=$0(i,$c(s,e[r],o?i.changes.newLength:s.doc.length),o)}let n=Ft.create(s,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return j4(t?$4(n):n)}function $4(s){let e=s.startState,t=!0;for(let n of e.facet(T0)){let r=n(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:P4(t,r))}if(t!==!0){let n,r;if(t===!1)r=s.changes.invertedDesc,n=Ut.empty(e.doc.length);else{let o=s.changes.filter(t);n=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=Ft.create(e,n,s.selection&&s.selection.map(r),et.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let i=e.facet(V0);for(let n=i.length-1;n>=0;n--){let r=i[n](s);r instanceof Ft?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Ft?s=r[0]:s=j0(e,mr(r),!1)}return s}function j4(s){let e=s.startState,t=e.facet(O0),i=s;for(let n=t.length-1;n>=0;n--){let r=t[n](s);r&&Object.keys(r).length&&(i=$0(i,$c(e,r,s.changes.newLength),!0))}return i==s?s:Ft.create(e,s.changes,s.selection,i.effects,i.annotations,i.scrollIntoView)}const L4=[];function mr(s){return s==null?L4:Array.isArray(s)?s:[s]}var Vt=(function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s})(Vt||(Vt={}));const R4=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let jc;try{jc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function I4(s){if(jc)return jc.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||R4.test(t)))return!0}return!1}function B4(s){return e=>{if(!/\S/.test(e))return Vt.Space;if(I4(e))return Vt.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return Vt.Word;return Vt.Other}}class lt{constructor(e,t,i,n,r,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)mo(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return mo(this,i),va(this,i)}update(...e){return j0(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(iu.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,c)=>n.set(c,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(et.reconfigure)?(t=null,i=l.value):l.is(et.appendConfig)&&(t=null,i=mr(i).concat(l.value));let r;t?r=e.startState.values.slice():(t=ga.resolve(i,n,this),r=new lt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(Pc)?e.newSelection:e.newSelection.asSingle();new lt(t,e.newDoc,o,r,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:fe.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],o=mr(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),u=c.map(n);for(let h=0;h<l;h++)r[h]=r[h].map(u);let d=n.mapDesc(c,!0);r.push(a.range.map(d)),n=n.compose(u),o=et.mapEffects(o,u).concat(et.mapEffects(mr(a.effects),d))}return{changes:n,selection:fe.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ut?e:Ut.of(e,this.doc.length,this.facet(lt.lineSeparator))}toText(e){return ut.of(e.split(this.facet(lt.lineSeparator)||Dc))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(mo(this,t),va(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Zt&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],l=e[r];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return lt.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=ga.resolve(e.extensions||[],new Map),i=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(t.staticFacet(lt.lineSeparator)||Dc)),n=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return A0(n,i.length),t.staticFacet(Pc)||(n=n.asSingle()),new lt(t,i,n,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(lt.tabSize)}get lineBreak(){return this.facet(lt.lineSeparator)||`
`}get readOnly(){return this.facet(P0)}phrase(e,...t){for(let i of this.facet(lt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let r=+(n||1);return!r||r>t.length?i:t[r-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(D0))for(let o of r(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return B4(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Xt(t,o,!1);if(r(t.slice(a,o))!=Vt.Word)break;o=a}for(;l<n;){let a=Xt(t,l);if(r(t.slice(l,a))!=Vt.Word)break;l=a}return o==l?null:fe.range(o+i,l+i)}}lt.allowMultipleSelections=Pc;lt.tabSize=je.define({combine:s=>s.length?s[0]:4});lt.lineSeparator=E0;lt.readOnly=P0;lt.phrases=je.define({compare(s,e){let t=Object.keys(s),i=Object.keys(e);return t.length==i.length&&t.every(n=>s[n]==e[n])}});lt.languageData=D0;lt.changeFilter=T0;lt.transactionFilter=V0;lt.transactionExtender=O0;iu.reconfigure=et.define();function Ci(s,e,t={}){let i={};for(let n of s)for(let r of Object.keys(n)){let o=n[r],l=i[r];if(l===void 0)i[r]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,r))i[r]=t[r](l,o);else throw new Error("Config merge conflict for field "+r)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Un{eq(e){return this==e}range(e,t=e){return Lc.create(e,t,this)}}Un.prototype.startSide=Un.prototype.endSide=0;Un.prototype.point=!1;Un.prototype.mapMode=vs.TrackDel;let Lc=class L0{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new L0(e,t,i)}};function Rc(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Jd{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let o=n,l=r.length;;){if(o==l)return o;let a=o+l>>1,c=r[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(n(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let i=[],n=[],r=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,d=this.to[a]+e,h,m;if(u==d){let y=t.mapPos(u,c.startSide,c.mapMode);if(y==null||(h=m=y,c.startSide!=c.endSide&&(m=t.mapPos(u,c.endSide),m<h)))continue}else if(h=t.mapPos(u,c.startSide),m=t.mapPos(d,c.endSide),h>m||h==m&&c.startSide>0&&c.endSide<=0)continue;(m-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(l=Math.max(l,m-h)),i.push(c),n.push(h-o),r.push(m-o))}return{mapped:i.length?new Jd(n,r,i,l):null,pos:o}}}class at{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new at(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Rc)),this.isEmpty)return t.length?at.of(t):this;let l=new R0(this,null,-1).goto(0),a=0,c=[],u=new Ni;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let d=t[a++];u.addInner(d.from,d.to,d.value)||c.push(d)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||r<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||r<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(Lc.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?at.empty:this.nextLayer.update({add:c,filter:o,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:d}=a.map(l,e);u&&(n=Math.max(n,u.maxPoint),t.push(u),i.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new at(i,t,r||at.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],o=this.chunk[n];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Po.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Po.from(e).goto(t)}static compare(e,t,i,n,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=np(o,l,i),c=new Jr(o,a,r),u=new Jr(l,a,r);i.iterGaps((d,h,m)=>rp(c,d,u,h,m,n)),i.empty&&i.length==0&&rp(c,0,u,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let l=np(r,o),a=new Jr(r,l,0).goto(i),c=new Jr(o,l,0).goto(i);for(;;){if(a.to!=c.to||!Ic(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>n)return!0;a.next(),c.next()}}static spans(e,t,i,n,r=-1){let o=new Jr(e,null,r).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);n.point(l,c,o.point,u,d,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(n.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Ni;for(let n of e instanceof Lc?[e]:t?N4(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return at.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=at.empty;n=n.nextLayer)t=new at(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}at.empty=new at([],[],null,-1);function N4(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let i=s[t];if(Rc(e,i)>0)return s.slice().sort(Rc);e=i}return s}at.empty.nextLayer=at.empty;class Ni{finishChunk(e){this.chunks.push(new Jd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ni)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(at.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=at.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function np(s,e,t){let i=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let n=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let l=i.get(r.chunk[o]);l!=null&&(t?t.mapPos(l):l)==r.chunkPos[o]&&!t?.touchesRange(l,l+r.chunk[o].length)&&n.add(r.chunk[o])}return n}class R0{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Po{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new R0(o,t,i,r));return n.length==1?n[0]:new Po(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)ju(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)ju(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ju(this.heap,0)}}}function ju(s,e){for(let t=s[e];;){let i=(e<<1)+1;if(i>=s.length)break;let n=s[i];if(i+1<s.length&&n.compare(s[i+1])>=0&&(n=s[i+1],i++),t.compare(n)<0)break;s[i]=t,s[e]=n,e=i}}class Jr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Po.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){xl(this.active,e),xl(this.activeTo,e),xl(this.activeRank,e),this.minActive=op(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;wl(this.active,t,i),wl(this.activeTo,t,n),wl(this.activeRank,t,r),e&&wl(e,t,this.cursor.from),this.minActive=op(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&xl(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function rp(s,e,t,i,n,r){s.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let c=s.to+a-t.to,u=c||s.endSide-t.endSide,d=u<0?s.to+a:t.to,h=Math.min(d,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&Ic(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(l,h,s.point,t.point):h>l&&!Ic(s.active,t.active)&&r.compareRange(l,h,s.active,t.active),d>o)break;(c||s.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),l=d,u<=0&&s.next(),u>=0&&t.next()}}function Ic(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function xl(s,e){for(let t=e,i=s.length-1;t<i;t++)s[t]=s[t+1];s.pop()}function wl(s,e,t){for(let i=s.length-1;i>=e;i--)s[i+1]=s[i];s[e]=t}function op(s,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||s[n].endSide-s[t].endSide)<0&&(t=n,i=e[n]);return t}function Lr(s,e,t=s.length){let i=0;for(let n=0;n<t&&n<s.length;)s.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Xt(s,n));return i}function Bc(s,e,t,i){for(let n=0,r=0;;){if(r>=e)return n;if(n==s.length)break;r+=s.charCodeAt(n)==9?t-r%t:1,n=Xt(s,n)}return i===!0?-1:s.length}const Nc="",lp=typeof Symbol>"u"?"__"+Nc:Symbol.for(Nc),Uc=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class pn{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,l,a,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&l==null)return a.push(o[0]+";");for(let m in l){let y=l[m];if(/&/.test(m))r(m.split(/,\s*/).map(x=>o.map(S=>x.replace(/&/,S))).reduce((x,S)=>x.concat(S)),y,a);else if(y&&typeof y=="object"){if(!d)throw new RangeError("The value of a property ("+m+") should be a primitive value.");r(n(m),y,u,h)}else y!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+y+";")}(u.length||h)&&a.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ap[lp]||1;return ap[lp]=e+1,Nc+e.toString(36)}static mount(e,t,i){let n=e[Uc],r=i&&i.nonce;n?r&&n.setNonce(r):n=new U4(e,r),n.mount(Array.isArray(t)?t:[t],e)}}let up=new Map;class U4{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let r=up.get(i);if(r)return e[Uc]=r;this.sheet=new n.CSSStyleSheet,up.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Uc]=this}mount(e,t){let i=this.sheet,n=0,r=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],n++)}else{for(;r<a;)n+=this.modules[r++].rules.length;n+=l.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var mn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},F4=typeof navigator<"u"&&/Mac/.test(navigator.platform),z4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jt=0;Jt<10;Jt++)mn[48+Jt]=mn[96+Jt]=String(Jt);for(var Jt=1;Jt<=24;Jt++)mn[Jt+111]="F"+Jt;for(var Jt=65;Jt<=90;Jt++)mn[Jt]=String.fromCharCode(Jt+32),$o[Jt]=String.fromCharCode(Jt);for(var Lu in mn)$o.hasOwnProperty(Lu)||($o[Lu]=mn[Lu]);function H4(s){var e=F4&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||z4&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?$o:mn)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function wt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?s.setAttribute(i,n):n!=null&&(s[i]=n)}e++}for(;e<arguments.length;e++)I0(s,arguments[e]);return s}function I0(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)I0(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}let ms=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Fc=typeof document<"u"?document:{documentElement:{style:{}}};const zc=/Edge\/(\d+)/.exec(ms.userAgent),B0=/MSIE \d/.test(ms.userAgent),Hc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ms.userAgent),nu=!!(B0||Hc||zc),cp=!nu&&/gecko\/(\d+)/i.test(ms.userAgent),Ru=!nu&&/Chrome\/(\d+)/.exec(ms.userAgent),W4="webkitFontSmoothing"in Fc.documentElement.style,Wc=!nu&&/Apple Computer/.test(ms.vendor),dp=Wc&&(/Mobile\/\w+/.test(ms.userAgent)||ms.maxTouchPoints>2);var Ve={mac:dp||/Mac/.test(ms.platform),windows:/Win/.test(ms.platform),linux:/Linux|X11/.test(ms.platform),ie:nu,ie_version:B0?Fc.documentMode||6:Hc?+Hc[1]:zc?+zc[1]:0,gecko:cp,gecko_version:cp?+(/Firefox\/(\d+)/.exec(ms.userAgent)||[0,0])[1]:0,chrome:!!Ru,chrome_version:Ru?+Ru[1]:0,ios:dp,android:/Android\b/.test(ms.userAgent),webkit_version:W4?+(/\bAppleWebKit\/(\d+)/.exec(ms.userAgent)||[0,0])[1]:0,safari:Wc,safari_version:Wc?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ms.userAgent)||[0,0])[1]:0,tabSize:Fc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function jo(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function Kc(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function Ql(s,e){if(!e.anchorNode)return!1;try{return Kc(s,e.anchorNode)}catch{return!1}}function Lo(s){return s.nodeType==3?zn(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function go(s,e,t,i){return t?fp(s,e,t,i,-1)||fp(s,e,t,i,1):!1}function Fn(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function ya(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function fp(s,e,t,i,n){for(;;){if(s==t&&e==i)return!0;if(e==(n<0?0:_i(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=Fn(s)+(n<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(n<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=n<0?_i(s):0}else return!1}}function _i(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function ru(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function K4(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function N0(s,e){let t=e.width/s.offsetWidth,i=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-s.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function q4(s,e,t,i,n,r,o,l){let a=s.ownerDocument,c=a.defaultView||window;for(let u=s,d=!1;u&&!d;)if(u.nodeType==1){let h,m=u==a.body,y=1,x=1;if(m)h=K4(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let j=u.getBoundingClientRect();({scaleX:y,scaleY:x}=N0(u,j)),h={left:j.left,right:j.left+u.clientWidth*y,top:j.top,bottom:j.top+u.clientHeight*x}}let S=0,p=0;if(n=="nearest")e.top<h.top?(p=e.top-(h.top+o),t>0&&e.bottom>h.bottom+p&&(p=e.bottom-h.bottom+o)):e.bottom>h.bottom&&(p=e.bottom-h.bottom+o,t<0&&e.top-p<h.top&&(p=e.top-(h.top+o)));else{let j=e.bottom-e.top,B=h.bottom-h.top;p=(n=="center"&&j<=B?e.top+j/2-B/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-B+o)-h.top}if(i=="nearest"?e.left<h.left?(S=e.left-(h.left+r),t>0&&e.right>h.right+S&&(S=e.right-h.right+r)):e.right>h.right&&(S=e.right-h.right+r,t<0&&e.left<h.left+S&&(S=e.left-(h.left+r))):S=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-r:e.right-(h.right-h.left)+r)-h.left,S||p)if(m)c.scrollBy(S,p);else{let j=0,B=0;if(p){let G=u.scrollTop;u.scrollTop+=p/x,B=(u.scrollTop-G)*x}if(S){let G=u.scrollLeft;u.scrollLeft+=S/y,j=(u.scrollLeft-G)*y}e={left:e.left-j,top:e.top-B,right:e.right-j,bottom:e.bottom-B},j&&Math.abs(j-S)<1&&(i="nearest"),B&&Math.abs(B-p)<1&&(n="nearest")}if(m)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function G4(s){let e=s.ownerDocument,t,i;for(let n=s.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class J4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?_i(t):0),i,Math.min(e.focusOffset,i?_i(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Tn=null;Ve.safari&&Ve.safari_version>=26&&(Tn=!1);function U0(s){if(s.setActive)return s.setActive();if(Tn)return s.focus(Tn);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(Tn==null?{get preventScroll(){return Tn={preventScroll:!0},!0}}:void 0),!Tn){Tn=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],r=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let hp;function zn(s,e,t=e){let i=hp||(hp=document.createRange());return i.setEnd(s,t),i.setStart(s,e),i}function gr(s,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let r=new KeyboardEvent("keydown",n);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function Y4(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function F0(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function Q4(s,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,_i(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=_i(t))}else{if(t==s)return!0;i=Fn(t),t=t.parentNode}}function z0(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function H0(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=_i(t)}else if(t.parentNode&&!ya(t))i=Fn(t),t=t.parentNode;else return null}}function W0(s,e){for(let t=s,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!ya(t))i=Fn(t)+1,t=t.parentNode;else return null}}class rs{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new rs(e.parentNode,Fn(e),t)}static after(e,t){return new rs(e.parentNode,Fn(e)+1,t)}}const Yd=[];class bt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=n?n.nextSibling:i.firstChild)){let l=bt.get(r);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&r!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;r&&r!=o.dom;)r=pp(r);else i.insertBefore(o.dom,r);n=o.dom}for(r=n?n.nextSibling:i.firstChild,r&&t&&t.node==i&&(t.written=!0);r;)r=pp(r)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=_i(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;n==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?n=-1:n=1),e=r}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!bt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,r=0;;n++){let o=this.children[n];if(o.dom==i)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,o=-1,l=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let d=this.children[a],h=c+d.length;if(c<e&&h>t)return d.domBoundsAround(e,t,c);if(h>=e&&n==-1&&(n=a,r=c),c>t&&d.dom.parentNode==this.dom){o=a,l=u;break}u=h,c=h+d.breakAfter}return{from:r,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Yd){this.markDirty();for(let n=e;n<t;n++){let r=this.children[n];r.parent==this&&i.indexOf(r)<0&&r.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new K0(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}bt.prototype.breakAfter=0;function pp(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class K0{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function q0(s,e,t,i,n,r,o,l,a){let{children:c}=s,u=c.length?c[e]:null,d=r.length?r[r.length-1]:null,h=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!h&&r.length<2&&u.merge(t,n,r.length?d:null,t==0,l,a))){if(i<c.length){let m=c[i];m&&(n<m.length||m.breakAfter&&d?.breakAfter)?(e==i&&(m=m.split(n),n=0),!h&&d&&m.merge(0,n,d,!0,0,a)?r[r.length-1]=m:((n||m.children.length&&!m.children[0].length)&&m.merge(0,n,null,!1,0,a),r.push(m))):m?.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,l,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,l,0),e++));e<i&&r.length;)if(c[i-1].become(r[r.length-1]))i--,r.pop(),a=r.length?0:l;else if(c[e].become(r[0]))e++,r.shift(),l=r.length?0:a;else break;!r.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||r.length)&&s.replaceChildren(e,i,r)}}function G0(s,e,t,i,n,r){let o=s.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),d=e-t;for(let h of i)d+=h.length;s.length+=d,q0(s,c,u,l,a,i,0,n,r)}const X4=256;class ii extends bt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof ii)||this.length-(t-e)+i.length>X4||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ii(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new rs(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Z4(this.dom,e,t)}}class Ui extends bt{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(F0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,o){return i&&(!(i instanceof Ui&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(G0(this,e,t,i?i.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,r=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=r),i=a,r++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Ui(this.mark,t,o)}domAtPos(e){return J0(this,e)}coordsAt(e,t){return Q0(this,e,t)}}function Z4(s,e,t){let i=s.nodeValue.length;e>i&&(e=i);let n=e,r=e,o=0;e==0&&t<0||e==i&&t>=0?Ve.chrome||Ve.gecko||(e?(n--,o=1):r<i&&(r++,o=-1)):t<0?n--:r<i&&r++;let l=zn(s,n,r).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return Ve.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?ru(a,o<0):a||null}class rn extends bt{static create(e,t,i){return new rn(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=rn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,o){return i&&(!(i instanceof rn)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof rn&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?rs.before(this.dom):rs.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;r=n[l],!(e>0?l==0:l==n.length-1||r.top<r.bottom);l+=o?-1:1);return ru(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cr extends bt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Cr&&e.side==this.side}split(){return new Cr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?rs.before(this.dom):rs.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}ii.prototype.children=rn.prototype.children=Cr.prototype.children=Yd;function J0(s,e){let t=s.dom,{children:i}=s,n=0;for(let r=0;n<i.length;n++){let o=i[n],l=r+o.length;if(!(l==r&&o.getSide()<=0)){if(e>r&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=l}}for(let r=n;r>0;r--){let o=i[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=n;r<i.length;r++){let o=i[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new rs(t,0)}function Y0(s,e,t){let i,{children:n}=s;t>0&&e instanceof Ui&&n.length&&(i=n[n.length-1])instanceof Ui&&i.mark.eq(e.mark)?Y0(i,e.children[0],t-1):(n.push(e),e.setParent(s)),s.length+=e.length}function Q0(s,e,t){let i=null,n=-1,r=null,o=-1;function l(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let m=c.children[d],y=h+m.length;y>=u&&(m.children.length?l(m,u-h):(!r||r.isHidden&&(t>0||tC(r,m)))&&(y>u||h==y&&m.getSide()>0)?(r=m,o=u-h):(h<u||h==y&&m.getSide()<0&&!m.isHidden)&&(i=m,n=u-h)),h=y}}l(s,e);let a=(t<0?i:r)||i||r;return a?a.coordsAt(Math.max(0,a==i?n:o),t):eC(s)}function eC(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=Lo(e);return t[t.length-1]||null}function tC(s,e){let t=s.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function qc(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const mp=Object.create(null);function ba(s,e,t){if(s==e)return!0;s||(s=mp),e||(e=mp);let i=Object.keys(s),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let r of i)if(r!=t&&(n.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function Gc(s,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?s.style.cssText="":s.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?s.style.cssText=t[n]:s.setAttribute(n,t[n]));return i}function sC(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let i=s.attributes[t];e[i.name]=i.value}return e}class bn{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ys=(function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s})(ys||(ys={}));class Ge extends Un{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new Zo(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new gn(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:r,end:o}=X0(e,t);i=(r?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new gn(e,i,n,t,e.widget||null,!0)}static line(e){return new el(e)}static set(e,t=!1){return at.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ge.none=at.empty;class Zo extends Ge{constructor(e){let{start:t,end:i}=X0(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof Zo&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&ba(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Zo.prototype.point=!1;class el extends Ge{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof el&&this.spec.class==e.spec.class&&ba(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}el.prototype.mapMode=vs.TrackBefore;el.prototype.point=!0;class gn extends Ge{constructor(e,t,i,n,r,o){super(t,i,r,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?vs.TrackBefore:vs.TrackAfter:vs.TrackDel}get type(){return this.startSide!=this.endSide?ys.WidgetRange:this.startSide<=0?ys.WidgetBefore:ys.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof gn&&iC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}gn.prototype.point=!0;function X0(s,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=s;return t==null&&(t=s.inclusive),i==null&&(i=s.inclusive),{start:t??e,end:i??e}}function iC(s,e){return s==e||!!(s&&e&&s.compare(e))}function Xl(s,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=s?t[n]=Math.max(t[n],e):t.push(s,e)}class It extends bt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,o){if(i){if(!(i instanceof It))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),G0(this,e,t,i?i.children.slice():[],r,o),!0}split(e){let t=new It;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let r=i;r<this.children.length;r++)t.append(this.children[r],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ba(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Y0(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=qc(t,this.attrs||{})),i&&(this.attrs=qc({class:i},this.attrs||{}))}domAtPos(e){return J0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(F0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Gc(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&bt.get(n)instanceof Ui;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=bt.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ve.ios||!this.children.some(r=>r instanceof ii))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof ii)||/[^ -~]/.test(i.text))return null;let n=Lo(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=Q0(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,r=i.bottom-i.top;if(Math.abs(r-n.lineHeight)<2&&n.textHeight<r){let o=(r-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof It&&this.children.length==0&&e.children.length==0&&ba(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],o=n+r.length;if(o>=t){if(r instanceof It)return r;if(o>t)break}n=o+r.breakAfter}return null}}class Ri extends bt{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,o){return i&&(!(i instanceof Ri)||!this.widget.compare(i.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?rs.before(this.dom):rs.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ri(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Yd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof Ri&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Jc?null:ru(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Jc extends bn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class vo{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ri&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new It),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Sl(new Cr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ri)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:l,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(l){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e),r=Math.min(n,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Sl(new ii(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=n<=r?0:t.length}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,o){if(this.disallowBlockEffectsFor[o]&&i instanceof gn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof gn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ri(i.widget||Ar.block,l,i));else{let a=rn.create(i.widget||Ar.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&r<=n.length&&(e<t||i.startSide>0),u=!a.isEditable&&(e<t||r>n.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),c&&(d.append(Sl(new Cr(1),n),r),r=n.length+Math.max(0,r-n.length)),d.append(Sl(a,n),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,r){let o=new vo(e,t,i,r);return o.openEnd=at.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Sl(s,e){for(let t of e)s=new Ui(t,[s],s.length);return s}class Ar extends bn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ar.inline=new Ar("span");Ar.block=new Ar("div");var Et=(function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s})(Et||(Et={}));const Hn=Et.LTR,Qd=Et.RTL;function Z0(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const nC=Z0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),rC=Z0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Yc=Object.create(null),di=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);Yc[e]=t,Yc[t]=-e}function ev(s){return s<=247?nC[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?rC[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const oC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class on{get dir(){return this.level%2?Qd:Hn}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(r<0||(n!=0?n<0?l.from<t:l.to>t:e[r].level>l.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function tv(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let i=s[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!tv(i.inner,n.inner))return!1}return!0}const St=[];function lC(s,e,t,i,n){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,l=r<i.length?i[r].from:t,a=r?256:n;for(let c=o,u=a,d=a;c<l;c++){let h=ev(s.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),St[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=a,d=a;c<l;c++){let h=St[c];if(h==128)c<l-1&&u==St[c+1]&&u&24?h=St[c]=u:St[c]=256;else if(h==64){let m=c+1;for(;m<l&&St[m]==64;)m++;let y=c&&u==8||m<t&&St[m]==8?d==1?1:8:256;for(let x=c;x<m;x++)St[x]=y;c=m-1}else h==8&&d==1&&(St[c]=1);u=h,h&7&&(d=h)}}}function aC(s,e,t,i,n){let r=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:t;for(let d=c,h,m,y;d<u;d++)if(m=Yc[h=s.charCodeAt(d)])if(m<0){for(let x=l-3;x>=0;x-=3)if(di[x+1]==-m){let S=di[x+2],p=S&2?n:S&4?S&1?r:n:0;p&&(St[d]=St[di[x]]=p),l=x;break}}else{if(di.length==189)break;di[l++]=d,di[l++]=h,di[l++]=a}else if((y=St[d])==2||y==1){let x=y==n;a=x?0:1;for(let S=l-3;S>=0;S-=3){let p=di[S+2];if(p&2)break;if(x)di[S+2]|=2;else{if(p&4)break;di[S+2]|=4}}}}}function uC(s,e,t,i){for(let n=0,r=i;n<=t.length;n++){let o=n?t[n-1].to:s,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let c=St[a];if(c==256){let u=a+1;for(;;)if(u==l){if(n==t.length)break;u=t[n++].to,l=n<t.length?t[n].from:e}else if(St[u]==256)u++;else break;let d=r==1,h=(u<e?St[u]:i)==1,m=d==h?d?1:2:i;for(let y=u,x=n,S=x?t[x-1].to:s;y>a;)y==S&&(y=t[--x].from,S=x?t[x-1].to:s),St[--y]=m;a=u}else r=c,a++}}}function Qc(s,e,t,i,n,r,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,c=0;a<t;){let u=!0,d=!1;if(c==r.length||a<r[c].from){let x=St[a];x!=l&&(u=!1,d=x==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,y=a;e:for(;;)if(c<r.length&&y==r[c].from){if(d)break e;let x=r[c];if(!u)for(let S=x.to,p=c+1;;){if(S==t)break e;if(p<r.length&&r[p].from==S)S=r[p++].to;else{if(St[S]==l)break e;break}}if(c++,h)h.push(x);else{x.from>a&&o.push(new on(a,x.from,m));let S=x.direction==Hn!=!(m%2);Xc(s,S?i+1:i,n,x.inner,x.from,x.to,o),a=x.to}y=x.to}else{if(y==t||(u?St[y]!=l:St[y]==l))break;y++}h?Qc(s,a,y,i+1,n,h,o):a<y&&o.push(new on(a,y,m)),a=y}else for(let a=t,c=r.length;a>e;){let u=!0,d=!1;if(!c||a>r[c-1].to){let x=St[a-1];x!=l&&(u=!1,d=x==16)}let h=!u&&l==1?[]:null,m=u?i:i+1,y=a;e:for(;;)if(c&&y==r[c-1].to){if(d)break e;let x=r[--c];if(!u)for(let S=x.from,p=c;;){if(S==e)break e;if(p&&r[p-1].to==S)S=r[--p].from;else{if(St[S-1]==l)break e;break}}if(h)h.push(x);else{x.to<a&&o.push(new on(x.to,a,m));let S=x.direction==Hn!=!(m%2);Xc(s,S?i+1:i,n,x.inner,x.from,x.to,o),a=x.from}y=x.from}else{if(y==e||(u?St[y-1]!=l:St[y-1]==l))break;y--}h?Qc(s,y,a,i+1,n,h,o):y<a&&o.push(new on(y,a,m)),a=y}}function Xc(s,e,t,i,n,r,o){let l=e%2?2:1;lC(s,n,r,i,l),aC(s,n,r,i,l),uC(n,r,i,l),Qc(s,n,r,e,t,i,o)}function cC(s,e,t){if(!s)return[new on(0,0,e==Qd?1:0)];if(e==Hn&&!t.length&&!oC.test(s))return sv(s.length);if(t.length)for(;s.length>St.length;)St[St.length]=256;let i=[],n=e==Hn?0:1;return Xc(s,n,n,t,0,s.length,i),i}function sv(s){return[new on(0,s,0)]}let iv="";function dC(s,e,t,i,n){var r;let o=i.head-s.from,l=on.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),a=e[l],c=a.side(n,t);if(o==c){let h=l+=n?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!n,t),c=a.side(n,t)}let u=Xt(s.text,o,a.forward(n,t));(u<a.from||u>a.to)&&(u=c),iv=s.text.slice(Math.min(o,u),Math.max(o,u));let d=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return d&&u==c&&d.level+(n?0:1)<a.level?fe.cursor(d.side(!n,t)+s.from,d.forward(n,t)?1:-1,d.level):fe.cursor(u+s.from,a.forward(n,t)?-1:1,a.level)}function fC(s,e,t){for(let i=e;i<t;i++){let n=ev(s.charCodeAt(i));if(n==1)return Hn;if(n==2||n==4)return Qd}return Hn}const nv=je.define(),rv=je.define(),ov=je.define(),lv=je.define(),Zc=je.define(),av=je.define(),uv=je.define(),Xd=je.define(),Zd=je.define(),cv=je.define({combine:s=>s.some(e=>e)}),dv=je.define({combine:s=>s.some(e=>e)}),fv=je.define();class vr{constructor(e,t="nearest",i="nearest",n=5,r=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new vr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new vr(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const _l=et.define({map:(s,e)=>s.map(e)}),hv=et.define();function Ms(s,e,t){let i=s.facet(lv);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Li=je.define({combine:s=>s.length?s[0]:!0});let hC=0;const nr=je.define({combine(s){return s.filter((e,t)=>{for(let i=0;i<t;i++)if(s[i].plugin==e.plugin)return!1;return!0})}});class Bt{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(nr.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(nr.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:r,decorations:o}=t||{};return new Bt(hC++,e,i,n,l=>{let a=[];return o&&a.push(Ro.of(c=>{let u=c.plugin(l);return u?o(u):Ge.none})),r&&a.push(r(l)),a})}static fromClass(e,t){return Bt.define((i,n)=>new e(i,n),t)}}class Iu{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ms(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ms(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ms(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const pv=je.define(),ef=je.define(),Ro=je.define(),mv=je.define(),tl=je.define(),gv=je.define();function gp(s,e){let t=s.state.facet(gv);if(!t.length)return t;let i=t.map(r=>r instanceof Function?r(s):r),n=[];return at.spans(i,e.from,e.to,{point(){},span(r,o,l,a){let c=r-e.from,u=o-e.from,d=n;for(let h=l.length-1;h>=0;h--,a--){let m=l[h].spec.bidiIsolate,y;if(m==null&&(m=fC(e.text,c,u)),a>0&&d.length&&(y=d[d.length-1]).to==c&&y.direction==m)y.to=u,d=y.inner;else{let x={from:c,to:u,direction:m,inner:[]};d.push(x),d=x.inner}}}}),n}const vv=je.define();function tf(s){let e=0,t=0,i=0,n=0;for(let r of s.state.facet(vv)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const to=je.define();class Hs{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Hs(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,r=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],c=o-l,u=a?a.fromB:1e9;for(;r<t.length&&t[r]<u;){let d=t[r],h=t[r+1],m=Math.max(l,d),y=Math.min(u,h);if(m<=y&&new Hs(m+c,y+c,m,y).addToSet(i),h>u)break;r+=2}if(!a)return i;new Hs(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class ka{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ut.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let n=[];this.changes.iterChangedRanges((r,o,l,a)=>n.push(new Hs(r,o,l,a))),this.changedRanges=n}static create(e,t,i){return new ka(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class vp extends bt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ge.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new It],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Hs(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!kC(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let r=n>-1?mC(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Hs(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Ve.ie||Ve.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=yC(o,l,e.changes);return i=Hs.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ve.chrome||Ve.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ri&&o.widget instanceof Jc&&r.push(o.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:d}=l,h,m,y,x;if(i&&i.range.fromB<d&&i.range.toB>u){let G=vo.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),N=vo.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);m=G.breakAtStart,y=G.openStart,x=N.openEnd;let O=this.compositionView(i);N.breakAtStart?O.breakAfter=1:N.content.length&&O.merge(O.length,O.length,N.content[0],!1,N.openStart,0)&&(O.breakAfter=N.content[0].breakAfter,N.content.shift()),G.content.length&&O.merge(0,0,G.content[G.content.length-1],!0,0,G.openEnd)&&G.content.pop(),h=G.content.concat(O).concat(N.content)}else({content:h,breakAtStart:m,openStart:y,openEnd:x}=vo.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:S,off:p}=r.findPos(c,1),{i:j,off:B}=r.findPos(a,-1);q0(this,j,B,S,p,h,m,y,x)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(hv)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new ii(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Ui(n,[t],t.length);let i=new It;return i.append(t,0),i}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=bt.get(r);l&&l!=o&&(l.dom=null),o.setDOM(r)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(Li)||this.dom.tabIndex>-1)&&Ql(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Ve.gecko&&l.empty&&!this.hasComposition&&pC(a)){let d=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(d,a.node.childNodes[a.offset]||null)),a=c=new rs(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!go(a.node,a.offset,u.anchorNode,u.anchorOffset)||!go(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Ve.android&&Ve.chrome&&this.dom.contains(u.focusNode)&&bC(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=jo(this.view.root);if(d)if(l.empty){if(Ve.gecko){let h=gC(a.node,a.offset);if(h&&h!=3){let m=(h==1?H0:W0)(a.node,a.offset);m&&(a=new rs(m.node,m.offset))}}d.collapse(a.node,a.offset),l.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=l.bidiLevel)}else if(d.extend){d.collapse(a.node,a.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(h)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new rs(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new rs(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&go(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=jo(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=It.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);i.collapse(u.node,u.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let r=bt.get(t.childNodes[n]);r instanceof It&&(i=r.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let r=bt.get(t.childNodes[n]);r instanceof It&&(i=r.domAtPos(r.length))}return i?new rs(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=bt.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof It)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=r-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof It&&!(i instanceof It&&t>=0)))i=l,n=c;else if(i&&c==e&&a==e&&l instanceof Ri&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}r=c}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof It))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof ii))return null;let r=Xt(n.text,i);if(r==i)return null;let o=zn(n.dom,i,r).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Et.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>n)break;if(c>=i){let m=d.dom.getBoundingClientRect();if(t.push(m.height),o){let y=d.dom.lastChild,x=y?Lo(y):[];if(x.length){let S=x[x.length-1],p=a?S.right-m.left:m.right-S.left;p>l&&(l=p,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Et.RTL:Et.LTR}measureTextSize(){for(let r of this.children)if(r instanceof It){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Lo(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,n=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new K0(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],o=r?r.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Ge.replace({widget:new Jc(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return Ge.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Ro).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,n=this.view.state.facet(mv).map((r,o)=>{let l=typeof r=="function";return l&&(i=!0),l?r(this.view):r});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(at.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(fv))try{if(c(this.view,e.range,e))return!0}catch(u){Ms(this.view.state,u,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let r=tf(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;q4(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Et.LTR)}}function pC(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function yv(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let i=H0(t.focusNode,t.focusOffset),n=W0(t.focusNode,t.focusOffset),r=i||n;if(n&&i&&n.node!=i.node){let l=bt.get(n.node);if(!l||l instanceof ii&&l.text!=n.node.nodeValue)r=n;else if(s.docView.lastCompositionAfterCursor){let a=bt.get(i.node);!a||a instanceof ii&&a.text!=i.node.nodeValue||(r=n)}}if(s.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function mC(s,e,t){let i=yv(s,t);if(!i)return null;let{node:n,from:r,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||s.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,c=new Hs(a.mapPos(r),a.mapPos(o),r,o),u=[];for(let d=n.parentNode;;d=d.parentNode){let h=bt.get(d);if(h instanceof Ui)u.push({node:d,deco:h.mark});else{if(h instanceof It||d.nodeName=="DIV"&&d.parentNode==s.contentDOM)return{range:c,text:n,marks:u,line:d};if(d!=s.contentDOM)u.push({node:d,deco:new Zo({inclusive:!0,attributes:sC(d),tagName:d.tagName.toLowerCase()})});else return null}}}function gC(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let vC=class{constructor(){this.changes=[]}compareRange(e,t){Xl(e,t,this.changes)}comparePoint(e,t){Xl(e,t,this.changes)}boundChange(e){Xl(e,e,this.changes)}};function yC(s,e,t){let i=new vC;return at.compare(s,e,t,i),i.changes}function bC(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function kC(s,e){let t=!1;return e&&s.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function xC(s,e,t=1){let i=s.charCategorizer(e),n=s.doc.lineAt(e),r=e-n.from;if(n.length==0)return fe.cursor(e);r==0?t=1:r==n.length&&(t=-1);let o=r,l=r;t<0?o=Xt(n.text,r,!1):l=Xt(n.text,r);let a=i(n.text.slice(o,l));for(;o>0;){let c=Xt(n.text,o,!1);if(i(n.text.slice(c,o))!=a)break;o=c}for(;l<n.length;){let c=Xt(n.text,l);if(i(n.text.slice(l,c))!=a)break;l=c}return fe.range(o+n.from,l+n.from)}function wC(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function SC(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Bu(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function yp(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function bp(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function ed(s,e,t){let i,n,r,o,l=!1,a,c,u,d;for(let y=s.firstChild;y;y=y.nextSibling){let x=Lo(y);for(let S=0;S<x.length;S++){let p=x[S];n&&Bu(n,p)&&(p=yp(bp(p,n.bottom),n.top));let j=wC(e,p),B=SC(t,p);if(j==0&&B==0)return y.nodeType==3?kp(y,e,t):ed(y,e,t);(!i||o>B||o==B&&r>j)&&(i=y,n=p,r=j,o=B,l=j?e<p.left?S>0:S<x.length-1:!0),j==0?t>p.bottom&&(!u||u.bottom<p.bottom)?(a=y,u=p):t<p.top&&(!d||d.top>p.top)&&(c=y,d=p):u&&Bu(u,p)?u=bp(u,p.bottom):d&&Bu(d,p)&&(d=yp(d,p.top))}}if(u&&u.bottom>=t?(i=a,n=u):d&&d.top<=t&&(i=c,n=d),!i)return{node:s,offset:0};let h=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return kp(i,h,t);if(l&&i.contentEditable!="false")return ed(i,h,t);let m=Array.prototype.indexOf.call(s.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:s,offset:m}}function kp(s,e,t){let i=s.nodeValue.length,n=-1,r=1e9,o=0;for(let l=0;l<i;l++){let a=zn(s,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<r){let h=e>=(u.left+u.right)/2,m=h;if((Ve.chrome||Ve.gecko)&&zn(s,l).getBoundingClientRect().left==u.right&&(m=!h),d<=0)return{node:s,offset:l+(m?1:0)};n=l+(m?1:0),r=d}}}return{node:s,offset:n>-1?n:o>0?s.nodeValue.length:0}}function bv(s,e,t,i=-1){var n,r;let o=s.contentDOM.getBoundingClientRect(),l=o.top+s.viewState.paddingTop,a,{docHeight:c}=s.viewState,{x:u,y:d}=e,h=d-l;if(h<0)return 0;if(h>c)return s.state.doc.length;for(let G=s.viewState.heightOracle.textHeight/2,N=!1;a=s.elementAtHeight(h),a.type!=ys.Text;)for(;h=i>0?a.bottom+G:a.top-G,!(h>=0&&h<=c);){if(N)return t?null:0;N=!0,i=-i}d=l+h;let m=a.from;if(m<s.viewport.from)return s.viewport.from==0?0:t?null:xp(s,o,a,u,d);if(m>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:xp(s,o,a,u,d);let y=s.dom.ownerDocument,x=s.root.elementFromPoint?s.root:y,S=x.elementFromPoint(u,d);S&&!s.contentDOM.contains(S)&&(S=null),S||(u=Math.max(o.left+1,Math.min(o.right-1,u)),S=x.elementFromPoint(u,d),S&&!s.contentDOM.contains(S)&&(S=null));let p,j=-1;if(S&&((n=s.docView.nearest(S))===null||n===void 0?void 0:n.isEditable)!=!1){if(y.caretPositionFromPoint){let G=y.caretPositionFromPoint(u,d);G&&({offsetNode:p,offset:j}=G)}else if(y.caretRangeFromPoint){let G=y.caretRangeFromPoint(u,d);G&&({startContainer:p,startOffset:j}=G)}p&&(!s.contentDOM.contains(p)||Ve.safari&&_C(p,j,u)||Ve.chrome&&CC(p,j,u))&&(p=void 0),p&&(j=Math.min(_i(p),j))}if(!p||!s.docView.dom.contains(p)){let G=It.find(s.docView,m);if(!G)return h>a.top+a.height/2?a.to:a.from;({node:p,offset:j}=ed(G.dom,u,d))}let B=s.docView.nearest(p);if(!B)return null;if(B.isWidget&&((r=B.dom)===null||r===void 0?void 0:r.nodeType)==1){let G=B.dom.getBoundingClientRect();return e.y<G.top||e.y<=G.bottom&&e.x<=(G.left+G.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(p,j)+B.posAtStart}function xp(s,e,t,i,n){let r=Math.round((i-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let l=s.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(s.defaultLineHeight-l)*.5)/l);r+=a*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+Bc(o,r,s.state.tabSize)}function kv(s,e,t){let i,n=s;if(s.nodeType!=3||e!=(i=s.nodeValue.length))return!1;for(;;){let r=n.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=n.parentNode;if(!o||o.nodeName=="DIV")break;n=o}}return zn(s,i-1,i).getBoundingClientRect().right>t}function _C(s,e,t){return kv(s,e,t)}function CC(s,e,t){if(e!=0)return kv(s,e,t);for(let n=s;;){let r=n.parentNode;if(!r||r.nodeType!=1||r.firstChild!=n)return!1;if(r.classList.contains("cm-line"))break;n=r}let i=s.nodeType==1?s.getBoundingClientRect():zn(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function td(s,e,t){let i=s.lineBlockAt(e);if(Array.isArray(i.type)){let n;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!n||r.type==ys.Text&&(n.type!=r.type||(t<0?r.from<e:r.to>e)))&&(n=r)}}return n||i}return i}function AC(s,e,t,i){let n=td(s,e.head,e.assoc||-1),r=!i||n.type!=ys.Text||!(s.lineWrapping||n.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),l=s.textDirectionAt(n.from),a=s.posAtCoords({x:t==(l==Et.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(a!=null)return fe.cursor(a,t?-1:1)}return fe.cursor(t?n.to:n.from,t?-1:1)}function wp(s,e,t,i){let n=s.state.doc.lineAt(e.head),r=s.bidiSpans(n),o=s.textDirectionAt(n.from);for(let l=e,a=null;;){let c=dC(n,r,o,l,t),u=iv;if(!c){if(n.number==(t?s.state.doc.lines:1))return l;u=`
`,n=s.state.doc.line(n.number+(t?1:-1)),r=s.bidiSpans(n),c=s.visualLineSide(n,!t)}if(a){if(!a(u))return l}else{if(!i)return c;a=i(u)}l=c}}function MC(s,e,t){let i=s.state.charCategorizer(e),n=i(t);return r=>{let o=i(r);return n==Vt.Space&&(n=o),n==o}}function DC(s,e,t,i){let n=e.head,r=t?1:-1;if(n==(t?s.state.doc.length:0))return fe.cursor(n,e.assoc);let o=e.goalColumn,l,a=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(n,e.assoc||-1),u=s.documentTop;if(c)o==null&&(o=c.left-a.left),l=r<0?c.top:c.bottom;else{let m=s.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,s.defaultCharacterWidth*(n-m.from))),l=(r<0?m.top:m.bottom)+u}let d=a.left+o,h=i??s.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let y=l+(h+m)*r,x=bv(s,{x:d,y},!1,r);if(y<a.top||y>a.bottom||(r<0?x<n:x>n)){let S=s.docView.coordsForChar(x),p=!S||y<S.top?-1:1;return fe.cursor(x,p,void 0,o)}}}function yo(s,e,t){for(;;){let i=0;for(let n of s)n.between(e-1,e+1,(r,o,l)=>{if(e>r&&e<o){let a=i||t||(e-r<o-e?-1:1);e=a<0?r:o,i=a}});if(!i)return e}}function xv(s,e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let o=yo(s,n.from,0);o!=n.from&&(r=fe.cursor(o,-1))}else{let o=yo(s,n.from,-1),l=yo(s,n.to,1);(o!=n.from||l!=n.to)&&(r=fe.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?fe.create(t,e.mainIndex):e}function Nu(s,e,t){let i=yo(s.state.facet(tl).map(n=>n(s)),t.from,e.head>t.from?-1:1);return i==t.from?t:fe.cursor(i,i<t.from?1:-1)}const so="";class EC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(lt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=so}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let r=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=bt.get(n),a=bt.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:ya(n))||ya(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>r)&&!VC(o,t)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,l;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(r=l.index,o=l[0].length),this.append(t.slice(i,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=r+o}}readNode(e){if(e.cmIgnore)return;let t=bt.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(TC(e,i.node,i.offset)?t:0))}}function TC(s,e,t){for(;;){if(!e||t<_i(e))return!1;if(e==s)return!0;t=Fn(e)+1,e=e.parentNode}}function VC(s,e){let t;for(;!(s==e||!s);s=s.nextSibling){let i=bt.get(s);if(!(i?.isWidget||s.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let n=i.overrideDOMText;if(n?.length)return!1}return!0}class Sp{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class OC{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=r||o?[]:$C(e),a=new EC(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=jC(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=r&&r.node==l.focusNode&&r.offset==l.focusOffset||!Kc(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Kc(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Ve.ios||Ve.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(a,c),h=Math.max(a,c),m=u.from-d,y=u.to-h;(m==0||m==1||d==0)&&(y==0||y==-1||h==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=fe.single(c,a)}}}function wv(s,e){let t,{newSel:i}=e,n=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,c=null;(r===8||Ve.android&&e.text.length<l-o)&&(a=n.to,c="end");let u=Sv(s.state.doc.sliceString(o,l,so),e.text,a-o,c);u&&(Ve.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==so+so&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:ut.of(e.text.slice(u.from,u.toB).split(so))})}else i&&(!s.hasFocus&&s.state.facet(Li)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,n.to)}:(Ve.mac||Ve.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=fe.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:ut.of([t.insert.toString().replace("."," ")])}):t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:s.state.doc.slice(n.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,n.to))}:Ve.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(i&&(i=fe.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:ut.of([" "])}),t)return sf(s,t,i,r);if(i&&!i.main.eq(n)){let o=!1,l="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),l=s.inputState.lastSelectionOrigin,l=="select.pointer"&&(i=xv(s.state.facet(tl).map(a=>a(s)),i))),s.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function sf(s,e,t,i=-1){if(Ve.ios&&s.inputState.flushIOSKey(e))return!0;let n=s.state.selection.main;if(Ve.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&s.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&gr(s.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&gr(s.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&gr(s.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,l=()=>o||(o=PC(s,e,t));return s.state.facet(av).some(a=>a(s,e.from,e.to,r,l))||s.dispatch(l()),!0}function PC(s,e,t){let i,n=s.state,r=n.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let a=e.from<r.from?-1:1,c=a<0?r.from:r.to,u=yo(n.facet(tl).map(d=>d(s)),c,a);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let a=r.from<e.from?n.sliceDoc(r.from,e.from):"",c=r.to>e.to?n.sliceDoc(e.to,r.to):"";i=n.replaceSelection(s.state.toText(a+e.insert.sliceString(0,void 0,s.state.lineBreak)+c))}else{let a=n.changes(e),c=t&&t.main.to<=a.newLength?t.main:void 0;if(n.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let u=s.state.sliceDoc(e.from,e.to),d,h=t&&yv(s,t.main.head);if(h){let x=e.insert.length-(e.to-e.from);d={from:h.from,to:h.to-x}}else d=s.state.doc.lineAt(r.head);let m=r.to-e.to,y=r.to-r.from;i=n.changeByRange(x=>{if(x.from==r.from&&x.to==r.to)return{changes:a,range:c||x.map(a)};let S=x.to-m,p=S-u.length;if(x.to-x.from!=y||s.state.sliceDoc(p,S)!=u||x.to>=d.from&&x.from<=d.to)return{range:x};let j=n.changes({from:p,to:S,insert:e.insert}),B=x.to-r.to;return{changes:j,range:c?fe.range(Math.max(0,c.anchor+B),Math.max(0,c.head+B)):x.map(j)}})}else i={changes:a,selection:c&&n.selection.replaceRange(c)}}let l="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,l+=".compose",s.inputState.compositionFirstChange&&(l+=".start",s.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:l,scrollIntoView:!0})}function Sv(s,e,t,i){let n=Math.min(s.length,e.length),r=0;for(;r<n&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==n&&s.length==e.length)return null;let o=s.length,l=e.length;for(;o>0&&l>0&&s.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,r-Math.min(o,l));t-=o+a-r}if(o<r&&s.length<e.length){let a=t<=r&&t>=o?r-t:0;r-=a,l=r+(l-o),o=r}else if(l<r){let a=t<=r&&t>=l?r-t:0;r-=a,o=r+(o-l),l=r}return{from:r,toA:o,toB:l}}function $C(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new Sp(t,i)),(n!=t||r!=i)&&e.push(new Sp(n,r))),e}function jC(s,e){if(s.length==0)return null;let t=s[0].pos,i=s.length==2?s[1].pos:t;return t>-1&&i>-1?fe.single(t+e,i+e):null}class LC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ve.safari&&e.contentDOM.addEventListener("input",()=>null),Ve.gecko&&XC(e.contentDOM.ownerDocument)}handleEvent(e){!HC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=RC(e),i=this.handlers,n=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,l=i[r];l&&o!=!l.handlers.length&&(n.removeEventListener(r,this.handleEvent),l=null),l||n.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!t[r]&&n.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Cv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ve.android&&Ve.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ve.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=_v.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||IC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,gr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ve.safari&&!Ve.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function _p(s,e){return(t,i)=>{try{return e.call(s,i,t)}catch(n){Ms(t.state,n)}}}function RC(s){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of s){let n=i.spec,r=n&&n.plugin.domEventHandlers,o=n&&n.plugin.domEventObservers;if(r)for(let l in r){let a=r[l];a&&t(l).handlers.push(_p(i.value,a))}if(o)for(let l in o){let a=o[l];a&&t(l).observers.push(_p(i.value,a))}}for(let i in ni)t(i).handlers.push(ni[i]);for(let i in qs)t(i).observers.push(qs[i]);return e}const _v=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],IC="dthko",Cv=[16,17,18,20,91,92,224,225],Cl=6;function Al(s){return Math.max(0,s)*.7+8}function BC(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class NC{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=G4(e.contentDOM),this.atoms=e.state.facet(tl).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(lt.allowMultipleSelections)&&UC(e,t),this.dragging=zC(e,t)&&Dv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&BC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,r=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=tf(this.view);e.clientX-a.left<=n+Cl?t=-Al(n-e.clientX):e.clientX+a.right>=o-Cl&&(t=Al(e.clientX-o)),e.clientY-a.top<=r+Cl?i=-Al(r-e.clientY):e.clientY+a.bottom>=l-Cl&&(i=Al(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=xv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function UC(s,e){let t=s.state.facet(nv);return t.length?t[0](e):Ve.mac?e.metaKey:e.ctrlKey}function FC(s,e){let t=s.state.facet(rv);return t.length?t[0](e):Ve.mac?!e.altKey:!e.ctrlKey}function zC(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let i=jo(s.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let r=0;r<n.length;r++){let o=n[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function HC(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=bt.get(t))&&i.ignoreEvent(e))return!1;return!0}const ni=Object.create(null),qs=Object.create(null),Av=Ve.ie&&Ve.ie_version<15||Ve.ios&&Ve.webkit_version<604;function WC(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Mv(s,t.value)},50)}function ou(s,e,t){for(let i of s.facet(e))t=i(t,s);return t}function Mv(s,e){e=ou(s.state,Xd,e);let{state:t}=s,i,n=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(sd!=null&&t.selection.ranges.every(a=>a.empty)&&sd==r.toString()){let a=-1;i=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let d=t.toText((o?r.line(n++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:fe.cursor(c.from+d.length)}})}else o?i=t.changeByRange(a=>{let c=r.line(n++);return{changes:{from:a.from,to:a.to,insert:c.text},range:fe.cursor(a.from+c.length)}}):i=t.replaceSelection(r);s.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}qs.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft};ni.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1);qs.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")};qs.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")};ni.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of s.state.facet(ov))if(t=i(s,e),t)break;if(!t&&e.button==0&&(t=GC(s,e)),t){let i=!s.hasFocus;s.inputState.startMouseSelection(new NC(s,e,t,i)),i&&s.observer.ignore(()=>{U0(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let n=s.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}else s.inputState.setSelectionOrigin("select.pointer");return!1};function Cp(s,e,t,i){if(i==1)return fe.cursor(e,t);if(i==2)return xC(s.state,e,t);{let n=It.find(s.docView,e),r=s.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:r.from,l=n?n.posAtEnd:r.to;return l<s.state.doc.length&&l==r.to&&l++,fe.range(o,l)}}let Ap=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function KC(s,e,t,i){let n=It.find(s.docView,e);if(!n)return 1;let r=e-n.posAtStart;if(r==0)return 1;if(r==n.length)return-1;let o=n.coordsAt(r,-1);if(o&&Ap(t,i,o))return-1;let l=n.coordsAt(r,1);return l&&Ap(t,i,l)?1:o&&o.bottom>=i?-1:1}function Mp(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:KC(s,t,e.clientX,e.clientY)}}const qC=Ve.ie&&Ve.ie_version<=11;let Dp=null,Ep=0,Tp=0;function Dv(s){if(!qC)return s.detail;let e=Dp,t=Tp;return Dp=s,Tp=Date.now(),Ep=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(Ep+1)%3:1}function GC(s,e){let t=Mp(s,e),i=Dv(e),n=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),n=n.map(r.changes))},get(r,o,l){let a=Mp(s,r),c,u=Cp(s,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let d=Cp(s,t.pos,t.bias,i),h=Math.min(d.from,u.from),m=Math.max(d.to,u.to);u=h<u.from?fe.range(h,m):fe.range(m,h)}return o?n.replaceRange(n.main.extend(u.from,u.to)):l&&i==1&&n.ranges.length>1&&(c=JC(n,a.pos))?c:l?n.addRange(u):fe.create([u])}}}function JC(s,e){for(let t=0;t<s.ranges.length;t++){let{from:i,to:n}=s.ranges[t];if(i<=e&&n>=e)return fe.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}ni.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let n=s.docView.nearest(e.target);if(n&&n.isWidget){let r=n.posAtStart,o=r+n.length;(r>=t.to||o<=t.from)&&(t=fe.range(r,o))}}let{inputState:i}=s;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",ou(s.state,Zd,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ni.dragend=s=>(s.inputState.draggedContent=null,!1);function Vp(s,e,t,i){if(t=ou(s.state,Xd,t),!t)return;let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=i&&r&&FC(s,e)?{from:r.from,to:r.to}:null,l={from:n,insert:t},a=s.state.changes(o?[o,l]:l);s.focus(),s.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}ni.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,r=()=>{++n==t.length&&Vp(s,e,i.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=r,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),r()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Vp(s,e,i,!0),!0}return!1};ni.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=Av?null:e.clipboardData;return t?(Mv(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(WC(s),!1)};function YC(s,e){let t=s.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),s.focus()},50)}function QC(s){let e=[],t=[],i=!1;for(let n of s.selection.ranges)n.empty||(e.push(s.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),n=o.number}i=!0}return{text:ou(s,Zd,e.join(s.lineBreak)),ranges:t,linewise:i}}let sd=null;ni.copy=ni.cut=(s,e)=>{let{text:t,ranges:i,linewise:n}=QC(s.state);if(!t&&!n)return!1;sd=n?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=Av?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(YC(s,t),!1)};const Ev=Hi.define();function Tv(s,e){let t=[];for(let i of s.facet(uv)){let n=i(s,e);n&&t.push(n)}return t.length?s.update({effects:t,annotations:Ev.of(!0)}):null}function Vv(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Tv(s.state,e);t?s.dispatch(t):s.update([])}},10)}qs.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),Vv(s)};qs.blur=s=>{s.observer.clearSelectionRange(),Vv(s)};qs.compositionstart=qs.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))};qs.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,Ve.chrome&&Ve.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))};qs.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()};ni.beforeinput=(s,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let l=o[0],a=s.posAtDOM(l.startContainer,l.startOffset),c=s.posAtDOM(l.endContainer,l.endOffset);return sf(s,{from:a,to:c,insert:s.state.toText(r)},null),!0}}let n;if(Ve.chrome&&Ve.android&&(n=_v.find(r=>r.inputType==e.inputType))&&(s.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return Ve.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),Ve.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>qs.compositionend(s,e),20),!1};const Op=new Set;function XC(s){Op.has(s)||(Op.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const Pp=["pre-wrap","normal","pre-line","break-spaces"];let Mr=!1;function $p(){Mr=!1}class ZC{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Pp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,r,o){let l=Pp.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class e5{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class bi{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return typeof this._content=="number"?ys.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof gn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new bi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Dt=(function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s})(Dt||(Dt={}));const Zl=.001;class bs{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Zl&&(Mr=!0),this.height=e)}replace(e,t,i){return bs.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:d}=n[l],h=r.lineAt(a,Dt.ByPosNoHeight,i.setDoc(t),0,0),m=h.to>=c?h:r.lineAt(c,Dt.ByPosNoHeight,i,0,0);for(d+=m.to-c,c=m.to;l>0&&h.from<=n[l-1].toA;)a=n[l-1].fromA,u=n[l-1].fromB,l--,a<h.from&&(h=r.lineAt(a,Dt.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let y=nf.build(i.setDoc(o),e,u,d);r=xa(r,r.replace(a,c,y))}return r.updateHeight(i,0)}static empty(){return new Ps(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>r*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(r>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,r-=l.size}else break;else if(n<r){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(r+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new t5(bs.of(e.slice(0,t)),o,bs.of(e.slice(i)))}}function xa(s,e){return s==e?s:(s.constructor!=e.constructor&&(Mr=!0),e)}bs.prototype.size=1;class Ov extends bs{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new bi(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ps extends Ov{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new bi(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Ps||n instanceof qt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof qt?n=new Ps(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):bs.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qt extends bs{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,r=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*r);o=a/r,this.length>r+1&&(l=(this.height-a)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:r,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let c=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=t.doc.lineAt(c),d=l+u.length*a,h=Math.max(i,e-d/2);return new bi(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/l))),{from:u,length:d}=t.doc.line(r+c);return new bi(u,d,i+l*c,l,0)}}lineAt(e,t,i,n,r){if(t==Dt.ByHeight)return this.blockAt(e,i,n,r);if(t==Dt.ByPosNoHeight){let{from:m,to:y}=i.doc.lineAt(e);return new bi(m,y-m,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=l+c.length*a,d=c.number-o,h=n+l*d+a*(c.from-r-d);return new bi(c.from,c.length,Math.max(n,Math.min(h,n+this.height-u)),u,0)}forEachLine(e,t,i,n,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,r);for(let u=e,d=n;u<=t;){let h=i.doc.lineAt(u);if(u==e){let y=h.number-l;d+=a*y+c*(e-r-y)}let m=a+c*h.length;o(new bi(h.from,h.length,d,m,0)),d+=m,u=h.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let r=i[i.length-1];r instanceof qt?i[i.length-1]=new qt(r.length+n):i.push(null,new qt(n-1))}if(e>0){let r=i[0];r instanceof qt?i[0]=new qt(e+r.length):i.unshift(new qt(e-1),null)}return bs.of(i)}decomposeLeft(e,t){t.push(new qt(e-1),null)}decomposeRight(e,t){t.push(null,new qt(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new qt(n.from-t-1).updateHeight(e,t));l<=r&&n.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let d=n.heights[n.index++];a==-1?a=d:Math.abs(d-a)>=Zl&&(a=-2);let h=new Ps(u,d);h.outdated=!1,o.push(h),l+=u+1}l<=r&&o.push(null,new qt(r-l).updateHeight(e,l));let c=bs.of(o);return(a<0||Math.abs(c.height-this.height)>=Zl||Math.abs(a-this.heightMetrics(e,t).perLine)>=Zl)&&(Mr=!0),xa(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class t5 extends bs{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let o=n+this.left.height,l=r+this.left.length+this.break,a=t==Dt.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=t==Dt.ByPosNoHeight?Dt.ByPosNoHeight:Dt.ByPos;return a?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,n,r).join(c)}forEachLine(e,t,i,n,r,o){let l=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,r,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let c=this.lineAt(a,Dt.ByPos,i,n,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,n,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let l of i)r.push(l);if(e>0&&jp(r,o-1),t<this.length){let l=r.length;this.decomposeRight(t,r),jp(r,l)}return bs.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?bs.of(this.break?[e,null,t]:[e,t]):(this.left=xa(this.left,e),this.right=xa(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:o}=this,l=t+r.length+this.break,a=null;return n&&n.from<=t+r.length&&n.more?a=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function jp(s,e){let t,i;s[e]==null&&(t=s[e-1])instanceof qt&&(i=s[e+1])instanceof qt&&s.splice(e-1,3,new qt(t.length+1+i.length))}const s5=5;class nf{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ps?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ps(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Ov(o,n,i)):(o||r||n>=s5)&&this.addLineDeco(n,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ps(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new qt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ps)return e;let t=new Ps(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ps)&&!this.isCovered?this.nodes.push(new Ps(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Ps&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let r=new nf(i,e);return at.spans(t,i,n,r,0),r.finish(i)}}function i5(s,e,t){let i=new n5;return at.compare(s,e,t,i,0),i.changes}class n5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Xl(e,t,this.changes,5)}}function r5(s,e){let t=s.getBoundingClientRect(),i=s.ownerDocument,n=i.defaultView||window,r=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let c=s.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();r=Math.max(r,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(c==s.parentNode?n.innerHeight:a,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function o5(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function l5(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Uu{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return Ge.replace({widget:new a5(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class a5 extends bn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Lp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Rp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(ef).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new ZC(t),this.stateDeco=e.facet(Ro).filter(i=>typeof i!="function"),this.heightMap=bs.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new Hs(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ge.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:r,to:o})=>n>=r&&n<=o)){let{from:r,to:o}=this.lineBlockAt(n);e.push(new Ml(r,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Rp:new rf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(io(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ro).filter(u=>typeof u!="function");let n=e.changedRanges,r=Hs.extendWithRanges(n,i5(i,this.stateDeco,e?e.changes:Ut.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);$p(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Mr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(dv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Et.RTL:Et.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:G,scaleY:N}=N0(t,l);(G>.005&&Math.abs(this.scaleX-G)>.005||N>.005&&Math.abs(this.scaleY-N)>.005)&&(this.scaleX=G,this.scaleY=N,c|=16,o=a=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=z0(e.scrollDOM);let y=(this.printing?l5:r5)(t,this.paddingTop),x=y.top-this.pixelViewport.top,S=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(a=!0)),!this.inView&&!this.scrollTarget&&!o5(e.dom))return 0;let j=l.width;if((this.contentDOMWidth!=j||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),a){let G=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(G)&&(o=!0),o||n.lineWrapping&&Math.abs(j-this.contentDOMWidth)>n.charWidth){let{lineHeight:N,charWidth:O,textHeight:_}=e.docView.measureTextSize();o=N>0&&n.refresh(r,N,O,_,Math.max(5,j/O),G),o&&(e.docView.minWidth=0,c|=16)}x>0&&S>0?u=Math.max(x,S):x<0&&S<0&&(u=Math.min(x,S)),$p();for(let N of this.viewports){let O=N.from==this.viewport.from?G:e.docView.measureVisibleLineHeights(N);this.heightMap=(o?bs.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new Hs(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new e5(N.from,O))}Mr&&(c|=2)}let B=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Ml(n.lineAt(o-i*1e3,Dt.ByHeight,r,0,0).from,n.lineAt(l+(1-i)*1e3,Dt.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=n.lineAt(c,Dt.ByPos,r,0,0),h;t.y=="center"?h=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<a.from?h=d.top:h=d.bottom-u,a=new Ml(n.lineAt(h-1e3/2,Dt.ByHeight,r,0,0).from,n.lineAt(h+u+1e3/2,Dt.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Ml(this.heightMap.lineAt(i,Dt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Dt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Dt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Dt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&r<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Uu(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,o=n<<1;if(this.defaultTextDirection!=Et.LTR&&!i)return[];let l=[],a=(u,d,h,m)=>{if(d-u<r)return;let y=this.state.selection.main,x=[y.from];y.empty||x.push(y.to);for(let p of x)if(p>u&&p<d){a(u,p-10,h,m),a(p+10,d,h,m);return}let S=c5(e,p=>p.from>=h.from&&p.to<=h.to&&Math.abs(p.from-u)<r&&Math.abs(p.to-d)<r&&!x.some(j=>p.from<j&&p.to>j));if(!S){if(d<h.to&&t&&i&&t.visibleRanges.some(B=>B.from<=d&&B.to>=d)){let B=t.moveToLineBoundary(fe.cursor(d),!1,!0).head;B>u&&(d=B)}let p=this.gapSize(h,u,d,m),j=i||p<2e6?p:2e6;S=new Uu(u,d,p,j)}l.push(S)},c=u=>{if(u.length<o||u.type!=ys.Text)return;let d=u5(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,m,y;if(i){let x=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,p;if(h!=null){let j=El(d,h),B=((this.visibleBottom-this.visibleTop)/2+x)/u.height;S=j-B,p=j+B}else S=(this.visibleTop-u.top-x)/u.height,p=(this.visibleBottom-u.top+x)/u.height;m=Dl(d,S),y=Dl(d,p)}else{let x=d.total*this.heightOracle.charWidth,S=n*this.heightOracle.charWidth,p=0;if(x>2e6)for(let O of e)O.from>=u.from&&O.from<u.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+p<this.pixelViewport.left&&(p=O.size-O.displaySize);let j=this.pixelViewport.left+p,B=this.pixelViewport.right+p,G,N;if(h!=null){let O=El(d,h),_=((B-j)/2+S)/x;G=O-_,N=O+_}else G=(j-S)/x,N=(B+S)/x;m=Dl(d,G),y=Dl(d,N)}m>u.from&&a(u.from,m,u,d),y<u.to&&a(y,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return l}gapSize(e,t,i,n){let r=El(n,i)-El(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Uu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ge.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];at.spans(t,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let r=0;r<i.length&&!(n&8);r++){let o=this.visibleRanges[r],l=i[r];(o.from!=l.from||o.to!=l.to)&&(n|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||io(this.heightMap.lineAt(e,Dt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||io(this.heightMap.lineAt(this.scaler.fromDOM(e),Dt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return io(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ml{constructor(e,t){this.from=e,this.to=t}}function u5(s,e,t){let i=[],n=s,r=0;return at.spans(t,s,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),r+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),r+=e-n),{total:r,ranges:i}}function Dl({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(s*t);for(let n=0;;n++){let{from:r,to:o}=e[n],l=o-r;if(i<=l)return r+i;i-=l}}function El(s,e){let t=0;for(let{from:i,to:n}of s.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/s.total}function c5(s,e){for(let t of s)if(e(t))return t}const Rp={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class rf{constructor(e,t,i){let n=0,r=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,Dt.ByPos,e,0,0).top,u=t.lineAt(a,Dt.ByPos,e,0,0).bottom;return n+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-r)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),r=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof rf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function io(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),i=e.toDOM(s.bottom);return new bi(s.from,s.length,t,i-t,Array.isArray(s._content)?s._content.map(n=>io(n,e)):s._content)}const Tl=je.define({combine:s=>s.join(" ")}),id=je.define({combine:s=>s.indexOf(!0)>-1}),nd=pn.newName(),Pv=pn.newName(),$v=pn.newName(),jv={"&light":"."+Pv,"&dark":"."+$v};function rd(s,e,t){return new pn(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return s;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):s+" "+i}})}const d5=rd("."+nd,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},jv),f5={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Fu=Ve.ie&&Ve.ie_version<=11;class h5{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new J4,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Ve.ie&&Ve.ie_version<=11||Ve.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ve.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ve.chrome&&Ve.chrome_version<126)&&(this.editContext=new m5(e),e.state.facet(Li)&&(e.contentDOM.editContext=this.editContext.editContext)),Fu&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Li)?i.root.activeElement!=this.dom:!Ql(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ve.ie&&Ve.ie_version<=11||Ve.android&&Ve.chrome)&&!i.state.selection.main.empty&&n.focusNode&&go(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=jo(e.root);if(!t)return!1;let i=Ve.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&p5(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=Ql(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Q4(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,f5),Fu&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Fu&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&gr(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Ql(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new OC(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=wv(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Ip(t,e.previousSibling||e.target.previousSibling,-1),n=Ip(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Li)!=e.state.facet(Li)&&(e.view.contentDOM.editContext=e.state.facet(Li)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ip(s,e,t){for(;e;){let i=bt.get(e);if(i&&i.parent==s)return i;let n=e.parentNode;e=n!=s.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Bp(s,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,r=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return go(o.node,o.offset,n,r)&&([t,i,n,r]=[n,r,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:r}}function p5(s,e){if(e.getComposedRanges){let n=e.getComposedRanges(s.root)[0];if(n)return Bp(s,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",i,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",i,!0),t?Bp(s,t):null}class m5{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let n=e.state.selection.main,{anchor:r,head:o}=n,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let c=a-l>i.text.length;l==this.from&&r<this.from?l=r:a==this.to&&r>this.to&&(a=r);let u=Sv(e.state.sliceDoc(l,a),i.text,(c?n.from:n.to)-l,c?"end":null);if(!u){let h=fe.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));h.main.eq(n)||e.dispatch({selection:h,userEvent:"select"});return}let d={from:u.from+l,to:u.toA+l,insert:ut.of(i.text.slice(u.from,u.toB).split(`
`))};if((Ve.mac||Ve.android)&&d.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:l,to:a,insert:ut.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let h=this.to-this.from+(d.to-d.from+d.insert.length);sf(e,d,fe.single(this.toEditorPos(i.selectionStart,h),this.toEditorPos(i.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);r=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||r||new DOMRect,n.push(r)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,l=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(l)){let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(a<c){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(l)?1:2}px`;n.push(Ge.mark({attributes:{style:u}}).range(a,c))}}}e.dispatch({effects:hv.of(Ge.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=jo(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((r,o,l,a,c)=>{if(i)return;let u=c.length-(o-r);if(n&&o>=n.to)if(n.from==r&&n.to==o&&n.insert.eq(c)){n=this.pendingContextChange=null,t+=u,this.to+=u;return}else n=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=u}t+=u}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(n=>!n.isUserEvent("input.type")&&n.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Y4(e.parent)||document,this.viewState=new Lp(e.state||lt.create(e)),e.scrollTo&&e.scrollTo.is(_l)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(nr).map(n=>new Iu(n));for(let n of this.plugins)n.update(this);this.observer=new h5(this),this.inputState=new LC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new vp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ft?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,r=this.state;for(let h of e){if(h.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=h.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Ev))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Tv(r,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(lt.phrases)!=this.state.facet(lt.phrases))return this.setState(r);n=ka.create(this,r,e),n.flags|=l;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:m}=h.state.selection;d=new vr(m.empty?m:fe.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of h.effects)m.is(_l)&&(d=m.value.clip(this.state))}this.viewState.update(n,d),this.bidiCache=wa.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(to)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Tl)!=n.state.facet(Tl)&&(this.viewState.mustMeasureContent=!0),(t||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let h of this.state.facet(Zc))try{h(n)}catch(m){Ms(this.state,m,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!wv(this,u)&&c.force&&gr(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Lp(e),this.plugins=e.facet(nr).map(i=>new Iu(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new vp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(nr),i=e.state.facet(nr);if(t!=i){let n=[];for(let r of i){let o=t.indexOf(r);if(o<0)n.push(new Iu(r));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Ms(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(z0(i))r=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(n);r=m.from,o=m.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(m=>{try{return m.read(this)}catch(y){return Ms(this.state,y),Np}}),d=ka.create(this,this.state,[]),h=!1;d.flags|=a,t?t.flags|=a:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let m=0;m<c.length;m++)if(u[m]!=Np)try{let y=c[m];y.write&&y.write(u[m],this)}catch(y){Ms(this.state,y)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let y=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(y>1||y<-1){n=n+y,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Zc))l(t)}get themeClasses(){return nd+" "+(this.state.facet(id)?$v:Pv)+" "+this.state.facet(Tl)}updateAttrs(){let e=Up(this,pv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Li)?"true":"false",class:"cm-content",style:`${Ve.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Up(this,ef,t);let i=this.observer.ignore(()=>{let n=Gc(this.contentDOM,this.contentAttrs,t),r=Gc(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(Pe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(to);let e=this.state.facet(Pe.cspNonce);pn.mount(this.root,this.styleModules.concat(d5).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Nu(this,e,wp(this,e,t,i))}moveByGroup(e,t){return Nu(this,e,wp(this,e,t,i=>MC(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return fe.cursor(r.side(t,n)+e.from,r.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return AC(this,e,t,i)}moveVertically(e,t,i){return Nu(this,e,DC(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),bv(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n),o=r[on.find(r,e-n.from,-1,t)];return ru(i,o.dir==Et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(cv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>g5)return sv(e.length);let t=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||tv(r.isolates,i=gp(this,e))))return r.order;i||(i=gp(this,e));let n=cC(e.text,t,i);return this.bidiCache.push(new wa(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ve.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{U0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return _l.of(new vr(typeof e=="number"?fe.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return _l.of(new vr(fe.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Bt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Bt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=pn.newName(),n=[Tl.of(i),to.of(rd(`.${i}`,e))];return t&&t.dark&&n.push(id.of(!0)),n}static baseTheme(e){return Gn.lowest(to.of(rd("."+nd,e,jv)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&bt.get(i)||bt.get(e);return((t=n?.rootView)===null||t===void 0?void 0:t.view)||null}}Pe.styleModule=to;Pe.inputHandler=av;Pe.clipboardInputFilter=Xd;Pe.clipboardOutputFilter=Zd;Pe.scrollHandler=fv;Pe.focusChangeEffect=uv;Pe.perLineTextDirection=cv;Pe.exceptionSink=lv;Pe.updateListener=Zc;Pe.editable=Li;Pe.mouseSelectionStyle=ov;Pe.dragMovesSelection=rv;Pe.clickAddsSelectionRange=nv;Pe.decorations=Ro;Pe.outerDecorations=mv;Pe.atomicRanges=tl;Pe.bidiIsolatedRanges=gv;Pe.scrollMargins=vv;Pe.darkTheme=id;Pe.cspNonce=je.define({combine:s=>s.length?s[0]:""});Pe.contentAttributes=ef;Pe.editorAttributes=pv;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=et.define();const g5=4096,Np={};class wa{constructor(e,t,i,n,r,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:Et.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new wa(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Up(s,e,t){for(let i=s.state.facet(e),n=i.length-1;n>=0;n--){let r=i[n],o=typeof r=="function"?r(s):r;o&&qc(o,t)}return t}const v5=Ve.mac?"mac":Ve.windows?"win":Ve.linux?"linux":"key";function y5(s,e){const t=s.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,r,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return n&&(i="Alt-"+i),r&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Vl(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const b5=Gn.default(Pe.domEventHandlers({keydown(s,e){return Rv(Lv(e.state),s,e,"editor")}})),of=je.define({enables:b5}),Fp=new WeakMap;function Lv(s){let e=s.facet(of),t=Fp.get(e);return t||Fp.set(e,t=w5(e.reduce((i,n)=>i.concat(n),[]))),t}function k5(s,e,t){return Rv(Lv(s.state),e,s,t)}let tn=null;const x5=4e3;function w5(s,e=v5){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,l,a,c,u)=>{var d,h;let m=t[o]||(t[o]=Object.create(null)),y=l.split(/ (?!$)/).map(p=>y5(p,e));for(let p=1;p<y.length;p++){let j=y.slice(0,p).join(" ");n(j,!0),m[j]||(m[j]={preventDefault:!0,stopPropagation:!1,run:[B=>{let G=tn={view:B,prefix:j,scope:o};return setTimeout(()=>{tn==G&&(tn=null)},x5),!0}]})}let x=y.join(" ");n(x,!1);let S=m[x]||(m[x]={preventDefault:!1,stopPropagation:!1,run:((h=(d=m._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});a&&S.run.push(a),c&&(S.preventDefault=!0),u&&(S.stopPropagation=!0)};for(let o of s){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(m=>d(m,od))}let a=o[e]||o.key;if(a)for(let c of l)r(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let od=null;function Rv(s,e,t,i){od=e;let n=H4(e),r=Cs(n,0),o=yi(r)==n.length&&n!=" ",l="",a=!1,c=!1,u=!1;tn&&tn.view==t&&tn.scope==i&&(l=tn.prefix+" ",Cv.indexOf(e.keyCode)<0&&(c=!0,tn=null));let d=new Set,h=S=>{if(S){for(let p of S.run)if(!d.has(p)&&(d.add(p),p(t)))return S.stopPropagation&&(u=!0),!0;S.preventDefault&&(S.stopPropagation&&(u=!0),c=!0)}return!1},m=s[i],y,x;return m&&(h(m[l+Vl(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ve.windows&&e.ctrlKey&&e.altKey)&&!(Ve.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(y=mn[e.keyCode])&&y!=n?(h(m[l+Vl(y,e,!0)])||e.shiftKey&&(x=$o[e.keyCode])!=n&&x!=y&&h(m[l+Vl(x,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(m[l+Vl(n,e,!0)])&&(a=!0),!a&&h(m._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),od=null,a}class sl{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=Iv(e);return[new sl(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}else return S5(e,t,i)}}function Iv(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Et.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function zp(s,e,t,i){let n=s.coordsAtPos(e,t*2);if(!n)return i;let r=s.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=s.posAtCoords({x:r.left+1,y:o}),a=s.posAtCoords({x:r.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function S5(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let i=Math.max(t.from,s.viewport.from),n=Math.min(t.to,s.viewport.to),r=s.textDirection==Et.LTR,o=s.contentDOM,l=o.getBoundingClientRect(),a=Iv(s),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),m=td(s,i,1),y=td(s,n,-1),x=m.type==ys.Text?m:null,S=y.type==ys.Text?y:null;if(x&&(s.lineWrapping||m.widgetLineBreaks)&&(x=zp(s,i,1,x)),S&&(s.lineWrapping||y.widgetLineBreaks)&&(S=zp(s,n,-1,S)),x&&S&&x.from==S.from&&x.to==S.to)return j(B(t.from,t.to,x));{let N=x?B(t.from,null,x):G(m,!1),O=S?B(null,t.to,S):G(y,!0),_=[];return(x||m).to<(S||y).from-(x&&S?1:0)||m.widgetLineBreaks>1&&N.bottom+s.defaultLineHeight/2<O.top?_.push(p(d,N.bottom,h,O.top)):N.bottom<O.top&&s.elementAtHeight((N.bottom+O.top)/2).type==ys.Text&&(N.bottom=O.top=(N.bottom+O.top)/2),j(N).concat(_).concat(j(O))}function p(N,O,_,V){return new sl(e,N-a.left,O-a.top,_-N,V-O)}function j({top:N,bottom:O,horizontal:_}){let V=[];for(let K=0;K<_.length;K+=2)V.push(p(_[K],N,_[K+1],O));return V}function B(N,O,_){let V=1e9,K=-1e9,oe=[];function ne(se,$,q,Y,de){let ye=s.coordsAtPos(se,se==_.to?-2:2),Ke=s.coordsAtPos(q,q==_.from?2:-2);!ye||!Ke||(V=Math.min(ye.top,Ke.top,V),K=Math.max(ye.bottom,Ke.bottom,K),de==Et.LTR?oe.push(r&&$?d:ye.left,r&&Y?h:Ke.right):oe.push(!r&&Y?d:Ke.left,!r&&$?h:ye.right))}let R=N??_.from,le=O??_.to;for(let se of s.visibleRanges)if(se.to>R&&se.from<le)for(let $=Math.max(se.from,R),q=Math.min(se.to,le);;){let Y=s.state.doc.lineAt($);for(let de of s.bidiSpans(Y)){let ye=de.from+Y.from,Ke=de.to+Y.from;if(ye>=q)break;Ke>$&&ne(Math.max(ye,$),N==null&&ye<=R,Math.min(Ke,q),O==null&&Ke>=le,de.dir)}if($=Y.to+1,$>=q)break}return oe.length==0&&ne(R,N==null,le,O==null,s.textDirection),{top:V,bottom:K,horizontal:oe}}function G(N,O){let _=l.top+(O?N.top:N.bottom);return{top:_,bottom:_,horizontal:[]}}}function _5(s,e){return s.constructor==e.constructor&&s.eq(e)}class C5{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ea)!=e.state.facet(ea)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(ea);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!_5(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e,Ve.safari&&Ve.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ea=je.define();function Bv(s){return[Bt.define(e=>new C5(e,s)),ea.of(s)]}const Io=je.define({combine(s){return Ci(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function A5(s={}){return[Io.of(s),M5,D5,E5,dv.of(!0)]}function Nv(s){return s.startState.facet(Io)!=s.state.facet(Io)}const M5=Bv({above:!0,markers(s){let{state:e}=s,t=e.facet(Io),i=[];for(let n of e.selection.ranges){let r=n==e.selection.main;if(n.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:fe.cursor(n.head,n.head>n.anchor?-1:1);for(let a of sl.forRange(s,o,l))i.push(a)}}return i},update(s,e){s.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Nv(s);return t&&Hp(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){Hp(e.state,s)},class:"cm-cursorLayer"});function Hp(s,e){e.style.animationDuration=s.facet(Io).cursorBlinkRate+"ms"}const D5=Bv({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:sl.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||Nv(s)},class:"cm-selectionLayer"}),E5=Gn.highest(Pe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Uv=et.define({map(s,e){return s==null?null:e.mapPos(s)}}),no=Zt.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,i)=>i.is(Uv)?i.value:t,s)}}),T5=Bt.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(no);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(no)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(no),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let i=s.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-i.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(no)!=s&&this.view.dispatch({effects:Uv.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function V5(){return[no,T5]}function Wp(s,e,t,i,n){e.lastIndex=0;for(let r=s.iterRange(t,i),o=t,l;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;l=e.exec(r.value);)n(o+l.index,l)}function O5(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let i=[];for(let{from:n,to:r}of t)n=Math.max(s.state.doc.lineAt(n).from,n-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=r:i.push({from:n,to:r});return i}class P5{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,c,u)=>n(u,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,u)=>{let d=i(l,a,c);d&&u(c,c+l[0].length,d)};else if(i)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new Ni,i=t.add.bind(t);for(let{from:n,to:r}of O5(e,this.maxLength))Wp(e.state.doc,this.regexp,n,r,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((r,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let o=Math.max(r.from,i),l=Math.min(r.to,n);if(l>=o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(r.from,a.from),d=Math.min(r.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){d=l;break}}let h=[],m,y=(x,S,p)=>h.push(p.range(x,S));if(a==c)for(this.regexp.lastIndex=u-a.from;(m=this.regexp.exec(a.text))&&m.index<d-a.from;)this.addMatch(m,e,m.index+a.from,y);else Wp(e.state.doc,this.regexp,u,d,(x,S)=>this.addMatch(S,e,x,y));t=t.update({filterFrom:u,filterTo:d,filter:(x,S)=>x<u||S>d,add:h})}}return t}}const ld=/x/.unicode!=null?"gu":"g",$5=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,ld),j5={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let zu=null;function L5(){var s;if(zu==null&&typeof document<"u"&&document.body){let e=document.body.style;zu=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return zu||!1}const ta=je.define({combine(s){let e=Ci(s,{render:null,specialChars:$5,addSpecialChars:null});return(e.replaceTabs=!L5())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,ld)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ld)),e}});function R5(s={}){return[ta.of(s),I5()]}let Kp=null;function I5(){return Kp||(Kp=Bt.fromClass(class{constructor(s){this.view=s,this.decorations=Ge.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(ta)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new P5({regexp:s.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,r=Cs(e[0],0);if(r==9){let o=n.lineAt(i),l=t.state.tabSize,a=Lr(o.text,l,i-o.from);return Ge.replace({widget:new F5((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Ge.replace({widget:new U5(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(ta);s.startState.facet(ta)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const B5="";function N5(s){return s>=32?B5:s==10?"":String.fromCharCode(9216+s)}class U5 extends bn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=N5(this.code),i=e.state.phrase("Control character")+" "+(j5[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class F5 extends bn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function z5(){return W5}const H5=Ge.line({class:"cm-activeLine"}),W5=Bt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let i of s.state.selection.ranges){let n=s.lineBlockAt(i.head);n.from>e&&(t.push(H5.range(n.from)),e=n.from)}return Ge.set(t)}},{decorations:s=>s.decorations}),ad=2e3;function K5(s,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),r=[];if(e.off>ad||t.off>ad||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let c=s.doc.line(a);c.length<=l&&r.push(fe.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let c=s.doc.line(a),u=Bc(c.text,o,s.tabSize,!0);if(u<0)r.push(fe.cursor(c.to));else{let d=Bc(c.text,l,s.tabSize);r.push(fe.range(c.from+u,c.from+d))}}}return r}function q5(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function qp(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),i=s.state.doc.lineAt(t),n=t-i.from,r=n>ad?-1:n==i.length?q5(s,e.clientX):Lr(i.text,s.state.tabSize,t-i.from);return{line:i.number,col:r,off:n}}function G5(s,e){let t=qp(s,e),i=s.state.selection;return t?{update(n){if(n.docChanged){let r=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,r,o){let l=qp(s,n);if(!l)return i;let a=K5(s.state,t,l);return a.length?o?fe.create(a.concat(i.ranges)):fe.create(a):i}}:null}function J5(s){let e=(t=>t.altKey&&t.button==0);return Pe.mouseSelectionStyle.of((t,i)=>e(i)?G5(t,i):null)}const Y5={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},Q5={style:"cursor: crosshair"};function X5(s={}){let[e,t]=Y5[s.key||"Alt"],i=Bt.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,Pe.contentAttributes.of(n=>{var r;return!((r=n.plugin(i))===null||r===void 0)&&r.isDown?Q5:null})]}const Yr="-10000px";class Fv{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<r.length;a++){let c=r[a],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let d=o[a]=this.tooltipViews[u];l&&(l[a]=t[u]),d.update&&d.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,c)=>t[c]=a),t.length=l.length),this.input=n,this.tooltips=r,this.tooltipViews=o,!0}}function Z5(s){let e=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Hu=je.define({combine:s=>{var e,t,i;return{position:Ve.ios?"absolute":((e=s.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=s.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Z5}}}),Gp=new WeakMap,lf=Bt.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(Hu);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Fv(s,af,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,i=s.state.facet(Hu);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=Yr,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(s=i.destroy)===null||s===void 0||s.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Ve.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Yr&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),n=tf(this.view);return{visible:{left:i.left+n.left,top:i.top+n.top,right:i.right-n.right,bottom:i.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Hu).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:t}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:t,space:i,scaleX:n,scaleY:r}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,d=s.pos[l],h=s.size[l];if(!d||a.clip!==!1&&(d.bottom<=Math.max(t.top,i.top)||d.top>=Math.min(t.bottom,i.bottom)||d.right<Math.max(t.left,i.left)-.1||d.left>Math.min(t.right,i.right)+.1)){u.style.top=Yr;continue}let m=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,y=m?7:0,x=h.right-h.left,S=(e=Gp.get(c))!==null&&e!==void 0?e:h.bottom-h.top,p=c.offset||t3,j=this.view.textDirection==Et.LTR,B=h.width>i.right-i.left?j?i.left:i.right-h.width:j?Math.max(i.left,Math.min(d.left-(m?14:0)+p.x,i.right-x)):Math.min(Math.max(i.left,d.left-x+(m?14:0)-p.x),i.right-x),G=this.above[l];!a.strictSide&&(G?d.top-S-y-p.y<i.top:d.bottom+S+y+p.y>i.bottom)&&G==i.bottom-d.bottom>d.top-i.top&&(G=this.above[l]=!G);let N=(G?d.top-i.top:i.bottom-d.bottom)-y;if(N<S&&c.resize!==!1){if(N<this.view.defaultLineHeight){u.style.top=Yr;continue}Gp.set(c,S),u.style.height=(S=N)/r+"px"}else u.style.height&&(u.style.height="");let O=G?d.top-S-y-p.y:d.bottom+y+p.y,_=B+x;if(c.overlap!==!0)for(let V of o)V.left<_&&V.right>B&&V.top<O+S&&V.bottom>O&&(O=G?V.top-S-2-y:V.bottom+y+2);if(this.position=="absolute"?(u.style.top=(O-s.parent.top)/r+"px",Jp(u,(B-s.parent.left)/n)):(u.style.top=O/r+"px",Jp(u,B/n)),m){let V=d.left+(j?p.x:-p.x)-(B+14-7);m.style.left=V/n+"px"}c.overlap!==!0&&o.push({left:B,top:O,right:_,bottom:O+S}),u.classList.toggle("cm-tooltip-above",G),u.classList.toggle("cm-tooltip-below",!G),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Yr}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Jp(s,e){let t=parseInt(s.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(s.style.left=e+"px")}const e3=Pe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),t3={x:0,y:0},af=je.define({enables:[lf,e3]}),Sa=je.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class lu{static create(e){return new lu(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Fv(e,Sa,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const s3=af.compute([Sa],s=>{let e=s.facet(Sa);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:lu.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class i3{constructor(e,t,i,n,r){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,r=1;if(i instanceof rn)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(u=>u.from<=n&&u.to>=n),c=a&&a.dir==Et.RTL?-1:1;r=t.x<l.left?-c:c}let o=this.source(e,n,r);if(o?.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Ms(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(lf),t=e?e.manager.tooltips.findIndex(i=>i.create==lu.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!n3(r.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!r3(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ol=4;function n3(s,e){let{left:t,right:i,top:n,bottom:r}=s.getBoundingClientRect(),o;if(o=s.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),r=Math.max(l.bottom,r)}return e.clientX>=t-Ol&&e.clientX<=i+Ol&&e.clientY>=n-Ol&&e.clientY<=r+Ol}function r3(s,e,t,i,n,r){let o=s.scrollDOM.getBoundingClientRect(),l=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=s.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function o3(s,e={}){let t=et.define(),i=Zt.define({create(){return[]},update(n,r){if(n.length&&(e.hideOnChange&&(r.docChanged||r.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let l of n){let a=r.changes.mapPos(l.pos,-1,vs.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=r.changes.mapPos(c.end)),o.push(c)}}n=o}for(let o of r.effects)o.is(t)&&(n=o.value),o.is(l3)&&(n=[]);return n},provide:n=>Sa.from(n)});return{active:i,extension:[i,Bt.define(n=>new i3(n,s,i,t,e.hoverTime||300)),s3]}}function zv(s,e){let t=s.plugin(lf);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const l3=et.define(),Yp=je.define({combine(s){let e,t;for(let i of s)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Bo(s,e){let t=s.plugin(Hv),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Hv=Bt.fromClass(class{constructor(s){this.input=s.state.facet(No),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(Yp);this.top=new Pl(s,!0,e.topContainer),this.bottom=new Pl(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(Yp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Pl(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Pl(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(No);if(t!=this.input){let i=t.filter(a=>a),n=[],r=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(s.view),l.push(u)):(u=this.panels[c],u.update&&u.update(s)),n.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=n,this.top.sync(r),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Pe.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Pl{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Qp(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Qp(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Qp(s){let e=s.nextSibling;return s.remove(),e}const No=je.define({enables:Hv});class Fi extends Un{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Fi.prototype.elementClass="";Fi.prototype.toDOM=void 0;Fi.prototype.mapMode=vs.TrackBefore;Fi.prototype.startSide=Fi.prototype.endSide=-1;Fi.prototype.point=!0;const sa=je.define(),a3=je.define(),u3={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>at.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},bo=je.define();function c3(s){return[Wv(),bo.of({...u3,...s})]}const Xp=je.define({combine:s=>s.some(e=>e)});function Wv(s){return[d3]}const d3=Bt.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(bo).map(e=>new em(s,e)),this.fixed=!s.state.facet(Xp);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(s.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Xp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=at.iter(this.view.state.facet(sa),this.view.viewport.from),i=[],n=this.gutters.map(r=>new f3(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let l of r.type)if(l.type==ys.Text&&o){ud(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(r.type==ys.Text){ud(t,i,r.from);for(let o of n)o.line(this.view,r,i)}else if(r.widget)for(let o of n)o.widget(this.view,r);for(let r of n)r.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let e=s.startState.facet(bo),t=s.state.facet(bo),i=s.docChanged||s.heightChanged||s.viewportChanged||!at.eq(s.startState.facet(sa),s.state.facet(sa),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(s)&&(i=!0);else{i=!0;let n=[];for(let r of t){let o=e.indexOf(r);o<0?n.push(new em(this.view,r)):(this.gutters[o].update(s),n.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),n.indexOf(r)<0&&r.destroy();for(let r of n)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=n}return i}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>Pe.scrollMargins.of(e=>{let t=e.plugin(s);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,n=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Et.LTR?{left:i,right:n}:{right:i,left:n}})});function Zp(s){return Array.isArray(s)?s:[s]}function ud(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class f3{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=at.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new Kv(e,o,r,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];ud(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let r of e.state.facet(a3)){let o=r(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class em{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let r=n.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let a=r.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=Zp(t.markers(e)),t.initialSpacer&&(this.spacer=new Kv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Zp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!at.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Kv{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),h3(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,o=0;;){let l=o,a=r<t.length?t[r++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(a)){l=d,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(n);let d=n.nextSibling;n.remove(),n=d}}if(!a)break;a.toDOM&&(c?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function h3(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const p3=je.define(),m3=je.define(),rr=je.define({combine(s){return Ci(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let r=i[n],o=t[n];i[n]=r?(l,a,c)=>r(l,a,c)||o(l,a,c):o}return i}})}});class Wu extends Fi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ku(s,e){return s.state.facet(rr).formatNumber(e,s.state)}const g3=bo.compute([rr],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(p3)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new Wu(Ku(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(m3)){let r=n(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(rr)!=e.state.facet(rr),initialSpacer(e){return new Wu(Ku(e,tm(e.state.doc.lines)))},updateSpacer(e,t){let i=Ku(t.view,tm(t.view.state.doc.lines));return i==e.number?e:new Wu(i)},domEventHandlers:s.facet(rr).domEventHandlers,side:"before"}));function v3(s={}){return[rr.of(s),Wv(),g3]}function tm(s){let e=9;for(;e<s;)e=e*10+9;return e}const y3=new class extends Fi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},b3=sa.compute(["selection"],s=>{let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.head).from;n>t&&(t=n,e.push(y3.range(n)))}return at.of(e)});function k3(){return b3}const x3=1024;let w3=0;class qu{constructor(e,t){this.from=e,this.to=t}}class ot{constructor(e={}){this.id=w3++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ts.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ot.closedBy=new ot({deserialize:s=>s.split(" ")});ot.openedBy=new ot({deserialize:s=>s.split(" ")});ot.group=new ot({deserialize:s=>s.split(" ")});ot.isolate=new ot({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}});ot.contextHash=new ot({perNode:!0});ot.lookAhead=new ot({perNode:!0});ot.mounted=new ot({perNode:!0});class _a{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ot.mounted.id]}}const S3=Object.create(null);class Ts{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):S3,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Ts(e.name||"",t,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ot.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(ot.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?i.name:n[r]];if(o)return o}}}}Ts.none=new Ts("",Object.create(null),0,8);class uf{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let r of e){let o=r(i);if(o){n||(n=Object.assign({},i.props));let l=o[1],a=o[0];a.combine&&a.id in n&&(l=a.combine(n[a.id],l)),n[a.id]=l}}t.push(n?new Ts(i.name,n,i.id,i.flags):i)}return new uf(t)}}const $l=new WeakMap,sm=new WeakMap;var Yt;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(Yt||(Yt={}));class Pt{constructor(e,t,i,n,r){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,l]of r)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=_a.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new dd(this.topNode,e)}cursorAt(e,t=0,i=0){let n=$l.get(this)||this.topNode,r=new dd(n);return r.moveTo(e,t),$l.set(this,r._tree),r}get topNode(){return new Ws(this,0,0,null)}resolve(e,t=0){let i=Uo($l.get(this)||this.topNode,e,t,!1);return $l.set(this,i),i}resolveInner(e,t=0){let i=Uo(sm.get(this)||this.topNode,e,t,!0);return sm.set(this,i),i}resolveStack(e,t=0){return A3(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e,o=e.mode||0,l=(o&Yt.IncludeAnonymous)>0;for(let a=this.cursor(o|Yt.IncludeAnonymous);;){let c=!1;if(a.from<=r&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ff(Ts.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new Pt(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new Pt(Ts.none,t,i,n)))}static build(e){return M3(e)}}Pt.empty=new Pt(Ts.none,[],[],0);class cf{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new cf(this.buffer,this.index)}}class vn{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ts.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,i,n,r){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(qv(r,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,r=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){r[a++]=n[l++],r[a++]=n[l++]-i;let c=r[a++]=n[l++]-i;r[a++]=n[l++]-e,o=Math.max(o,c)}return new vn(r,o,this.set)}}function qv(s,e,t,i){switch(s){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Uo(s,e,t,i){for(var n;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!i&&s instanceof Ws&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=i?0:Yt.IgnoreOverlays;if(i)for(let o=s,l=o.parent;l;o=l,l=o.parent)o instanceof Ws&&o.index<0&&((n=l.enter(e,t,r))===null||n===void 0?void 0:n.from)!=o.from&&(s=l);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class Gv{cursor(e=0){return new dd(this,e)}getChild(e,t=null,i=null){let n=im(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return im(this,e,t,i)}resolve(e,t=0){return Uo(this,e,t,!1)}resolveInner(e,t=0){return Uo(this,e,t,!0)}matchContext(e){return cd(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class Ws extends Gv{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,r=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let u=l[e],d=a[e]+o.from;if(qv(n,i,d,d+u.length)){if(u instanceof vn){if(r&Yt.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,i-d,n);if(h>-1)return new ln(new _3(o,u,e,d),null,h)}else if(r&Yt.IncludeAnonymous||!u.type.isAnonymous||df(u)){let h;if(!(r&Yt.IgnoreMounts)&&(h=_a.get(u))&&!h.overlay)return new Ws(h.tree,d,e,o);let m=new Ws(u,d,e,o);return r&Yt.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(t<0?u.children.length-1:0,t,i,n)}}}if(r&Yt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Yt.IgnoreOverlays)&&(n=_a.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=r:o<r)&&(t<0?l>=r:l>r))return new Ws(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function im(s,e,t,i){let n=s.cursor(),r=[];if(!n.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return r}for(;;){if(i!=null&&n.type.is(i))return r;if(n.type.is(e)&&r.push(n.node),!n.nextSibling())return i==null?r:[]}}function cd(s,e,t=e.length-1){for(let i=s;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class _3{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class ln extends Gv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new ln(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Yt.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new ln(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ln(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ln(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let o=i.buffer[this.index+1];e.push(i.slice(n,r,o)),t.push(0)}return new Pt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Jv(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let i=t instanceof Ws&&t.index<0?null:t.parent,n=s.slice();return i?n[e]=i:n.splice(e,1),new C3(n,t)}class C3{constructor(e,t){this.heads=e,this.node=t}get next(){return Jv(this.heads)}}function A3(s,e,t){let i=s.resolveInner(e,t),n=null;for(let r=i instanceof Ws?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(n||(n=[i])).push(o.resolve(e,t)),r=o}else{let o=_a.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Ws(o.tree,o.overlay[0].from+r.from,-1,r);(n||(n=[i])).push(Uo(l,e,t,!1))}}return n?Jv(n):i}class dd{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ws)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Ws?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Yt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(n.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let r=t+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let l=i._tree.children[r];if(this.mode&Yt.IncludeAnonymous||l instanceof vn||!l.type.isAnonymous||df(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=r+1;break e}n=this.stack[--r]}for(let n=i;n<this.stack.length;n++)t=new ln(this.buffer,t,this.stack[n]);return this.bufferNode=new ln(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return cd(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return cd(this._tree,e,n);let o=i[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function df(s){return s.children.some(e=>e instanceof vn||!e.type.isAnonymous||df(e))}function M3(s){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=x3,reused:r=[],minRepeatType:o=i.types.length}=s,l=Array.isArray(t)?new cf(t,t.length):t,a=i.types,c=0,u=0;function d(N,O,_,V,K,oe){let{id:ne,start:R,end:le,size:se}=l,$=u,q=c;if(se<0)if(l.next(),se==-1){let _e=r[ne];_.push(_e),V.push(R-N);return}else if(se==-3){c=ne;return}else if(se==-4){u=ne;return}else throw new RangeError(`Unrecognized record size: ${se}`);let Y=a[ne],de,ye,Ke=R-N;if(le-R<=n&&(ye=S(l.pos-O,K))){let _e=new Uint16Array(ye.size-ye.skip),Le=l.pos-ye.size,rt=_e.length;for(;l.pos>Le;)rt=p(ye.start,_e,rt);de=new vn(_e,le-ye.start,i),Ke=ye.start-N}else{let _e=l.pos-se;l.next();let Le=[],rt=[],ct=ne>=o?ne:-1,dt=0,st=le;for(;l.pos>_e;)ct>=0&&l.id==ct&&l.size>=0?(l.end<=st-n&&(y(Le,rt,R,dt,l.end,st,ct,$,q),dt=Le.length,st=l.end),l.next()):oe>2500?h(R,_e,Le,rt):d(R,_e,Le,rt,ct,oe+1);if(ct>=0&&dt>0&&dt<Le.length&&y(Le,rt,R,dt,R,st,ct,$,q),Le.reverse(),rt.reverse(),ct>-1&&dt>0){let U=m(Y,q);de=ff(Y,Le,rt,0,Le.length,0,le-R,U,U)}else de=x(Y,Le,rt,le-R,$-le,q)}_.push(de),V.push(Ke)}function h(N,O,_,V){let K=[],oe=0,ne=-1;for(;l.pos>O;){let{id:R,start:le,end:se,size:$}=l;if($>4)l.next();else{if(ne>-1&&le<ne)break;ne<0&&(ne=se-n),K.push(R,le,se),oe++,l.next()}}if(oe){let R=new Uint16Array(oe*4),le=K[K.length-2];for(let se=K.length-3,$=0;se>=0;se-=3)R[$++]=K[se],R[$++]=K[se+1]-le,R[$++]=K[se+2]-le,R[$++]=$;_.push(new vn(R,K[2]-le,i)),V.push(le-N)}}function m(N,O){return(_,V,K)=>{let oe=0,ne=_.length-1,R,le;if(ne>=0&&(R=_[ne])instanceof Pt){if(!ne&&R.type==N&&R.length==K)return R;(le=R.prop(ot.lookAhead))&&(oe=V[ne]+R.length+le)}return x(N,_,V,K,oe,O)}}function y(N,O,_,V,K,oe,ne,R,le){let se=[],$=[];for(;N.length>V;)se.push(N.pop()),$.push(O.pop()+_-K);N.push(x(i.types[ne],se,$,oe-K,R-oe,le)),O.push(K-_)}function x(N,O,_,V,K,oe,ne){if(oe){let R=[ot.contextHash,oe];ne=ne?[R].concat(ne):[R]}if(K>25){let R=[ot.lookAhead,K];ne=ne?[R].concat(ne):[R]}return new Pt(N,O,_,V,ne)}function S(N,O){let _=l.fork(),V=0,K=0,oe=0,ne=_.end-n,R={size:0,start:0,skip:0};e:for(let le=_.pos-N;_.pos>le;){let se=_.size;if(_.id==O&&se>=0){R.size=V,R.start=K,R.skip=oe,oe+=4,V+=4,_.next();continue}let $=_.pos-se;if(se<0||$<le||_.start<ne)break;let q=_.id>=o?4:0,Y=_.start;for(_.next();_.pos>$;){if(_.size<0)if(_.size==-3)q+=4;else break e;else _.id>=o&&(q+=4);_.next()}K=Y,V+=se,oe+=q}return(O<0||V==N)&&(R.size=V,R.start=K,R.skip=oe),R.size>4?R:void 0}function p(N,O,_){let{id:V,start:K,end:oe,size:ne}=l;if(l.next(),ne>=0&&V<o){let R=_;if(ne>4){let le=l.pos-(ne-4);for(;l.pos>le;)_=p(N,O,_)}O[--_]=R,O[--_]=oe-N,O[--_]=K-N,O[--_]=V}else ne==-3?c=V:ne==-4&&(u=V);return _}let j=[],B=[];for(;l.pos>0;)d(s.start||0,s.bufferStart||0,j,B,-1,0);let G=(e=s.length)!==null&&e!==void 0?e:j.length?B[0]+j[0].length:0;return new Pt(a[s.topID],j.reverse(),B.reverse(),G)}const nm=new WeakMap;function ia(s,e){if(!s.isAnonymous||e instanceof vn||e.type!=s)return 1;let t=nm.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=s||!(i instanceof Pt)){t=1;break}t+=ia(s,i)}nm.set(e,t)}return t}function ff(s,e,t,i,n,r,o,l,a){let c=0;for(let y=i;y<n;y++)c+=ia(s,e[y]);let u=Math.ceil(c*1.5/8),d=[],h=[];function m(y,x,S,p,j){for(let B=S;B<p;){let G=B,N=x[B],O=ia(s,y[B]);for(B++;B<p;B++){let _=ia(s,y[B]);if(O+_>=u)break;O+=_}if(B==G+1){if(O>u){let _=y[G];m(_.children,_.positions,0,_.children.length,x[G]+j);continue}d.push(y[G])}else{let _=x[B-1]+y[B-1].length-N;d.push(ff(s,y,x,G,B,N,_,null,a))}h.push(N+j-r)}}return m(e,t,i,n,0),(l||a)(d,h,o)}class In{constructor(e,t,i,n,r=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new In(0,e.length,e,0,!1,i)];for(let r of t)r.to>e.length&&n.push(r);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<t.length?t[l]:null,d=u?u.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let h=o;if(a>=h.from||d<=h.to||c){let m=Math.max(h.from,a)-c,y=Math.min(h.to,d)-c;h=m>=y?null:new In(m,y,h.tree,h.offset+c,l>0,!!u)}if(h&&n.push(h),o.to>d)break;o=r<e.length?e[r++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return n}}class Yv{startParse(e,t,i){return typeof e=="string"&&(e=new D3(e)),i=i?i.length?i.map(n=>new qu(n.from,n.to)):[new qu(0,0)]:[new qu(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let r=n.advance();if(r)return r}}}class D3{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ot({perNode:!0});let E3=0;class Bs{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=E3++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Bs&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let n=new Bs(i,[],null,[]);if(n.set.push(n),t)for(let r of t.set)n.set.push(r);return n}static defineModifier(e){let t=new Ca(e);return i=>i.modified.indexOf(t)>-1?i:Ca.get(i.base||i,i.modified.concat(t).sort((n,r)=>n.id-r.id))}}let T3=0;class Ca{constructor(e){this.name=e,this.instances=[],this.id=T3++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&V3(t,l.modified));if(i)return i;let n=[],r=new Bs(e.name,n,e,t);for(let l of t)l.instances.push(r);let o=O3(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(Ca.get(l,a));return r}}function V3(s,e){return s.length==e.length&&s.every((t,i)=>t==e[i])}function O3(s){let e=[[]];for(let t=0;t<s.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(s[t]));return e.sort((t,i)=>i.length-t.length)}function P3(s){let e=Object.create(null);for(let t in s){let i=s[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let r=[],o=2,l=n;for(let d=0;;){if(l=="..."&&d>0&&d+3==n.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+n);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==n.length)break;let m=n[d++];if(d==n.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+n);l=n.slice(d)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+n);let u=new Fo(i,o,a>0?r.slice(0,a):null);e[c]=u.sort(e[c])}}return Qv.add(e)}const Qv=new ot({combine(s,e){let t,i,n;for(;s||e;){if(!s||e&&s.depth>=e.depth?(n=e,e=e.next):(n=s,s=s.next),t&&t.mode==n.mode&&!n.context&&!t.context)continue;let r=new Fo(n.tags,n.mode,n.context);t?t.next=r:i=r,t=r}return i}});class Fo{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Fo.empty=new Fo([],2,null);function Xv(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:i,all:n=null}=e||{};return{style:r=>{let o=n;for(let l of r)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function $3(s,e){let t=null;for(let i of s){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function j3(s,e,t,i=0,n=s.length){let r=new L3(i,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),i,n,"",r.highlighters),r.flush(n)}class L3{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,r){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(r=this.highlighters.filter(m=>!m.scope||m.scope(o)));let c=n,u=R3(e)||Fo.empty,d=$3(r,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(n+=(n?" ":"")+d)),this.startSpan(Math.max(t,l),c),u.opaque)return;let h=e.tree&&e.tree.prop(ot.mounted);if(h&&h.overlay){let m=e.node.enter(h.overlay[0].from+l,1),y=this.highlighters.filter(S=>!S.scope||S.scope(h.tree.type)),x=e.firstChild();for(let S=0,p=l;;S++){let j=S<h.overlay.length?h.overlay[S]:null,B=j?j.from+l:a,G=Math.max(t,p),N=Math.min(i,B);if(G<N&&x)for(;e.from<N&&(this.highlightRange(e,G,N,n,r),this.startSpan(Math.min(N,e.to),c),!(e.to>=B||!e.nextSibling())););if(!j||B>i)break;p=j.to+l,p>t&&(this.highlightRange(m.cursor(),Math.max(t,j.from+l),Math.min(i,p),"",y),this.startSpan(Math.min(i,p),c))}x&&e.parent()}else if(e.firstChild()){h&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function R3(s){let e=s.type.prop(Qv);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Me=Bs.define,jl=Me(),Zi=Me(),rm=Me(Zi),om=Me(Zi),en=Me(),Ll=Me(en),Gu=Me(en),pi=Me(),Mn=Me(pi),fi=Me(),hi=Me(),fd=Me(),Qr=Me(fd),Rl=Me(),De={comment:jl,lineComment:Me(jl),blockComment:Me(jl),docComment:Me(jl),name:Zi,variableName:Me(Zi),typeName:rm,tagName:Me(rm),propertyName:om,attributeName:Me(om),className:Me(Zi),labelName:Me(Zi),namespace:Me(Zi),macroName:Me(Zi),literal:en,string:Ll,docString:Me(Ll),character:Me(Ll),attributeValue:Me(Ll),number:Gu,integer:Me(Gu),float:Me(Gu),bool:Me(en),regexp:Me(en),escape:Me(en),color:Me(en),url:Me(en),keyword:fi,self:Me(fi),null:Me(fi),atom:Me(fi),unit:Me(fi),modifier:Me(fi),operatorKeyword:Me(fi),controlKeyword:Me(fi),definitionKeyword:Me(fi),moduleKeyword:Me(fi),operator:hi,derefOperator:Me(hi),arithmeticOperator:Me(hi),logicOperator:Me(hi),bitwiseOperator:Me(hi),compareOperator:Me(hi),updateOperator:Me(hi),definitionOperator:Me(hi),typeOperator:Me(hi),controlOperator:Me(hi),punctuation:fd,separator:Me(fd),bracket:Qr,angleBracket:Me(Qr),squareBracket:Me(Qr),paren:Me(Qr),brace:Me(Qr),content:pi,heading:Mn,heading1:Me(Mn),heading2:Me(Mn),heading3:Me(Mn),heading4:Me(Mn),heading5:Me(Mn),heading6:Me(Mn),contentSeparator:Me(pi),list:Me(pi),quote:Me(pi),emphasis:Me(pi),strong:Me(pi),link:Me(pi),monospace:Me(pi),strikethrough:Me(pi),inserted:Me(),deleted:Me(),changed:Me(),invalid:Me(),meta:Rl,documentMeta:Me(Rl),annotation:Me(Rl),processingInstruction:Me(Rl),definition:Bs.defineModifier("definition"),constant:Bs.defineModifier("constant"),function:Bs.defineModifier("function"),standard:Bs.defineModifier("standard"),local:Bs.defineModifier("local"),special:Bs.defineModifier("special")};for(let s in De){let e=De[s];e instanceof Bs&&(e.name=s)}Xv([{tag:De.link,class:"tok-link"},{tag:De.heading,class:"tok-heading"},{tag:De.emphasis,class:"tok-emphasis"},{tag:De.strong,class:"tok-strong"},{tag:De.keyword,class:"tok-keyword"},{tag:De.atom,class:"tok-atom"},{tag:De.bool,class:"tok-bool"},{tag:De.url,class:"tok-url"},{tag:De.labelName,class:"tok-labelName"},{tag:De.inserted,class:"tok-inserted"},{tag:De.deleted,class:"tok-deleted"},{tag:De.literal,class:"tok-literal"},{tag:De.string,class:"tok-string"},{tag:De.number,class:"tok-number"},{tag:[De.regexp,De.escape,De.special(De.string)],class:"tok-string2"},{tag:De.variableName,class:"tok-variableName"},{tag:De.local(De.variableName),class:"tok-variableName tok-local"},{tag:De.definition(De.variableName),class:"tok-variableName tok-definition"},{tag:De.special(De.variableName),class:"tok-variableName2"},{tag:De.definition(De.propertyName),class:"tok-propertyName tok-definition"},{tag:De.typeName,class:"tok-typeName"},{tag:De.namespace,class:"tok-namespace"},{tag:De.className,class:"tok-className"},{tag:De.macroName,class:"tok-macroName"},{tag:De.propertyName,class:"tok-propertyName"},{tag:De.operator,class:"tok-operator"},{tag:De.comment,class:"tok-comment"},{tag:De.meta,class:"tok-meta"},{tag:De.invalid,class:"tok-invalid"},{tag:De.punctuation,class:"tok-punctuation"}]);var Ju;const or=new ot;function I3(s){return je.define({combine:s?e=>e.concat(s):void 0})}const B3=new ot;class Js{constructor(e,t,i=[],n=""){this.data=e,this.name=n,lt.prototype.hasOwnProperty("tree")||Object.defineProperty(lt.prototype,"tree",{get(){return as(this)}}),this.parser=t,this.extension=[yn.of(this),lt.languageData.of((r,o,l)=>{let a=lm(r,o,l),c=a.type.prop(or);if(!c)return[];let u=r.facet(c),d=a.type.prop(B3);if(d){let h=a.resolve(o-a.from,l);for(let m of d)if(m.test(h,r)){let y=r.facet(m.facet);return m.type=="replace"?y:y.concat(u)}}return u})].concat(i)}isActiveAt(e,t,i=-1){return lm(e,t,i).type.prop(or)==this.data}findRegions(e){let t=e.facet(yn);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(r,o)=>{if(r.prop(or)==this.data){i.push({from:o,to:o+r.length});return}let l=r.prop(ot.mounted);if(l){if(l.tree.prop(or)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+r.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof Pt&&n(c,r.positions[a]+o)}};return n(as(e),0),i}get allowsNesting(){return!0}}Js.setState=et.define();function lm(s,e,t){let i=s.facet(yn),n=as(s).topNode;if(!i||i.allowsNesting)for(let r=n;r;r=r.enter(e,t,Yt.ExcludeBuffers))r.type.isTop&&(n=r);return n}function as(s){let e=s.field(Js.state,!1);return e?e.tree:Pt.empty}class N3{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Xr=null;class Dr{constructor(e,t,i=[],n,r,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Dr(e,t,[],Pt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new N3(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Pt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(In.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(In.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Xr;Xr=this;try{return e()}finally{Xr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=am(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:r,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,d,h)=>a.push({fromA:c,toA:u,fromB:d,toB:h})),i=In.applyChanges(i,a),n=Pt.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&l.push({from:u,to:d})}}}return new Dr(this.parser,t,i,n,r,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:r}=this.skipped[i];n<e.to&&r>e.from&&(this.fragments=am(this.fragments,n,r),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Yv{createParse(t,i,n){let r=n[0].from,o=n[n.length-1].to;return{parsedPos:r,advance(){let a=Xr;if(a){for(let c of n)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Pt(Ts.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Xr}}function am(s,e,t){return In.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class Er{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Er(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Dr.create(e.facet(yn).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Er(i)}}Js.state=Zt.define({create:Er.init,update(s,e){for(let t of e.effects)if(t.is(Js.setState))return t.value;return e.startState.facet(yn)!=e.state.facet(yn)?Er.init(e.state):s.apply(e)}});let Zv=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Zv=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Yu=typeof navigator<"u"&&(!((Ju=navigator.scheduling)===null||Ju===void 0)&&Ju.isInputPending)?()=>navigator.scheduling.isInputPending():null,U3=Bt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Js.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Js.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Zv(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(Js.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Yu?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work(()=>Yu&&Yu()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Js.setState.of(new Er(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ms(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),yn=je.define({combine(s){return s.length?s[0]:null},enables:s=>[Js.state,U3,Pe.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]}),F3=je.define(),hf=je.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function Wn(s){let e=s.facet(hf);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function zo(s,e){let t="",i=s.tabSize,n=s.facet(hf)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let r=0;r<e;r++)t+=n;return t}function pf(s,e){s instanceof lt&&(s=new au(s));for(let i of s.state.facet(F3)){let n=i(s,e);if(n!==void 0)return n}let t=as(s.state);return t.length>=e?z3(s,t,e):null}class au{constructor(e,t={}){this.state=e,this.options=t,this.unit=Wn(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return n!=null&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return Lr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ey=new ot;function z3(s,e,t){let i=e.resolveStack(t),n=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(n!=i.node){let r=[];for(let o=n;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return ty(i,s,t)}function ty(s,e,t){for(let i=s;i;i=i.next){let n=W3(i.node);if(n)return n(mf.create(e,t,i))}return 0}function H3(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function W3(s){let e=s.type.prop(ey);if(e)return e;let t=s.firstChild,i;if(t&&(i=t.type.prop(ot.closedBy))){let n=s.lastChild,r=n&&i.indexOf(n.name)>-1;return o=>J3(o,!0,1,void 0,r&&!H3(o)?n.from:void 0)}return s.parent==null?K3:null}function K3(){return 0}class mf extends au{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new mf(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(q3(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return ty(this.context.next,this.base,this.pos)}}function q3(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function G3(s){let e=s.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=n==null||n<=r.from?r.to:Math.min(r.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+c}}l=a.to}}function J3(s,e,t,i,n){let r=s.textAfter,o=r.match(/^\s*/)[0].length,l=i&&r.slice(o,o+i.length)==i||n==s.pos+o,a=G3(s);return a?l?s.column(a.from):s.column(a.to):s.baseIndent+(l?0:s.unit*t)}const Y3=200;function Q3(){return lt.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:i}=s.newSelection.main,n=t.lineAt(i);if(i>n.from+Y3)return s;let r=t.sliceString(n.from,i);if(!e.some(c=>c.test(r)))return s;let{state:o}=s,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let d=pf(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],m=zo(o,d);h!=m&&a.push({from:u.from,to:u.from+h.length,insert:m})}return a.length?[s,{changes:a,sequential:!0}]:s})}const X3=je.define(),Z3=new ot;function eA(s,e,t){let i=as(s);if(i.length<t)return null;let n=i.resolveStack(t,1),r=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(r&&l.from<e)break;let a=l.type.prop(Z3);if(a&&(l.to<i.length-50||i.length==s.doc.length||!tA(l))){let c=a(l,s);c&&c.from<=t&&c.from>=e&&c.to>t&&(r=c)}}return r}function tA(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function Aa(s,e,t){for(let i of s.facet(X3)){let n=i(s,e,t);if(n)return n}return eA(s,e,t)}function sy(s,e){let t=e.mapPos(s.from,1),i=e.mapPos(s.to,-1);return t>=i?void 0:{from:t,to:i}}const uu=et.define({map:sy}),il=et.define({map:sy});function iy(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(s.lineBlockAt(t));return e}const Kn=Zt.define({create(){return Ge.none},update(s,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>s=um(s,t,i)),s=s.map(e.changes);for(let t of e.effects)if(t.is(uu)&&!sA(s,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(oy),n=i?Ge.replace({widget:new uA(i(e.state,t.value))}):cm;s=s.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(il)&&(s=s.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(s=um(s,e.selection.main.head)),s},provide:s=>Pe.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let i=s[t++],n=s[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(cm.range(i,n))}return Ge.set(e,!0)}});function um(s,e,t=e){let i=!1;return s.between(e,t,(n,r)=>{n<t&&r>e&&(i=!0)}),i?s.update({filterFrom:e,filterTo:t,filter:(n,r)=>n>=t||r<=e}):s}function Ma(s,e,t){var i;let n=null;return(i=s.field(Kn,!1))===null||i===void 0||i.between(e,t,(r,o)=>{(!n||n.from>r)&&(n={from:r,to:o})}),n}function sA(s,e,t){let i=!1;return s.between(e,e,(n,r)=>{n==e&&r==t&&(i=!0)}),i}function ny(s,e){return s.field(Kn,!1)?e:e.concat(et.appendConfig.of(ly()))}const iA=s=>{for(let e of iy(s)){let t=Aa(s.state,e.from,e.to);if(t)return s.dispatch({effects:ny(s.state,[uu.of(t),ry(s,t)])}),!0}return!1},nA=s=>{if(!s.state.field(Kn,!1))return!1;let e=[];for(let t of iy(s)){let i=Ma(s.state,t.from,t.to);i&&e.push(il.of(i),ry(s,i,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function ry(s,e,t=!0){let i=s.state.doc.lineAt(e.from).number,n=s.state.doc.lineAt(e.to).number;return Pe.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${s.state.phrase("to")} ${n}.`)}const rA=s=>{let{state:e}=s,t=[];for(let i=0;i<e.doc.length;){let n=s.lineBlockAt(i),r=Aa(e,n.from,n.to);r&&t.push(uu.of(r)),i=(r?s.lineBlockAt(r.to):n).to+1}return t.length&&s.dispatch({effects:ny(s.state,t)}),!!t.length},oA=s=>{let e=s.state.field(Kn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(i,n)=>{t.push(il.of({from:i,to:n}))}),s.dispatch({effects:t}),!0},lA=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:iA},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:nA},{key:"Ctrl-Alt-[",run:rA},{key:"Ctrl-Alt-]",run:oA}],aA={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},oy=je.define({combine(s){return Ci(s,aA)}});function ly(s){return[Kn,fA]}function ay(s,e){let{state:t}=s,i=t.facet(oy),n=o=>{let l=s.lineBlockAt(s.posAtDOM(o.target)),a=Ma(s.state,l.from,l.to);a&&s.dispatch({effects:il.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(s,n,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}const cm=Ge.replace({widget:new class extends bn{toDOM(s){return ay(s,null)}}});class uA extends bn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ay(e,this.value)}}const cA={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Qu extends Fi{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function dA(s={}){let e={...cA,...s},t=new Qu(e,!0),i=new Qu(e,!1),n=Bt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(yn)!=o.state.facet(yn)||o.startState.field(Kn,!1)!=o.state.field(Kn,!1)||as(o.startState)!=as(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Ni;for(let a of o.viewportLineBlocks){let c=Ma(o.state,a.from,a.to)?i:Aa(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[n,c3({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||at.empty},initialSpacer(){return new Qu(e,!1)},domEventHandlers:{...r,click:(o,l,a)=>{if(r.click&&r.click(o,l,a))return!0;let c=Ma(o.state,l.from,l.to);if(c)return o.dispatch({effects:il.of(c)}),!0;let u=Aa(o.state,l.from,l.to);return u?(o.dispatch({effects:uu.of(u)}),!0):!1}}}),ly()]}const fA=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class nl{constructor(e,t){this.specs=e;let i;function n(l){let a=pn.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Js?l=>l.prop(or)==o.data:o?l=>l==o:void 0,this.style=Xv(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new pn(i):null,this.themeType=t.themeType}static define(e,t){return new nl(e,t||{})}}const hd=je.define(),uy=je.define({combine(s){return s.length?[s[0]]:null}});function Xu(s){let e=s.facet(hd);return e.length?e:s.facet(uy)}function cy(s,e){let t=[pA],i;return s instanceof nl&&(s.module&&t.push(Pe.styleModule.of(s.module)),i=s.themeType),e?.fallback?t.push(uy.of(s)):i?t.push(hd.computeN([Pe.darkTheme],n=>n.facet(Pe.darkTheme)==(i=="dark")?[s]:[])):t.push(hd.of(s)),t}class hA{constructor(e){this.markCache=Object.create(null),this.tree=as(e.state),this.decorations=this.buildDeco(e,Xu(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=as(e.state),i=Xu(e.state),n=i!=Xu(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!n&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ge.none;let i=new Ni;for(let{from:n,to:r}of e.visibleRanges)j3(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Ge.mark({class:a})))},n,r);return i.finish()}}const pA=Gn.high(Bt.fromClass(hA,{decorations:s=>s.decorations})),mA=nl.define([{tag:De.meta,color:"#404740"},{tag:De.link,textDecoration:"underline"},{tag:De.heading,textDecoration:"underline",fontWeight:"bold"},{tag:De.emphasis,fontStyle:"italic"},{tag:De.strong,fontWeight:"bold"},{tag:De.strikethrough,textDecoration:"line-through"},{tag:De.keyword,color:"#708"},{tag:[De.atom,De.bool,De.url,De.contentSeparator,De.labelName],color:"#219"},{tag:[De.literal,De.inserted],color:"#164"},{tag:[De.string,De.deleted],color:"#a11"},{tag:[De.regexp,De.escape,De.special(De.string)],color:"#e40"},{tag:De.definition(De.variableName),color:"#00f"},{tag:De.local(De.variableName),color:"#30a"},{tag:[De.typeName,De.namespace],color:"#085"},{tag:De.className,color:"#167"},{tag:[De.special(De.variableName),De.macroName],color:"#256"},{tag:De.definition(De.propertyName),color:"#00c"},{tag:De.comment,color:"#940"},{tag:De.invalid,color:"#f00"}]),gA=Pe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dy=1e4,fy="()[]{}",hy=je.define({combine(s){return Ci(s,{afterCursor:!0,brackets:fy,maxScanDistance:dy,renderMatch:bA})}}),vA=Ge.mark({class:"cm-matchingBracket"}),yA=Ge.mark({class:"cm-nonmatchingBracket"});function bA(s){let e=[],t=s.matched?vA:yA;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const kA=Zt.define({create(){return Ge.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],i=e.state.facet(hy);for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=ki(e.state,n.head,-1,i)||n.head>0&&ki(e.state,n.head-1,1,i)||i.afterCursor&&(ki(e.state,n.head,1,i)||n.head<e.state.doc.length&&ki(e.state,n.head+1,-1,i));r&&(t=t.concat(i.renderMatch(r,e.state)))}return Ge.set(t,!0)},provide:s=>Pe.decorations.from(s)}),xA=[kA,gA];function wA(s={}){return[hy.of(s),xA]}const SA=new ot;function pd(s,e,t){let i=s.prop(e<0?ot.openedBy:ot.closedBy);if(i)return i;if(s.name.length==1){let n=t.indexOf(s.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function md(s){let e=s.type.prop(SA);return e?e(s.node):s}function ki(s,e,t,i={}){let n=i.maxScanDistance||dy,r=i.brackets||fy,o=as(s),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=pd(a.type,t,r);if(c&&a.from<a.to){let u=md(a);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return _A(s,e,t,a,u,c,r)}}return CA(s,e,t,o,l.type,n,r)}function _A(s,e,t,i,n,r,o){let l=i.parent,a={from:n.from,to:n.to},c=0,u=l?.cursor();if(u&&(t<0?u.childBefore(i.from):u.childAfter(i.to)))do if(t<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let d=md(u);return{start:a,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(pd(u.type,t,o))c++;else if(pd(u.type,-t,o)){if(c==0){let d=md(u);return{start:a,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function CA(s,e,t,i,n,r,o){let l=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=s.doc.iterRange(e,t>0?s.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=r;){let m=u.value;t<0&&(h+=m.length);let y=e+h*t;for(let x=t>0?0:m.length-1,S=t>0?m.length:-1;x!=S;x+=t){let p=o.indexOf(m[x]);if(!(p<0||i.resolveInner(y+x,1).type!=n))if(p%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:y+x,to:y+x+1},matched:p>>1==a>>1};d--}}t>0&&(h+=m.length)}return u.done?{start:c,matched:!1}:null}function dm(s,e,t,i=0,n=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let r=n;for(let o=i;o<e;o++)s.charCodeAt(o)==9?r+=t-r%t:r++;return r}class py{constructor(e,t,i,n){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),i;if(typeof e=="string"?i=t==e:i=t&&(e instanceof RegExp?e.test(t):e(t)),i)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=dm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:dm(this.string,null,this.tabSize)}match(e,t,i){if(typeof e=="string"){let n=o=>i?o.toLowerCase():o,r=this.string.substr(this.pos,e.length);return n(r)==n(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function AA(s){return{name:s.name||"",token:s.token,blankLine:s.blankLine||(()=>{}),startState:s.startState||(()=>!0),copyState:s.copyState||MA,indent:s.indent||(()=>null),languageData:s.languageData||{},tokenTable:s.tokenTable||yf,mergeTokens:s.mergeTokens!==!1}}function MA(s){if(typeof s!="object")return s;let e={};for(let t in s){let i=s[t];e[t]=i instanceof Array?i.slice():i}return e}const fm=new WeakMap;class gf extends Js{constructor(e){let t=I3(e.languageData),i=AA(e),n,r=new class extends Yv{createParse(o,l,a){return new EA(n,o,l,a)}};super(t,r,[],e.name),this.topNode=OA(t,this),n=this,this.streamParser=i,this.stateAfter=new ot({perNode:!0}),this.tokenTable=e.tokenTable?new yy(i.tokenTable):VA}static define(e){return new gf(e)}getIndent(e){let t,{overrideIndentation:i}=e.options;i&&(t=fm.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let n=vf(this,e.node.tree,e.node.from,e.node.from,t??e.pos),r,o;if(n?(o=n.state,r=n.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let a=e.state.doc.lineAt(r),c=Math.min(e.pos,a.to);if(a.length){let u=i?i(a.from):-1,d=new py(a.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-a.from;)gy(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;r=a.to+1}let l=e.lineAt(e.pos);return i&&t==null&&fm.set(e.state,l.from),this.streamParser.indent(o,/^\s*(.*)/.exec(l.text)[1],e)}get allowsNesting(){return!1}}function vf(s,e,t,i,n){let r=t>=i&&t+e.length<=n&&e.prop(s.stateAfter);if(r)return{state:s.streamParser.copyState(r),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],c=l instanceof Pt&&a<n&&vf(s,l,a,i,n);if(c)return c}return null}function my(s,e,t,i,n){if(n&&t<=0&&i>=e.length)return e;!n&&t==0&&e.type==s.topNode&&(n=!0);for(let r=e.children.length-1;r>=0;r--){let o=e.positions[r],l=e.children[r],a;if(o<i&&l instanceof Pt){if(!(a=my(s,l,t-o,i-o,n)))break;return n?new Pt(e.type,e.children.slice(0,r).concat(a),e.positions.slice(0,r+1),o+a.length):a}}return null}function DA(s,e,t,i,n){for(let r of e){let o=r.from+(r.openStart?25:0),l=r.to-(r.openEnd?25:0),a=o<=t&&l>t&&vf(s,r.tree,0-r.offset,t,l),c;if(a&&a.pos<=i&&(c=my(s,r.tree,t+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:c}}return{state:s.streamParser.startState(n?Wn(n):4),tree:Pt.empty}}class EA{constructor(e,t,i,n){this.lang=e,this.input=t,this.fragments=i,this.ranges=n,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=n[n.length-1].to;let r=Dr.get(),o=n[0].from,{state:l,tree:a}=DA(e,i,o,this.to,r?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);r&&this.parsedPos<r.viewport.from-1e5&&n.some(c=>c.from<=r.viewport.from&&c.to>=r.viewport.from)&&(this.state=this.lang.streamParser.startState(Wn(r.state)),r.skipUntilInView(this.parsedPos,r.viewport.from),this.parsedPos=r.viewport.from),this.moveRangeIndex()}advance(){let e=Dr.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let i=t.indexOf(`
`);i>-1&&(t=t.slice(0,i))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let n=this.rangeIndex;;){let r=this.ranges[n].to;if(r>=i||(t=t.slice(0,r-(i-t.length)),n++,n==this.ranges.length))break;let o=this.ranges[n].from,l=this.lineAfter(o);t+=l,i=o+l.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let n=this.ranges[this.rangeIndex].to,r=e+t;if(i>0?n>r:n>=r)break;let o=this.ranges[++this.rangeIndex].from;t+=o-n}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,n){let r=4;if(this.ranges.length>1){n=this.skipGapsTo(t,n,1),t+=n;let l=this.chunk.length;n=this.skipGapsTo(i,n,-1),i+=n,r+=this.chunk.length-l}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&r==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==t?this.chunk[o+2]=i:this.chunk.push(e,t,i,r),n}parseLine(e){let{line:t,end:i}=this.nextLine(),n=0,{streamParser:r}=this.lang,o=new py(t,e?e.state.tabSize:4,e?Wn(e.state):2);if(o.eol())r.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=gy(r.token,o,this.state);if(l&&(n=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,n)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Pt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:TA,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Pt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Pt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function gy(s,e,t){e.start=e.pos;for(let i=0;i<10;i++){let n=s(e,t);if(e.pos>e.start)return n}throw new Error("Stream parser failed to advance stream.")}const yf=Object.create(null),Ho=[Ts.none],TA=new uf(Ho),hm=[],pm=Object.create(null),vy=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])vy[s]=by(yf,e);class yy{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),vy)}resolve(e){return e?this.table[e]||(this.table[e]=by(this.extra,e)):0}}const VA=new yy(yf);function Zu(s,e){hm.indexOf(s)>-1||(hm.push(s),console.warn(e))}function by(s,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=s[c]||De[c];u?typeof u=="function"?a.length?a=a.map(u):Zu(c,`Modifier ${c} used at start of tag`):a.length?Zu(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:Zu(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),r=pm[n];if(r)return r.id;let o=pm[n]=Ts.define({id:Ho.length,name:i,props:[P3({[i]:t})]});return Ho.push(o),o.id}function OA(s,e){let t=Ts.define({id:Ho.length,name:"Document",props:[or.add(()=>s),ey.add(()=>i=>e.getIndent(i))],top:!0});return Ho.push(t),t}Et.RTL,Et.LTR;const PA=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),i=kf(s.state,t.from);return i.line?$A(s):i.block?LA(s):!1};function bf(s,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=s(e,t);return n?(i(t.update(n)),!0):!1}}const $A=bf(BA,0),jA=bf(ky,0),LA=bf((s,e)=>ky(s,e,IA(e)),0);function kf(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Zr=50;function RA(s,{open:e,close:t},i,n){let r=s.sliceDoc(i-Zr,i),o=s.sliceDoc(n,n+Zr),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(o)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let u,d;n-i<=2*Zr?u=d=s.sliceDoc(i,n):(u=s.sliceDoc(i,i+Zr),d=s.sliceDoc(n-Zr,n));let h=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(d)[0].length,y=d.length-m-t.length;return u.slice(h,h+e.length)==e&&d.slice(y,y+t.length)==t?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:n-m-t.length,margin:/\s/.test(d.charAt(y-1))?1:0}}:null}function IA(s){let e=[];for(let t of s.selection.ranges){let i=s.doc.lineAt(t.from),n=t.to<=i.to?i:s.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:s.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function ky(s,e,t=e.selection.ranges){let i=t.map(r=>kf(e,r.from).block);if(!i.every(r=>r))return null;let n=t.map((r,o)=>RA(e,i[o],r.from,r.to));if(s!=2&&!n.every(r=>r))return{changes:e.changes(t.map((r,o)=>n[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(s!=1&&n.some(r=>r)){let r=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:c,close:u}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:r}}return null}function BA(s,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:r,to:o}of t){let l=i.length,a=1e9,c=kf(e,r).line;if(c){for(let u=r;u<=o;){let d=e.doc.lineAt(u);if(d.from>n&&(r==o||o>d.from)){n=d.from;let h=/^\s*/.exec(d.text)[0].length,m=h==d.length,y=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<a&&(a=h),i.push({line:d,comment:y,token:c,indent:h,empty:m,single:!1})}u=d.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(s!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:u,single:d}of i)(d||!u)&&r.push({from:l.from+c,insert:a+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const gd=Hi.define(),NA=Hi.define(),UA=je.define(),xy=je.define({combine(s){return Ci(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),wy=Zt.define({create(){return xi.empty},update(s,e){let t=e.state.facet(xy),i=e.annotation(gd);if(i){let a=Ds.fromTransaction(e,i.selection),c=i.side,u=c==0?s.undone:s.done;return a?u=Da(u,u.length,t.minDepth,a):u=Cy(u,e.startState.selection),new xi(c==0?i.rest:u,c==0?u:i.rest)}let n=e.annotation(NA);if((n=="full"||n=="before")&&(s=s.isolate()),e.annotation(Ft.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=Ds.fromTransaction(e),o=e.annotation(Ft.time),l=e.annotation(Ft.userEvent);return r?s=s.addChanges(r,o,l,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new xi(s.done.map(Ds.fromJSON),s.undone.map(Ds.fromJSON))}});function FA(s={}){return[wy,xy.of(s),Pe.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Sy:e.inputType=="historyRedo"?vd:null;return i?(e.preventDefault(),i(t)):!1}})]}function cu(s,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(wy,!1);if(!n)return!1;let r=n.pop(s,t,e);return r?(i(r),!0):!1}}const Sy=cu(0,!1),vd=cu(1,!1),zA=cu(0,!0),HA=cu(1,!0);class Ds{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new Ds(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Ds(e.changes&&Ut.fromJSON(e.changes),[],e.mapped&&Si.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,t){let i=Ns;for(let n of e.startState.facet(UA)){let r=n(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new Ds(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ns)}static selection(e){return new Ds(void 0,Ns,void 0,void 0,e)}}function Da(s,e,t,i){let n=e+1>t+20?e-t-1:0,r=s.slice(n,e);return r.push(i),r}function WA(s,e){let t=[],i=!1;return s.iterChangedRanges((n,r)=>t.push(n,r)),e.iterChangedRanges((n,r,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],u=t[a++];l>=c&&o<=u&&(i=!0)}}),i}function KA(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function _y(s,e){return s.length?e.length?s.concat(e):s:e}const Ns=[],qA=200;function Cy(s,e){if(s.length){let t=s[s.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-qA));return i.length&&i[i.length-1].eq(e)?s:(i.push(e),Da(s,s.length-1,1e9,t.setSelAfter(i)))}else return[Ds.selection([e])]}function GA(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ec(s,e){if(!s.length)return s;let t=s.length,i=Ns;for(;t;){let n=JA(s[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let r=s.slice(0,t);return r[t-1]=n,r}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Ds.selection(i)]:Ns}function JA(s,e,t){let i=_y(s.selectionsAfter.length?s.selectionsAfter.map(l=>l.map(e)):Ns,t);if(!s.changes)return Ds.selection(i);let n=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new Ds(n,et.mapEffects(s.effects,e),o,s.startSelection.map(r),i)}const YA=/^(input\.type|delete)($|\.)/;class xi{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new xi(this.done,this.undone):this}addChanges(e,t,i,n,r){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||YA.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,WA(l.changes,e.changes))||i=="input.type.compose")?o=Da(o,o.length-1,n.minDepth,new Ds(e.changes.compose(l.changes),_y(et.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ns)):o=Da(o,o.length,n.minDepth,e),new xi(o,Ns,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Ns;return r.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&KA(r[r.length-1],e)?this:new xi(Cy(this.done,e),this.undone,t,i)}addMapping(e){return new xi(ec(this.done,e),ec(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let r=n[n.length-1],o=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:gd.of({side:e,rest:GA(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=n.length==1?Ns:n.slice(0,n.length-1);return r.mapped&&(l=ec(l,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:gd.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}xi.empty=new xi(Ns,Ns);const QA=[{key:"Mod-z",run:Sy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:vd,preventDefault:!0},{linux:"Ctrl-Shift-z",run:vd,preventDefault:!0},{key:"Mod-u",run:zA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:HA,preventDefault:!0}];function Rr(s,e){return fe.create(s.ranges.map(e),s.mainIndex)}function ri(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function oi({state:s,dispatch:e},t){let i=Rr(s.selection,t);return i.eq(s.selection,!0)?!1:(e(ri(s,i)),!0)}function du(s,e){return fe.cursor(e?s.to:s.from)}function Ay(s,e){return oi(s,t=>t.empty?s.moveByChar(t,e):du(t,e))}function us(s){return s.textDirectionAt(s.state.selection.main.head)==Et.LTR}const My=s=>Ay(s,!us(s)),Dy=s=>Ay(s,us(s));function Ey(s,e){return oi(s,t=>t.empty?s.moveByGroup(t,e):du(t,e))}const XA=s=>Ey(s,!us(s)),ZA=s=>Ey(s,us(s));function e8(s,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function fu(s,e,t){let i=as(s).resolveInner(e.head),n=t?ot.closedBy:ot.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;e8(s,c,n)?i=c:a=t?c.to:c.from}let r=i.type.prop(n),o,l;return r&&(o=t?ki(s,i.from,1):ki(s,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,fe.cursor(l,t?-1:1)}const t8=s=>oi(s,e=>fu(s.state,e,!us(s))),s8=s=>oi(s,e=>fu(s.state,e,us(s)));function Ty(s,e){return oi(s,t=>{if(!t.empty)return du(t,e);let i=s.moveVertically(t,e);return i.head!=t.head?i:s.moveToLineBoundary(t,e)})}const Vy=s=>Ty(s,!1),Oy=s=>Ty(s,!0);function Py(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let r of s.state.facet(Pe.scrollMargins)){let o=r(s);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(i=Math.max(o?.bottom,i))}n=s.scrollDOM.clientHeight-t-i}else n=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(s.defaultLineHeight,n-5)}}function $y(s,e){let t=Py(s),{state:i}=s,n=Rr(i.selection,o=>o.empty?s.moveVertically(o,e,t.height):du(o,e));if(n.eq(i.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(i.selection.main.head),l=s.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<c&&(r=Pe.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return s.dispatch(ri(i,n),{effects:r}),!0}const mm=s=>$y(s,!1),yd=s=>$y(s,!0);function kn(s,e,t){let i=s.lineBlockAt(e.head),n=s.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=s.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let r=/^\s*/.exec(s.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(n=fe.cursor(i.from+r))}return n}const i8=s=>oi(s,e=>kn(s,e,!0)),n8=s=>oi(s,e=>kn(s,e,!1)),r8=s=>oi(s,e=>kn(s,e,!us(s))),o8=s=>oi(s,e=>kn(s,e,us(s))),l8=s=>oi(s,e=>fe.cursor(s.lineBlockAt(e.head).from,1)),a8=s=>oi(s,e=>fe.cursor(s.lineBlockAt(e.head).to,-1));function u8(s,e,t){let i=!1,n=Rr(s.selection,r=>{let o=ki(s,r.head,-1)||ki(s,r.head,1)||r.head>0&&ki(s,r.head-1,1)||r.head<s.doc.length&&ki(s,r.head+1,-1);if(!o||!o.end)return r;i=!0;let l=o.start.from==r.head?o.end.to:o.end.from;return fe.cursor(l)});return i?(e(ri(s,n)),!0):!1}const c8=({state:s,dispatch:e})=>u8(s,e);function Gs(s,e){let t=Rr(s.state.selection,i=>{let n=e(i);return fe.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(ri(s.state,t)),!0)}function jy(s,e){return Gs(s,t=>s.moveByChar(t,e))}const Ly=s=>jy(s,!us(s)),Ry=s=>jy(s,us(s));function Iy(s,e){return Gs(s,t=>s.moveByGroup(t,e))}const d8=s=>Iy(s,!us(s)),f8=s=>Iy(s,us(s)),h8=s=>Gs(s,e=>fu(s.state,e,!us(s))),p8=s=>Gs(s,e=>fu(s.state,e,us(s)));function By(s,e){return Gs(s,t=>s.moveVertically(t,e))}const Ny=s=>By(s,!1),Uy=s=>By(s,!0);function Fy(s,e){return Gs(s,t=>s.moveVertically(t,e,Py(s).height))}const gm=s=>Fy(s,!1),vm=s=>Fy(s,!0),m8=s=>Gs(s,e=>kn(s,e,!0)),g8=s=>Gs(s,e=>kn(s,e,!1)),v8=s=>Gs(s,e=>kn(s,e,!us(s))),y8=s=>Gs(s,e=>kn(s,e,us(s))),b8=s=>Gs(s,e=>fe.cursor(s.lineBlockAt(e.head).from)),k8=s=>Gs(s,e=>fe.cursor(s.lineBlockAt(e.head).to)),ym=({state:s,dispatch:e})=>(e(ri(s,{anchor:0})),!0),bm=({state:s,dispatch:e})=>(e(ri(s,{anchor:s.doc.length})),!0),km=({state:s,dispatch:e})=>(e(ri(s,{anchor:s.selection.main.anchor,head:0})),!0),xm=({state:s,dispatch:e})=>(e(ri(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),x8=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),w8=({state:s,dispatch:e})=>{let t=hu(s).map(({from:i,to:n})=>fe.range(i,Math.min(n+1,s.doc.length)));return e(s.update({selection:fe.create(t),userEvent:"select"})),!0},S8=({state:s,dispatch:e})=>{let t=Rr(s.selection,i=>{let n=as(s),r=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return fe.range(l.to,l.from)}return i});return t.eq(s.selection)?!1:(e(ri(s,t)),!0)};function zy(s,e){let{state:t}=s,i=t.selection,n=t.selection.ranges.slice();for(let r of t.selection.ranges){let o=t.doc.lineAt(r.head);if(e?o.to<s.state.doc.length:o.from>0)for(let l=r;;){let a=s.moveVertically(l,e);if(a.head<o.from||a.head>o.to){n.some(c=>c.head==a.head)||n.push(a);break}else{if(a.head==l.head)break;l=a}}}return n.length==i.ranges.length?!1:(s.dispatch(ri(t,fe.create(n,n.length-1))),!0)}const _8=s=>zy(s,!1),C8=s=>zy(s,!0),A8=({state:s,dispatch:e})=>{let t=s.selection,i=null;return t.ranges.length>1?i=fe.create([t.main]):t.main.empty||(i=fe.create([fe.cursor(t.main.head)])),i?(e(ri(s,i)),!0):!1};function rl(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:i}=s,n=i.changeByRange(r=>{let{from:o,to:l}=r;if(o==l){let a=e(r);a<o?(t="delete.backward",a=Il(s,a,!1)):a>o&&(t="delete.forward",a=Il(s,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Il(s,o,!1),l=Il(s,l,!0);return o==l?{range:r}:{changes:{from:o,to:l},range:fe.cursor(o,o<r.head?-1:1)}});return n.changes.empty?!1:(s.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Pe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Il(s,e,t){if(s instanceof Pe)for(let i of s.state.facet(Pe.atomicRanges).map(n=>n(s)))i.between(e,e,(n,r)=>{n<e&&r>e&&(e=t?r:n)});return e}const Hy=(s,e,t)=>rl(s,i=>{let n=i.from,{state:r}=s,o=r.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let c=Lr(l,r.tabSize),u=c%Wn(r)||Wn(r);for(let d=0;d<u&&l[l.length-1-d]==" ";d++)n--;a=n}else a=Xt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Xt(o.text,a-o.from,!1,!1)+o.from);return a}),bd=s=>Hy(s,!1,!0),Wy=s=>Hy(s,!0,!1),Ky=(s,e)=>rl(s,t=>{let i=t.head,{state:n}=s,r=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==t.head&&r.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Xt(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=t.head)&&(l=u),i=a}return i}),qy=s=>Ky(s,!1),M8=s=>Ky(s,!0),D8=s=>rl(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),E8=s=>rl(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),T8=s=>rl(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),V8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ut.of(["",""])},range:fe.cursor(i.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},O8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(i=>{if(!i.empty||i.from==0||i.from==s.doc.length)return{range:i};let n=i.from,r=s.doc.lineAt(n),o=n==r.from?n-1:Xt(r.text,n-r.from,!1)+r.from,l=n==r.to?n+1:Xt(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:l,insert:s.doc.slice(n,l).append(s.doc.slice(o,n))},range:fe.cursor(l)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function hu(s){let e=[],t=-1;for(let i of s.selection.ranges){let n=s.doc.lineAt(i.from),r=s.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=s.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:n.from,to:r.to,ranges:[i]});t=r.number+1}return e}function Gy(s,e,t){if(s.readOnly)return!1;let i=[],n=[];for(let r of hu(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),l=o.length+1;if(t){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let a of r.ranges)n.push(fe.range(Math.min(s.doc.length,a.anchor+l),Math.min(s.doc.length,a.head+l)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let a of r.ranges)n.push(fe.range(a.anchor-l,a.head-l))}}return i.length?(e(s.update({changes:i,scrollIntoView:!0,selection:fe.create(n,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const P8=({state:s,dispatch:e})=>Gy(s,e,!1),$8=({state:s,dispatch:e})=>Gy(s,e,!0);function Jy(s,e,t){if(s.readOnly)return!1;let i=[];for(let n of hu(s))t?i.push({from:n.from,insert:s.doc.slice(n.from,n.to)+s.lineBreak}):i.push({from:n.to,insert:s.lineBreak+s.doc.slice(n.from,n.to)});return e(s.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const j8=({state:s,dispatch:e})=>Jy(s,e,!1),L8=({state:s,dispatch:e})=>Jy(s,e,!0),R8=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(hu(e).map(({from:n,to:r})=>(n>0?n--:r<e.doc.length&&r++,{from:n,to:r}))),i=Rr(e.selection,n=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(n.head),l=s.coordsAtPos(n.head,n.assoc||1);l&&(r=o.bottom+s.documentTop-l.bottom+s.defaultLineHeight/2)}return s.moveVertically(n,!0,r)}).map(t);return s.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function I8(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=as(s).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),r;return i&&n&&i.to<=e&&n.from>=e&&(r=i.type.prop(ot.closedBy))&&r.indexOf(n.name)>-1&&s.doc.lineAt(i.to).from==s.doc.lineAt(n.from).from&&!/\S/.test(s.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const wm=Yy(!1),B8=Yy(!0);function Yy(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:r,to:o}=n,l=e.doc.lineAt(r),a=!s&&r==o&&I8(e,r);s&&(r=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new au(e,{simulateBreak:r,simulateDoubleBreak:!!a}),u=pf(c,r);for(u==null&&(u=Lr(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:r,to:o}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let d=["",zo(e,u)];return a&&d.push(zo(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:o,insert:ut.of(d)},range:fe.cursor(r+1+d[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function xf(s,e){let t=-1;return s.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=s.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let r=s.changes(n);return{changes:n,range:fe.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const N8=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),i=new au(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),n=xf(s,(r,o,l)=>{let a=pf(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],u=zo(s,a);(c!=u||l.from<r.from+c.length)&&(t[r.from]=a,o.push({from:r.from,to:r.from+c.length,insert:u}))});return n.changes.empty||e(s.update(n,{userEvent:"indent"})),!0},U8=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(xf(s,(t,i)=>{i.push({from:t.from,insert:s.facet(hf)})}),{userEvent:"input.indent"})),!0),F8=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(xf(s,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=Lr(n,s.tabSize),o=0,l=zo(s,Math.max(0,r-Wn(s)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),z8=s=>(s.setTabFocusMode(),!0),H8=[{key:"Ctrl-b",run:My,shift:Ly,preventDefault:!0},{key:"Ctrl-f",run:Dy,shift:Ry},{key:"Ctrl-p",run:Vy,shift:Ny},{key:"Ctrl-n",run:Oy,shift:Uy},{key:"Ctrl-a",run:l8,shift:b8},{key:"Ctrl-e",run:a8,shift:k8},{key:"Ctrl-d",run:Wy},{key:"Ctrl-h",run:bd},{key:"Ctrl-k",run:D8},{key:"Ctrl-Alt-h",run:qy},{key:"Ctrl-o",run:V8},{key:"Ctrl-t",run:O8},{key:"Ctrl-v",run:yd}],W8=[{key:"ArrowLeft",run:My,shift:Ly,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:XA,shift:d8,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:r8,shift:v8,preventDefault:!0},{key:"ArrowRight",run:Dy,shift:Ry,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ZA,shift:f8,preventDefault:!0},{mac:"Cmd-ArrowRight",run:o8,shift:y8,preventDefault:!0},{key:"ArrowUp",run:Vy,shift:Ny,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ym,shift:km},{mac:"Ctrl-ArrowUp",run:mm,shift:gm},{key:"ArrowDown",run:Oy,shift:Uy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:bm,shift:xm},{mac:"Ctrl-ArrowDown",run:yd,shift:vm},{key:"PageUp",run:mm,shift:gm},{key:"PageDown",run:yd,shift:vm},{key:"Home",run:n8,shift:g8,preventDefault:!0},{key:"Mod-Home",run:ym,shift:km},{key:"End",run:i8,shift:m8,preventDefault:!0},{key:"Mod-End",run:bm,shift:xm},{key:"Enter",run:wm,shift:wm},{key:"Mod-a",run:x8},{key:"Backspace",run:bd,shift:bd,preventDefault:!0},{key:"Delete",run:Wy,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:qy,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:M8,preventDefault:!0},{mac:"Mod-Backspace",run:E8,preventDefault:!0},{mac:"Mod-Delete",run:T8,preventDefault:!0}].concat(H8.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),K8=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t8,shift:h8},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:s8,shift:p8},{key:"Alt-ArrowUp",run:P8},{key:"Shift-Alt-ArrowUp",run:j8},{key:"Alt-ArrowDown",run:$8},{key:"Shift-Alt-ArrowDown",run:L8},{key:"Mod-Alt-ArrowUp",run:_8},{key:"Mod-Alt-ArrowDown",run:C8},{key:"Escape",run:A8},{key:"Mod-Enter",run:B8},{key:"Alt-l",mac:"Ctrl-l",run:w8},{key:"Mod-i",run:S8,preventDefault:!0},{key:"Mod-[",run:F8},{key:"Mod-]",run:U8},{key:"Mod-Alt-\\",run:N8},{key:"Shift-Mod-k",run:R8},{key:"Shift-Mod-\\",run:c8},{key:"Mod-/",run:PA},{key:"Alt-A",run:jA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:z8}].concat(W8),Sm=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Tr{constructor(e,t,i=0,n=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?l=>r(Sm(l)):Sm,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Cs(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Kd(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=yi(e);let n=this.normalize(t);if(n.length)for(let r=0,o=i;;r++){let l=n.charCodeAt(r),a=this.match(l,o,this.bufferPos+this.bufferStart);if(r==n.length-1){if(a)return this.value=a,this;break}o==i&&r<t.length&&t.charCodeAt(r)==l&&o++}}}match(e,t,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[r+1],to:i}:(this.matches[r]++,l=!0)),l||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(Tr.prototype[Symbol.iterator]=function(){return this});const Qy={from:-1,to:-1,match:/.*/.exec("")},wf="gm"+(/x/.unicode==null?"":"u");class Xy{constructor(e,t,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Qy,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Zy(e,t,i,n,r);this.re=new RegExp(t,wf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Ea(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Ea(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const tc=new WeakMap;class yr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=tc.get(e);if(!n||n.from>=i||n.to<=t){let l=new yr(t,e.sliceString(t,i));return tc.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:r,from:o}=n;return o>t&&(r=e.sliceString(t,o)+r,o=t),n.to<i&&(r+=e.sliceString(n.to,i)),tc.set(e,new yr(o,r)),new yr(t,r.slice(t-o,i-o))}}class Zy{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=Qy,this.matchPos=Ea(e,n),this.re=new RegExp(t,wf+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=yr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Ea(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=yr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Xy.prototype[Symbol.iterator]=Zy.prototype[Symbol.iterator]=function(){return this});function q8(s){try{return new RegExp(s,wf),!0}catch{return!1}}function Ea(s,e){if(e>=s.length)return e;let t=s.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function kd(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=wt("input",{class:"cm-textfield",name:"line",value:e}),i=wt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:ko.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},wt("label",s.state.phrase("Go to line"),": ",t)," ",wt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")),wt("button",{name:"close",onclick:()=>{s.dispatch({effects:ko.of(!1)}),s.focus()},"aria-label":s.state.phrase("close"),type:"button"},[""]));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,l=o.doc.lineAt(o.selection.main.head),[,a,c,u,d]=r,h=u?+u.slice(1):0,m=c?+c:l.number;if(c&&d){let S=m/100;a&&(S=S*(a=="-"?-1:1)+l.number/o.doc.lines),m=Math.round(o.doc.lines*S)}else c&&a&&(m=m*(a=="-"?-1:1)+l.number);let y=o.doc.line(Math.max(1,Math.min(o.doc.lines,m))),x=fe.cursor(y.from+Math.max(0,Math.min(h,y.length)));s.dispatch({effects:[ko.of(!1),Pe.scrollIntoView(x.from,{y:"center"})],selection:x}),s.focus()}return{dom:i}}const ko=et.define(),_m=Zt.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(ko)&&(s=t.value);return s},provide:s=>No.from(s,e=>e?kd:null)}),G8=s=>{let e=Bo(s,kd);if(!e){let t=[ko.of(!0)];s.state.field(_m,!1)==null&&t.push(et.appendConfig.of([_m,J8])),s.dispatch({effects:t}),e=Bo(s,kd)}return e&&e.dom.querySelector("input").select(),!0},J8=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Y8={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Q8=je.define({combine(s){return Ci(s,Y8,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function X8(s){return[iM,sM]}const Z8=Ge.mark({class:"cm-selectionMatch"}),eM=Ge.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Cm(s,e,t,i){return(t==0||s(e.sliceDoc(t-1,t))!=Vt.Word)&&(i==e.doc.length||s(e.sliceDoc(i,i+1))!=Vt.Word)}function tM(s,e,t,i){return s(e.sliceDoc(t,t+1))==Vt.Word&&s(e.sliceDoc(i-1,i))==Vt.Word}const sM=Bt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(Q8),{state:t}=s,i=t.selection;if(i.ranges.length>1)return Ge.none;let n=i.main,r,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Ge.none;let a=t.wordAt(n.head);if(!a)return Ge.none;o=t.charCategorizer(n.head),r=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Ge.none;if(e.wholeWords){if(r=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(Cm(o,t,n.from,n.to)&&tM(o,t,n.from,n.to)))return Ge.none}else if(r=t.sliceDoc(n.from,n.to),!r)return Ge.none}let l=[];for(let a of s.visibleRanges){let c=new Tr(t.doc,r,a.from,a.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!o||Cm(o,t,u,d))&&(n.empty&&u<=n.from&&d>=n.to?l.push(eM.range(u,d)):(u>=n.to||d<=n.from)&&l.push(Z8.range(u,d)),l.length>e.maxMatches))return Ge.none}}return Ge.set(l)}},{decorations:s=>s.decorations}),iM=Pe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),nM=({state:s,dispatch:e})=>{let{selection:t}=s,i=fe.create(t.ranges.map(n=>s.wordAt(n.head)||fe.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(s.update({selection:i})),!0)};function rM(s,e){let{main:t,ranges:i}=s.selection,n=s.wordAt(t.head),r=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new Tr(s.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Tr(s.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(r){let a=s.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const oM=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return nM({state:s,dispatch:e});let i=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=i))return!1;let n=rM(s,i);return n?(e(s.update({selection:s.selection.addRange(fe.range(n.from,n.to),!1),effects:Pe.scrollIntoView(n.to)})),!0):!1},Ir=je.define({combine(s){return Ci(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new yM(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class eb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||q8(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new cM(this):new aM(this)}getCursor(e,t=0,i){let n=e.doc?e:lt.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?ir(this,n,t,i):sr(this,n,t,i)}}class tb{constructor(e){this.spec=e}}function sr(s,e,t,i){return new Tr(e.doc,s.unquoted,t,i,s.caseSensitive?void 0:n=>n.toLowerCase(),s.wholeWord?lM(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function lM(s,e){return(t,i,n,r)=>((r>t||r+n.length<i)&&(r=Math.max(0,t-2),n=s.sliceString(r,Math.min(s.length,i+2))),(e(Ta(n,t-r))!=Vt.Word||e(Va(n,t-r))!=Vt.Word)&&(e(Va(n,i-r))!=Vt.Word||e(Ta(n,i-r))!=Vt.Word))}class aM extends tb{constructor(e){super(e)}nextMatch(e,t,i){let n=sr(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);n=sr(this.spec,e,0,r).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==i?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let r=Math.max(t,n-1e4-this.spec.unquoted.length),o=sr(this.spec,e,r,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(r==t)return null;n-=1e4}}prevMatch(e,t,i){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),n&&(n.from!=t||n.to!=i)?n:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=sr(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=sr(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function ir(s,e,t,i){return new Xy(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?uM(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Ta(s,e){return s.slice(Xt(s,e,!1),e)}function Va(s,e){return s.slice(e,Xt(s,e))}function uM(s){return(e,t,i)=>!i[0].length||(s(Ta(i.input,i.index))!=Vt.Word||s(Va(i.input,i.index))!=Vt.Word)&&(s(Va(i.input,i.index+i[0].length))!=Vt.Word||s(Ta(i.input,i.index+i[0].length))!=Vt.Word)}class cM extends tb{nextMatch(e,t,i){let n=ir(this.spec,e,i,e.doc.length).next();return n.done&&(n=ir(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-n*1e4),o=ir(this.spec,e,r,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(r==t||l.from>r+10))return l;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let n=i.length;n>0;n--){let r=+i.slice(0,n);if(r>0&&r<e.match.length)return e.match[r]+i.slice(n)}return t})}matchAll(e,t){let i=ir(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=ir(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Wo=et.define(),Sf=et.define(),cn=Zt.define({create(s){return new sc(xd(s).create(),null)},update(s,e){for(let t of e.effects)t.is(Wo)?s=new sc(t.value.create(),s.panel):t.is(Sf)&&(s=new sc(s.query,t.value?_f:null));return s},provide:s=>No.from(s,e=>e.panel)});class sc{constructor(e,t){this.query=e,this.panel=t}}const dM=Ge.mark({class:"cm-searchMatch"}),fM=Ge.mark({class:"cm-searchMatch cm-searchMatch-selected"}),hM=Bt.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(cn))}update(s){let e=s.state.field(cn);(e!=s.startState.field(cn)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Ge.none;let{view:t}=this,i=new Ni;for(let n=0,r=t.visibleRanges,o=r.length;n<o;n++){let{from:l,to:a}=r[n];for(;n<o-1&&a>r[n+1].from-500;)a=r[++n].to;s.highlight(t.state,l,a,(c,u)=>{let d=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,d?fM:dM)})}return i.finish()}},{decorations:s=>s.decorations});function ol(s){return e=>{let t=e.state.field(cn,!1);return t&&t.query.spec.valid?s(e,t):nb(e)}}const Oa=ol((s,{query:e})=>{let{to:t}=s.state.selection.main,i=e.nextMatch(s.state,t,t);if(!i)return!1;let n=fe.single(i.from,i.to),r=s.state.facet(Ir);return s.dispatch({selection:n,effects:[Cf(s,i),r.scrollToMatch(n.main,s)],userEvent:"select.search"}),ib(s),!0}),Pa=ol((s,{query:e})=>{let{state:t}=s,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let r=fe.single(n.from,n.to),o=s.state.facet(Ir);return s.dispatch({selection:r,effects:[Cf(s,n),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),ib(s),!0}),pM=ol((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:fe.create(t.map(i=>fe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),mM=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,r=[],o=0;for(let l=new Tr(s.doc,s.sliceDoc(i,n));!l.next().done;){if(r.length>1e3)return!1;l.value.from==i&&(o=r.length),r.push(fe.range(l.value.from,l.value.to))}return e(s.update({selection:fe.create(r,o),userEvent:"select.search.matches"})),!0},Am=ol((s,{query:e})=>{let{state:t}=s,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,i,i);if(!r)return!1;let o=r,l=[],a,c,u=[];o.from==i&&o.to==n&&(c=t.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),u.push(Pe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let d=s.state.changes(l);return o&&(a=fe.single(o.from,o.to).map(d),u.push(Cf(s,o)),u.push(t.facet(Ir).scrollToMatch(a.main,s))),s.dispatch({changes:d,selection:a,effects:u,userEvent:"input.replace"}),!0}),gM=ol((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(n=>{let{from:r,to:o}=n;return{from:r,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:Pe.announce.of(i),userEvent:"input.replace.all"}),!0});function _f(s){return s.state.facet(Ir).createPanel(s)}function xd(s,e){var t,i,n,r,o;let l=s.selection.main,a=l.empty||l.to>l.from+100?"":s.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=s.facet(Ir);return new eb({search:((t=e?.literal)!==null&&t!==void 0?t:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(n=e?.literal)!==null&&n!==void 0?n:c.literal,regexp:(r=e?.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function sb(s){let e=Bo(s,_f);return e&&e.dom.querySelector("[main-field]")}function ib(s){let e=sb(s);e&&e==s.root.activeElement&&e.select()}const nb=s=>{let e=s.state.field(cn,!1);if(e&&e.panel){let t=sb(s);if(t&&t!=s.root.activeElement){let i=xd(s.state,e.query.spec);i.valid&&s.dispatch({effects:Wo.of(i)}),t.focus(),t.select()}}else s.dispatch({effects:[Sf.of(!0),e?Wo.of(xd(s.state,e.query.spec)):et.appendConfig.of(kM)]});return!0},rb=s=>{let e=s.state.field(cn,!1);if(!e||!e.panel)return!1;let t=Bo(s,_f);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Sf.of(!1)}),!0},vM=[{key:"Mod-f",run:nb,scope:"editor search-panel"},{key:"F3",run:Oa,shift:Pa,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Oa,shift:Pa,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:rb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:mM},{key:"Mod-Alt-g",run:G8},{key:"Mod-d",run:oM,preventDefault:!0}];class yM{constructor(e){this.view=e;let t=this.query=e.state.field(cn).query.spec;this.commit=this.commit.bind(this),this.searchField=wt("input",{value:t.search,placeholder:Vs(e,"Find"),"aria-label":Vs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=wt("input",{value:t.replace,placeholder:Vs(e,"Replace"),"aria-label":Vs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=wt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=wt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=wt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,r,o){return wt("button",{class:"cm-button",name:n,onclick:r,type:"button"},o)}this.dom=wt("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Oa(e),[Vs(e,"next")]),i("prev",()=>Pa(e),[Vs(e,"previous")]),i("select",()=>pM(e),[Vs(e,"all")]),wt("label",null,[this.caseField,Vs(e,"match case")]),wt("label",null,[this.reField,Vs(e,"regexp")]),wt("label",null,[this.wordField,Vs(e,"by word")]),...e.state.readOnly?[]:[wt("br"),this.replaceField,i("replace",()=>Am(e),[Vs(e,"replace")]),i("replaceAll",()=>gM(e),[Vs(e,"replace all")])],wt("button",{name:"close",onclick:()=>rb(e),"aria-label":Vs(e,"close"),type:"button"},[""])])}commit(){let e=new eb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Wo.of(e)}))}keydown(e){k5(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Pa:Oa)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Am(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Wo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ir).top}}function Vs(s,e){return s.state.phrase(e)}const Bl=30,Nl=/[\s\.,:;?!]/;function Cf(s,{from:e,to:t}){let i=s.state.doc.lineAt(e),n=s.state.doc.lineAt(t).to,r=Math.max(i.from,e-Bl),o=Math.min(n,t+Bl),l=s.state.sliceDoc(r,o);if(r!=i.from){for(let a=0;a<Bl;a++)if(!Nl.test(l[a+1])&&Nl.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Bl;a--)if(!Nl.test(l[a-1])&&Nl.test(l[a])){l=l.slice(0,a);break}}return Pe.announce.of(`${s.state.phrase("current match")}. ${l} ${s.state.phrase("on line")} ${i.number}.`)}const bM=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),kM=[cn,Gn.low(hM),bM];class ob{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=as(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(lb(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Mm(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function xM(s){let e=Object.create(null),t=Object.create(null);for(let{label:n}of s){e[n[0]]=!0;for(let r=1;r<n.length;r++)t[n[r]]=!0}let i=Mm(e)+Mm(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function wM(s){let e=s.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:xM(e);return n=>{let r=n.matchBefore(i);return r||n.explicit?{from:r?r.from:n.pos,options:e,validFor:t}:null}}class Dm{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function Bn(s){return s.selection.main.from}function lb(s,e){var t;let{source:i}=s,n=e&&i[0]!="^",r=i[i.length-1]!="$";return!n&&!r?s:new RegExp(`${n?"^":""}(?:${i})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const ab=Hi.define();function SM(s,e,t,i){let{main:n}=s.selection,r=t-n.from,o=i-n.from;return{...s.changeByRange(l=>{if(l!=n&&t!=i&&s.sliceDoc(l.from+r,l.from+o)!=s.sliceDoc(t,i))return{range:l};let a=s.toText(e);return{changes:{from:l.from+r,to:i==n.from?l.to:l.from+o,insert:a},range:fe.cursor(l.from+r+a.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Em=new WeakMap;function _M(s){if(!Array.isArray(s))return s;let e=Em.get(s);return e||Em.set(s,e=wM(s)),e}const $a=et.define(),Ko=et.define();class CM{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Cs(e,t),n=yi(i);this.chars.push(i);let r=e.slice(t,t+n),o=r.toUpperCase();this.folded.push(Cs(o==r?r.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:o}=this;if(t.length==1){let j=Cs(e,0),B=yi(j),G=B==e.length?0:-100;if(j!=t[0])if(j==i[0])G+=-200;else return null;return this.ret(G,[0,B])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let j=0,B=Math.min(e.length,200);j<B&&c<a;){let G=Cs(e,j);(G==t[c]||G==i[c])&&(n[c++]=j),j+=yi(G)}if(c<a)return null}let u=0,d=0,h=!1,m=0,y=-1,x=-1,S=/[a-z]/.test(e),p=!0;for(let j=0,B=Math.min(e.length,200),G=0;j<B&&d<a;){let N=Cs(e,j);l<0&&(u<a&&N==t[u]&&(r[u++]=j),m<a&&(N==t[m]||N==i[m]?(m==0&&(y=j),x=j+1,m++):m=0));let O,_=N<255?N>=48&&N<=57||N>=97&&N<=122?2:N>=65&&N<=90?1:0:(O=Kd(N))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!j||_==1&&S||G==0&&_!=0)&&(t[d]==N||i[d]==N&&(h=!0)?o[d++]=j:o.length&&(p=!1)),G=_,j+=yi(N)}return d==a&&o[0]==0&&p?this.result(-100+(h?-200:0),o,e):m==a&&y==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):m==a?this.ret(-900-e.length,[y,x]):d==a?this.result(-100+(h?-200:0)+-700+(p?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],r=0;for(let o of t){let l=o+(this.astral?yi(Cs(i,o)):1);r&&n[r-1]==o?n[r-1]=l:(n[r++]=o,n[r++]=l)}return this.ret(e-i.length,n)}}class AM{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Wt=je.define({combine(s){return Ci(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:MM,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Tm(e(i),t(i)),optionClass:(e,t)=>i=>Tm(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Tm(s,e){return s?e?s+" "+e:s:e}function MM(s,e,t,i,n,r){let o=s.textDirection==Et.RTL,l=o,a=!1,c="top",u,d,h=e.left-n.left,m=n.right-e.right,y=i.right-i.left,x=i.bottom-i.top;if(l&&h<Math.min(y,m)?l=!1:!l&&m<Math.min(y,h)&&(l=!0),y<=(l?h:m))u=Math.max(n.top,Math.min(t.top,n.bottom-x))-e.top,d=Math.min(400,l?h:m);else{a=!0,d=Math.min(400,(o?e.right:n.right-e.left)-30);let j=n.bottom-e.bottom;j>=x||j>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let S=(e.bottom-e.top)/r.offsetHeight,p=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${u/S}px; max-width: ${d/p}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function DM(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,r){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<r.length;){let u=r[c++],d=r[c++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,d))),h.className="cm-completionMatchedText",a=d}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function ic(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((s-e)/t);return{from:s-(i+1)*t,to:s-i*t}}class EM{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:o}=n.open,l=e.state.facet(Wt);this.optionContent=DM(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=ic(r.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let u=a.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Wt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Ko.of(null)})}),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=r)&&(this.range=ic(r.length,o,e.state.facet(Wt).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;(t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ic(t.options.length,t.selected,this.view.state.facet(Wt).maxRenderedOptions),this.showOptions(t.options,e.id));let i=this.updateSelectedOption(t.selected);if(i){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(n);if(!o)return;"then"in o?o.then(l=>{l&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(l,n)}).catch(l=>Ms(this.view.state,l,"completion info")):(this.addInfoPane(o,n),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:r}=e;i.appendChild(n),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return t&&VM(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return n.top>Math.min(r.bottom,t.bottom)-10||n.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(Wt).positionInfo(this.view,t,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions")),n.addEventListener("mousedown",o=>{o.target==n&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=r&&(o>i.from||i.from==0))if(r=h,typeof c!="string"&&c.header)n.appendChild(c.header(c));else{let m=n.appendChild(document.createElement("completion-section"));m.textContent=h}}const u=n.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let d=this.optionClass(l);d&&(u.className=d);for(let h of this.optionContent){let m=h(l,this.view.state,this.view,a);m&&u.appendChild(m)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function TM(s,e){return t=>new EM(t,s,e)}function VM(s,e){let t=s.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/s.offsetHeight;i.top<t.top?s.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(s.scrollTop+=(i.bottom-t.bottom)/n)}function Vm(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function OM(s,e){let t=[],i=null,n=null,r=u=>{t.push(u);let{section:d}=u.completion;if(d){i||(i=[]);let h=typeof d=="string"?d:d.name;i.some(m=>m.name==h)||i.push(typeof d=="string"?{name:h}:d)}},o=e.facet(Wt);for(let u of s)if(u.hasResult()){let d=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new Dm(h,u.source,d?d(h):[],1e9-t.length));else{let h=e.sliceDoc(u.from,u.to),m,y=o.filterStrict?new AM(h):new CM(h);for(let x of u.result.options)if(m=y.match(x.label)){let S=x.displayLabel?d?d(x,m.matched):[]:m.matched,p=m.score+(x.boost||0);if(r(new Dm(x,u.source,S,p)),typeof x.section=="object"&&x.section.rank==="dynamic"){let{name:j}=x.section;n||(n=Object.create(null)),n[j]=Math.max(p,n[j]||-1e9)}}}}if(i){let u=Object.create(null),d=0,h=(m,y)=>(m.rank==="dynamic"&&y.rank==="dynamic"?n[y.name]-n[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof y.rank=="number"?y.rank:1e9)||(m.name<y.name?-1:1);for(let m of i.sort(h))d-=1e5,u[m.name]=d;for(let m of t){let{section:y}=m.completion;y&&(m.score+=u[typeof y=="string"?y:y.name])}}let l=[],a=null,c=o.compareCompletions;for(let u of t.sort((d,h)=>h.score-d.score||c(d.completion,h.completion))){let d=u.completion;!a||a.label!=d.label||a.detail!=d.detail||a.type!=null&&d.type!=null&&a.type!=d.type||a.apply!=d.apply||a.boost!=d.boost?l.push(u):Vm(u.completion)>Vm(a)&&(l[l.length-1]=u),a=u.completion}return l}class lr{constructor(e,t,i,n,r,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new lr(this.options,Om(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,r,o){if(n&&!o&&e.some(c=>c.isPending))return n.setDisabled();let l=OM(e,t);if(!l.length)return n&&e.some(c=>c.isPending)?n.setDisabled():null;let a=t.facet(Wt).selectOnOpen?0:-1;if(n&&n.selected!=a&&n.selected!=-1){let c=n.options[n.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==c){a=u;break}}return new lr(l,Om(i,a),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:IM,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new lr(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new lr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ja{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new ja(LM,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Wt),r=(i.override||t.languageDataAt("autocomplete",Bn(t)).map(_M)).map(a=>(this.active.find(u=>u.source==a)||new Us(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((a,c)=>a==this.active[c])&&(r=this.active);let o=this.open,l=e.effects.some(a=>a.is(Af));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!PM(r,this.active)||l?o=lr.build(r,t,this.id,o,i,l):o&&o.disabled&&!r.some(a=>a.isPending)&&(o=null),!o&&r.every(a=>!a.isPending)&&r.some(a=>a.hasResult())&&(r=r.map(a=>a.hasResult()?new Us(a.source,0):a));for(let a of e.effects)a.is(cb)&&(o=o&&o.setSelected(a.value,this.id));return r==this.active&&o==this.open?this:new ja(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?$M:jM}}function PM(s,e){if(s==e)return!0;for(let t=0,i=0;;){for(;t<s.length&&!s[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let n=t==s.length,r=i==e.length;if(n||r)return n==r;if(s[t++].result!=e[i++].result)return!1}}const $M={"aria-autocomplete":"list"},jM={};function Om(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const LM=[];function ub(s,e){if(s.isUserEvent("input.complete")){let i=s.annotation(ab);if(i&&e.activateOnCompletion(i))return 12}let t=s.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class Us{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=ub(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new Us(n.source,0)),i&4&&n.state==0&&(n=new Us(this.source,1)),n=n.updateFor(e,i);for(let r of e.effects)if(r.is($a))n=new Us(n.source,1,r.value);else if(r.is(Ko))n=new Us(n.source,0);else if(r.is(Af))for(let o of r.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Bn(e.state))}}class br extends Us{constructor(e,t,i,n,r,o){super(e,3,t),this.limit=i,this.result=n,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Bn(e.state);if(l>o||!n||t&2&&(Bn(e.startState)==this.from||l<this.limit))return new Us(this.source,t&4?1:0);let a=e.changes.mapPos(this.limit);return RM(n.validFor,e.state,r,o)?new br(this.source,this.explicit,a,n,r,o):n.update&&(n=n.update(n,r,o,new ob(e.state,l,!1)))?new br(this.source,this.explicit,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Bn(e.state)):new Us(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new br(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Us(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function RM(s,e,t,i){if(!s)return!1;let n=e.sliceDoc(t,i);return typeof s=="function"?s(n,t,i,e):lb(s,!0).test(n)}const Af=et.define({map(s,e){return s.map(t=>t.map(e))}}),cb=et.define(),As=Zt.define({create(){return ja.start()},update(s,e){return s.update(e)},provide:s=>[af.from(s,e=>e.tooltip),Pe.contentAttributes.from(s,e=>e.attrs)]});function Mf(s,e){const t=e.completion.apply||e.completion.label;let i=s.state.field(As).active.find(n=>n.source==e.source);return i instanceof br?(typeof t=="string"?s.dispatch({...SM(s.state,t,i.from,i.to),annotations:ab.of(e.completion)}):t(s,e.completion,i.from,i.to),!0):!1}const IM=TM(As,Mf);function Ul(s,e="option"){return t=>{let i=t.state.field(As,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Wt).interactionDelay)return!1;let n=1,r;e=="page"&&(r=zv(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(s?1:-1):s?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:cb.of(l)}),!0}}const BM=s=>{let e=s.state.field(As,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(Wt).interactionDelay?!1:Mf(s,e.open.options[e.open.selected])},nc=s=>s.state.field(As,!1)?(s.dispatch({effects:$a.of(!0)}),!0):!1,NM=s=>{let e=s.state.field(As,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:Ko.of(null)}),!0)};class UM{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const FM=50,zM=1e3,HM=Bt.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(As).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(As),t=s.state.facet(Wt);if(!s.selectionSet&&!s.docChanged&&s.startState.field(As)==e)return;let i=s.transactions.some(r=>{let o=ub(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>FM&&Date.now()-o.time>zM){for(let l of o.context.abortListeners)try{l()}catch(a){Ms(this.view.state,a)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is($a)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(As);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Wt).updateSyncTime))}startQuery(s){let{state:e}=this.view,t=Bn(e),i=new ob(e,t,s.explicit,this.view),n=new UM(s,i);this.running.push(n),Promise.resolve(s.source(i)).then(r=>{n.context.aborted||(n.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:Ko.of(null)}),Ms(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Wt).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Wt),i=this.view.state.field(As);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let l=Bn(r.updates.length?r.updates[0].startState:this.view.state),a=Math.min(l,r.done.from+(r.active.explicit?0:1)),c=new br(r.active.source,r.active.explicit,a,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:l);for(let u of r.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let o=i.active.find(l=>l.source==r.active.source);if(o&&o.isPending)if(r.done==null){let l=new Us(r.active.source,0);for(let a of r.updates)l=l.update(a,t);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Af.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(As,!1);if(e&&e.tooltip&&this.view.state.facet(Wt).closeOnBlur){let t=e.open&&zv(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ko.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:$a.of(!1)}),20),this.composing=0}}}),WM=typeof navigator=="object"&&/Win/.test(navigator.platform),KM=Gn.highest(Pe.domEventHandlers({keydown(s,e){let t=e.state.field(As,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||s.key.length>1||s.ctrlKey&&!(WM&&s.altKey)||s.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||n.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&Mf(e,i),!1}})),qM=Pe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),qo={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ln=et.define({map(s,e){let t=e.mapPos(s,-1,vs.TrackAfter);return t??void 0}}),Df=new class extends Un{};Df.startSide=1;Df.endSide=-1;const db=Zt.define({create(){return at.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Ln)&&(s=s.update({add:[Df.range(t.value,t.value+1)]}));return s}});function GM(){return[YM,db]}const rc="()[]{}<>";function fb(s){for(let e=0;e<rc.length;e+=2)if(rc.charCodeAt(e)==s)return rc.charAt(e+1);return Kd(s<128?s:s+1)}function hb(s,e){return s.languageDataAt("closeBrackets",e)[0]||qo}const JM=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),YM=Pe.inputHandler.of((s,e,t,i)=>{if((JM?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let n=s.state.selection.main;if(i.length>2||i.length==2&&yi(Cs(i,0))==1||e!=n.from||t!=n.to)return!1;let r=ZM(s.state,i);return r?(s.dispatch(r),!0):!1}),QM=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let i=hb(s,s.selection.main.head).brackets||qo.brackets,n=null,r=s.changeByRange(o=>{if(o.empty){let l=eD(s.doc,o.head);for(let a of i)if(a==l&&pu(s.doc,o.head)==fb(Cs(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:fe.cursor(o.head-a.length)}}return{range:n=o}});return n||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},XM=[{key:"Backspace",run:QM}];function ZM(s,e){let t=hb(s,s.selection.main.head),i=t.brackets||qo.brackets;for(let n of i){let r=fb(Cs(n,0));if(e==n)return r==n?iD(s,n,i.indexOf(n+n+n)>-1,t):tD(s,n,r,t.before||qo.before);if(e==r&&pb(s,s.selection.main.from))return sD(s,n,r)}return null}function pb(s,e){let t=!1;return s.field(db).between(0,s.doc.length,i=>{i==e&&(t=!0)}),t}function pu(s,e){let t=s.sliceString(e,e+2);return t.slice(0,yi(Cs(t,0)))}function eD(s,e){let t=s.sliceString(e-2,e);return yi(Cs(t,0))==t.length?t:t.slice(1)}function tD(s,e,t,i){let n=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ln.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let l=pu(s.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Ln.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:n=o}});return n?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function sD(s,e,t){let i=null,n=s.changeByRange(r=>r.empty&&pu(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:fe.cursor(r.head+t.length)}:i={range:r});return i?null:s.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function iD(s,e,t,i){let n=i.stringPrefixes||qo.stringPrefixes,r=null,o=s.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Ln.of(l.to+e.length),range:fe.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=pu(s.doc,a),u;if(c==e){if(Pm(s,a))return{changes:{insert:e+e,from:a},effects:Ln.of(a+e.length),range:fe.cursor(a+e.length)};if(pb(s,a)){let h=t&&s.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:fe.cursor(a+h.length)}}}else{if(t&&s.sliceDoc(a-2*e.length,a)==e+e&&(u=$m(s,a-2*e.length,n))>-1&&Pm(s,u))return{changes:{insert:e+e+e+e,from:a},effects:Ln.of(a+e.length),range:fe.cursor(a+e.length)};if(s.charCategorizer(a)(c)!=Vt.Word&&$m(s,a,n)>-1&&!nD(s,a,e,n))return{changes:{insert:e+e,from:a},effects:Ln.of(a+e.length),range:fe.cursor(a+e.length)}}return{range:r=l}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Pm(s,e){let t=as(s).resolveInner(e+1);return t.parent&&t.from==e}function nD(s,e,t,i){let n=as(s).resolveInner(e,-1),r=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=s.sliceDoc(n.from,Math.min(n.to,n.from+t.length+r)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=n.firstChild;for(;u&&u.from==n.from&&u.to-u.from>t.length+a;){if(s.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=n.to==e&&n.parent;if(!c)break;n=c}return!1}function $m(s,e,t){let i=s.charCategorizer(e);if(i(s.sliceDoc(e-1,e))!=Vt.Word)return e;for(let n of t){let r=e-n.length;if(s.sliceDoc(r,e)==n&&i(s.sliceDoc(r-1,r))!=Vt.Word)return r}return-1}function rD(s={}){return[KM,As,Wt.of(s),HM,oD,qM]}const mb=[{key:"Ctrl-Space",run:nc},{mac:"Alt-`",run:nc},{mac:"Alt-i",run:nc},{key:"Escape",run:NM},{key:"ArrowDown",run:Ul(!0)},{key:"ArrowUp",run:Ul(!1)},{key:"PageDown",run:Ul(!0,"page")},{key:"PageUp",run:Ul(!1,"page")},{key:"Enter",run:BM}],oD=Gn.highest(of.computeN([Wt],s=>s.facet(Wt).defaultKeymap?[mb]:[]));class jm{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Pn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=i.facet(Go).markerFilter;n&&(e=n(e,i));let r=e.slice().sort((m,y)=>m.from-y.from||m.to-y.to),o=new Ni,l=[],a=0,c=i.doc.iter(),u=0,d=i.doc.length;for(let m=0;;){let y=m==r.length?null:r[m];if(!y&&!l.length)break;let x,S;if(l.length)x=a,S=l.reduce((B,G)=>Math.min(B,G.to),y&&y.from>x?y.from:1e8);else{if(x=y.from,x>d)break;S=y.to,l.push(y),m++}for(;m<r.length;){let B=r[m];if(B.from==x&&(B.to>B.from||B.to==x))l.push(B),m++,S=Math.min(B.to,S);else{S=Math.min(B.from,S);break}}S=Math.min(S,d);let p=!1;if(l.some(B=>B.from==x&&(B.to==S||S==d))&&(p=x==S,!p&&S-x<10)){let B=x-(u+c.value.length);B>0&&(c.next(B),u=x);for(let G=x;;){if(G>=S){p=!0;break}if(!c.lineBreak&&u+c.value.length>G)break;G=u+c.value.length,u+=c.value.length,c.next()}}let j=bD(l);if(p)o.add(x,x,Ge.widget({widget:new mD(j),diagnostics:l.slice()}));else{let B=l.reduce((G,N)=>N.markClass?G+" "+N.markClass:G,"");o.add(x,S,Ge.mark({class:"cm-lintRange cm-lintRange-"+j+B,diagnostics:l.slice(),inclusiveEnd:l.some(G=>G.to>S)}))}if(a=S,a==d)break;for(let B=0;B<l.length;B++)l[B].to<=a&&l.splice(B--,1)}let h=o.finish();return new Pn(h,t,Vr(h))}}function Vr(s,e=null,t=0){let i=null;return s.between(t,1e9,(n,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new jm(n,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new jm(i.from,r,i.diagnostic)}}),i}function lD(s,e){let t=e.pos,i=e.end||t,n=s.state.facet(Go).hideOn(s,t,i);if(n!=null)return n;let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(o=>o.is(gb))||s.changes.touchesRange(r.from,Math.max(r.to,i)))}function aD(s,e){return s.field(Ls,!1)?e:e.concat(et.appendConfig.of(kD))}const gb=et.define(),Ef=et.define(),vb=et.define(),Ls=Zt.define({create(){return new Pn(Ge.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let t=s.diagnostics.map(e.changes),i=null,n=s.panel;if(s.selected){let r=e.changes.mapPos(s.selected.from,1);i=Vr(t,s.selected.diagnostic,r)||Vr(t,null,r)}!t.size&&n&&e.state.facet(Go).autoPanel&&(n=null),s=new Pn(t,n,i)}for(let t of e.effects)if(t.is(gb)){let i=e.state.facet(Go).autoPanel?t.value.length?Jo.open:null:s.panel;s=Pn.init(t.value,i,e.state)}else t.is(Ef)?s=new Pn(s.diagnostics,t.value?Jo.open:null,s.selected):t.is(vb)&&(s=new Pn(s.diagnostics,s.panel,t.value));return s},provide:s=>[No.from(s,e=>e.panel),Pe.decorations.from(s,e=>e.diagnostics)]}),uD=Ge.mark({class:"cm-lintRange cm-lintRange-active"});function cD(s,e,t){let{diagnostics:i}=s.state.field(Ls),n,r=-1,o=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:u})=>{if(e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0)))return n=u.diagnostics,r=a,o=c,!1});let l=s.state.facet(Go).tooltipFilter;return n&&l&&(n=l(n,s.state)),n?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:dD(s,n)}}}:null}function dD(s,e){return wt("ul",{class:"cm-tooltip-lint"},e.map(t=>bb(s,t,!1)))}const fD=s=>{let e=s.state.field(Ls,!1);(!e||!e.panel)&&s.dispatch({effects:aD(s.state,[Ef.of(!0)])});let t=Bo(s,Jo.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Lm=s=>{let e=s.state.field(Ls,!1);return!e||!e.panel?!1:(s.dispatch({effects:Ef.of(!1)}),!0)},hD=s=>{let e=s.state.field(Ls,!1);if(!e)return!1;let t=s.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(s.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},pD=[{key:"Mod-Shift-m",run:fD,preventDefault:!0},{key:"F8",run:hD}],Go=je.define({combine(s){return{sources:s.map(e=>e.source).filter(e=>e!=null),...Ci(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Rm,tooltipFilter:Rm,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,n,r)=>e(i,n,r)||t(i,n,r):e:t,autoPanel:(e,t)=>e||t})}}});function Rm(s,e){return s?e?(t,i)=>e(s(t,i),i):s:e}function yb(s){let e=[];if(s)e:for(let{name:t}of s){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(r=>r.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function bb(s,e,t){var i;let n=t?yb(e.actions):[];return wt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},wt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let l=!1,a=m=>{if(m.preventDefault(),l)return;l=!0;let y=Vr(s.state.field(Ls).diagnostics,e);y&&r.apply(s,y.from,y.to)},{name:c}=r,u=n[o]?c.indexOf(n[o]):-1,d=u<0?c:[c.slice(0,u),wt("u",c.slice(u,u+1)),c.slice(u+1)],h=r.markClass?" "+r.markClass:"";return wt("button",{type:"button",class:"cm-diagnosticAction"+h,onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${n[o]})"`}.`},d)}),e.source&&wt("div",{class:"cm-diagnosticSource"},e.source))}class mD extends bn{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return wt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Im{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=bb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Jo{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Lm(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=yb(r.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Vr(this.view.state.field(Ls).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(n.target)&&this.moveSelection(r)};this.list=wt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=wt("div",{class:"cm-panel-lint"},this.list,wt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Lm(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ls).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ls),i=0,n=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,h;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==u){d=m;break}d<0?(h=new Im(this.view,u),this.items.splice(i,0,h),n=!0):(h=this.items[d],d>i&&(this.items.splice(i,d-i),n=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Im(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let c=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/c:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ls),i=Vr(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:vb.of(i)})}static open(e){return new Jo(e)}}function gD(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function Fl(s){return gD(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const vD=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fl("#d11")},".cm-lintRange-warning":{backgroundImage:Fl("orange")},".cm-lintRange-info":{backgroundImage:Fl("#999")},".cm-lintRange-hint":{backgroundImage:Fl("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function yD(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function bD(s){let e="hint",t=1;for(let i of s){let n=yD(i.severity);n>t&&(t=n,e=i.severity)}return e}const kD=[Ls,Pe.decorations.compute([Ls],s=>{let{selected:e,panel:t}=s.field(Ls);return!e||!t||e.from==e.to?Ge.none:Ge.set([uD.range(e.from,e.to)])}),o3(cD,{hideOn:lD}),vD],xD=[v3(),k3(),R5(),FA(),dA(),A5(),V5(),lt.allowMultipleSelections.of(!0),Q3(),cy(mA,{fallback:!0}),wA(),GM(),rD(),J5(),X5(),z5(),X8(),of.of([...XM,...K8,...vM,...QA,...lA,...mb,...pD])],wD={class:"rounded-lg border border-gray-300 overflow-hidden dark:border-gray-600"},kb={__name:"CodeEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"r",validator:s=>["r","markdown","text","gitignore"].includes(s)},minHeight:{type:String,default:"400px"},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie(null);let r=null;const o=gf.define({token(c){return c.sol()&&c.match(/^#/)?(c.skipToEnd(),"comment"):(c.skipToEnd(),null)}}),l=cy(nl.define([{tag:De.comment,color:"#16a34a"}])),a=()=>[o,l];return ls(()=>{if(!n.value)return;const c=Pe.updateListener.of(h=>{h.docChanged&&i("update:modelValue",h.state.doc.toString())}),u=[xD,a(),c,Pe.lineWrapping,Pe.theme({"&":{minHeight:t.minHeight,fontSize:"13px",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-scroller":{fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},".cm-content":{padding:"12px 0"},".cm-line":{padding:"0 12px"}})],d=lt.create({doc:t.modelValue||"",extensions:u});r=new Pe({state:d,parent:n.value})}),Ne(()=>t.modelValue,c=>{r&&c!==r.state.doc.toString()&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:c}})}),(c,u)=>(g(),v("div",wD,[f("div",{ref_key:"editorRef",ref:n},null,512)]))}},SD={class:"relative"},_D={key:0,class:"absolute z-10 mt-1 w-full max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 shadow-lg"},CD=["onClick","onMouseenter"],AD={class:"flex items-center justify-between gap-3"},MD={class:"flex-1 min-w-0"},DD={class:"font-medium text-gray-900 dark:text-white"},ED={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},TD={class:"ml-3 text-xs text-gray-400 dark:text-gray-500 shrink-0 flex items-center gap-1.5"},VD={class:"text-[10px] font-medium"},OD={key:1,class:"absolute right-3 top-9 text-gray-400"},xb={__name:"PackageAutocomplete",props:{modelValue:{type:String,default:""},label:{type:String,default:"Search Packages"},placeholder:{type:String,default:"Type to search..."},source:{type:String,default:"cran",validator:s=>["cran","bioconductor","github"].includes(s)}},emits:["update:modelValue","select"],setup(s,{emit:e}){const t=s,i=e,n=W({get:()=>t.modelValue,set:h=>i("update:modelValue",h)}),r=ie([]),o=ie(!1),l=ie(-1);let a=null;Ne(n,h=>{if(a&&clearTimeout(a),h.length<2){r.value=[],l.value=-1;return}a=setTimeout(()=>{c(h)},300)});const c=async h=>{o.value=!0;try{const y=await(await fetch(`/api/packages/search?q=${encodeURIComponent(h)}&source=${encodeURIComponent(t.source)}`)).json();r.value=y.packages||[],l.value=r.value.length>0?0:-1}catch(m){console.error("Failed to search packages:",m),r.value=[],l.value=-1}finally{o.value=!1}},u=h=>{r.value.length!==0&&(h.key==="ArrowDown"?(h.preventDefault(),l.value=Math.min(l.value+1,r.value.length-1)):h.key==="ArrowUp"?(h.preventDefault(),l.value=Math.max(l.value-1,0)):h.key==="Enter"&&l.value>=0?(h.preventDefault(),d(r.value[l.value])):h.key==="Escape"&&(r.value=[],l.value=-1))},d=h=>{i("update:modelValue",h.name),i("select",h),r.value=[],l.value=-1};return(h,m)=>(g(),v("div",SD,[w(ae,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=y=>n.value=y),label:s.label,placeholder:s.placeholder,onKeydown:u},null,8,["modelValue","label","placeholder"]),r.value.length>0?(g(),v("div",_D,[(g(!0),v(me,null,Ee(r.value,(y,x)=>(g(),v("button",{key:y.name,onClick:S=>d(y),onMouseenter:S=>l.value=x,class:Ae(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",l.value===x?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"])},[f("div",AD,[f("div",MD,[f("div",DD,ee(y.name),1),f("div",ED,ee(y.title),1)]),f("div",TD,[f("span",VD,ee(y.source==="cran"?"CRAN":y.source==="bioconductor"?"Bioconductor":y.source),1),m[1]||(m[1]=f("span",null,"",-1)),f("span",null,"v"+ee(y.version),1)])])],42,CD))),128))])):I("",!0),o.value?(g(),v("div",OD,[...m[2]||(m[2]=[f("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):I("",!0)]))}},PD={class:"flex items-center justify-between"},$D={class:"flex-1"},jD={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},LD={class:"text-sm text-gray-900 dark:text-white"},RD={__name:"OverviewCard",props:{title:{type:String,required:!0}},emits:["click"],setup(s){return(e,t)=>(g(),v("button",{onClick:t[0]||(t[0]=i=>e.$emit("click")),class:"w-full text-left px-4 py-3 rounded-md bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:border-sky-300 dark:hover:border-sky-700 transition"},[f("div",PD,[f("div",$D,[f("div",jD,ee(s.title),1),f("div",LD,[gt(e.$slots,"default")])]),t[1]||(t[1]=f("svg",{class:"h-5 w-5 text-gray-400 shrink-0 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])]))}},ID={class:"space-y-3"},BD=["innerHTML"],Tf={__name:"OverviewSummary",props:{cards:{type:Array,required:!0}},emits:["navigate"],setup(s){return(e,t)=>(g(),v("div",ID,[(g(!0),v(me,null,Ee(s.cards,i=>(g(),be(RD,{key:i.id,title:i.title,onClick:n=>e.$emit("navigate",i.section)},{default:Z(()=>[typeof i.content=="object"?(g(),be(Es(i.content),{key:0})):(g(),v("span",{key:1,innerHTML:i.content},null,8,BD))]),_:2},1032,["title","onClick"]))),128))]))}},ND={class:"pt-4 pb-2"},UD={class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider dark:text-gray-400"},La={__name:"NavigationSectionHeading",setup(s){return(e,t)=>(g(),v("div",ND,[f("h3",UD,[gt(e.$slots,"default")])]))}},FD={class:"rounded-lg bg-gray-50 dark:bg-gray-800/50"},zD={class:"space-y-5"},Vf={__name:"AuthorInformationPanel",props:{modelValue:{type:Object,required:!0,validator:s=>typeof s.name=="string"&&typeof s.email=="string"&&typeof s.affiliation=="string"}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie({name:t.modelValue.name??"",email:t.modelValue.email??"",affiliation:t.modelValue.affiliation??""});Ne(()=>t.modelValue,c=>{n.value={name:c.name??"",email:c.email??"",affiliation:c.affiliation??""}},{deep:!0});const r=()=>{i("update:modelValue",{...n.value})},o=c=>{n.value.name=c,r()},l=c=>{n.value.email=c,r()},a=c=>{n.value.affiliation=c,r()};return(c,u)=>(g(),v("div",FD,[u[0]||(u[0]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Author Information ",-1)),u[1]||(u[1]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-5"}," Used as defaults when creating notebook author settings and similar tasks. ",-1)),f("div",zD,[w(ae,{"model-value":n.value.name,"onUpdate:modelValue":o,label:"Your Name",placeholder:"Your Name"},null,8,["model-value"]),w(ae,{"model-value":n.value.email,"onUpdate:modelValue":l,type:"email",label:"Email",placeholder:"your.email@example.com"},null,8,["model-value"]),w(ae,{"model-value":n.value.affiliation,"onUpdate:modelValue":a,label:"Affiliation",placeholder:"Organization"},null,8,["model-value"])])]))}},HD={class:"space-y-6"},WD={key:0,class:"space-y-3"},KD={class:"flex flex-col gap-3"},qD={class:"grid gap-3 grid-cols-[1fr_160px]"},GD={class:"flex items-center justify-between"},JD={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},YD={class:"mt-4"},wb={__name:"PackagesEditor",props:{modelValue:{type:Object,required:!0},showRenvToggle:{type:Boolean,default:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=W(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),n=W(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),r=e,o=ie({use_renv:t.modelValue.use_renv??!1,default_packages:t.modelValue.default_packages??[]});Ne(()=>t.modelValue,y=>{o.value={use_renv:y.use_renv??!1,default_packages:y.default_packages??[]}},{deep:!0});const l=()=>{r("update:modelValue",{...o.value})},a=y=>{o.value.use_renv=y,l()},c=(y,x)=>{o.value.default_packages[y].name=x,l()},u=(y,x)=>{o.value.default_packages[y].source=x,l()},d=(y,x)=>{o.value.default_packages[y].auto_attach=x,l()},h=()=>{o.value.default_packages.push({name:"",source:"cran",auto_attach:!0}),l()},m=y=>{o.value.default_packages.splice(y,1),l()};return(y,x)=>(g(),v("div",HD,[s.showRenvToggle?(g(),v("div",{key:0,class:Ae(i.value)},[w(Ue,{"model-value":o.value.use_renv,"onUpdate:modelValue":a,label:"Enable renv",description:"Create renv environments for new projects."},null,8,["model-value"])],2)):I("",!0),f("div",{class:Ae(n.value)},[x[3]||(x[3]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Default packages ",-1)),x[4]||(x[4]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Installed (and optionally attached) when scaffold() runs. ",-1)),x[5]||(x[5]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"}," Use this list to preseed notebooks with your preferred helpers. ",-1)),o.value.default_packages&&o.value.default_packages.length?(g(),v("div",WD,[(g(!0),v(me,null,Ee(o.value.default_packages,(S,p)=>(g(),v("div",{key:`pkg-${p}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[f("div",KD,[f("div",qD,[S.source==="cran"||S.source==="bioconductor"?(g(),be(xb,{key:0,"model-value":S.name,"onUpdate:modelValue":j=>c(p,j),source:S.source,label:"Package",placeholder:S.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:j=>c(p,j.name)},null,8,["model-value","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),be(ae,{key:1,"model-value":S.name,"onUpdate:modelValue":j=>c(p,j),label:"Package",placeholder:"user/repo"},null,8,["model-value","onUpdate:modelValue"])),w(si,{"model-value":S.source,"onUpdate:modelValue":j=>u(p,j),label:"Source"},{default:Z(()=>[...x[0]||(x[0]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),f("div",GD,[w(Ue,{"model-value":S.auto_attach,"onUpdate:modelValue":j=>d(p,j),label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["model-value","onUpdate:modelValue"]),w(Ye,{size:"sm",variant:"secondary",onClick:j=>m(p)},{default:Z(()=>[...x[1]||(x[1]=[he("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),v("p",JD," No packages configured. Add packages to include tidyverse helpers or internal utilities automatically. ")),f("div",YD,[w(Ye,{size:"sm",variant:"secondary",onClick:h},{default:Z(()=>[...x[2]||(x[2]=[he("Add Package",-1)])]),_:1})])],2)]))}},QD={class:"space-y-6"},XD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},ZD={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},e6={class:"space-y-2"},t6={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},s6={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},i6={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Sb={__name:"AIAssistantsPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1},showEditor:{type:Boolean,default:!0},editorHeight:{type:String,default:"500px"},editorDisabled:{type:Boolean,default:!1},editorLoading:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=ie(Math.random().toString(36).substring(7)),r=[{id:"claude",label:"Claude Code",description:"Anthropic's IDE-focused assistant."},{id:"copilot",label:"GitHub Copilot",description:"Complements VS Code and JetBrains editors."},{id:"agents",label:"Multi-Agent (OpenAI Codex, Cursor, etc.)",description:"Shared instructions for multi-model orchestrators."}],o=()=>({enabled:t.modelValue?.enabled??!1,canonical_file:t.modelValue?.canonical_file??"CLAUDE.md",assistants:Array.isArray(t.modelValue?.assistants)?t.modelValue.assistants:[],canonical_content:t.modelValue?.canonical_content??""}),l=W(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),a=W(o),c=d=>{const h=o(),m=d.assistants!==void 0?d.assistants:h.assistants;i("update:modelValue",{...h,...d,assistants:m})},u=(d,h)=>{const m=[...a.value.assistants];if(h)m.includes(d)||m.push(d);else{const y=m.indexOf(d);y!==-1&&m.splice(y,1)}c({assistants:m})};return(d,h)=>(g(),v("div",{class:Ae(l.value)},[f("div",QD,[f("div",null,[w(Ue,{"model-value":a.value.enabled,label:"Enable AI Support",description:"Generate and sync assistant-specific context files.","onUpdate:modelValue":h[0]||(h[0]=m=>c({enabled:m}))},null,8,["model-value"])]),a.value.enabled?(g(),v(me,{key:0},[f("div",XD,[h[4]||(h[4]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical context file",-1)),h[5]||(h[5]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This file is the source of truth; other instructions files are synced to it when AI hooks run. ",-1)),w(si,{"model-value":a.value.canonical_file,label:"Canonical Context File","onUpdate:modelValue":h[1]||(h[1]=m=>c({canonical_file:m}))},{default:Z(()=>[...h[3]||(h[3]=[f("option",{value:"AGENTS.md"},"AGENTS.md (multi-agent orchestrator)",-1),f("option",{value:"CLAUDE.md"},"CLAUDE.md",-1),f("option",{value:".github/copilot-instructions.md"},".github/copilot-instructions.md",-1)])]),_:1},8,["model-value"])]),f("div",ZD,[h[6]||(h[6]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Assistants",-1)),h[7]||(h[7]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Choose which assistants receive context updates. ",-1)),f("div",e6,[(g(),v(me,null,Ee(r,m=>w(sn,{key:m.id,id:`ai-${m.id}-${n.value}`,"model-value":a.value.assistants.includes(m.id),"onUpdate:modelValue":y=>u(m.id,y),description:m.description},{default:Z(()=>[he(ee(m.label),1)]),_:2},1032,["id","model-value","onUpdate:modelValue","description"])),64))])]),s.showEditor?(g(),v("div",t6,[h[9]||(h[9]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},"Canonical instructions",-1)),f("p",s6,[gt(d.$slots,"editor-description",{},()=>[h[8]||(h[8]=he(" Edit the canonical file directly. Framework mirrors this content to other assistant files. ",-1))])]),gt(d.$slots,"editor-alert"),w(kb,{"model-value":a.value.canonical_content,language:"markdown","min-height":s.editorHeight,disabled:s.editorDisabled,"onUpdate:modelValue":h[2]||(h[2]=m=>c({canonical_content:m}))},null,8,["model-value","min-height","disabled"]),gt(d.$slots,"editor-actions"),s.editorLoading?(g(),v("p",i6," Loading "+ee(a.value.canonical_file)+" ",1)):I("",!0)])):I("",!0)],64)):I("",!0)])],2))}},n6={class:"space-y-3"},r6={class:"grid gap-4 sm:grid-cols-2"},o6={class:"space-y-3"},l6={class:"space-y-4"},a6={class:"text-xs text-gray-500 dark:text-gray-400"},Of={__name:"GitHooksPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=()=>({initialize:t.modelValue?.initialize??!0,user_name:t.modelValue?.user_name??"",user_email:t.modelValue?.user_email??"",hooks:{ai_sync:t.modelValue?.hooks?.ai_sync??!1,data_security:t.modelValue?.hooks?.data_security??!1,check_sensitive_dirs:t.modelValue?.hooks?.check_sensitive_dirs??!1}}),r=W(()=>t.flush?"space-y-6":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"),o=W(n),l=c=>{const u=n(),d={...u.hooks,...c?.hooks||{}};i("update:modelValue",{...u,...c,hooks:d})},a=(c,u)=>{l({hooks:{[c]:u}})};return(c,u)=>(g(),v("div",{class:Ae(r.value)},[w(Ue,{"model-value":o.value.initialize,label:"Initialize Git",description:"Run git init for every new project.","onUpdate:modelValue":u[0]||(u[0]=d=>l({initialize:d}))},null,8,["model-value"]),f("div",n6,[u[6]||(u[6]=f("div",null,[f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git identity"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Overrides Author Information when provided. ")],-1)),f("div",r6,[w(ae,{"model-value":o.value.user_name,label:"Git Name",placeholder:"Jane Analyst",disabled:!o.value.initialize,"onUpdate:modelValue":u[1]||(u[1]=d=>l({user_name:d}))},null,8,["model-value","disabled"]),w(ae,{"model-value":o.value.user_email,label:"Git Email",placeholder:"jane@example.com",hint:"Used for git config user.email during project setup.",disabled:!o.value.initialize,"onUpdate:modelValue":u[2]||(u[2]=d=>l({user_email:d}))},null,8,["model-value","disabled"])])]),f("div",o6,[u[8]||(u[8]=f("div",null,[f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Git Hooks"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Pre-commit hooks that run automatically before each commit. ")],-1)),f("div",l6,[w(Ue,{"model-value":o.value.hooks.ai_sync,label:"Sync AI Files Before Commit",description:"Update non-canonical files so assistants share the same instructions.",disabled:!o.value.initialize,"onUpdate:modelValue":u[3]||(u[3]=d=>a("ai_sync",d))},null,8,["model-value","disabled"]),w(Ue,{"model-value":o.value.hooks.data_security,label:"Check for Secrets",description:"Run a lightweight scan for API keys and credentials before commits.",disabled:!o.value.initialize,"onUpdate:modelValue":u[4]||(u[4]=d=>a("data_security",d))},null,8,["model-value","disabled"]),w(Ue,{"model-value":o.value.hooks.check_sensitive_dirs,label:"Warn About Unignored Sensitive Directories",description:"Block commits if directories with sensitive names aren't gitignored.",disabled:!o.value.initialize,"onUpdate:modelValue":u[5]||(u[5]=d=>a("check_sensitive_dirs",d))},null,8,["model-value","disabled"])]),f("p",a6,[gt(c.$slots,"note",{},()=>[u[7]||(u[7]=he(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1))])])])],2))}},u6={class:"space-y-5"},Pf={__name:"ScaffoldBehaviorPanel",props:{modelValue:{type:Object,required:!0},flush:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=e,n=(c,u="")=>c==null?u:typeof c=="number"||typeof c=="string"?String(c):u,r=()=>({source_all_functions:t.modelValue?.source_all_functions??!0,set_theme_on_scaffold:t.modelValue?.set_theme_on_scaffold??!0,ggplot_theme:t.modelValue?.ggplot_theme??"theme_minimal",seed_on_scaffold:t.modelValue?.seed_on_scaffold??!1,seed:n(t.modelValue?.seed,"")}),o=W(r),l=W(()=>t.flush?"space-y-5":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-5"),a=c=>{const u=r();i("update:modelValue",{...u,...c})};return(c,u)=>(g(),v("div",{class:Ae(l.value)},[f("div",u6,[f("div",null,[u[5]||(u[5]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Auto-Load Functions",-1)),w(Ue,{"model-value":o.value.source_all_functions,label:"Source all R files from functions/ directory",description:"Automatically loads all helper functions when scaffold() runs","onUpdate:modelValue":u[0]||(u[0]=d=>a({source_all_functions:d}))},null,8,["model-value"])]),f("div",null,[u[7]||(u[7]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"ggplot2 Theme",-1)),w(Ue,{"model-value":o.value.set_theme_on_scaffold,label:"Set ggplot2 theme when scaffold() runs",description:"Automatically sets ggplot2 theme for consistent plot styling","onUpdate:modelValue":u[1]||(u[1]=d=>a({set_theme_on_scaffold:d}))},null,8,["model-value"]),o.value.set_theme_on_scaffold?(g(),be(si,{key:0,"model-value":o.value.ggplot_theme,label:"Theme",class:"mt-4","onUpdate:modelValue":u[2]||(u[2]=d=>a({ggplot_theme:d}))},{default:Z(()=>[...u[6]||(u[6]=[f("option",{value:""},"None",-1),f("option",{value:"theme_minimal"},"Minimal",-1),f("option",{value:"theme_bw"},"Black & White",-1),f("option",{value:"theme_classic"},"Classic",-1),f("option",{value:"theme_gray"},"Gray (default)",-1),f("option",{value:"theme_light"},"Light",-1),f("option",{value:"theme_dark"},"Dark",-1),f("option",{value:"theme_void"},"Void",-1)])]),_:1},8,["model-value"])):I("",!0)]),f("div",null,[u[8]||(u[8]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Random Seed",-1)),w(Ue,{"model-value":o.value.seed_on_scaffold,label:"Set random seed when scaffold() runs",description:"Ensures deterministic behavior for reproducibility","onUpdate:modelValue":u[3]||(u[3]=d=>a({seed_on_scaffold:d}))},null,8,["model-value"]),o.value.seed_on_scaffold?(g(),be(ae,{key:0,"model-value":o.value.seed,label:"Seed Value",placeholder:"e.g., 1234 or 20241107",hint:"Leave empty to use global default",class:"mt-4","onUpdate:modelValue":u[4]||(u[4]=d=>a({seed:d}))},null,8,["model-value"])):I("",!0)])])],2))}},c6={class:"space-y-6"},d6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},f6={class:"mb-4 rounded-md border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 p-4"},h6={class:"flex items-center justify-between mb-3"},p6={class:"flex items-center gap-2"},m6={class:"space-y-3"},g6={class:"grid grid-cols-2 gap-3"},v6={class:"flex items-center gap-2"},y6=["id","checked","onChange"],b6=["for"],k6={key:0},x6={key:1,class:"space-y-3"},w6={class:"grid grid-cols-2 gap-3"},S6={class:"grid grid-cols-2 gap-3"},_6={class:"grid grid-cols-2 gap-3"},C6={key:2,class:"space-y-3"},A6={class:"grid grid-cols-2 gap-3"},M6={class:"grid grid-cols-2 gap-3"},D6={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},E6={class:"space-y-3"},T6={class:"flex items-center gap-2"},V6=["id","checked","onChange"],O6=["for"],P6={class:"grid grid-cols-2 gap-3"},$6={class:"grid grid-cols-2 gap-3"},$f={__name:"ConnectionsPanel",props:{databaseConnections:{type:Array,required:!0},s3Connections:{type:Array,required:!0},defaultDatabase:{type:String,default:null},defaultStorageBucket:{type:String,default:null}},emits:["update:databaseConnections","update:s3Connections","update:defaultDatabase","update:defaultStorageBucket"],setup(s){const e=s,t=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.databaseConnections.findIndex((d,h)=>h!==a&&d.name===l)!==-1?"Connection name must be unique":e.s3Connections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,i=(l,a)=>!l||l.trim()===""?"Connection name is required":l==="framework_db"?"framework_db is reserved for system use":e.s3Connections.findIndex((d,h)=>h!==a&&d.name===l)!==-1?"Connection name must be unique":e.databaseConnections.findIndex(d=>d.name===l)!==-1?"Connection name must be unique across all connections":null,n=(l,a)=>{let c=1,u=l;for(;a.includes(u)||u==="framework_db";)c+=1,u=`${l}_${c}`;return u},r=()=>{const l=e.databaseConnections.map(h=>h.name);let a="postgres",c="database";l.some(h=>h.startsWith("postgres"))?l.some(h=>h.startsWith("mysql"))?l.some(h=>h.startsWith("sqlserver"))||(a="sqlserver",c="sqlserver"):(a="mysql",c="mysql"):(a="postgres",c="postgres");const u=n(c,l),d={_id:Date.now(),name:u,driver:a};return a==="postgres"?{...d,host:'env("POSTGRES_HOST", "localhost")',port:'env("POSTGRES_PORT", "5432")',database:'env("POSTGRES_DB", "mydb")',schema:'env("POSTGRES_SCHEMA", "public")',user:'env("POSTGRES_USER", "postgres")',password:'env("POSTGRES_PASSWORD", "")'}:a==="mysql"?{...d,host:'env("MYSQL_HOST", "localhost")',port:'env("MYSQL_PORT", "3306")',database:'env("MYSQL_DB", "mydb")',user:'env("MYSQL_USER", "root")',password:'env("MYSQL_PASSWORD", "")'}:a==="sqlserver"?{...d,host:'env("SQLSERVER_HOST", "localhost")',port:'env("SQLSERVER_PORT", "1433")',database:'env("SQLSERVER_DB", "mydb")',user:'env("SQLSERVER_USER", "sa")',password:'env("SQLSERVER_PASSWORD", "")'}:d},o=()=>({_id:Date.now(),name:n("s3_bucket",e.s3Connections.map(l=>l.name)),bucket:'env("S3_BUCKET", "my-bucket")',region:'env("S3_REGION", "us-east-1")',endpoint:'env("S3_ENDPOINT", "")',access_key:'env("S3_ACCESS_KEY", "")',secret_key:'env("S3_SECRET_KEY", "")'});return(l,a)=>(g(),v("div",c6,[f("div",d6,[a[7]||(a[7]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Databases",-1)),f("div",f6,[f("div",h6,[f("div",p6,[w(su,{variant:"gray",size:"sm"},{default:Z(()=>[...a[2]||(a[2]=[he("System",-1)])]),_:1}),a[3]||(a[3]=f("span",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 font-mono"},"framework_db",-1))]),a[4]||(a[4]=f("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"SQLite - Framework metadata",-1))]),a[5]||(a[5]=f("div",{class:"text-sm text-gray-600 dark:text-gray-400 font-mono"}," framework.db ",-1))]),w(_s,{"model-value":s.databaseConnections,"onUpdate:modelValue":a[0]||(a[0]=c=>l.$emit("update:databaseConnections",c)),"add-label":"Add Database","default-item":r},{default:Z(({item:c,index:u,update:d})=>[f("div",m6,[f("div",g6,[w(ae,{"model-value":c.name,"onUpdate:modelValue":h=>d("name",h),label:"Connection Name",error:t(c.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),w(si,{"model-value":c.driver,"onUpdate:modelValue":h=>d("driver",h),label:"Driver",size:"sm"},{default:Z(()=>[...a[6]||(a[6]=[f("option",{value:"sqlite"},"SQLite",-1),f("option",{value:"postgres"},"PostgreSQL",-1),f("option",{value:"mysql"},"MySQL",-1),f("option",{value:"sqlserver"},"SQL Server",-1)])]),_:1},8,["model-value","onUpdate:modelValue"])]),f("div",v6,[f("input",{type:"radio",id:`default-db-${c._id}`,checked:s.defaultDatabase===c.name,onChange:h=>l.$emit("update:defaultDatabase",c.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,y6),f("label",{for:`default-db-${c._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default database ",8,b6)]),c.driver==="sqlite"?(g(),v("div",k6,[w(ae,{"model-value":c.database,"onUpdate:modelValue":h=>d("database",h),label:"Database Path",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])):c.driver==="postgres"||c.driver==="postgresql"?(g(),v("div",x6,[f("div",w6,[w(ae,{"model-value":c.host,"onUpdate:modelValue":h=>d("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.port,"onUpdate:modelValue":h=>d("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",S6,[w(ae,{"model-value":c.database,"onUpdate:modelValue":h=>d("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.schema,"onUpdate:modelValue":h=>d("schema",h),label:"Schema",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),f("div",_6,[w(ae,{"model-value":c.user,"onUpdate:modelValue":h=>d("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.password,"onUpdate:modelValue":h=>d("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):c.driver==="mysql"||c.driver==="sqlserver"?(g(),v("div",C6,[f("div",A6,[w(ae,{"model-value":c.host,"onUpdate:modelValue":h=>d("host",h),label:"Host",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.port,"onUpdate:modelValue":h=>d("port",h),label:"Port",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),w(ae,{"model-value":c.database,"onUpdate:modelValue":h=>d("database",h),label:"Database",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),f("div",M6,[w(ae,{"model-value":c.user,"onUpdate:modelValue":h=>d("user",h),label:"User",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.password,"onUpdate:modelValue":h=>d("password",h),label:"Password",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])):I("",!0)])]),_:1},8,["model-value"])]),f("div",D6,[a[8]||(a[8]=f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"S3-compatible Storage",-1)),w(_s,{"model-value":s.s3Connections,"onUpdate:modelValue":a[1]||(a[1]=c=>l.$emit("update:s3Connections",c)),"add-label":"Add Bucket","default-item":o},{default:Z(({item:c,index:u,update:d})=>[f("div",E6,[w(ae,{"model-value":c.name,"onUpdate:modelValue":h=>d("name",h),label:"Connection Name",error:i(c.name,u),monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue","error"]),f("div",T6,[f("input",{type:"radio",id:`default-s3-${c._id}`,checked:s.defaultStorageBucket===c.name,onChange:h=>l.$emit("update:defaultStorageBucket",c.name),class:"h-4 w-4 text-sky-600 focus:ring-sky-500"},null,40,V6),f("label",{for:`default-s3-${c._id}`,class:"text-sm text-gray-700 dark:text-gray-300"}," Default storage bucket ",8,O6)]),f("div",P6,[w(ae,{"model-value":c.bucket,"onUpdate:modelValue":h=>d("bucket",h),label:"Bucket",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.region,"onUpdate:modelValue":h=>d("region",h),label:"Region",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])]),w(ae,{"model-value":c.endpoint,"onUpdate:modelValue":h=>d("endpoint",h),label:"Endpoint",hint:"Leave empty for AWS S3, or specify custom endpoint for MinIO, etc.",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),f("div",$6,[w(ae,{"model-value":c.access_key,"onUpdate:modelValue":h=>d("access_key",h),label:"Access Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":c.secret_key,"onUpdate:modelValue":h=>d("secret_key",h),label:"Secret Key",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"])])])]),_:1},8,["model-value"])])]))}},j6={class:"space-y-5"},L6={key:0,class:"grid grid-cols-2 gap-3"},R6={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},I6={class:"grid grid-cols-2 gap-3"},_b={__name:"CourseDirectoriesPanel",props:{directoriesEnabled:{type:Object,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},catalog:{type:Object,default:()=>({})},extraDirectoriesEnabled:{type:Object,default:()=>({})},extraDirectories:{type:Array,default:()=>[]},projectCustomDirectories:{type:Array,default:()=>[]},allowCustomDirectories:{type:Boolean,default:!1},flush:{type:Boolean,default:!1}},emits:["update:directoriesEnabled","update:directories","update:renderDirs","update:extraDirectoriesEnabled","update:projectCustomDirectories"],setup(s,{emit:e}){const t=s,i=e,n=ie(Math.random().toString(36).substring(7)),r=["slides","assignments","course_docs","notebooks"],o=["readings","data"],l=["functions","scripts"],a=W(()=>t.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"),c=O=>t.directoriesEnabled[O]??!0,u=(O,_)=>{i("update:directoriesEnabled",{...t.directoriesEnabled,[O]:_})},d=O=>t.directories[O]||"",h=(O,_)=>{i("update:directories",{...t.directories,[O]:_})},m=O=>{const _=O==="notebooks"?"modules":O;return t.renderDirs[_]||""},y=(O,_)=>{const V=O==="notebooks"?"modules":O;i("update:renderDirs",{...t.renderDirs,[V]:_})},x=O=>{if(!t.catalog||typeof t.catalog!="object")return"";const _=O==="notebooks"?"modules":O;return(t.catalog.render_dirs||{})[_]?.default||`rendered/${_}`},S=O=>!t.catalog||typeof t.catalog!="object"?O.charAt(0).toUpperCase()+O.slice(1):(t.catalog.directories||{})[O]?.label||O.charAt(0).toUpperCase()+O.slice(1),p=O=>!t.catalog||typeof t.catalog!="object"?"":(t.catalog.directories||{})[O]?.hint||"",j=O=>!t.catalog||typeof t.catalog!="object"?O:(t.catalog.directories||{})[O]?.default||O,B=O=>t.extraDirectoriesEnabled[O]??!1,G=(O,_)=>{i("update:extraDirectoriesEnabled",{...t.extraDirectoriesEnabled,[O]:_})},N=(O,_)=>{console.warn("Extra directory paths are managed in global settings")};return(O,_)=>(g(),v("div",{class:Ae(a.value)},[_[3]||(_[3]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Materials",-1)),_[4]||(_[4]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Slides, assignments, readings, and course documentation with automatic rendering to web-ready formats. ",-1)),f("div",j6,[(g(),v(me,null,Ee(r,V=>f("div",{key:V},[w(Ue,{id:`course-${V}-${n.value}`,"model-value":c(V),"onUpdate:modelValue":K=>u(V,K),label:S(V),description:p(V),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(V)?(g(),v("div",L6,[w(ae,{"model-value":d(V),"onUpdate:modelValue":K=>h(V,K),placeholder:j(V),label:"Source files",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"]),w(ae,{"model-value":m(V),"onUpdate:modelValue":K=>y(V,K),placeholder:x(V),label:"Quarto render directory",prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])])):I("",!0)])),64)),(g(),v(me,null,Ee(o,V=>f("div",{key:V},[w(Ue,{id:`course-${V}-${n.value}`,"model-value":c(V),"onUpdate:modelValue":K=>u(V,K),label:S(V),description:p(V),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(V)?(g(),be(ae,{key:0,"model-value":d(V),"onUpdate:modelValue":K=>h(V,K),placeholder:j(V),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(),v(me,null,Ee(l,V=>f("div",{key:V},[w(Ue,{id:`course-${V}-${n.value}`,"model-value":c(V),"onUpdate:modelValue":K=>u(V,K),label:S(V),description:p(V),class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),c(V)?(g(),be(ae,{key:0,"model-value":d(V),"onUpdate:modelValue":K=>h(V,K),placeholder:j(V),prefix:"/",monospace:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):I("",!0)])),64)),(g(!0),v(me,null,Ee(s.extraDirectories,V=>(g(),v("div",{key:`extra-${V.key}`,class:"space-y-1.5"},[w(Ue,{id:`extra-course-${V.key}-${n.value}`,"model-value":B(V.key),"onUpdate:modelValue":K=>G(V.key,K),label:V.label,description:`Custom: ${V.path}`,class:"mb-2"},null,8,["id","model-value","onUpdate:modelValue","label","description"]),B(V.key)?(g(),be(ae,{key:0,"model-value":V.path,"onUpdate:modelValue":K=>N(V.key),placeholder:V.path,prefix:"/",monospace:"",readonly:""},null,8,["model-value","onUpdate:modelValue","placeholder"])):I("",!0)]))),128))]),s.allowCustomDirectories?(g(),v("div",R6,[_[1]||(_[1]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"}," Add Custom Course Directories ",-1)),_[2]||(_[2]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-3"}," Add directories specific to this course only. ",-1)),w(_s,{"model-value":s.projectCustomDirectories,"onUpdate:modelValue":_[0]||(_[0]=V=>O.$emit("update:projectCustomDirectories",V)),"add-label":"Add Course Directory","default-item":()=>({key:"",label:"",path:"",type:"course",_id:Date.now()})},{default:Z(({item:V,index:K,update:oe})=>[f("div",I6,[w(ae,{"model-value":V.key,"onUpdate:modelValue":ne=>oe("key",ne),label:"Key",placeholder:"e.g., course_videos",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":V.label,"onUpdate:modelValue":ne=>oe("label",ne),label:"Label",placeholder:"e.g., Videos",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":V.path,"onUpdate:modelValue":ne=>oe("path",ne),label:"Path",placeholder:"e.g., videos",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])):I("",!0)],2))}},B6=["onClick","aria-current"],N6={class:"mt-4"},U6={__name:"Tabs",props:{modelValue:{type:[String,Number],required:!0},tabs:{type:Array,required:!0,validator:s=>s.every(e=>e.id&&e.label)},variant:{type:String,default:"pills",validator:s=>["pills","underline"].includes(s)},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,i=e,n=W(()=>t.variant==="underline"?"border-b border-gray-200 dark:border-white/10":""),r=W(()=>{const a=["flex","gap-2"];return t.variant==="underline"?a.push("-mb-px"):a.push("p-1","bg-gray-100","dark:bg-white/5","rounded-lg"),a.join(" ")}),o=a=>{const c=t.modelValue===a,u=["inline-flex","items-center","gap-2","font-medium","transition-colors"],d={sm:"px-2.5 py-1.5 text-xs",md:"px-3 py-2 text-sm",lg:"px-4 py-2.5 text-base"};return u.push(d[t.size]),t.variant==="pills"?(u.push("rounded-md"),c?u.push("bg-white","text-gray-900","shadow-xs","dark:bg-white/10","dark:text-white"):u.push("text-gray-600","hover:text-gray-900","dark:text-gray-400","dark:hover:text-white")):(u.push("border-b-2","pb-3"),c?u.push("border-sky-600","text-sky-600","dark:border-sky-500","dark:text-sky-400"):u.push("border-transparent","text-gray-600","hover:border-gray-300","hover:text-gray-900","dark:text-gray-400","dark:hover:border-gray-600","dark:hover:text-white")),u.join(" ")},l=a=>{i("update:modelValue",a),i("change",a)};return(a,c)=>(g(),v("div",null,[f("div",{class:Ae(n.value)},[f("nav",{class:Ae(r.value),"aria-label":"Tabs"},[(g(!0),v(me,null,Ee(s.tabs,u=>(g(),v("button",{key:u.id,type:"button",onClick:d=>l(u.id),class:Ae(o(u.id)),"aria-current":s.modelValue===u.id?"page":void 0},[u.icon?(g(),be(Es(u.icon),{key:0,class:"size-5"})):I("",!0),he(" "+ee(u.label)+" ",1),u.badge?(g(),be(su,{key:1,variant:s.modelValue===u.id?"emerald":"gray",pill:""},{default:Z(()=>[he(ee(u.badge),1)]),_:2},1032,["variant"])):I("",!0)],10,B6))),128))],2)],2),f("div",N6,[gt(a.$slots,"default")])]))}},F6={key:0,class:"mb-4"},z6={key:1,class:"mb-4"},H6={key:2,class:"space-y-6"},W6={key:0,class:"rounded-lg bg-gray-50 p-8 text-center dark:bg-gray-800/40"},K6={key:1,class:"space-y-5"},q6={class:"mb-4"},G6={class:"text-sm font-semibold text-gray-900 dark:text-white"},J6={class:"text-xs text-gray-500 dark:text-gray-400"},Y6={class:"space-y-3"},Q6={class:"flex items-start gap-3"},X6={class:"grid flex-1 grid-cols-2 gap-3"},Z6=["value","onInput","disabled"],eE={class:"relative"},tE=["onUpdate:modelValue","type","placeholder","disabled"],sE=["onClick"],iE=["onClick"],nE={key:0,class:"mt-4"},rE={key:2,class:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm dark:border-gray-700 dark:bg-gray-800/60"},oE={key:3,class:"space-y-3"},lE=["disabled"],aE={key:4,class:"mt-4 flex justify-end"},jf={__name:"EnvEditor",props:{loading:{type:Boolean,default:!1},error:{type:String,default:""},showSecurityAlert:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},allowShowValuesToggle:{type:Boolean,default:!0},allowRegroupOption:{type:Boolean,default:!0},showSaveButton:{type:Boolean,default:!0},saveLabel:{type:String,default:"Save .env"},groups:{type:Object,default:()=>({})},variables:{type:Object,default:()=>({})},rawContent:{type:String,default:""},viewMode:{type:String,default:"grouped"},regroupOnSave:{type:Boolean,default:!1}},emits:["update:variables","update:rawContent","update:viewMode","update:regroupOnSave","save"],setup(s,{emit:e}){const t=s,i=e,n=V=>JSON.parse(JSON.stringify(V||{})),r=ie(n(t.variables)),o=ie(t.rawContent||""),l=ie(t.viewMode||"grouped"),a=ie(!!t.regroupOnSave),c=ie(!1),u=ie({});let d=!1,h=!1;Ne(()=>t.variables,V=>{d=!0,r.value=n(V),Qs(()=>{d=!1})},{deep:!0}),Ne(()=>t.rawContent,V=>{h=!0,o.value=V||"",Qs(()=>{h=!1})},{immediate:!0}),Ne(()=>t.viewMode,V=>{l.value=V||"grouped"}),Ne(()=>t.regroupOnSave,V=>{a.value=!!V}),Ne(r,V=>{d||(i("update:variables",n(V)),l.value!=="raw"&&(o.value=S(o.value,V,a.value),i("update:rawContent",o.value)))},{deep:!0}),Ne(o,V=>{if(!h&&l.value==="raw"){i("update:rawContent",V);const K=m(V);r.value=K,i("update:variables",n(K))}}),Ne(l,(V,K)=>{i("update:viewMode",V),V==="raw"&&K!=="raw"&&(Object.keys(r.value).length>0?o.value=S(o.value,r.value,a.value):!o.value&&t.rawContent&&(o.value=t.rawContent))}),Ne(a,V=>{i("update:regroupOnSave",V)});const m=V=>{const K=(V||"").split(/\r?\n/),oe={};return K.forEach(ne=>{const R=ne.trim();if(!R||R.startsWith("#")||!R.includes("="))return;const[le,...se]=R.split("=");oe[le.trim()]=se.join("=").replace(/^"|"$/g,"")}),oe},y=V=>{const K=Object.entries(V||{});return K.length?K.reduce((oe,[ne,R])=>{const le=ne.includes("_")?ne.split("_")[0]:"Other";return oe[le]||(oe[le]={}),oe[le][ne]={defined:!!R,used:!1,used_in:[],value:R},oe},{}):{}},x=W(()=>{const V=t.groups||{};return Object.keys(V).length?V:y(r.value)}),S=(V,K,oe=!1)=>{if(oe){const $={};for(const[de,ye]of Object.entries(K)){const Ke=de.includes("_")?de.split("_")[0]:"Other";$[Ke]||($[Ke]=[]),$[Ke].push([de,ye])}const q=[],Y=Object.keys($).sort();for(let de=0;de<Y.length;de++){const ye=Y[de],Ke=$[ye];de>0&&(q.push(""),q.push("")),q.push(`# ${ye==="Other"?"Other variables":ye.toUpperCase()}`);for(const[_e,Le]of Ke)q.push(`${_e}=${Le??""}`)}return q.join(`
`)}const ne=(V||"").split(/\r?\n/),R=new Set,le=[];for(const $ of ne){const q=$.trim();if(!q||q.startsWith("#")||!q.includes("=")){le.push($);continue}const[Y,...de]=q.split("="),ye=Y.trim(),Ke=de.join("=").trim();if(ye in K){const _e=K[ye]??"";le.push(`${ye}=${_e}`),R.add(ye)}else(Object.keys(K).length===0||Ke==="")&&le.push($)}const se=Object.entries(K).filter(([$])=>!R.has($));if(se.length>0){const $={};for(const[q,Y]of se){const de=q.includes("_")?q.split("_")[0]:"Other";$[de]||($[de]=[]),$[de].push([q,Y])}for(const[q,Y]of Object.entries($)){le.length>0&&le[le.length-1]!==""&&(le.push(""),le.push("")),le.push(`# ${q==="Other"?"Other variables":q.toUpperCase()}`);for(const[de,ye]of Y)le.push(`${de}=${ye??""}`)}}return le.join(`
`)},p=()=>{if(!t.allowAdd)return;const V="NEW_VARIABLE";let K=1,oe=`${V}_${K}`;for(;r.value[oe];)K+=1,oe=`${V}_${K}`;r.value={...r.value,[oe]:""}},j=V=>{if(!t.allowRemove)return;const K=n(r.value);delete K[V],r.value=K},B=(V,K)=>{if(!K||V===K)return;const oe=K.replace(/[^A-Z0-9_]/gi,"").toUpperCase();if(!oe)return;const ne=n(r.value);ne[oe]||(ne[oe]=ne[V],delete ne[V],r.value=ne)},G=V=>{const K=["PASSWORD","SECRET","KEY","TOKEN"],oe=V.toUpperCase();return K.some(ne=>oe.includes(ne))},N=V=>c.value||u.value[V]||!G(V),O=V=>{u.value[V]=!u.value[V]},_=()=>{c.value=!c.value};return(V,K)=>(g(),v("div",null,[s.error?(g(),v("div",F6,[w(Os,{type:"error",title:"Error",description:s.error},null,8,["description"])])):I("",!0),s.showSecurityAlert?(g(),v("div",z6,[w(Os,{type:"warning",title:" Contains Sensitive Data"},{actions:Z(()=>[s.viewMode==="grouped"&&s.allowShowValuesToggle?(g(),be(Ye,{key:0,variant:"soft",size:"sm",onClick:_},{default:Z(()=>[he(ee(c.value?"Hide Values":"Show Values"),1)]),_:1})):I("",!0)]),default:Z(()=>[K[4]||(K[4]=he(" This file can include passwords and secrets. Keep it out of version control. ",-1))]),_:1})])):I("",!0),w(U6,{modelValue:l.value,"onUpdate:modelValue":K[0]||(K[0]=oe=>l.value=oe),tabs:[{id:"grouped",label:"Key/Value Editor"},{id:"raw",label:"Raw .env"}],variant:"pills",class:"mb-4"},null,8,["modelValue"]),l.value==="grouped"?(g(),v("div",H6,[Object.keys(x.value).length===0?(g(),v("div",W6,[w(vt(eu),{class:"mx-auto mb-3 h-10 w-10 text-gray-400"}),K[6]||(K[6]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No environment variables yet.",-1)),s.allowAdd?(g(),be(Ye,{key:0,variant:"primary",class:"mt-4",onClick:p},{default:Z(()=>[...K[5]||(K[5]=[he(" Add Variable ",-1)])]),_:1})):I("",!0)])):(g(),v("div",K6,[(g(!0),v(me,null,Ee(x.value,(oe,ne)=>(g(),v("div",{key:ne,class:"rounded-lg bg-gray-50 p-5 dark:bg-gray-800/40"},[f("div",q6,[f("p",G6,ee(ne==="Other"?"Uncategorized":ne.toUpperCase()),1),f("p",J6,"Variables with the "+ee(ne)+" prefix.",1)]),f("div",Y6,[(g(!0),v(me,null,Ee(oe,(R,le)=>(g(),v("div",{key:le,class:"space-y-2"},[f("div",Q6,[f("div",X6,[f("input",{value:le,onInput:se=>B(le,se.target.value),type:"text",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm uppercase text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,40,Z6),f("div",eE,[nt(f("input",{"onUpdate:modelValue":se=>r.value[le]=se,type:N(le)?"text":"password",placeholder:R.defined?"value":"(not set)",class:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,tE),[[dx,r.value[le]]]),G(le)&&s.allowShowValuesToggle?(g(),v("button",{key:0,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:se=>O(le)},[N(le)?(g(),be(vt($w),{key:0,class:"h-4 w-4"})):(g(),be(vt(jw),{key:1,class:"h-4 w-4"}))],8,sE)):I("",!0)])]),s.allowRemove?(g(),v("button",{key:0,type:"button",class:"mt-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",onClick:se=>j(le)},[...K[7]||(K[7]=[f("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,iE)):I("",!0)])]))),128))]),s.allowAdd?(g(),v("div",nE,[w(Ye,{variant:"secondary",size:"sm",onClick:p},{default:Z(()=>[...K[8]||(K[8]=[he(" + Add Variable ",-1)])]),_:1})])):I("",!0)]))),128))])),s.allowRegroupOption?(g(),v("div",rE,[w(Ue,{modelValue:a.value,"onUpdate:modelValue":K[1]||(K[1]=oe=>a.value=oe),label:"Regroup .env file by prefix when saving",description:"Rewrites the file grouped by prefix and strips comments."},null,8,["modelValue"])])):I("",!0)])):(g(),v("div",oE,[nt(f("textarea",{"onUpdate:modelValue":K[2]||(K[2]=oe=>o.value=oe),class:"h-80 w-full rounded-md border border-gray-300 bg-white px-3 py-2 font-mono text-sm text-gray-900 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100",disabled:s.loading},null,8,lE),[[kr,o.value]]),K[9]||(K[9]=f("p",{class:"text-xs text-gray-500"},"Edit the .env file directly. Comments and formatting are preserved.",-1))])),s.showSaveButton?(g(),v("div",aE,[w(Ye,{disabled:s.loading,variant:"primary",onClick:K[3]||(K[3]=oe=>V.$emit("save"))},{default:Z(()=>[he(ee(s.saveLabel),1)]),_:1},8,["disabled"])])):I("",!0)]))}},uE={class:"flex min-h-screen"},cE={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},dE={class:"space-y-1 mb-6"},fE=["onClick"],hE=["fill","viewBox","stroke"],pE=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],mE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},gE={class:"flex-1 p-10"},vE={class:"mt-8 space-y-6"},yE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},bE={class:"space-y-5"},kE={class:"pt-6 border-t border-gray-200 dark:border-gray-700"},xE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50 space-y-6"},wE={class:"space-y-6"},SE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},_E={key:0,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},CE={class:"space-y-4"},AE={key:1,class:"space-y-6"},ME={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},DE={class:"space-y-5"},EE={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},TE={key:0,class:"space-y-3 mb-4"},VE={class:"space-y-3"},OE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},PE={class:"space-y-5"},$E={key:0,class:"grid grid-cols-2 gap-3"},jE={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},LE={key:0,class:"space-y-3 mb-4"},RE={class:"space-y-3"},IE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},BE={class:"space-y-5"},NE={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},UE={key:0,class:"space-y-3 mb-4"},FE={class:"space-y-3"},zE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},HE={class:"space-y-5"},WE={key:3,class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},KE={class:"space-y-4"},qE={class:"space-y-2"},GE={class:"space-y-2"},JE={class:"space-y-2"},YE={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},QE={class:"grid grid-cols-2 gap-3"},XE={key:4,class:"space-y-6"},ZE={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},eT={class:"space-y-5"},tT={class:"space-y-2"},sT={class:"space-y-2"},iT={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},nT={key:0,class:"space-y-5 mb-5"},rT={class:"grid gap-4 sm:grid-cols-2"},oT={class:"space-y-4"},lT={class:"space-y-4"},aT={class:"space-y-3"},uT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},cT={class:"space-y-5"},dT={key:0,class:"grid grid-cols-2 gap-3"},fT={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},hT={key:0,class:"space-y-4 mb-4"},pT={class:"space-y-3"},mT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},gT={class:"space-y-5"},vT={class:"space-y-2"},yT={class:"space-y-2"},bT={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},kT={key:0,class:"space-y-5 mb-5"},xT={class:"grid gap-4 sm:grid-cols-2"},wT={class:"space-y-4"},ST={class:"space-y-4"},_T={class:"space-y-3"},CT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},AT={class:"space-y-5"},MT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},DT={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},ET={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},TT={__name:"NewProjectView",setup(s){const e=Xa(),t=$r(),i=tu(),n=ie(null),r=ie(null),o=ie(!0),l=z=>z?Array.isArray(z)?Array.from(new Set(z.map(M=>String(M)))):typeof z=="string"?[z]:[]:[],a=()=>{Array.isArray(p.value.ai.assistants)||(p.value.ai.assistants=l(p.value.ai.assistants))},c=[{id:"overview",label:"Overview",icon:Za},{id:"basics",label:"Basics",icon:zd},{id:"structure",label:"Project Structure",icon:ma},{id:"packages",label:"Packages",icon:Hd},{id:"ai",label:"AI Assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections",label:"Connections",icon:Wd},{id:"env",label:".env Defaults",icon:eu},{id:"scaffold",label:"Scaffold Behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"}],u=ie("basics"),d=ie(!1),h=ie(null),m=ie(!0),y=ie([]),x=ie([]),S=ie([]),p=ie({name:"",location:"",type:"project",author:{name:"",email:"",affiliation:""},scaffold:{seed_on_scaffold:!1,seed:"",set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",source_all_functions:!0,notebook_format:"quarto",ide:"vscode",positron:!1},packages:{use_renv:!1,default_packages:[]},ai:{enabled:!0,assistants:[],canonical_file:"CLAUDE.md",canonical_content:""},git:{initialize:!0,gitignore_template:"gitignore-project",gitignore_content:"",user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},connections:{databaseConnections:[],s3Connections:[],defaultDatabase:null,defaultStorageBucket:null},env:{variables:{},rawContent:`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=

# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,viewMode:"grouped",regroupOnSave:!1,groups:{}},directories_enabled:{},directories:{},render_dirs:{},extra_directories:[],extra_directories_enabled:{}}),j=()=>{const z=t.query.section;z&&["overview","author","scaffold","structure","connections","env","packages","ai","git"].includes(z)&&(u.value=z)};Ne(()=>t.query.section,z=>{z&&["overview","author","scaffold","structure","connections","env","packages","ai","git"].includes(z)?u.value=z:z||(u.value="overview")}),Ne(u,z=>{t.query.section!==z&&e.replace({query:{...t.query,section:z}})}),ls(async()=>{console.log("[DEBUG] NewProjectView mounted - starting initialization"),j();try{console.log("[DEBUG] Fetching global settings from /api/settings");const z=await fetch("/api/settings");if(console.log("[DEBUG] Settings response status:",z.status,z.ok),z.ok&&(n.value=await z.json(),n.value)){if(n.value.global?.projects_root&&(p.value.location=n.value.global.projects_root),p.value.author={...n.value.author},n.value.defaults?.project_type&&(p.value.type=n.value.defaults.project_type),n.value.defaults?.scaffold&&(p.value.scaffold={...p.value.scaffold,...n.value.defaults.scaffold}),n.value.defaults?.notebook_format&&(p.value.scaffold.notebook_format=n.value.defaults.notebook_format),p.value.scaffold.notebook_format||(p.value.scaffold.notebook_format="quarto"),n.value.defaults?.positron!==void 0&&(p.value.scaffold.positron=n.value.defaults.positron),n.value.defaults?.packages)if(Array.isArray(n.value.defaults.packages)){const ge=n.value.defaults.packages.map(tt=>({name:tt.name||"",source:tt.source||"cran",auto_attach:tt.auto_attach!==!1}));p.value.packages.default_packages.splice(0,p.value.packages.default_packages.length,...ge)}else n.value.defaults.packages.default_packages&&(p.value.packages={use_renv:n.value.defaults.packages.use_renv||!1,default_packages:(n.value.defaults.packages.default_packages||[]).map(ge=>({name:ge.name||"",source:ge.source||"cran",auto_attach:ge.auto_attach!==!1}))});const k=l(n.value.defaults?.ai_assistants);if(p.value.ai={enabled:n.value.defaults?.ai_support!==!1,assistants:k.length>0?k:["claude"],canonical_file:n.value.defaults?.ai_canonical_file||"CLAUDE.md",canonical_content:""},a(),p.value.ai.enabled&&p.value.ai.canonical_file&&de(p.value.ai.canonical_file,p.value.type),p.value.git.initialize=n.value.defaults?.use_git!==!1,p.value.git.user_name=n.value.git?.user_name||"",p.value.git.user_email=n.value.git?.user_email||"",n.value.defaults?.git_hooks&&(p.value.git.hooks={...n.value.defaults.git_hooks}),n.value.defaults?.env){const ge=n.value.defaults.env;typeof ge=="string"?p.value.env.rawContent=ge:ge?.raw&&(p.value.env.rawContent=ge.raw)}const te={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=te[p.value.type]||"gitignore-project",p.value.git.gitignore_template&&q(p.value.git.gitignore_template)}const M=await fetch("/api/settings-catalog");M.ok&&(r.value=await M.json()),B(),_()}catch(z){console.error("[DEBUG] Failed to load settings:",z),console.error("[DEBUG] Error details:",z.message,z.stack),i.error("Load Error","Could not load default settings")}finally{console.log("[DEBUG] Initialization complete, loading =",o.value),o.value=!1,setTimeout(()=>{if(h.value&&h.value.$el){const z=h.value.$el.querySelector("input");z&&z.focus()}},100)}}),Ne(()=>p.value.type,z=>{B();const M={project:"gitignore-project",project_sensitive:"gitignore-project_sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=M[z]||"gitignore-project"}),Ne(()=>p.value.git.gitignore_template,z=>{z&&q(z)}),Ne(()=>p.value.name,()=>{n.value?.global?.projects_root&&Ze()}),Ne(()=>p.value.ai.enabled,z=>{z&&p.value.ai.canonical_file&&de(p.value.ai.canonical_file,p.value.type)}),Ne(()=>p.value.ai.canonical_file,z=>{z&&p.value.ai.enabled&&de(z,p.value.type)}),Ne(()=>p.value.type,z=>{p.value.ai.canonical_file==="CLAUDE.md"&&p.value.ai.enabled&&de("CLAUDE.md",z)});const B=()=>{if(!r.value?.project_types)return;const z=r.value.project_types[p.value.type];if(!z?.directories)return;const M=n.value?.project_types?.[p.value.type];if(!p.value.git.gitignore_template||p.value.git.gitignore_template==="gitignore-project"){const k={project:"gitignore-project",project_sensitive:"gitignore-sensitive",course:"gitignore-course",presentation:"gitignore-presentation"};p.value.git.gitignore_template=k[p.value.type]||"gitignore-project"}q(p.value.git.gitignore_template),p.value.directories_enabled=Object.entries(z.directories).reduce((k,[te,ge])=>(M?.directories_enabled?.[te]!==void 0?k[te]=M.directories_enabled[te]:k[te]=ge.enabled_by_default!==!1,k),{}),p.value.directories=Object.entries(z.directories).reduce((k,[te,ge])=>(k[te]=M?.directories?.[te]||ge.default||"",k),{}),z.render_dirs?p.value.render_dirs=Object.entries(z.render_dirs).reduce((k,[te,ge])=>(k[te]=M?.render_dirs?.[te]||ge.default||"",k),{}):p.value.render_dirs={},M?.extra_directories&&Array.isArray(M.extra_directories)?(p.value.extra_directories=M.extra_directories.map(k=>({...k,_source:"global"})),p.value.extra_directories_enabled=M.extra_directories.reduce((k,te)=>(te.key&&(k[te.key]=!0),k),{})):(p.value.extra_directories=[],p.value.extra_directories_enabled={}),y.value=[],x.value=[],S.value=[],console.log("[DEBUG] loadProjectTypeDefaults() finished - packages still:",p.value.packages.default_packages)},G=z=>r.value?.project_types?.[z]?.label||z,N=(z="")=>{const M={};return z.split(/\r?\n/).forEach(k=>{const te=k.trim();if(!te||te.startsWith("#")||!te.includes("="))return;const[ge,...tt]=te.split("=");M[ge.trim()]=tt.join("=").replace(/^"|"$/g,"")}),M},O=(z={})=>{const M=Object.entries(z);return M.length?M.reduce((k,[te,ge])=>{const tt=te.includes("_")?te.split("_")[0]:"Other";return k[tt]||(k[tt]={}),k[tt][te]={defined:!!ge,used:!1,used_in:[],value:ge},k},{}):{}};Ne(()=>p.value.env.variables,z=>{p.value.env.groups=O(z||{})},{deep:!0}),Ne(y,z=>{qe("input",z)},{deep:!0}),Ne(x,z=>{qe("workspace",z)},{deep:!0}),Ne(S,z=>{qe("output",z)},{deep:!0});const _=()=>{p.value.env.rawContent&&(p.value.env.variables=N(p.value.env.rawContent),p.value.env.groups=O(p.value.env.variables))},V=W(()=>({overview:"Overview",basics:"Basics",author:"Author & Metadata",scaffold:"Scaffold Behavior",structure:"Project Structure",connections:"Connections",env:".env Defaults",packages:"Packages & Dependencies",ai:"AI Assistants",git:"Git & Hooks",review:"Review & Create"})[u.value]||"New Project"),K=W(()=>({overview:"Quick overview of your project settings. We used your Framework Project Defaults as a starting point.",basics:"Essential project settings including name, location, type, and editor support.",author:"Configure author information embedded in project templates.",scaffold:"Runtime settings that control what happens when scaffold() runs.",structure:"Customize which directories to create for this project type.",connections:"Database and storage connections for this project.",env:"Environment variables template for this project.",packages:"Configure package management and default packages.",ai:"Configure AI assistant integration for this project.",git:"Configure version control and git hooks.",review:"Review your project configuration and create the project."})[u.value]||"");W(()=>({vscode:"Positron / VS Code",rstudio:"RStudio","rstudio,vscode":"Both",none:"Other"})[p.value.scaffold.ide]||p.value.scaffold.ide),W(()=>{const z=[];return p.value.git.hooks.ai_sync&&z.push("Sync AI files"),p.value.git.hooks.data_security&&z.push("Check for secrets"),p.value.git.hooks.check_sensitive_dirs&&z.push("Warn about sensitive dirs"),z});const oe=W(()=>{const z=p.value.connections.databaseConnections.length,M=p.value.connections.s3Connections.length;return{databases:z,buckets:M}}),ne=W(()=>{const z=p.value.env?.variables||{};return Object.keys(z).length}),R=W(()=>{const z=p.value.name||"Untitled Project",M=p.value.author?.name||"",k=se.value,te=G(p.value.type),ge=st("workspace"),tt=st("input"),Ot=st("output"),yt=p.value.packages?.default_packages?.length||0,Tt=p.value.packages?.use_renv||!1,ks=ne.value,xs=p.value.ai?.enabled||!1,li=p.value.ai?.assistants?.[0]?p.value.ai.assistants.map(Ki=>Ki.charAt(0).toUpperCase()+Ki.slice(1)).join(", "):"",xn=p.value.ai?.canonical_file||"",Wi=p.value.git?.initialize||!1,es=oe.value.databases,Ai=oe.value.buckets,Jn=es>0||Ai>0?`${es} database${es!==1?"s":""}${Ai>0?`  ${Ai} bucket${Ai!==1?"s":""}`:""}`:"framework_db only";return[{id:"basics",title:"Basics",section:"basics",content:`<div>${z}  ${M}  ${te}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${k}</div>`},{id:"structure",title:"Project Structure",section:"structure",content:`${te}  ${ge} workspace  ${tt} input  ${Ot} output`},{id:"packages",title:"Packages",section:"packages",content:yt>0?`${yt} packages  renv ${Tt?"enabled":"disabled"}`:`renv: ${Tt?"enabled":"disabled"}`},{id:"env",title:".env Defaults",section:"env",content:ks>0?`${ks} variable${ks===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:xs?`<span class="text-green-600 dark:text-green-400">${li}  ${xn}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:`Git: ${Wi?"enabled":"disabled"}`},{id:"connections",title:"Connections",section:"connections",content:Jn},{id:"scaffold",title:"Scaffold Behavior",section:"scaffold",content:`${p.value.scaffold?.source_all_functions?"Functions loaded from functions/":"Does not load functions"}  ${p.value.scaffold?.set_theme_on_scaffold?`ggplot2: ${(p.value.scaffold.ggplot_theme||"theme_minimal").replace("theme_","")}`:"No ggplot theme"}  ${p.value.scaffold?.set_seed?`Seed: ${p.value.scaffold.seed}`:"No random seed"}`}]}),le=W({get(){const z=p.value.git.hooks||{};return{initialize:p.value.git.initialize,user_name:p.value.git.user_name||"",user_email:p.value.git.user_email||"",hooks:{ai_sync:z.ai_sync||!1,data_security:z.data_security||!1,check_sensitive_dirs:z.check_sensitive_dirs||!1}}},set(z){p.value.git.initialize=z.initialize,p.value.git.user_name=z.user_name,p.value.git.user_email=z.user_email,p.value.git.hooks={ai_sync:z.hooks.ai_sync,data_security:z.hooks.data_security,check_sensitive_dirs:z.hooks.check_sensitive_dirs}}}),se=W(()=>{const z=p.value.location,M=n.value?.global?.projects_root;return!z||z===M?"(not set)":z}),$=z=>{p.value.location=z;const M=n.value?.global?.projects_root||"",k=typeof z=="string"?z.trim():"";!k||M&&k===M?(m.value=!0,Ze()):m.value=!1},q=async z=>{try{const M=await fetch(`/api/templates/${z}`);if(M.ok){const k=await M.json();k.success&&k.contents&&(p.value.git.gitignore_content=k.contents)}}catch(M){console.error("Failed to load gitignore template:",M)}},Y=async()=>{p.value.git.gitignore_template&&(await q(p.value.git.gitignore_template),i.success("Template Reset","Restored default .gitignore template"))},de=async(z,M)=>{try{let k;if(z==="CLAUDE.md")switch(M){case"project_sensitive":k="ai_claude_sensitive";break;case"course":k="ai_claude_course";break;case"presentation":k="ai_claude_presentation";break;default:k="ai_claude_project"}else z==="AGENTS.md"?k="ai_agents":z===".github/copilot-instructions.md"&&(k="ai_copilot");const te=await fetch(`/api/templates/${k}`);if(te.ok){const ge=await te.json();ge.success&&ge.contents&&(p.value.ai.canonical_content=ge.contents)}}catch(k){console.error("Failed to load AI template:",k)}};W(()=>r.value?.project_types?r.value.project_types[p.value.type]?.directories||{}:{}),W(()=>{if(!r.value?.project_types)return[];const z=r.value.project_types[p.value.type];return z?.directories?Object.keys(z.directories).filter(M=>{const k=z.directories[M];return k&&k.enabled_by_default===!1}):[]}),W(()=>Object.values(p.value.directories_enabled).filter(z=>z).length);const ye=W(()=>(p.value.extra_directories||[]).filter(z=>z.type==="input"&&z._source==="global")),Ke=W(()=>ye.value.filter(z=>z.scope==="private")),_e=W(()=>ye.value.filter(z=>z.scope==="public")),Le=W(()=>(p.value.extra_directories||[]).filter(z=>z.type==="workspace"&&z._source==="global")),rt=W(()=>(p.value.extra_directories||[]).filter(z=>z.type==="output"&&z._source==="global")),ct=W(()=>rt.value.filter(z=>z.scope==="private")),dt=W(()=>rt.value.filter(z=>z.scope==="public")),st=z=>Object.keys(p.value.directories_enabled).filter(k=>p.value.directories_enabled[k]?z==="workspace"?k==="notebooks"||k==="scripts"||k==="functions":z==="input"?k.startsWith("inputs_"):z==="output"?k.startsWith("outputs_"):z==="temporary"?k==="cache"||k==="scratch":!1:!1).length,U=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],J=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],C=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],X=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],Oe=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],D=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],T=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],F=(z,M)=>r.value?.project_types?.[z]?.directories?.[M]||{},re=(z,M)=>M.map(k=>{const te=F(z,k.key);return{key:k.key,label:te.label||k.label,hint:te.hint||k.hint||""}}),ue=W(()=>re("project",U).map(z=>({...z,defaultRenderDir:U.find(M=>M.key===z.key)?.defaultRenderDir||""}))),ce=W(()=>re("project",J)),Ce=W(()=>re("project",C)),xe=W(()=>re("project",X)),we=W(()=>re("project",Oe)),Q=z=>z.map(M=>{const k=F("project_sensitive",M.privateKey),te=F("project_sensitive",M.publicKey);return{...M,privateLabel:k.label||M.privateLabel,publicLabel:te.label||M.publicLabel}}),Re=W(()=>Q(D)),ke=W(()=>Q(T)),$e=z=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(M=>M.type===z&&M._source==="global"):[],Fe=z=>Array.isArray(p.value.extra_directories)?p.value.extra_directories.filter(M=>M.type===z&&M._source!=="global"):[],qe=(z,M)=>{Array.isArray(p.value.extra_directories)||(p.value.extra_directories=[]);const k=p.value.extra_directories.filter(ge=>ge._source==="global"||ge.type!==z&&ge._source!=="global"),te=M.map(ge=>({...ge,type:z,_source:"project"}));p.value.extra_directories=[...k,...te],te.forEach(ge=>{ge.key&&!p.value.extra_directories_enabled[ge.key]&&(p.value.extra_directories_enabled[ge.key]=!0)})},it=z=>{e.push({query:{...t.query,section:z}})},Ze=()=>{if(!m.value||!p.value.name||!p.value.name.trim())return;const z=n.value?.global?.projects_root||"";if(!z)return;const M=(p.value.location||"").trim();if(M&&!M.startsWith(z))return;const k=p.value.name.toLowerCase().trim().replace(/[\s_]+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!k){p.value.location=z;return}const te=z.replace(/\/+$/,"");p.value.location=`${te}/${k}`},xt=async()=>{if(!p.value.name||!p.value.name.trim()){i.error("Validation Error","Project name is required"),it("overview");return}if(!p.value.location||!p.value.location.trim()){i.error("Validation Error","Project location is required"),it("overview");return}try{d.value=!0;const z=r.value?.project_types?.[p.value.type],M={};z?.directories&&Object.entries(z.directories).forEach(([yt,Tt])=>{p.value.directories_enabled[yt]&&(M[yt]=p.value.directories[yt]||Tt.default)});const k={};p.value.connections.databaseConnections.forEach(yt=>{const{_id:Tt,name:ks,...xs}=yt;k[ks]=xs});const te={};p.value.connections.s3Connections.forEach(yt=>{const{_id:Tt,name:ks,...xs}=yt;te[ks]=xs});const ge={name:p.value.name.trim(),location:p.value.location.trim(),type:p.value.type,author:p.value.author,scaffold:p.value.scaffold,packages:p.value.packages,ai:p.value.ai,git:p.value.git,connections:{default_database:p.value.connections.defaultDatabase,default_storage_bucket:p.value.connections.defaultStorageBucket,databases:k,storage_buckets:te},env:{raw:p.value.env.rawContent||""},directories:M,render_dirs:p.value.render_dirs||{},extra_directories:(p.value.extra_directories||[]).filter(yt=>{const Tt=yt.key&&yt.key.trim()&&yt.label&&yt.label.trim()&&yt.path&&yt.path.trim(),ks=p.value.extra_directories_enabled?.[yt.key]!==!1;return Tt&&ks}),extra_directories_enabled:p.value.extra_directories_enabled||{}},tt=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge)});if(!tt.ok){const yt=await tt.json();throw new Error(yt.message||"Failed to create project")}const Ot=await tt.json();if(Ot.success===!1)throw new Error(Ot.error||"Project creation failed");i.success("Project Created",`${p.value.name} has been created successfully`),e.push("/projects")}catch(z){console.error("Failed to create project:",z),i.error("Creation Failed",z.message||"Could not create the project")}finally{d.value=!1}},He=z=>{(z.metaKey||z.ctrlKey)&&z.key==="s"&&(z.preventDefault(),xt())};return ls(()=>{window.addEventListener("keydown",He)}),Pr(()=>{window.removeEventListener("keydown",He)}),(z,M)=>(g(),v("div",uE,[f("nav",cE,[M[44]||(M[44]=f("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project",-1)),f("div",dE,[(g(),v(me,null,Ee(c,k=>(g(),v(me,{key:k.id},[k.id==="basics"?(g(),be(La,{key:0},{default:Z(()=>[...M[43]||(M[43]=[he("Settings",-1)])]),_:1})):I("",!0),f("a",{href:"#",onClick:Ht(te=>u.value=k.id,["prevent"]),class:Ae(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",u.value===k.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[k.icon?(g(),be(Es(k.icon),{key:0,class:"h-4 w-4"})):k.svgIcon?(g(),v("svg",{key:1,class:"h-4 w-4",fill:k.svgFill??"none",viewBox:k.svgViewBox??"0 0 24 24",stroke:k.svgStroke??"currentColor"},[f("path",{"stroke-linecap":k.svgStrokeLinecap??"round","stroke-linejoin":k.svgStrokeLinejoin??"round","stroke-width":k.svgStrokeWidth??2,fill:k.svgPathFill??"none",d:k.svgIcon},null,8,pE)],8,hE)):I("",!0),he(" "+ee(k.label),1)],10,fE)],64))),64))]),f("div",mE,[w(Ye,{variant:"primary",size:"md",class:"w-full",disabled:d.value||!p.value.name||!p.value.location,onClick:xt},{default:Z(()=>[he(ee(d.value?"Creating...":"Create Project"),1)]),_:1},8,["disabled"])])]),f("div",gE,[w(jr,{title:V.value,description:K.value},null,8,["title","description"]),f("div",vE,[nt(f("div",null,[w(Tf,{cards:R.value,onNavigate:M[0]||(M[0]=k=>u.value=k)},null,8,["cards"])],512),[[mt,u.value==="overview"]]),nt(f("div",null,[f("div",yE,[f("div",bE,[w(ae,{ref_key:"projectNameInput",ref:h,modelValue:p.value.name,"onUpdate:modelValue":M[1]||(M[1]=k=>p.value.name=k),label:"Project Name",hint:"Human-readable name for your project",placeholder:"My Analysis Project",required:""},null,8,["modelValue"]),w(ae,{"model-value":p.value.location,"onUpdate:modelValue":$,label:"Project Location",hint:"Directory where the project will be created",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["model-value"]),w(si,{modelValue:p.value.type,"onUpdate:modelValue":M[2]||(M[2]=k=>p.value.type=k),label:"Project Type",hint:"Choose the template structure for your project"},{default:Z(()=>[...M[45]||(M[45]=[f("option",{value:"project"},"Standard Project",-1),f("option",{value:"project_sensitive"},"Privacy Sensitive Project",-1),f("option",{value:"course"},"Course",-1),f("option",{value:"presentation"},"Presentation",-1)])]),_:1},8,["modelValue"]),f("div",null,[M[47]||(M[47]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),w(sn,{modelValue:p.value.scaffold.positron,"onUpdate:modelValue":M[3]||(M[3]=k=>p.value.scaffold.positron=k),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:Z(()=>[...M[46]||(M[46]=[he(" Positron ",-1)])]),_:1},8,["modelValue"]),M[48]||(M[48]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),w(si,{modelValue:p.value.scaffold.notebook_format,"onUpdate:modelValue":M[4]||(M[4]=k=>p.value.scaffold.notebook_format=k),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...M[49]||(M[49]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),f("div",kE,[w(Vf,{modelValue:p.value.author,"onUpdate:modelValue":M[5]||(M[5]=k=>p.value.author=k)},null,8,["modelValue"])])])])],512),[[mt,u.value==="basics"]]),nt(f("div",null,[f("div",xE,[M[50]||(M[50]=f("div",null,[f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"}," Scaffold Behavior "),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[he(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),he(" runs to initialize your project environment. ")])],-1)),w(Pf,{modelValue:p.value.scaffold,"onUpdate:modelValue":M[6]||(M[6]=k=>p.value.scaffold=k),flush:""},null,8,["modelValue"])])],512),[[mt,u.value==="scaffold"]]),nt(f("div",wE,[f("div",SE,[w(Pu,{legend:"Project Type",description:"Select a project type to customize the directory structure."},{default:Z(()=>[w(bl,{modelValue:p.value.type,"onUpdate:modelValue":M[7]||(M[7]=k=>p.value.type=k),id:"type-project",name:"project-type",value:"project"},{default:Z(()=>[...M[51]||(M[51]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Standard Project"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Full-featured with organized data, work, and output directories ")],-1)])]),_:1},8,["modelValue"]),w(bl,{modelValue:p.value.type,"onUpdate:modelValue":M[8]||(M[8]=k=>p.value.type=k),id:"type-sensitive",name:"project-type",value:"project_sensitive"},{default:Z(()=>[...M[52]||(M[52]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Privacy Sensitive Project"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Enhanced privacy controls with separate private/public flows ")],-1)])]),_:1},8,["modelValue"]),w(bl,{modelValue:p.value.type,"onUpdate:modelValue":M[9]||(M[9]=k=>p.value.type=k),id:"type-presentation",name:"project-type",value:"presentation"},{default:Z(()=>[...M[53]||(M[53]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Presentation"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Minimal structure for slides and presentations ")],-1)])]),_:1},8,["modelValue"]),w(bl,{modelValue:p.value.type,"onUpdate:modelValue":M[10]||(M[10]=k=>p.value.type=k),id:"type-course",name:"project-type",value:"course"},{default:Z(()=>[...M[54]||(M[54]=[f("div",null,[f("div",{class:"font-medium text-sm"},"Course/Teaching"),f("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5"}," Simplified structure for teaching materials ")],-1)])]),_:1},8,["modelValue"])]),_:1})]),p.value.type==="presentation"?(g(),v("div",_E,[M[55]||(M[55]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Primary Files",-1)),f("div",CE,[w(ae,{modelValue:p.value.directories.presentation_source,"onUpdate:modelValue":M[11]||(M[11]=k=>p.value.directories.presentation_source=k),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides"},null,8,["modelValue"]),w(ae,{modelValue:p.value.directories.rendered_slides,"onUpdate:modelValue":M[12]||(M[12]=k=>p.value.directories.rendered_slides=k),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:""},null,8,["modelValue"])])])):I("",!0),p.value.type==="project"?(g(),v("div",AE,[f("div",ME,[M[57]||(M[57]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Inputs",-1)),M[58]||(M[58]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Define the read-only locations where raw and prepared data live. ",-1)),f("div",DE,[(g(!0),v(me,null,Ee(Ce.value,k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]))),128))]),f("div",EE,[M[56]||(M[56]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),$e("input").length>0?(g(),v("div",TE,[(g(!0),v(me,null,Ee($e("input"),k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))])):I("",!0),w(_s,{modelValue:y.value,"onUpdate:modelValue":M[13]||(M[13]=k=>y.value=k),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:Z(({item:k,update:te})=>[f("div",VE,[w(ae,{"model-value":k.key,"onUpdate:modelValue":ge=>te("key",ge),label:"Key",placeholder:"inputs_archive",hint:"Unique identifier (alphanumeric and underscores)"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":ge=>te("label",ge),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":ge=>te("path",ge),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","defaultItem"])])]),f("div",OE,[M[60]||(M[60]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Workspaces",-1)),M[61]||(M[61]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Functions, notebooks, and scripts scaffolded into every project. ",-1)),f("div",PE,[(g(!0),v(me,null,Ee(ue.value,k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),v("div",$E,[w(ae,{modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,label:"Source files",prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"]),w(ae,{modelValue:p.value.render_dirs[k.key],"onUpdate:modelValue":te=>p.value.render_dirs[k.key]=te,label:"Quarto render directory",prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])])):I("",!0)]))),128)),(g(!0),v(me,null,Ee(ce.value,k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]))),128))]),f("div",jE,[M[59]||(M[59]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),$e("workspace").length>0?(g(),v("div",LE,[(g(!0),v(me,null,Ee($e("workspace"),k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))])):I("",!0),w(_s,{modelValue:x.value,"onUpdate:modelValue":M[14]||(M[14]=k=>x.value=k),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:k,update:te})=>[f("div",RE,[w(ae,{"model-value":k.key,"onUpdate:modelValue":ge=>te("key",ge),label:"Key",placeholder:"tests",hint:"Unique identifier (alphanumeric and underscores)"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":ge=>te("label",ge),label:"Label",placeholder:"Tests"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":ge=>te("path",ge),label:"Path",prefix:"/",placeholder:"tests",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","defaultItem"])])]),f("div",IE,[M[63]||(M[63]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Outputs",-1)),M[64]||(M[64]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Outputs are public by default so results are easy to share. ",-1)),f("div",BE,[(g(!0),v(me,null,Ee(xe.value,k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]))),128))]),f("div",NE,[M[62]||(M[62]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),$e("output").length>0?(g(),v("div",UE,[(g(!0),v(me,null,Ee($e("output"),k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))])):I("",!0),w(_s,{modelValue:S.value,"onUpdate:modelValue":M[15]||(M[15]=k=>S.value=k),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:Z(({item:k,update:te})=>[f("div",FE,[w(ae,{"model-value":k.key,"onUpdate:modelValue":ge=>te("key",ge),label:"Key",placeholder:"outputs_animations",hint:"Unique identifier (alphanumeric and underscores)"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":ge=>te("label",ge),label:"Label",placeholder:"Animations"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":ge=>te("path",ge),label:"Path",prefix:"/",placeholder:"outputs/animations",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","defaultItem"])])]),f("div",zE,[M[65]||(M[65]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Utility directories",-1)),M[66]||(M[66]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Cache and scratch folders are gitignored so temporary artifacts never leak into version control. ",-1)),f("div",HE,[(g(!0),v(me,null,Ee(we.value,k=>(g(),v("div",{key:k.key,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]))),128))])])])):I("",!0),p.value.type==="course"&&r.value?(g(),be(_b,{key:2,"directories-enabled":p.value.directories_enabled,"onUpdate:directoriesEnabled":M[16]||(M[16]=k=>p.value.directories_enabled=k),directories:p.value.directories,"onUpdate:directories":M[17]||(M[17]=k=>p.value.directories=k),"render-dirs":p.value.render_dirs||{},"onUpdate:renderDirs":M[18]||(M[18]=k=>p.value.render_dirs=k),catalog:r.value.project_types?.course||{},"extra-directories-enabled":p.value.extra_directories_enabled,"onUpdate:extraDirectoriesEnabled":M[19]||(M[19]=k=>p.value.extra_directories_enabled=k),"extra-directories":$e("course"),"project-custom-directories":Fe("course"),"onUpdate:projectCustomDirectories":M[20]||(M[20]=k=>qe("course",k)),"allow-custom-directories":!0},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories-enabled","extra-directories","project-custom-directories"])):I("",!0),p.value.type==="presentation"?(g(),v("div",WE,[M[68]||(M[68]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Optional Directories",-1)),M[69]||(M[69]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities.",-1)),f("div",KE,[f("div",qE,[w(Ue,{modelValue:p.value.directories_enabled.data,"onUpdate:modelValue":M[21]||(M[21]=k=>p.value.directories_enabled.data=k),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation."},null,8,["modelValue"]),p.value.directories_enabled.data?(g(),be(ae,{key:0,modelValue:p.value.directories.data,"onUpdate:modelValue":M[22]||(M[22]=k=>p.value.directories.data=k),prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),f("div",GE,[w(Ue,{modelValue:p.value.directories_enabled.scripts,"onUpdate:modelValue":M[23]||(M[23]=k=>p.value.directories_enabled.scripts=k),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation."},null,8,["modelValue"]),p.value.directories_enabled.scripts?(g(),be(ae,{key:0,modelValue:p.value.directories.scripts,"onUpdate:modelValue":M[24]||(M[24]=k=>p.value.directories.scripts=k),prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),f("div",JE,[w(Ue,{modelValue:p.value.directories_enabled.functions,"onUpdate:modelValue":M[25]||(M[25]=k=>p.value.directories_enabled.functions=k),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically."},null,8,["modelValue"]),p.value.directories_enabled.functions?(g(),be(ae,{key:0,modelValue:p.value.directories.functions,"onUpdate:modelValue":M[26]||(M[26]=k=>p.value.directories.functions=k),prefix:"/",monospace:""},null,8,["modelValue"])):I("",!0)]),f("div",YE,[M[67]||(M[67]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),w(_s,{"model-value":Fe("workspace"),"onUpdate:modelValue":M[27]||(M[27]=k=>qe("workspace",k)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:k,index:te,update:ge})=>[f("div",QE,[w(ae,{"model-value":k.key,"onUpdate:modelValue":tt=>ge("key",tt),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":tt=>ge("label",tt),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":tt=>ge("path",tt),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"])])])])):I("",!0),p.value.type==="project_sensitive"?(g(),v("div",XE,[f("div",ZE,[M[72]||(M[72]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Inputs",-1)),M[73]||(M[73]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep private inputs compartmentalized; publish processed outputs into public folders when ready. ",-1)),M[74]||(M[74]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",eT,[(g(!0),v(me,null,Ee(Re.value,k=>(g(),v("div",{key:k.privateKey,class:"grid gap-4 sm:grid-cols-2"},[f("div",tT,[w(Ue,{modelValue:p.value.directories_enabled[k.privateKey],"onUpdate:modelValue":te=>p.value.directories_enabled[k.privateKey]=te,label:k.privateLabel||`${k.label} (private)`},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[k.privateKey]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.privateKey],"onUpdate:modelValue":te=>p.value.directories[k.privateKey]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]),f("div",sT,[w(Ue,{modelValue:p.value.directories_enabled[k.publicKey],"onUpdate:modelValue":te=>p.value.directories_enabled[k.publicKey]=te,label:k.publicLabel||`${k.label} (public)`},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[k.publicKey]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.publicKey],"onUpdate:modelValue":te=>p.value.directories[k.publicKey]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)])]))),128))]),Ke.value.length>0||_e.value.length>0||y.value.length>0?(g(),v("div",iT,[M[70]||(M[70]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),M[71]||(M[71]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),Ke.value.length>0||_e.value.length>0?(g(),v("div",nT,[f("div",rT,[f("div",oT,[(g(!0),v(me,null,Ee(Ke.value,k=>(g(),v("div",{key:k.key,class:"space-y-2"},[w(Ue,{"model-value":p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["model-value","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))]),f("div",lT,[(g(!0),v(me,null,Ee(_e.value,k=>(g(),v("div",{key:k.key,class:"space-y-2"},[w(Ue,{"model-value":p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["model-value","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))])])])):I("",!0),w(_s,{modelValue:y.value,"onUpdate:modelValue":M[28]||(M[28]=k=>y.value=k),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",scope:"private",_id:Date.now()})},{default:Z(({item:k,update:te})=>[f("div",aT,[w(Pu,{"model-value":k.scope||"private","onUpdate:modelValue":ge=>te("scope",ge),label:"Scope",options:[{value:"private",label:"Private"},{value:"public",label:"Public"}]},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.key,"onUpdate:modelValue":ge=>te("key",ge),label:"Key",placeholder:"inputs_archive",hint:"Unique identifier (alphanumeric and underscores)",monospace:""},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":ge=>te("label",ge),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":ge=>te("path",ge),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","defaultItem"])])):I("",!0)]),f("div",uT,[M[76]||(M[76]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Workspaces",-1)),M[77]||(M[77]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Module locations for notebooks, scripts, and helper functions. ",-1)),f("div",cT,[(g(!0),v(me,null,Ee(ue.value,k=>(g(),v("div",{key:`sensitive-${k.key}`,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),v("div",dT,[w(ae,{modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,label:"Source files",prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"]),w(ae,{modelValue:p.value.render_dirs[k.key],"onUpdate:modelValue":te=>p.value.render_dirs[k.key]=te,label:"Quarto render directory",prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])])):I("",!0)]))),128)),(g(!0),v(me,null,Ee(ce.value,k=>(g(),v("div",{key:`sensitive-${k.key}`,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]))),128))]),Le.value.length>0||x.value.length>0?(g(),v("div",fT,[M[75]||(M[75]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),Le.value.length>0?(g(),v("div",hT,[(g(!0),v(me,null,Ee(Le.value,k=>(g(),v("div",{key:k.key,class:"space-y-2"},[w(Ue,{"model-value":p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["model-value","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))])):I("",!0),w(_s,{modelValue:x.value,"onUpdate:modelValue":M[29]||(M[29]=k=>x.value=k),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:k,update:te})=>[f("div",pT,[w(ae,{"model-value":k.key,"onUpdate:modelValue":ge=>te("key",ge),label:"Key",placeholder:"templates",hint:"Unique identifier (alphanumeric and underscores)",monospace:""},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":ge=>te("label",ge),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":ge=>te("path",ge),label:"Path",prefix:"/",placeholder:"templates",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","defaultItem"])])):I("",!0)]),f("div",mT,[M[80]||(M[80]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Outputs",-1)),M[81]||(M[81]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Review outputs before promotion; private folders remain gitignored while public copies are ready to share. ",-1)),M[82]||(M[82]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",gT,[(g(!0),v(me,null,Ee(ke.value,k=>(g(),v("div",{key:k.privateKey,class:"grid gap-4 sm:grid-cols-2"},[f("div",vT,[w(Ue,{modelValue:p.value.directories_enabled[k.privateKey],"onUpdate:modelValue":te=>p.value.directories_enabled[k.privateKey]=te,label:k.privateLabel||`${k.label} (private)`},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[k.privateKey]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.privateKey],"onUpdate:modelValue":te=>p.value.directories[k.privateKey]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]),f("div",yT,[w(Ue,{modelValue:p.value.directories_enabled[k.publicKey],"onUpdate:modelValue":te=>p.value.directories_enabled[k.publicKey]=te,label:k.publicLabel||`${k.label} (public)`},null,8,["modelValue","onUpdate:modelValue","label"]),p.value.directories_enabled[k.publicKey]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.publicKey],"onUpdate:modelValue":te=>p.value.directories[k.publicKey]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)])]))),128))]),ct.value.length>0||dt.value.length>0||S.value.length>0?(g(),v("div",bT,[M[78]||(M[78]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),M[79]||(M[79]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),ct.value.length>0||dt.value.length>0?(g(),v("div",kT,[f("div",xT,[f("div",wT,[(g(!0),v(me,null,Ee(ct.value,k=>(g(),v("div",{key:k.key,class:"space-y-2"},[w(Ue,{"model-value":p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["model-value","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))]),f("div",ST,[(g(!0),v(me,null,Ee(dt.value,k=>(g(),v("div",{key:k.key,class:"space-y-2"},[w(Ue,{"model-value":p.value.extra_directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.extra_directories_enabled[k.key]=te,label:k.label},null,8,["model-value","onUpdate:modelValue","label"]),p.value.extra_directories_enabled[k.key]?(g(),be(ae,{key:0,"model-value":k.path,readonly:"",prefix:"/",monospace:""},null,8,["model-value"])):I("",!0)]))),128))])])])):I("",!0),w(_s,{modelValue:S.value,"onUpdate:modelValue":M[30]||(M[30]=k=>S.value=k),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",scope:"private",_id:Date.now()})},{default:Z(({item:k,update:te})=>[f("div",_T,[w(Pu,{"model-value":k.scope||"private","onUpdate:modelValue":ge=>te("scope",ge),label:"Scope",options:[{value:"private",label:"Private"},{value:"public",label:"Public"}]},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.key,"onUpdate:modelValue":ge=>te("key",ge),label:"Key",placeholder:"outputs_presentations",hint:"Unique identifier (alphanumeric and underscores)",monospace:""},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.label,"onUpdate:modelValue":ge=>te("label",ge),label:"Label",placeholder:"Presentations"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":k.path,"onUpdate:modelValue":ge=>te("path",ge),label:"Path",prefix:"/",placeholder:"outputs/presentations",monospace:""},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["modelValue","defaultItem"])])):I("",!0)]),f("div",CT,[M[83]||(M[83]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Utility directories",-1)),M[84]||(M[84]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Keep cache and scratch in private space for safety; both remain gitignored. ",-1)),f("div",AT,[(g(!0),v(me,null,Ee(we.value,k=>(g(),v("div",{key:`sensitive-${k.key}`,class:"space-y-1.5"},[w(Ue,{modelValue:p.value.directories_enabled[k.key],"onUpdate:modelValue":te=>p.value.directories_enabled[k.key]=te,label:k.label,description:k.hint},null,8,["modelValue","onUpdate:modelValue","label","description"]),p.value.directories_enabled[k.key]!==!1?(g(),be(ae,{key:0,modelValue:p.value.directories[k.key],"onUpdate:modelValue":te=>p.value.directories[k.key]=te,prefix:"/",monospace:""},null,8,["modelValue","onUpdate:modelValue"])):I("",!0)]))),128))])])])):I("",!0),f("div",MT,[M[86]||(M[86]=f("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},".gitignore Template",-1)),M[87]||(M[87]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Customize the .gitignore template for this project type. Uses pattern-based matching to catch sensitive directories anywhere in your project tree. ",-1)),w(kb,{modelValue:p.value.git.gitignore_content,"onUpdate:modelValue":M[31]||(M[31]=k=>p.value.git.gitignore_content=k),language:"gitignore",class:"mb-4"},null,8,["modelValue"]),w(Ye,{variant:"secondary",size:"sm",onClick:Y},{default:Z(()=>[...M[85]||(M[85]=[he(" Restore Default ",-1)])]),_:1})])],512),[[mt,u.value==="structure"]]),nt(f("div",null,[w($f,{"database-connections":p.value.connections.databaseConnections,"onUpdate:databaseConnections":M[32]||(M[32]=k=>p.value.connections.databaseConnections=k),"s3-connections":p.value.connections.s3Connections,"onUpdate:s3Connections":M[33]||(M[33]=k=>p.value.connections.s3Connections=k),"default-database":p.value.connections.defaultDatabase,"onUpdate:defaultDatabase":M[34]||(M[34]=k=>p.value.connections.defaultDatabase=k),"default-storage-bucket":p.value.connections.defaultStorageBucket,"onUpdate:defaultStorageBucket":M[35]||(M[35]=k=>p.value.connections.defaultStorageBucket=k)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[mt,u.value==="connections"]]),nt(f("div",null,[f("div",DT,[M[88]||(M[88]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Environment variables template for this project. These defaults help connections work immediately. ",-1)),w(jf,{groups:p.value.env.groups,variables:p.value.env.variables,"onUpdate:variables":M[36]||(M[36]=k=>p.value.env.variables=k),"raw-content":p.value.env.rawContent,"onUpdate:rawContent":M[37]||(M[37]=k=>p.value.env.rawContent=k),"view-mode":p.value.env.viewMode,"onUpdate:viewMode":M[38]||(M[38]=k=>p.value.env.viewMode=k),"regroup-on-save":p.value.env.regroupOnSave,"onUpdate:regroupOnSave":M[39]||(M[39]=k=>p.value.env.regroupOnSave=k),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"])])],512),[[mt,u.value==="env"]]),nt(f("div",null,[w(wb,{modelValue:p.value.packages,"onUpdate:modelValue":M[40]||(M[40]=k=>p.value.packages=k),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])],512),[[mt,u.value==="packages"]]),nt(f("div",null,[f("div",ET,[M[90]||(M[90]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),w(Sb,{modelValue:p.value.ai,"onUpdate:modelValue":M[41]||(M[41]=k=>p.value.ai=k),flush:!0,"show-editor":!0,"editor-height":"500px"},{"editor-description":Z(()=>[...M[89]||(M[89]=[he(" Edit the canonical file directly. This will be pre-populated when the project is created. ",-1)])]),_:1},8,["modelValue"])])],512),[[mt,u.value==="ai"]]),nt(f("div",null,[w(Of,{modelValue:le.value,"onUpdate:modelValue":M[42]||(M[42]=k=>le.value=k)},{note:Z(()=>[...M[91]||(M[91]=[he(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])],512),[[mt,u.value==="git"]])])])]))}},VT={class:"mt-2 block text-sm font-semibold text-gray-900 dark:text-white"},OT={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},PT={class:"mt-2 text-sm font-semibold text-gray-900 dark:text-white"},$T={key:0,class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},jT={key:1,class:"mt-6"},LT={__name:"EmptyState",props:{title:{type:String,required:!0},description:{type:String,default:null},icon:{type:String,default:null,validator:s=>["database","folder","document","users","inbox","photo"].includes(s)},action:{type:Boolean,default:!1}},emits:["click"],setup(s,{emit:e}){const t=s,i=e,n=W(()=>{const l=["relative","block","w-full","rounded-lg","border-2","border-dashed","border-gray-300","p-12","text-center","dark:border-white/15"];return t.action&&l.push("hover:border-gray-400","focus:outline-2","focus:outline-offset-2","focus:outline-sky-600","dark:hover:border-white/25","dark:focus:outline-sky-500","transition-colors"),l.join(" ")}),r=W(()=>({database:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M8 14v20c0 4.418 7.163 8 16 8 1.381 0 2.721-.087 4-.252M8 14c0 4.418 7.163 8 16 8s16-3.582 16-8M8 14c0-4.418 7.163-8 16-8s16 3.582 16 8m0 0v14m0-4c0 4.418-7.163 8-16 8S8 28.418 8 24m32 10v6m0 0v6m0-6h6m-6 0h-6"})]),folder:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M3 7v30a4 4 0 004 4h34a4 4 0 004-4V13a4 4 0 00-4-4H23.343a4 4 0 01-2.829-1.172l-2.828-2.828A4 4 0 0014.858 4H7a4 4 0 00-4 4v0zM37 17v6m0 0v6m0-6h6m-6 0h-6"})]),document:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M8 4a4 4 0 00-4 4v32a4 4 0 004 4h32a4 4 0 004-4V8a4 4 0 00-4-4H8zm24 16v6m0 0v6m0-6h6m-6 0h-6"})]),users:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M17 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H10.5zM31 21a5 5 0 110-10 5 5 0 010 10zm-6.5 8a7.5 7.5 0 0115 0H24.5z"})]),inbox:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M4 8h40M4 8v28a4 4 0 004 4h32a4 4 0 004-4V8M4 8l18 14a2 2 0 002.4 0L44 8"})]),photo:()=>Rt("svg",{viewBox:"0 0 48 48",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Rt("path",{d:"M4 8a4 4 0 014-4h32a4 4 0 014 4v32a4 4 0 01-4 4H8a4 4 0 01-4-4V8zm10 6a3 3 0 100-6 3 3 0 000 6zM4 40l12-12 8 8 8-8L44 40"})])})[t.icon]||null),o=()=>{t.action&&i("click")};return(l,a)=>s.action?(g(),v("button",{key:0,type:"button",onClick:o,class:Ae(n.value)},[gt(l.$slots,"icon",{},()=>[s.icon?(g(),be(Es(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),f("span",VT,ee(s.title),1),s.description?(g(),v("p",OT,ee(s.description),1)):I("",!0)],2)):(g(),v("div",{key:1,class:Ae(n.value.replace("hover:border-gray-400","").replace("focus:outline-2",""))},[gt(l.$slots,"icon",{},()=>[s.icon?(g(),be(Es(r.value),{key:0,class:"mx-auto size-12 text-gray-400 dark:text-gray-500"})):I("",!0)]),f("h3",PT,ee(s.title),1),s.description?(g(),v("p",$T,ee(s.description),1)):I("",!0),l.$slots.actions?(g(),v("div",jT,[gt(l.$slots,"actions")])):I("",!0)],2))}},RT=["for"],IT={class:"mt-2"},BT=["id","value","placeholder","rows","required","disabled"],NT={key:1,class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Ra={__name:"Textarea",props:{id:{type:String,default:()=>`textarea-${Math.random().toString(36).substr(2,9)}`},modelValue:{type:String,default:""},label:{type:String,default:null},placeholder:{type:String,default:""},rows:{type:Number,default:4},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:null},monospace:{type:Boolean,default:!1},textareaClass:{type:[String,Array,Object],default:""}},emits:["update:modelValue"],setup(s){const e=s,t=W(()=>["block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-sky-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-sky-500",e.monospace?"font-mono text-sm leading-6":"",e.textareaClass]);return(i,n)=>(g(),v("div",null,[s.label?(g(),v("label",{key:0,for:s.id,class:"block text-sm/6 font-medium text-gray-900 dark:text-white"},ee(s.label),9,RT)):I("",!0),f("div",IT,[f("textarea",{id:s.id,value:s.modelValue,placeholder:s.placeholder,rows:s.rows,required:s.required,disabled:s.disabled,onInput:n[0]||(n[0]=r=>i.$emit("update:modelValue",r.target.value)),class:Ae(t.value)},null,42,BT)]),s.hint?(g(),v("p",NT,ee(s.hint),1)):I("",!0)]))}},UT={class:"space-y-6"},FT={key:0},zT={class:"mt-1 font-mono text-sm text-gray-900 dark:text-gray-100 break-words"},HT={key:1},WT={class:"grid gap-4 sm:grid-cols-2"},KT=["value"],qT={class:"sm:col-span-2"},GT={key:0,class:"sm:col-span-2"},JT={class:"space-y-3"},YT={class:"flex items-center justify-between"},QT={key:0,class:"rounded-md border border-dashed border-gray-300 p-4 text-sm text-gray-500 dark:border-gray-600 dark:text-gray-400"},XT={class:"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start"},ZT={class:"mt-3"},eV={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},tV={class:"mt-2 flex justify-end"},sV={key:2,class:"text-sm text-red-600 dark:text-red-400"},iV={key:3,class:"text-sm text-red-600 dark:text-red-400"},nV={key:4,class:"text-sm text-red-600 dark:text-red-400"},rV='{"source": "data-catalog"}',oV={__name:"DataCatalogEditModal",props:{modelValue:{type:Boolean,default:!1},mode:{type:String,default:"edit",validator:s=>["edit","create"].includes(s)},entry:{type:Object,default:null},saving:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","save"],setup(s,{emit:e}){const t=s,i=e,n=Object.freeze([{value:"csv",label:"CSV (comma-separated)"},{value:"tsv",label:"TSV (tab-separated)"},{value:"csv_custom",label:"Delimited text (custom)"},{value:"rds",label:"RDS (R serialized)"},{value:"excel",label:"Excel (.xlsx / .xls)"},{value:"stata",label:"Stata (.dta)"},{value:"spss",label:"SPSS (.sav / .zsav)"},{value:"spss_por",label:"SPSS Portable (.por)"},{value:"sas",label:"SAS (.sas7bdat / .sas7bcat)"},{value:"sas_xpt",label:"SAS Transport (.xpt)"}]),r=["path","type","description","locked","delimiter"],o=ie(null),l=ie(!1),a=ie(!1),c=W(()=>t.mode==="create"),u=Is({path:"",fullKey:"",type:"",description:"",delimiter:"",locked:!1,additionalFields:[]}),d=W(()=>u.type==="csv_custom"),h=W(()=>{if(!t.entry&&!c.value)return null;const q=K();return q.length>0?`Duplicate metadata keys: ${q.join(", ")}`:u.additionalFields.some(Y=>!Y.key.trim())?"Metadata keys cannot be empty.":null}),m=W(()=>u.path.trim()?null:"File path is required"),y=W(()=>c.value?a.value?m.value:null:m.value);Ne(()=>t.entry,q=>{if(!q){N();return}G(q)},{immediate:!0}),Ne(()=>u.path,q=>{if(l.value)return;const Y=j(q);Y&&(Y.type==="csv"?(u.type="csv",u.delimiter=S("csv")):Y.type==="tsv"?(u.type="tsv",u.delimiter=S("tsv")):(u.type=Y.type,u.delimiter=""))}),Ne(()=>u.type,q=>{q&&(q==="csv"?u.delimiter=S("csv"):q==="tsv"?u.delimiter=S("tsv"):q!=="csv_custom"&&(u.delimiter=""))});function x(){return`field-${Math.random().toString(36).slice(2,9)}`}function S(q){return q==="csv"?"comma":q==="tsv"?"tab":""}function p(q,Y){if(!q)return!1;const de=q.toLowerCase();return Y==="csv"?de==="comma"||q===",":Y==="tsv"?de==="tab"||q==="	":!1}function j(q){if(!q)return null;const Y=q.toLowerCase();return Y.endsWith(".csv")?{type:"csv",delimiter:"comma"}:Y.endsWith(".tsv")||Y.endsWith(".txt")||Y.endsWith(".dat")?{type:"tsv",delimiter:"tab"}:Y.endsWith(".rds")?{type:"rds",delimiter:""}:Y.endsWith(".xlsx")||Y.endsWith(".xls")?{type:"excel",delimiter:""}:Y.endsWith(".dta")?{type:"stata",delimiter:""}:Y.endsWith(".sav")||Y.endsWith(".zsav")?{type:"spss",delimiter:""}:Y.endsWith(".por")?{type:"spss_por",delimiter:""}:Y.endsWith(".sas7bdat")||Y.endsWith(".sas7bcat")?{type:"sas",delimiter:""}:Y.endsWith(".xpt")?{type:"sas_xpt",delimiter:""}:null}function B(q){if(!q){u.type="",u.delimiter="",l.value=!1;return}u.type=q,l.value=!0,q==="csv"?u.delimiter=S("csv"):q==="tsv"?u.delimiter=S("tsv"):u.delimiter=""}function G(q){if(N(),a.value=!1,c.value){const _e=q?.data||{};u.fullKey=q?.fullKey||"",u.path=_e.path||"",u.type=_e.type||"",u.description=_e.description||"",u.locked=!!_e.locked,u.delimiter=_e.delimiter||"",l.value=!1;return}const Y=q.data||{};u.fullKey=q.fullKey||"",u.path=Y.path||"";const de=j(u.path),ye=Y.type||de?.type||"";if(u.description=Y.description||"",u.locked=!!Y.locked,ye==="csv"){const _e=Y.delimiter||de?.delimiter||S("csv");p(_e,"csv")?(u.type="csv",u.delimiter=S("csv")):_e?(u.type="csv_custom",u.delimiter=_e):(u.type="csv",u.delimiter=S("csv"))}else ye==="tsv"?(u.type="tsv",u.delimiter=S("tsv")):(u.type=ye,u.delimiter=d.value&&Y.delimiter||"");!u.type&&de?.type&&(u.type=de.type,u.delimiter=de.delimiter||S(de.type)),l.value=!!Y.type||u.type==="csv_custom";const Ke=Object.entries(Y).filter(([_e])=>!r.includes(_e)).map(([_e,Le])=>({id:x(),key:_e,valueInput:O(Le),valueType:_(Le),isMultiline:typeof Le=="object"&&Le!==null}));u.additionalFields=Ke,o.value=null}function N(){u.path="",u.fullKey="",u.type="",u.description="",u.delimiter="",u.locked=!1,u.additionalFields=[],o.value=null,l.value=!1}function O(q){if(typeof q=="object"&&q!==null)try{return JSON.stringify(q,null,2)}catch{return""}return q==null?"":String(q)}function _(q){return Array.isArray(q)||typeof q=="object"&&q!==null?"object":typeof q=="boolean"?"boolean":typeof q=="number"?"number":"string"}function V(q){if(q.valueType==="object"){if(!q.valueInput.trim())return null;try{return JSON.parse(q.valueInput)}catch{throw new Error(`Invalid JSON for field "${q.key}"`)}}if(q.valueType==="number"){const Y=Number(q.valueInput);if(Number.isNaN(Y))throw new Error(`Value for "${q.key}" must be a number`);return Y}if(q.valueType==="boolean"){const Y=q.valueInput.trim().toLowerCase();if(["true","false"].includes(Y))return Y==="true";throw new Error(`Value for "${q.key}" must be "true" or "false"`)}return q.valueInput}function K(){const q=new Set,Y=[];return u.additionalFields.forEach(de=>{const ye=de.key.trim();ye&&(q.has(ye)||r.includes(ye)?Y.push(ye):q.add(ye))}),Y}function oe(q){return q.key.trim()?r.includes(q.key.trim())?"Reserved key name":u.additionalFields.some(Y=>Y!==q&&Y.key.trim()===q.key.trim())?"Duplicate key":null:"Key is required"}function ne(){u.additionalFields.push({id:x(),key:"",valueInput:"",valueType:"string",isMultiline:!1}),o.value=null}function R(q){u.additionalFields=u.additionalFields.filter(Y=>Y.id!==q)}function le(q){q.isMultiline=!q.isMultiline,q.isMultiline?(q.valueType="object",q.valueInput&&!q.valueInput.trim().startsWith("{")&&(q.valueInput="")):(q.valueType="string",q.valueInput=q.valueInput!=null?String(q.valueInput):"")}const se=()=>{if(o.value=null,a.value=!0,!(m.value||h.value)&&!(!c.value&&!t.entry))try{const q=$();i("save",q)}catch(q){o.value=q.message}},$=()=>{if(!u.path.trim())throw new Error("File path is required");const q={};q.path=u.path.trim();const Y=u.type==="csv_custom"?"csv":u.type.trim();if(Y&&(q.type=Y),u.description.trim()&&(q.description=u.description.trim()),u.type==="csv_custom"){if(!u.delimiter.trim())throw new Error("Delimiter is required for custom delimited text sources");q.delimiter=u.delimiter.trim()}else u.delimiter.trim()&&!p(u.delimiter.trim(),u.type)&&(q.delimiter=u.delimiter.trim());u.locked&&(q.locked=!0);for(const ye of u.additionalFields){const Ke=ye.key.trim();if(!Ke||r.includes(Ke))continue;const _e=V({...ye,valueType:ye.valueType??"string"});_e===null||_e===""||(q[Ke]=_e)}const de=(c.value?u.fullKey:t.entry.fullKey||"").trim();if(!de)throw new Error("Dot notation key is required");return{fullKey:de,data:q,isNew:c.value}};return(q,Y)=>(g(),be(un,{"model-value":s.modelValue,variant:"left",size:"lg",title:"Edit Data Entry","onUpdate:modelValue":Y[6]||(Y[6]=de=>i("update:modelValue",de))},J1({_:2},[s.entry||c.value?{name:"default",fn:Z(()=>[f("div",UT,[c.value?(g(),v("div",HT,[w(ae,{modelValue:u.fullKey,"onUpdate:modelValue":Y[0]||(Y[0]=de=>u.fullKey=de),label:"Dot Notation Key",placeholder:"e.g., inputs.raw.custom_dataset",hint:"Use dot notation to place this entry within the catalog hierarchy."},null,8,["modelValue"])])):(g(),v("div",FT,[Y[7]||(Y[7]=f("p",{class:"text-xs font-medium uppercase tracking-wide text-gray-500 dark:text-gray-400"}," Data Key ",-1)),f("p",zT,ee(s.entry.fullKey),1)])),w(ae,{modelValue:u.path,"onUpdate:modelValue":Y[1]||(Y[1]=de=>u.path=de),label:"File Path",placeholder:"inputs/raw/example.csv",required:"",error:y.value,monospace:"",hint:"Provide a path relative to the project root (e.g., inputs/raw/data.csv) or an absolute path."},null,8,["modelValue","error"]),f("div",WT,[w(si,{"model-value":u.type,label:"Type","onUpdate:modelValue":B},{default:Z(()=>[Y[8]||(Y[8]=f("option",{disabled:"",value:""},"Select file type",-1)),(g(!0),v(me,null,Ee(vt(n),de=>(g(),v("option",{key:de.value,value:de.value},ee(de.label),9,KT))),128))]),_:1},8,["model-value"]),f("div",qT,[w(Ue,{modelValue:u.locked,"onUpdate:modelValue":Y[2]||(Y[2]=de=>u.locked=de),label:"Locked",description:"Treat this data source as read-only."},null,8,["modelValue"])]),d.value?(g(),v("div",GT,[w(ae,{modelValue:u.delimiter,"onUpdate:modelValue":Y[3]||(Y[3]=de=>u.delimiter=de),label:"Delimiter",placeholder:"e.g., tab or |",hint:"Use keywords 'tab', 'comma', 'semicolon', 'space' or supply a single character (e.g., |). Keywords map to their respective delimiters."},null,8,["modelValue"])])):I("",!0)]),w(Ra,{modelValue:u.description,"onUpdate:modelValue":Y[4]||(Y[4]=de=>u.description=de),label:"Description",placeholder:"Explain what this source contains or how it was produced.",rows:4},null,8,["modelValue"]),f("div",JT,[f("div",YT,[Y[10]||(Y[10]=f("h4",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," Additional Metadata ",-1)),w(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ne},{default:Z(()=>[...Y[9]||(Y[9]=[he(" Add Field ",-1)])]),_:1})]),Y[12]||(Y[12]=f("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," Store any extra properties (e.g., source, codebook details). Complex values can be provided as JSON. ",-1)),u.additionalFields.length===0?(g(),v("div",QT," No additional metadata fields. ")):I("",!0),(g(!0),v(me,null,Ee(u.additionalFields,de=>(g(),v("div",{key:de.id,class:"rounded-md border border-gray-200 bg-white/80 p-4 dark:border-gray-700 dark:bg-gray-900/40"},[f("div",XT,[w(ae,{modelValue:de.key,"onUpdate:modelValue":ye=>de.key=ye,label:"Key",placeholder:"e.g., source",error:oe(de)},null,8,["modelValue","onUpdate:modelValue","error"]),w(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:ye=>R(de.id)},{default:Z(()=>[...Y[11]||(Y[11]=[he(" Remove ",-1)])]),_:1},8,["onClick"])]),f("div",ZT,[(g(),be(Es(de.isMultiline?Ra:ae),{modelValue:de.valueInput,"onUpdate:modelValue":ye=>de.valueInput=ye,label:de.isMultiline?"Value (JSON)":"Value",rows:de.isMultiline?4:void 0,placeholder:de.isMultiline?rV:"comma",monospace:de.isMultiline?void 0:!1},null,8,["modelValue","onUpdate:modelValue","label","rows","placeholder","monospace"])),de.isMultiline?(g(),v("p",eV," Provide valid JSON to store complex data structures. ")):I("",!0),f("div",tV,[w(Ye,{size:"xs",variant:"soft",onClick:ye=>le(de)},{default:Z(()=>[he(ee(de.isMultiline?"Use single-line value":"Use JSON value"),1)]),_:2},1032,["onClick"])])])]))),128))]),h.value?(g(),v("p",sV,ee(h.value),1)):I("",!0),o.value?(g(),v("p",iV,ee(o.value),1)):I("",!0),s.error?(g(),v("p",nV,ee(s.error),1)):I("",!0)])]),key:"0"}:void 0,s.entry?{name:"actions",fn:Z(()=>[w(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:Y[5]||(Y[5]=de=>i("update:modelValue",!1))},{default:Z(()=>[...Y[13]||(Y[13]=[he(" Cancel ",-1)])]),_:1}),w(Ye,{size:"sm",disabled:s.saving,onClick:se},{default:Z(()=>[he(ee(s.saving?"Saving":"Save Entry"),1)]),_:1},8,["disabled"])]),key:"1"}:void 0]),1032,["model-value"]))}},Cb=(s="")=>{const t=String(s??"").trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();return t?`data-node-${t}`:"data-node-root"},lV=["id"],aV=["aria-expanded"],uV={class:"flex-1"},cV={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},dV={key:1},fV={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},hV={class:"text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400"},pV={class:"flex items-start gap-3"},mV={class:"flex-1"},gV={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},vV={key:1},yV={class:"mt-1 text-xs text-zinc-500 dark:text-zinc-400"},bV=["id"],kV={class:"flex items-start justify-between gap-4"},xV={class:"min-w-0 flex items-center gap-2"},wV={class:"text-sm font-semibold text-gray-900 dark:text-white"},SV={key:0,class:"rounded bg-amber-200/70 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},_V={key:1},CV={key:0,class:"inline-flex items-center rounded-full border border-gray-200 bg-white px-2.5 py-1 text-xs font-medium text-gray-700 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-100"},AV={class:"flex items-center gap-2 shrink-0"},MV={class:"mt-5 space-y-4"},DV={key:0,class:"space-y-2"},EV={class:"text-sm leading-relaxed text-gray-600 dark:text-zinc-300"},TV={key:1,class:"flex items-start gap-3"},VV={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},OV={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},PV={class:"min-w-0 flex-1"},$V={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},jV={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},LV={key:1},RV={key:1,class:"text-zinc-500"},IV={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},BV={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},NV={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UV={class:"min-w-0 flex-1"},FV={class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100"},zV={key:0,class:"rounded bg-amber-200/60 px-0.5 text-amber-900 dark:bg-amber-700/40 dark:text-amber-100"},HV={key:1},WV={key:1,class:"text-zinc-500"},KV={class:"min-w-0"},qV={class:"text-xs font-medium uppercase tracking-wide text-gray-600 dark:text-zinc-200"},GV={class:"mt-1 whitespace-pre-wrap break-words font-mono text-[13px] text-gray-800 dark:text-zinc-200"},JV={class:"flex items-start gap-3 pt-4 border-t border-gray-200 dark:border-zinc-700"},YV={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},QV={key:1,class:"h-4 w-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},XV={class:"min-w-0 flex-1"},ZV=["title"],oc="mt-1.5 inline-flex h-10 w-10 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500 transition hover:border-gray-300 hover:text-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-500 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:hover:border-gray-500 dark:hover:text-gray-100",eO=Object.assign({name:"DataCatalogTree"},{__name:"DataCatalogTree",props:{node:{type:Object,required:!0},depth:{type:Number,default:0},expandedKeys:{type:Object,required:!0},autoExpandedKeys:{type:Object,required:!0},toggleGroup:{type:Function,required:!0},searchTerm:{type:String,default:""},hierarchical:{type:Boolean,default:!0},pendingDeletes:{type:Object,default:null}},emits:["edit","delete"],setup(s,{emit:e}){const t=e,i=s,n=W(()=>i.node?.type==="group"),r=W(()=>i.depth===0),o=W(()=>{if(!n.value)return!1;if(!i.hierarchical)return!0;const ne=i.node?.fullKey;if(!ne)return!1;const R=i.expandedKeys,le=i.autoExpandedKeys,se=typeof R?.has=="function"?R.has(ne):!!R?.[ne],$=typeof le?.has=="function"?le.has(ne):!!le?.[ne];return se||$}),l=W(()=>{const ne=i.node?.leafCount||0;return`${ne} ${ne===1?"entry":"entries"}`}),a=W(()=>r.value?"mb-4 rounded-xl border border-gray-200 bg-white p-6 transition hover:border-gray-300 scroll-mt-16 dark:border-gray-700/70 dark:bg-gray-900 dark:hover:border-gray-600":"mb-3 rounded-lg border border-gray-200 bg-white p-4 transition hover:border-gray-300 dark:border-gray-700/60 dark:bg-gray-900/60 dark:hover:border-gray-600"),c=W(()=>r.value?"text-lg font-semibold text-zinc-900 dark:text-white":"text-sm font-semibold text-zinc-900 dark:text-white"),u=W(()=>r.value?"mt-4 space-y-3":"mt-3 space-y-3"),d=W(()=>i.pendingDeletes instanceof Set?i.pendingDeletes:i.pendingDeletes&&typeof i.pendingDeletes=="object"&&i.pendingDeletes.value instanceof Set?i.pendingDeletes.value:new Set),h=W(()=>d.value.has(i.node?.fullKey)),m=W(()=>{const ne=i.node?.data||{},R=new Set(["path","type","description","locked","delimiter"]);return Object.keys(ne).filter(le=>!R.has(le)).reduce((le,se)=>(le[se]=ne[se],le),{})}),y=W(()=>{const ne="relative rounded-lg p-6 transition focus-within:ring-2",R=r.value?"scroll-mt-16":"";return h.value?`${ne} border border-red-200 bg-red-50 hover:bg-red-100 focus-within:ring-red-300 ${R} dark:border-red-500/40 dark:bg-red-900/30 dark:hover:bg-red-900/40 dark:focus-within:ring-red-500/40`:`${ne} border border-gray-200 bg-gray-50 hover:bg-gray-100 focus-within:ring-sky-200 ${R} dark:border-gray-700/50 dark:bg-gray-800/50 dark:hover:bg-gray-800/60 dark:focus-within:ring-sky-500/40`}),x=W(()=>h.value?"shadow-none border border-red-200 text-red-700 hover:bg-red-50 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30":"shadow-none"),S=W(()=>i.searchTerm.trim().toLowerCase()),p=(ne="")=>{const R=ne??"",le=S.value;if(!le)return[{text:R,highlight:!1}];const se=R.toLowerCase(),$=[];let q=0,Y=se.indexOf(le);for(;Y!==-1;)Y>q&&$.push({text:R.slice(q,Y),highlight:!1}),$.push({text:R.slice(Y,Y+le.length),highlight:!0}),q=Y+le.length,Y=se.indexOf(le,q);return q<R.length&&$.push({text:R.slice(q),highlight:!1}),$.length>0?$:[{text:R,highlight:!1}]},j=W(()=>i.node?.displayName||i.node?.name||""),B=W(()=>p(j.value)),G=W(()=>p(i.node?.data?.path||"")),N=W(()=>p(i.node?.fullKey||"")),O=W(()=>{const ne=i.node?.fullKey||"";return ne?`data_read('${ne}')`:"data_read()"}),_=(ne="")=>ne.replace(/_/g," "),V=ne=>ne==null?"":typeof ne=="object"?JSON.stringify(ne,null,2):String(ne),K=W(()=>{if(!r.value)return null;const ne=i.node?.fullKey||i.node?.name;return ne?Cb(ne):null}),oe=()=>{!n.value||!i.hierarchical||i.toggleGroup(i.node.fullKey)};return(ne,R)=>{const le=ca("DataCatalogTree",!0);return g(),v("div",null,[n.value?(g(),v("div",{key:0,id:K.value||void 0,class:Ae(a.value)},[s.hierarchical?(g(),v(me,{key:0},[f("button",{type:"button",class:"flex w-full items-start gap-3 text-left transition hover:text-zinc-900 focus:outline-none",onClick:oe,"aria-expanded":o.value},[w(vt(Vw),{class:Ae(["mt-1.5 h-4 w-4 shrink-0 text-zinc-400 transition-transform",{"rotate-90 text-sky-500":o.value}])},null,8,["class"]),f("div",uV,[f("p",{class:Ae(c.value)},[(g(!0),v(me,null,Ee(B.value,(se,$)=>(g(),v(me,{key:$},[se.highlight?(g(),v("mark",cV,ee(se.text),1)):(g(),v("span",dV,ee(se.text),1))],64))),128))],2),f("p",fV,ee(l.value),1)]),f("span",hV,ee(o.value?"Hide":"Show"),1)],8,aV),w(Nd,{name:"catalog-collapse"},{default:Z(()=>[nt(f("div",{class:Ae(u.value)},[(g(!0),v(me,null,Ee(s.node.children,se=>(g(),be(le,{key:se.fullKey,node:se,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:R[0]||(R[0]=$=>t("edit",$)),onDelete:R[1]||(R[1]=$=>t("delete",$))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2),[[mt,o.value]])]),_:1})],64)):(g(),v(me,{key:1},[f("div",pV,[f("div",mV,[f("p",{class:Ae(c.value)},[(g(!0),v(me,null,Ee(B.value,(se,$)=>(g(),v(me,{key:$},[se.highlight?(g(),v("mark",gV,ee(se.text),1)):(g(),v("span",vV,ee(se.text),1))],64))),128))],2),f("p",yV,ee(l.value),1)])]),f("div",{class:Ae(u.value)},[(g(!0),v(me,null,Ee(s.node.children,se=>(g(),be(le,{key:se.fullKey,node:se,depth:s.depth+1,"expanded-keys":s.expandedKeys,"auto-expanded-keys":s.autoExpandedKeys,"toggle-group":s.toggleGroup,"search-term":s.searchTerm,hierarchical:s.hierarchical,"pending-deletes":s.pendingDeletes,onEdit:R[2]||(R[2]=$=>t("edit",$)),onDelete:R[3]||(R[3]=$=>t("delete",$))},null,8,["node","depth","expanded-keys","auto-expanded-keys","toggle-group","search-term","hierarchical","pending-deletes"]))),128))],2)],64))],10,lV)):(g(),v("div",{key:1,id:K.value||void 0,class:Ae(y.value)},[f("div",kV,[f("div",xV,[f("h3",wV,[(g(!0),v(me,null,Ee(B.value,(se,$)=>(g(),v(me,{key:`leaf-${$}`},[se.highlight?(g(),v("mark",SV,ee(se.text),1)):(g(),v("span",_V,ee(se.text),1))],64))),128))]),s.node.data?.type?(g(),v("span",CV,ee(s.node.data.type),1)):I("",!0)]),f("div",AV,[w(Ye,{size:"sm",variant:"secondary",class:Ae(x.value),onClick:R[4]||(R[4]=Ht(se=>t("delete",s.node),["stop"]))},{default:Z(()=>[he(ee(h.value?"Undo":"Delete"),1)]),_:1},8,["class"]),w(Ye,{size:"sm",variant:"secondary",class:"shadow-none",onClick:R[5]||(R[5]=se=>t("edit",s.node))},{default:Z(()=>[...R[6]||(R[6]=[he(" Edit ",-1)])]),_:1})])]),f("div",MV,[s.node.data?.description?(g(),v("div",DV,[R[7]||(R[7]=f("p",{class:"text-xs font-medium text-gray-600 dark:text-zinc-200"}," Description ",-1)),f("p",EV,ee(s.node.data.description),1)])):I("",!0),s.node.fullKey?(g(),v("div",TV,[w(pr,{value:s.node.fullKey||"",successMessage:"Dot notation copied",variant:"bare",class:Ae(oc),title:"Copy dot notation"},{default:Z(({copied:se})=>[se?(g(),v("svg",OV,[...R[9]||(R[9]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),v("svg",VV,[...R[8]||(R[8]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),f("div",PV,[R[10]||(R[10]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Location (in Dot Notation) ",-1)),f("p",$V,[N.value.length>0?(g(!0),v(me,{key:0},Ee(N.value,(se,$)=>(g(),v(me,{key:`key-${$}`},[se.highlight?(g(),v("mark",jV,ee(se.text),1)):(g(),v("span",LV,ee(se.text),1))],64))),128)):(g(),v("span",RV,""))])])])):I("",!0),f("div",IV,[w(pr,{value:s.node.data?.path||"",successMessage:"Path copied",variant:"bare",class:Ae(oc),title:"Copy path"},{default:Z(({copied:se})=>[se?(g(),v("svg",NV,[...R[12]||(R[12]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),v("svg",BV,[...R[11]||(R[11]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])]))]),_:1},8,["value"]),f("div",UV,[R[13]||(R[13]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," File Path ",-1)),f("p",FV,[G.value.length>0?(g(!0),v(me,{key:0},Ee(G.value,(se,$)=>(g(),v(me,{key:`path-${$}`},[se.highlight?(g(),v("mark",zV,ee(se.text),1)):(g(),v("span",HV,ee(se.text),1))],64))),128)):(g(),v("span",WV,""))])])]),(g(!0),v(me,null,Ee(m.value,(se,$)=>(g(),v("div",{key:`meta-${$}`,class:"flex items-start justify-between gap-3 border-t border-gray-200 pt-4 text-sm dark:border-zinc-700"},[f("div",KV,[f("p",qV,ee(_($)),1),f("pre",GV,ee(V(se)),1)])]))),128)),f("div",JV,[w(pr,{value:O.value,successMessage:"data_read() command copied",variant:"bare",class:Ae([oc,"w-10"]),title:"Copy data_read() helper","aria-label":`Copy ${O.value}`},{default:Z(({copied:se})=>[se?(g(),v("svg",QV,[...R[15]||(R[15]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(g(),v("svg",YV,[...R[14]||(R[14]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8z"},null,-1)])]))]),_:1},8,["value","class","aria-label"]),f("div",XV,[R[16]||(R[16]=f("p",{class:"text-xs font-medium text-gray-700 dark:text-zinc-100"}," Usage ",-1)),f("p",{class:"mt-1 font-mono text-sm leading-relaxed text-gray-900 dark:text-zinc-100 truncate",title:O.value},ee(O.value),9,ZV)])])])],10,bV))])}}}),tO=y0(eO,[["__scopeId","data-v-20f9f092"]]),sO={key:0,class:"space-y-2"},iO={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},nO={key:1,class:"text-sm text-gray-600 dark:text-gray-400"},rO={class:"space-y-6"},$s={__name:"SettingsPanel",props:{title:{type:String,default:""},description:{type:String,default:""},flush:{type:Boolean,default:!1}},setup(s){return(e,t)=>(g(),v("section",{class:Ae(["space-y-6",s.flush?"":"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"])},[s.title||s.description?(g(),v("header",sO,[s.title?(g(),v("h2",iO,ee(s.title),1)):I("",!0),s.description?(g(),v("p",nO,ee(s.description),1)):I("",!0)])):I("",!0),f("div",rO,[gt(e.$slots,"default")]),e.$slots.actions?(g(),v("div",{key:1,class:Ae(["flex justify-end",s.flush?"":"pt-4 border-t border-gray-200 dark:border-gray-700"])},[gt(e.$slots,"actions")],2)):I("",!0)],2))}},oO={class:"space-y-3"},lO={key:0,class:"space-y-1"},aO={key:0,class:"text-sm font-semibold text-gray-900 dark:text-white"},uO={key:1,class:"text-xs text-gray-600 dark:text-gray-400"},cO={class:"space-y-3"},xo={__name:"SettingsBlock",props:{title:{type:String,default:""},description:{type:String,default:""}},setup(s){return(e,t)=>(g(),v("div",oO,[s.title||s.description?(g(),v("div",lO,[s.title?(g(),v("h3",aO,ee(s.title),1)):I("",!0),s.description?(g(),v("p",uO,ee(s.description),1)):I("",!0)])):I("",!0),f("div",cO,[gt(e.$slots,"default")])]))}},dO={class:"space-y-6"},fO={class:"space-y-5"},hO=["value"],pO={class:"flex flex-wrap items-center justify-between gap-3"},mO={class:"flex flex-wrap gap-2 text-xs font-medium text-gray-600 dark:text-gray-400"},gO={key:1,id:"section-primary-files"},vO={class:"space-y-4"},yO={key:2,id:"section-optional-directories"},bO={class:"space-y-4"},kO={class:"space-y-2"},xO={class:"space-y-2"},wO={class:"space-y-2"},SO={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},_O={class:"grid grid-cols-2 gap-3"},CO={key:3,id:"section-materials"},AO={key:4,id:"section-inputs"},MO={key:0},DO={class:"space-y-5"},EO={class:"space-y-2"},TO={class:"space-y-2"},VO={key:1,class:"space-y-5"},OO={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},PO={key:0,class:"space-y-3 mb-4"},$O={class:"space-y-3"},jO={key:5,id:"section-workspaces"},LO={class:"space-y-5"},RO={key:0,class:"grid grid-cols-2 gap-3"},IO={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},BO={key:0,class:"space-y-3 mb-4"},NO={class:"space-y-3"},UO={key:6,id:"section-outputs"},FO={key:0},zO={class:"space-y-5"},HO={class:"space-y-2"},WO={class:"space-y-2"},KO={key:1,class:"space-y-5"},qO={key:2,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},GO={key:0,class:"space-y-3 mb-4"},JO={class:"space-y-3"},YO={key:7,id:"section-utility"},QO={class:"space-y-5"},XO={id:"section-gitignore"},Ab={__name:"ProjectStructureEditor",props:{projectType:{type:String,required:!0},directories:{type:Object,required:!0},renderDirs:{type:Object,default:()=>({})},enabled:{type:Object,required:!0},extraDirectories:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})},gitignore:{type:String,default:""},catalog:{type:Object,required:!0},newExtraIds:{type:Set,default:()=>new Set},disabled:{type:Boolean,default:!1},allowDestruction:{type:Boolean,default:!0}},emits:["update:directories","update:renderDirs","update:enabled","update:extraDirectories","update:settings","update:gitignore","update:newExtraIds","reset"],setup(s,{emit:e}){const t=s,i=e,n=ie({...t.directories}),r=ie({...t.renderDirs}),o=ie({...t.enabled}),l=ie({...t.settings}),a=ie(t.gitignore),c=U=>n.value[U]?n.value[U]:t.catalog?.directories?.[U]?.default||"";Ne(()=>t.directories,U=>{n.value={...U}},{deep:!0}),Ne(()=>t.renderDirs,U=>{r.value={...U}},{deep:!0}),Ne(()=>t.enabled,U=>{o.value={...U}},{deep:!0}),Ne(()=>t.settings,U=>{l.value={...U}},{deep:!0}),Ne(()=>t.gitignore,U=>{a.value=U});const u=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],d=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],h=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],m=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],y=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],x=U=>t.catalog?.directories?.[U]||{},S=U=>U.map(J=>{const C=x(J.key);return{key:J.key,label:C.label||J.label,hint:C.hint||J.hint||"",defaultRenderDir:J.defaultRenderDir||""}}),p=W(()=>t.projectType==="project_sensitive"),j=W(()=>t.projectType==="presentation"),B=W(()=>t.projectType==="course"),G=(U,J)=>U.map(C=>{const X=`${J}_private_${C.key.replace(J+"_","")}`,Oe=`${J}_public_${C.key.replace(J+"_","")}`,D=x(X),T=x(Oe);return{privateKey:X,publicKey:Oe,privateLabel:D.label||`${C.label} (private)`,publicLabel:T.label||`${C.label} (public)`,hint:C.hint||""}}),N=W(()=>S(u)),O=W(()=>S(d)),_=W(()=>[...N.value,...O.value]),V=W(()=>p.value?G(h,"inputs"):S(h)),K=W(()=>p.value?G(m,"outputs"):S(m)),oe=W(()=>S(y)),ne=W(()=>t.catalog?.settings||[]),R=W(()=>t.extraDirectories.filter(U=>U.type==="input"&&!t.newExtraIds.has(U._id))),le=W(()=>t.extraDirectories.filter(U=>U.type==="workspace"&&!t.newExtraIds.has(U._id))),se=W(()=>t.extraDirectories.filter(U=>U.type==="output"&&!t.newExtraIds.has(U._id))),$=W(()=>t.extraDirectories.filter(U=>U.type==="input"&&t.newExtraIds.has(U._id))),q=W(()=>t.extraDirectories.filter(U=>U.type==="workspace"&&t.newExtraIds.has(U._id))),Y=W(()=>t.extraDirectories.filter(U=>U.type==="output"&&t.newExtraIds.has(U._id))),de=U=>t.extraDirectories.filter(J=>J.type===U),ye=(U,J)=>{n.value[U]=J,i("update:directories",{...n.value})},Ke=(U,J)=>{r.value[U]=J,i("update:renderDirs",{...r.value})},_e=(U,J)=>{!t.allowDestruction&&o.value[U]===!0&&J===!1||(o.value[U]=J,i("update:enabled",{...o.value}))},Le=U=>!!(t.disabled||!t.allowDestruction&&o.value[U]===!0),rt=(U,J)=>{l.value[U]=J,i("update:settings",{...l.value})},ct=(U,J)=>{const C=t.extraDirectories.map(X=>X.key===U?{...X,path:J}:X);i("update:extraDirectories",C)},dt=(U,J)=>{const C=t.extraDirectories.filter(F=>F.type===U&&!t.newExtraIds.has(F._id)),Oe=t.extraDirectories.filter(F=>F.type===U&&t.newExtraIds.has(F._id)).filter(F=>!J.some(re=>re._id===F._id)),D=new Set(t.newExtraIds);Oe.forEach(F=>{F._id&&D.delete(F._id)}),J.forEach(F=>{F._id&&D.add(F._id)}),i("update:newExtraIds",D);const T=t.extraDirectories.filter(F=>F.type!==U);i("update:extraDirectories",[...T,...C,...J])},st=U=>{const J=document.getElementById(`section-${U}`);J&&J.scrollIntoView({behavior:"smooth",block:"start"})};return(U,J)=>(g(),v("div",dO,[ne.value.length>0?(g(),be($s,{key:0,title:"Project Settings",description:"Default settings applied when creating new projects of this type."},{default:Z(()=>[w(xo,null,{default:Z(()=>[f("div",fO,[(g(!0),v(me,null,Ee(ne.value,C=>(g(),v(me,{key:C.id},[C.control==="toggle"?(g(),be(Ue,{key:0,"model-value":l.value[C.id],"onUpdate:modelValue":X=>rt(C.id,X),label:C.label,description:C.description,disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","label","description","disabled"])):C.control==="select"?(g(),be(si,{key:1,"model-value":l.value[C.id],"onUpdate:modelValue":X=>rt(C.id,X),label:C.label,hint:C.hint},{default:Z(()=>[(g(!0),v(me,null,Ee(C.options,X=>(g(),v("option",{key:X.value,value:X.value},ee(X.label),9,hO))),128))]),_:2},1032,["model-value","onUpdate:modelValue","label","hint"])):C.control==="text"?(g(),be(ae,{key:2,"model-value":l.value[C.id],"onUpdate:modelValue":X=>rt(C.id,X),label:C.label,hint:C.hint,placeholder:C.placeholder},null,8,["model-value","onUpdate:modelValue","label","hint","placeholder"])):I("",!0)],64))),128))])]),_:1})]),_:1})):I("",!0),f("div",pO,[f("div",mO,[j.value?(g(),v("button",{key:0,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[0]||(J[0]=C=>st("primary-files"))}," Primary Files ")):I("",!0),j.value?(g(),v("button",{key:1,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[1]||(J[1]=C=>st("optional-directories"))}," Optional Directories ")):I("",!0),B.value?(g(),v("button",{key:2,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[2]||(J[2]=C=>st("materials"))}," Materials ")):I("",!0),!j.value&&!B.value&&V.value.length>0?(g(),v("button",{key:3,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[3]||(J[3]=C=>st("inputs"))}," Inputs ")):I("",!0),!j.value&&!B.value&&_.value.length>0?(g(),v("button",{key:4,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[4]||(J[4]=C=>st("workspaces"))}," Workspaces ")):I("",!0),!j.value&&!B.value&&K.value.length>0?(g(),v("button",{key:5,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[5]||(J[5]=C=>st("outputs"))}," Outputs ")):I("",!0),!j.value&&!B.value&&oe.value.length>0?(g(),v("button",{key:6,type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[6]||(J[6]=C=>st("utility"))}," Utility ")):I("",!0),f("button",{type:"button",class:"rounded-md px-2 py-1 hover:bg-gray-200 dark:hover:bg-gray-700",onClick:J[7]||(J[7]=C=>st("gitignore"))}," .gitignore ")]),!s.disabled&&s.allowDestruction?(g(),be(Ye,{key:0,variant:"secondary",size:"sm",class:"mt-3 sm:mt-0",onClick:J[8]||(J[8]=C=>U.$emit("reset"))},{default:Z(()=>[...J[25]||(J[25]=[he(" Reset to Defaults ",-1)])]),_:1})):I("",!0)]),j.value?(g(),v("div",gO,[w($s,{title:"Primary Files",description:"The main presentation file and where rendered slides are output."},{default:Z(()=>[f("div",vO,[w(ae,{"model-value":n.value.presentation_source,"onUpdate:modelValue":J[9]||(J[9]=C=>ye("presentation_source",C)),label:"Presentation source file",placeholder:"presentation.qmd",hint:"Main Quarto file for your slides",disabled:s.disabled},null,8,["model-value","disabled"]),w(ae,{"model-value":n.value.rendered_slides,"onUpdate:modelValue":J[10]||(J[10]=C=>ye("rendered_slides",C)),label:"Rendered slides directory",placeholder:".",hint:"Rendered slides write to the project root by default (.)",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])])]),_:1})])):I("",!0),j.value?(g(),v("div",yO,[w($s,{title:"Optional Directories",description:"Toggle extra scaffolding when you need supporting data, scripts, or helper utilities."},{default:Z(()=>[f("div",bO,[f("div",kO,[w(Ue,{"model-value":o.value.data,"onUpdate:modelValue":J[11]||(J[11]=C=>_e("data",C)),label:"Include data directory",description:"Adds a /data folder for sample data used in the presentation.",disabled:Le("data")},null,8,["model-value","disabled"]),o.value.data?(g(),be(ae,{key:0,"model-value":c("data"),"onUpdate:modelValue":J[12]||(J[12]=C=>ye("data",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):I("",!0)]),f("div",xO,[w(Ue,{"model-value":o.value.scripts,"onUpdate:modelValue":J[13]||(J[13]=C=>_e("scripts",C)),label:"Include scripts directory",description:"Adds a scripts/ folder for demo code or automation.",disabled:Le("scripts")},null,8,["model-value","disabled"]),o.value.scripts?(g(),be(ae,{key:0,"model-value":c("scripts"),"onUpdate:modelValue":J[14]||(J[14]=C=>ye("scripts",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):I("",!0)]),f("div",wO,[w(Ue,{"model-value":o.value.functions,"onUpdate:modelValue":J[15]||(J[15]=C=>_e("functions",C)),label:"Include functions directory",description:"Adds functions/ for helper utilities that should load automatically.",disabled:Le("functions")},null,8,["model-value","disabled"]),o.value.functions?(g(),be(ae,{key:0,"model-value":c("functions"),"onUpdate:modelValue":J[16]||(J[16]=C=>ye("functions",C)),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","disabled"])):I("",!0)]),f("div",SO,[J[26]||(J[26]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Add Custom Directories",-1)),s.disabled?I("",!0):(g(),be(_s,{key:0,"model-value":de("workspace"),"onUpdate:modelValue":J[17]||(J[17]=C=>dt("workspace",C)),"add-label":"Add Directory","default-item":()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:C,update:X})=>[f("div",_O,[w(ae,{"model-value":C.key,"onUpdate:modelValue":Oe=>X("key",Oe),label:"Key",placeholder:"e.g., assets",monospace:"",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.label,"onUpdate:modelValue":Oe=>X("label",Oe),label:"Label",placeholder:"e.g., Assets",size:"sm"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.path,"onUpdate:modelValue":Oe=>X("path",Oe),label:"Path",placeholder:"e.g., assets",prefix:"/",monospace:"",size:"sm",class:"col-span-2"},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["model-value","default-item"]))])])]),_:1})])):I("",!0),B.value?(g(),v("div",CO,[w(_b,{"directories-enabled":o.value,"onUpdate:directoriesEnabled":J[18]||(J[18]=C=>{o.value=C,i("update:enabled",C)}),directories:n.value,"onUpdate:directories":J[19]||(J[19]=C=>{n.value=C,i("update:directories",C)}),"render-dirs":r.value,"onUpdate:renderDirs":J[20]||(J[20]=C=>{r.value=C,i("update:renderDirs",C)}),catalog:s.catalog,"extra-directories":s.extraDirectories.filter(C=>C.type==="course"),"extra-directories-enabled":{},"onUpdate:extraDirectoriesEnabled":()=>{},"project-custom-directories":[],"onUpdate:projectCustomDirectories":()=>{},"allow-custom-directories":!1,flush:!1},null,8,["directories-enabled","directories","render-dirs","catalog","extra-directories"])])):I("",!0),!j.value&&!B.value&&V.value.length>0?(g(),v("div",AO,[w($s,{title:"Inputs",description:p.value?"Keep private inputs compartmentalized; publish processed outputs into public folders when ready.":"Define the read-only locations where raw and prepared data live."},{default:Z(()=>[p.value?(g(),v("div",MO,[J[27]||(J[27]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",DO,[(g(!0),v(me,null,Ee(V.value,C=>(g(),v("div",{key:C.privateKey,class:"grid gap-4 sm:grid-cols-2"},[f("div",EO,[w(Ue,{"model-value":o.value[C.privateKey],"onUpdate:modelValue":X=>_e(C.privateKey,X),label:C.privateLabel,disabled:Le(C.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.privateKey]!==!1?(g(),be(ae,{key:0,"model-value":c(C.privateKey),"onUpdate:modelValue":X=>ye(C.privateKey,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]),f("div",TO,[w(Ue,{"model-value":o.value[C.publicKey],"onUpdate:modelValue":X=>_e(C.publicKey,X),label:C.publicLabel,disabled:Le(C.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.publicKey]!==!1?(g(),be(ae,{key:0,"model-value":c(C.publicKey),"onUpdate:modelValue":X=>ye(C.publicKey,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)])]))),128))])])):(g(),v("div",VO,[(g(!0),v(me,null,Ee(V.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,description:C.hint,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":c(C.key),"onUpdate:modelValue":X=>ye(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))])),(R.value.length>0,g(),v("div",OO,[J[28]||(J[28]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Input Directories",-1)),R.value.length>0?(g(),v("div",PO,[(g(!0),v(me,null,Ee(R.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":C.path,"onUpdate:modelValue":X=>ct(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))])):I("",!0),s.disabled?I("",!0):(g(),be(_s,{key:1,"model-value":$.value,"onUpdate:modelValue":J[21]||(J[21]=C=>dt("input",C)),addLabel:"Add Input Directory",defaultItem:()=>({key:"",label:"",path:"",type:"input",_id:Date.now()})},{default:Z(({item:C,update:X})=>[f("div",$O,[w(ae,{"model-value":C.key,"onUpdate:modelValue":Oe=>X("key",Oe),label:"Key",placeholder:"inputs_archive",hint:"Unique identifier (alphanumeric and underscores)"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.label,"onUpdate:modelValue":Oe=>X("label",Oe),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.path,"onUpdate:modelValue":Oe=>X("path",Oe),label:"Path",prefix:"/",placeholder:"inputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):I("",!0),!j.value&&!B.value&&_.value.length>0?(g(),v("div",jO,[w($s,{title:"Workspaces",description:"Functions, notebooks, and scripts scaffolded into every project."},{default:Z(()=>[f("div",LO,[(g(!0),v(me,null,Ee(N.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,description:C.hint,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(g(),v("div",RO,[w(ae,{"model-value":c(C.key),"onUpdate:modelValue":X=>ye(C.key,X),label:"Source files",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"]),w(ae,{"model-value":r.value[C.key],"onUpdate:modelValue":X=>Ke(C.key,X),label:"Quarto render directory",prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])):I("",!0)]))),128)),(g(!0),v(me,null,Ee(O.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,description:C.hint,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":c(C.key),"onUpdate:modelValue":X=>ye(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))]),(le.value.length>0,g(),v("div",IO,[J[29]||(J[29]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Workspace Directories",-1)),le.value.length>0?(g(),v("div",BO,[(g(!0),v(me,null,Ee(le.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":C.path,"onUpdate:modelValue":X=>ct(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))])):I("",!0),s.disabled?I("",!0):(g(),be(_s,{key:1,"model-value":q.value,"onUpdate:modelValue":J[22]||(J[22]=C=>dt("workspace",C)),addLabel:"Add Workspace Directory",defaultItem:()=>({key:"",label:"",path:"",type:"workspace",_id:Date.now()})},{default:Z(({item:C,update:X})=>[f("div",NO,[w(ae,{"model-value":C.key,"onUpdate:modelValue":Oe=>X("key",Oe),label:"Key",placeholder:"templates",hint:"Unique identifier (alphanumeric and underscores)"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.label,"onUpdate:modelValue":Oe=>X("label",Oe),label:"Label",placeholder:"Templates"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.path,"onUpdate:modelValue":Oe=>X("path",Oe),label:"Path",prefix:"/",placeholder:"templates",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1})])):I("",!0),!j.value&&!B.value&&K.value.length>0?(g(),v("div",UO,[w($s,{title:"Outputs",description:p.value?"Review outputs before promotion; private folders remain gitignored while public copies are ready to share.":"Results, figures, models, and reports generated by your analysis."},{default:Z(()=>[p.value?(g(),v("div",FO,[J[30]||(J[30]=f("div",{class:"grid gap-4 sm:grid-cols-2 text-xs font-semibold uppercase text-gray-500 dark:text-gray-400 mb-4"},[f("div",null,"Private"),f("div",null,"Public")],-1)),f("div",zO,[(g(!0),v(me,null,Ee(K.value,C=>(g(),v("div",{key:C.privateKey,class:"grid gap-4 sm:grid-cols-2"},[f("div",HO,[w(Ue,{"model-value":o.value[C.privateKey],"onUpdate:modelValue":X=>_e(C.privateKey,X),label:C.privateLabel,disabled:Le(C.privateKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.privateKey]!==!1?(g(),be(ae,{key:0,"model-value":c(C.privateKey),"onUpdate:modelValue":X=>ye(C.privateKey,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]),f("div",WO,[w(Ue,{"model-value":o.value[C.publicKey],"onUpdate:modelValue":X=>_e(C.publicKey,X),label:C.publicLabel,disabled:Le(C.publicKey)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.publicKey]!==!1?(g(),be(ae,{key:0,"model-value":c(C.publicKey),"onUpdate:modelValue":X=>ye(C.publicKey,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)])]))),128))])])):(g(),v("div",KO,[(g(!0),v(me,null,Ee(K.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,description:C.hint,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":c(C.key),"onUpdate:modelValue":X=>ye(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))])),(se.value.length>0,g(),v("div",qO,[J[31]||(J[31]=f("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Additional Output Directories",-1)),se.value.length>0?(g(),v("div",GO,[(g(!0),v(me,null,Ee(se.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":C.path,"onUpdate:modelValue":X=>ct(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))])):I("",!0),s.disabled?I("",!0):(g(),be(_s,{key:1,"model-value":Y.value,"onUpdate:modelValue":J[23]||(J[23]=C=>dt("output",C)),addLabel:"Add Output Directory",defaultItem:()=>({key:"",label:"",path:"",type:"output",_id:Date.now()})},{default:Z(({item:C,update:X})=>[f("div",JO,[w(ae,{"model-value":C.key,"onUpdate:modelValue":Oe=>X("key",Oe),label:"Key",placeholder:"outputs_archive",hint:"Unique identifier (alphanumeric and underscores)"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.label,"onUpdate:modelValue":Oe=>X("label",Oe),label:"Label",placeholder:"Archive"},null,8,["model-value","onUpdate:modelValue"]),w(ae,{"model-value":C.path,"onUpdate:modelValue":Oe=>X("path",Oe),label:"Path",prefix:"/",placeholder:"outputs/archive",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])])]),_:1},8,["model-value","defaultItem"]))]))]),_:1},8,["description"])])):I("",!0),!j.value&&!B.value&&oe.value.length>0?(g(),v("div",YO,[w($s,{title:"Utility",description:"Cache, scratch space, and other temporary directories (gitignored by default)."},{default:Z(()=>[f("div",QO,[(g(!0),v(me,null,Ee(oe.value,C=>(g(),v("div",{key:C.key,class:"space-y-1.5"},[w(Ue,{"model-value":o.value[C.key],"onUpdate:modelValue":X=>_e(C.key,X),label:C.label,description:C.hint,disabled:Le(C.key)},null,8,["model-value","onUpdate:modelValue","label","description","disabled"]),o.value[C.key]!==!1?(g(),be(ae,{key:0,"model-value":c(C.key),"onUpdate:modelValue":X=>ye(C.key,X),prefix:"/",monospace:"",disabled:s.disabled},null,8,["model-value","onUpdate:modelValue","disabled"])):I("",!0)]))),128))])]),_:1})])):I("",!0),f("div",XO,[w($s,{title:".gitignore Patterns",description:"Define which files and directories Git should ignore."},{default:Z(()=>[w(xo,null,{default:Z(()=>[w(Ra,{"model-value":a.value,"onUpdate:modelValue":J[24]||(J[24]=C=>U.$emit("update:gitignore",C)),rows:12,disabled:s.disabled,monospace:"",placeholder:`# Framework gitignore patterns
cache/
scratch/
*.log`},null,8,["model-value","disabled"])]),_:1})]),_:1})])]))}},ZO={key:0,class:"flex items-center justify-center h-96"},eP={key:1,class:"flex-1 p-10"},tP={key:2,class:"flex min-h-screen"},sP={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800 flex flex-col"},iP={class:"mb-4"},nP={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},rP={class:"flex items-center gap-2"},oP={class:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate"},lP={class:"space-y-1"},aP={key:0,class:"ml-6 mt-1 space-y-0.5"},uP=["href","onClick"],cP={class:"truncate"},dP={key:0,class:"shrink-0 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-300"},fP={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},hP={class:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"},pP={class:"text-center py-3"},mP={class:"flex-1 p-10"},gP={id:"overview"},vP={id:"basics"},yP={key:0},bP={key:1},kP={key:2},xP={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},wP={key:0,class:"space-y-5"},SP={class:"flex items-center gap-2"},_P={class:"flex-1 px-3 py-2 text-sm font-mono text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-md"},CP={key:0,class:"pt-6 border-t border-gray-200 dark:border-gray-700"},AP={id:"settings"},MP={key:0},DP={key:1},EP={key:2},TP={class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},VP={id:"notebooks"},OP={class:"rounded-lg bg-gray-50 p-12 dark:bg-gray-800/50 text-center"},PP={id:"data"},$P={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},jP={class:"mb-6"},LP={key:0,class:"space-y-4"},RP={key:1,class:"mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-500/40 dark:bg-red-900/20"},IP={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},BP={class:"text-sm font-medium text-red-700 dark:text-red-200"},NP={class:"flex gap-2"},UP={class:"mt-3 list-disc space-y-1 pl-5 text-xs font-mono text-red-700 dark:text-red-200/90"},FP={key:2,class:"rounded-xl border border-dashed border-zinc-300 bg-white/70 p-10 text-center dark:border-zinc-700 dark:bg-zinc-900/40"},zP={class:"text-sm font-medium text-zinc-700 dark:text-zinc-200"},HP={id:"connections"},WP={id:"packages"},KP={key:0},qP={key:1},GP={key:2},JP={id:"ai"},YP={key:0},QP={key:1},XP={key:2},ZP={id:"git"},e$={key:0},t$={key:1},s$={key:2},i$={id:"scaffold"},n$={key:0},r$={key:1},o$={key:2},l$={class:"rounded-lg bg-gray-50 p-6 dark:bg-gray-800/50"},a$={id:"env"},u$={class:"space-y-6"},c$={key:0,class:"max-h-64 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md"},d$=["onClick","onMouseenter"],f$={class:"flex items-start justify-between gap-2"},h$={class:"flex-1 min-w-0"},p$={class:"text-sm font-mono font-medium text-gray-900 dark:text-gray-100"},m$={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-1"},g$={key:1,class:"text-xs text-gray-500 dark:text-gray-500 mt-0.5"},v$={class:"text-xs text-gray-500 dark:text-gray-500 font-mono shrink-0"},y$={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},b$={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},k$={class:"relative"},x$={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},w$={class:"space-y-4 text-left"},S$={class:"flex items-start gap-3"},_$={class:"flex items-start gap-3"},C$={key:0,class:"mt-4"},A$={class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},M$={class:"font-mono font-bold"},D$={__name:"ProjectDetailView",setup(s){const e=$r(),t=Xa(),i=tu(),n=ie(null),r=ie(!0),o=ie(null),l=ie("overview"),a=["overview","basics","settings","notebooks","connections","data","packages","ai","git","scaffold","env"],c=ie(null),u=ie(""),d=ie(new Set),h=ie(!1),m=ie(null),y=ie(!1),x=ie(null),S=ie(!1),p=ie(new Set),j=ie(!1),B=ie(null),G=ie(null),N=ie({}),O=ie(!1),_=ie(null),V=ie(new Set),K=ie(!1),oe=ie({initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}}),ne=ie(!1),R=ie(null),le=ie(!1),se=ie(!1);ie([]),ie([]),ie([]),ie(!1);const $=ie([]),q=ie([]),Y=ie(null),de=ie(null),ye=ie(!1),Ke=ie([]),_e=ie({use_renv:!1,default_packages:[]}),Le=ie(!1),rt=ie(null),ct=ie(!1),dt=ie(!1),st=ie(!1),U=ie("untrack"),J=ie(""),C=ie(""),X=ie([]),Oe=ie(!1),D=ie(-1),T=ie({name:"",source:"cran",auto_attach:!0}),F=ie({}),re=ie({}),ue=ie(""),ce=ie(!1),Ce=ie(null),xe=ie(!1),we=ie(!1),Q=ie("grouped"),Re=ie(!1),ke=ie({enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]}),$e=ie(!1),Fe=ie(null),qe=ie(!1),it=ie(!1),Ze=ie(!1),xt=ie({file:"CLAUDE.md",exists:!0}),He=W(()=>Object.keys(F.value||{}).length),z=W(()=>{const A=n.value?.name||"Untitled",b=n.value?.path||"",L=N.value?.author?.name||B.value?.author?.name||n.value?.author||"";return{name:A,path:b,author:L}}),M=W(()=>n.value?.type||B.value?.project_type||"Not set"),k=W(()=>N.value?.scaffold?.notebook_format||B.value?.scaffold?.notebook_format||"quarto"),te=A=>A?A.charAt(0).toUpperCase()+A.slice(1):"";W(()=>{if(!ke.value.enabled)return"Disabled";const A=Array.isArray(ke.value.assistants)?ke.value.assistants:[],b=A.length?A.map(te).join(", "):"Enabled",L=ke.value.canonical_file||"CLAUDE.md";return`${b}  ${L}`});const ge={ai_sync:"AI sync",data_security:"Secret scan",check_sensitive_dirs:"Sensitive dirs"},tt=W(()=>{const A=oe.value?.hooks||{};return Object.entries(A).filter(([,b])=>!!b).map(([b])=>ge[b]||b)});W(()=>{const A=oe.value.initialize?"Auto-initialize repositories":"Manual initialization";return tt.value.length?`${A}  ${tt.value.join(", ")}`:A});const Ot=W(()=>_e.value?.default_packages?.length||0);W(()=>{const A=_e.value?.use_renv?"renv enabled":"renv disabled";return Ot.value>0?`${Ot.value} package${Ot.value===1?"":"s"}  ${A}`:`No default packages  ${A}`}),W(()=>He.value>0?`${He.value} variable${He.value===1?"":"s"}`:"No variables defined");const yt=W(()=>{const A=z.value.name,b=z.value.path,L=z.value.author,Te=M.value,Be=k.value,Xe=ke.value.enabled,zt=ke.value.enabled?Array.isArray(ke.value.assistants)?ke.value.assistants.map(te).join(", "):"Enabled":"",At=ke.value.canonical_file||"CLAUDE.md",ds=oe.value.initialize,ws=tt.value,Xn=Ot.value,Gf=_e.value?.use_renv||!1,vu=He.value;return[{id:"basics",title:"Basics",section:"basics",content:`<div>${A}  ${L}</div><div class="text-sm text-gray-600 dark:text-gray-400 mt-1">${b}</div>`},{id:"structure",title:"Project Structure",section:"settings",content:Te},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:Be},{id:"packages",title:"Packages",section:"packages",content:Xn>0?`${Xn} packages  renv ${Gf?"enabled":"disabled"}`:`renv: ${Gf?"enabled":"disabled"}`},{id:"env",title:".env",section:"env",content:vu>0?`${vu} variable${vu===1?"":"s"}`:"No variables defined"},{id:"ai",title:"AI Assistants",section:"ai",content:Xe?`<span class="text-green-600 dark:text-green-400">${zt}  ${At}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:ds?`Auto-initialize repositories${ws.length?`  ${ws.join(", ")}`:""}`:"Manual initialization"}]}),Tt=A=>["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",l.value===A?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"],ks=()=>{const A=e.query.section;A&&a.includes(A)?(l.value=A,A==="env"&&(Qn(),Qs(()=>If()))):l.value="overview"};Ne(l,A=>{t.replace({query:{...e.query,section:A}}),(A==="settings"||A==="basics"||A==="scaffold")&&!B.value&&ul(),A==="connections"&&$.value.length===0&&q.value.length===0&&Ib(),A==="packages"&&Ke.value.length===0&&cl(),A==="git"&&!le.value&&fl(),A==="ai"&&!qe.value&&dl(),A==="env"&&!xe.value&&Qn()}),Ne(()=>e.query.section,A=>{A&&a.includes(A)?(l.value=A,A==="env"&&(Qs(()=>If()),xe.value||Qn())):A||(l.value="overview")});let xs=!1,li=!1;Ne(()=>ke.value.canonical_file,(A,b)=>{xs||qe.value&&(!A||A===b||Wb(A))}),Ne(F,A=>{li||console.log("[envVariables watcher] Value changed (not suppressed)")},{deep:!0}),Ne(re,A=>{li||console.log("[envGroups watcher] Value changed (not suppressed)")},{deep:!0}),Ne(ue,A=>{li||console.log("[envRawContent watcher] Value changed (not suppressed)")});let xn=null;Ne(C,()=>{xn&&clearTimeout(xn),xn=setTimeout(()=>{Bb()},300)});const Wi=(A="")=>A.split(/[._-]/).filter(Boolean).map(b=>b.charAt(0).toUpperCase()+b.slice(1)).join(" "),es=A=>JSON.parse(JSON.stringify(A)),Ai=A=>Array.isArray(A)?A.map((b,L)=>[String(L),b]):Object.entries(A),Jn=(A,b="",L=0)=>!A||typeof A!="object"?[]:Ai(A).reduce((Te,[Be,Xe])=>{if(Xe==null)return Te;const zt=b?`${b}.${Be}`:Be;if(typeof Xe=="object"&&!Array.isArray(Xe)&&Xe.path)return Te.push({type:"leaf",name:Be,displayName:Wi(Be),fullKey:zt,data:Xe,leafCount:1,depth:L}),Te;if(typeof Xe=="object"){const At=Jn(Xe,zt,L+1);if(At.length>0){const ds=At.reduce((ws,Xn)=>ws+(Xn.leafCount||0),0);Te.push({type:"group",name:Be,displayName:Wi(Be),fullKey:zt,children:At,leafCount:ds,depth:L})}}return Te},[]),Ki=A=>A.slice().sort((b,L)=>b.displayName.localeCompare(L.displayName,void 0,{sensitivity:"base",numeric:!0})).map(b=>b.type==="group"?{...b,children:Ki(b.children)}:b),Br=(A,b)=>{if(!b)return!0;const L=b.toLowerCase(),Te=[A.displayName,A.name,A.fullKey];return A.type==="leaf"&&A.data?.path&&Te.push(A.data.path),Te.some(Be=>Be&&Be.toLowerCase().includes(L))},Nr=(A,b)=>{if(!b)return{nodes:A,matchedKeys:new Set};const L=[],Te=new Set;return A.forEach(Be=>{if(Be.type==="leaf"){Br(Be,b)&&(L.push(Be),Te.add(Be.fullKey));return}const Xe=Nr(Be.children,b);if(Br(Be,b)||Xe.nodes.length>0){const At=Xe.nodes,ds=At.reduce((ws,Xn)=>ws+(Xn.leafCount||0),0);L.push({...Be,children:At,leafCount:ds||Be.leafCount}),Te.add(Be.fullKey),Xe.matchedKeys.forEach(ws=>Te.add(ws))}}),{nodes:L,matchedKeys:Te}},wn=W(()=>{const A=c.value;return!A||typeof A!="object"?[]:!Array.isArray(A)&&A.path?[{type:"leaf",name:A.name||"data",displayName:Wi(A.name||"data"),fullKey:A.name||"data",data:A,leafCount:1,depth:0}]:Ki(Jn(A))}),ai=W(()=>u.value.trim().toLowerCase()),cs=W(()=>{const A=ai.value;return A?Nr(wn.value,A):{nodes:wn.value,matchedKeys:new Set}}),ui=W(()=>cs.value.nodes),ll=W(()=>cs.value.matchedKeys),al=W(()=>ai.value.length>0),Ur=W(()=>al.value?[]:(wn.value||[]).filter(A=>(A.depth||0)===0).map(A=>{const b=A.fullKey||A.name||"";return{anchorId:b?Cb(b):null,label:A.displayName||Wi(A.name||b||"data source"),count:A.leafCount||(A.type==="leaf"?1:0),nodeKey:b}}).filter(A=>A.anchorId&&A.label)),Yn=W(()=>p.value.size>0),Fr=W(()=>p.value.size),zr=W(()=>Array.from(p.value)),P=A=>{let b=0;return A.forEach(L=>{b=Math.max(b,L.depth||0),L.type==="group"&&L.children&&(b=Math.max(b,P(L.children)))}),b},E=W(()=>P(wn.value)),H=W(()=>E.value>2);W(()=>{const A=N.value.directories||{},b={},L=["functions","notebooks","scripts"];return Object.keys(A).forEach(Te=>{L.includes(Te)&&(b[Te]=A[Te])}),b}),W(()=>{const A=N.value.directories||{},b={};return Object.keys(A).forEach(L=>{(L.startsWith("inputs_")||L.includes("_raw")||L.includes("_intermediate")||L.includes("_final"))&&(b[L]=A[L])}),b}),W(()=>{const A=N.value.directories||{},b={};return Object.keys(A).forEach(L=>{(L.startsWith("outputs_")||L.includes("_figures")||L.includes("_tables")||L.includes("_models")||L.includes("_reports")||L==="cache"||L==="scratch")&&!L.startsWith("inputs_")&&(b[L]=A[L])}),b}),W(()=>(N.value.extra_directories||[]).filter(b=>b.type==="input")),W(()=>(N.value.extra_directories||[]).filter(b=>b.type==="output")),W(()=>(N.value.extra_directories||[]).filter(b=>b.type==="workspace"));const pe=W(()=>{const A=n.value?.type;return A?{project:"Standard Project Structure",project_sensitive:"Privacy Sensitive Project Structure",presentation:"Presentation Structure",course:"Course Structure"}[A]||A:"Standard Project Structure"}),ve=W(()=>{if(!B.value?.directories)return{};const A={};return Object.keys(B.value.directories).forEach(b=>{A[b]=!0}),B.value.extra_directories&&B.value.extra_directories.forEach(b=>{A[b.key]=!0}),A}),ze=W(()=>U.value==="untrack"?!0:U.value==="delete"?J.value===n.value?.name:!1),Se=(A,b,L)=>{const Te=b.split(".").filter(Boolean);if(Te.length===0)return null;const Be=es(A||{});let Xe=Be;for(let zt=0;zt<Te.length-1;zt++){const At=Te[zt];(!Xe[At]||typeof Xe[At]!="object"||Array.isArray(Xe[At]))&&(Xe[At]={}),Xe=Xe[At]}return Xe[Te[Te.length-1]]=es(L),Be},Ie=(A,b)=>{if(!A||!b)return null;const L=b.split(".").filter(Boolean);if(L.length===0)return null;let Te=A;for(let Be=0;Be<L.length;Be++){const Xe=L[Be];if(!Te||typeof Te!="object"||!(Xe in Te))return null;Te=Te[Xe]}return Te},Ct=A=>{const b=A.split(".").filter(Boolean);if(b.length<=1)return;const L=new Set(d.value);let Te="";for(let Be=0;Be<b.length-1;Be++)Te=Te?`${Te}.${b[Be]}`:b[Be],L.add(Te);d.value=L},Je=async(A,b)=>{if(!A)return;if(b){Ct(b);const Te=new Set(d.value);Te.add(b),d.value=Te}await Qs();const L=document.getElementById(A);L&&L.scrollIntoView({behavior:"smooth",block:"start"})},qi=async A=>{const b=await fetch(`/api/project/${e.params.id}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:A})}),L=await b.json();if(!b.ok||L.error)throw new Error(L.error||"Failed to save data catalog")},Mb=A=>{A&&(S.value=!1,m.value={fullKey:A.fullKey,name:A.name,data:es(A.data||{})},x.value=null,h.value=!0)},Db=()=>{S.value=!0,m.value={fullKey:"",data:{}},x.value=null,h.value=!0},Eb=A=>{h.value=A,A||(m.value=null,x.value=null,y.value=!1,S.value=!1)},Tb=async A=>{if(!A||!A.fullKey||!A.data){x.value=A?.error||"Invalid data entry payload";return}const b=A.fullKey.trim(),L=!!A.isNew;if(!b){x.value="Dot notation key is required";return}if(L&&Ie(c.value,b)){x.value="A data source with this key already exists";return}const Te=es(c.value),Be=Se(c.value,b,A.data);if(!Be){x.value="Unable to write data entry to catalog";return}c.value=Be,y.value=!0,x.value=null;try{if(await qi(Be),Ct(b),i.success(L?"Data Source Added":"Data Catalog Updated",L?"Data entry created successfully":"Data entry saved successfully"),h.value=!1,m.value=null,S.value=!1,p.value.has(b)){const Xe=new Set(p.value);Xe.delete(b),p.value=Xe}}catch(Xe){c.value=Te,x.value=Xe.message||"Failed to save data catalog",i.error("Save Failed",Xe.message||"Failed to save data catalog")}finally{y.value=!1}},Vb=(A,b)=>{if(!A||!b)return null;const L=b.split(".").filter(Boolean);if(L.length===0)return null;const Te=es(A),Be=[];let Xe=Te;for(let At=0;At<L.length;At++){const ds=L[At];if(!Xe||typeof Xe!="object"||!(ds in Xe))return null;Be.push({parent:Xe,key:ds}),Xe=Xe[ds]}const zt=Be.pop();if(!zt)return null;delete zt.parent[zt.key];for(let At=Be.length-1;At>=0;At--){const{parent:ds,key:ws}=Be[At];ds[ws]&&typeof ds[ws]=="object"&&!Array.isArray(ds[ws])&&Object.keys(ds[ws]).length===0&&delete ds[ws]}return Te},Ob=async()=>{if(!Yn.value)return;j.value=!0;const A=es(c.value);let b=es(A);for(const L of p.value){const Te=Vb(b,L);if(!Te){i.error("Delete Failed",`Unable to locate ${L} in catalog`),j.value=!1;return}b=Te}try{await qi(b),c.value=b,i.success("Data Catalog Updated","Staged deletions have been saved"),p.value=new Set}catch(L){i.error("Delete Failed",L.message||"Failed to save catalog changes")}finally{j.value=!1}},Pb=A=>{if(!A||!A.fullKey)return;const b=new Set(p.value);b.has(A.fullKey)?b.delete(A.fullKey):b.add(A.fullKey),p.value=b},$b=()=>{p.value=new Set},jb=A=>{const b=new Set(d.value);b.has(A)?b.delete(A):b.add(A),d.value=b},Lf=async()=>{r.value=!0,o.value=null;try{const b=await(await fetch(`/api/project/${e.params.id}`)).json();b.error?o.value=b.error:n.value=b}catch(A){o.value="Failed to load project: "+A.message}finally{r.value=!1}},Rf=async()=>{try{const b=await(await fetch(`/api/project/${e.params.id}/data`)).json();b.error||(c.value=b.data||b)}catch(A){console.error("Failed to load data catalog:",A)}},ul=async()=>{O.value=!0,_.value=null;try{const[A,b]=await Promise.all([fetch(`/api/project/${e.params.id}/settings`),fetch("/api/settings/catalog")]),L=await A.json(),Te=await b.json();G.value=Te,L.error?_.value=L.error:(console.log("[DEBUG] Loaded project settings:",L.settings),console.log("[DEBUG] extra_directories:",L.settings.extra_directories),B.value=L.settings,N.value=JSON.parse(JSON.stringify(L.settings)),N.value.scaffold||(N.value.scaffold={notebook_format:"quarto",positron:!1}))}catch(A){_.value="Failed to load settings: "+A.message}finally{O.value=!1}},Lb=async()=>{switch(l.value){case"author":case"settings":await mu();break;case"packages":await Bf();break;case"scaffold":await mu();break;case"git":await Kf();break;case"connections":await Nf();break;case"ai":await Wf();break;case"env":await gu();break;case"overview":case"notebooks":case"data":i.info("No Changes to Save","This section has no editable settings");break;default:i.info("No Changes to Save","This section has no editable settings")}},mu=async()=>{K.value=!0;try{const A=(N.value.extra_directories||[]).filter(Te=>V.value.has(Te._id));if(A.length>0){const Be=await(await fetch(`/api/project/${e.params.id}/directories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({directories:A})})).json();if(!Be.success){i.error("Directory Creation Failed",Be.error||"Failed to create directories"),K.value=!1;return}V.value=new Set}const L=await(await fetch(`/api/project/${e.params.id}/settings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N.value)})).json();if(L.success){const Te=allCustomDirectories.length>0?`Settings updated and ${allCustomDirectories.length} director${allCustomDirectories.length===1?"y":"ies"} created`:"Project settings have been updated";i.success("Settings Saved",Te),B.value=JSON.parse(JSON.stringify(N.value)),await ul()}else i.error("Save Failed",L.error||"Failed to save settings")}catch(A){i.error("Save Failed",A.message)}finally{K.value=!1}},Rb=A=>{A&&Je(A.anchorId,A.nodeKey)},If=()=>{const A=document.getElementById("env");A&&A.scrollIntoView({behavior:"smooth",block:"start"})},Ib=async()=>{try{const b=await(await fetch(`/api/project/${e.params.id}/connections`)).json();if(b.error)console.error("Failed to load connections:",b.error);else{const L=Object.entries(b.databases||{}).map(([Be,Xe])=>({_id:Be,name:Be,...Xe})),Te=Object.entries(b.storage_buckets||{}).map(([Be,Xe])=>({_id:Be,name:Be,...Xe}));$.value=L,q.value=Te,Y.value=b.default_database||null,de.value=b.default_storage_bucket||null}}catch(A){console.error("Failed to load connections:",A.message)}},cl=async()=>{Le.value=!0,rt.value=null;try{const b=await(await fetch(`/api/project/${e.params.id}/packages`)).json();b.error?rt.value=b.error:(Ke.value=(b.packages||[]).map(L=>({name:L.name||"",source:L.source||"cran",auto_attach:L.auto_attach!==void 0?L.auto_attach:!0,ref:L.ref||""})),_e.value={use_renv:b.use_renv||!1,default_packages:JSON.parse(JSON.stringify(Ke.value))})}catch(A){rt.value="Failed to load packages: "+A.message}finally{Le.value=!1}},Bf=async()=>{ct.value=!0;try{const b=await(await fetch(`/api/project/${e.params.id}/packages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({use_renv:_e.value.use_renv,packages:_e.value.default_packages})})).json();b.success?(i.success("Packages Saved","Package configuration has been updated"),await cl()):i.error("Save Failed",b.error||"Failed to save packages")}catch(A){i.error("Save Failed",A.message)}finally{ct.value=!1}},Nf=async()=>{ye.value=!0;try{const A={};$.value.forEach(Be=>{const{_id:Xe,name:zt,...At}=Be;A[zt]=At});const b={};q.value.forEach(Be=>{const{_id:Xe,name:zt,...At}=Be;b[zt]=At});const Te=await(await fetch(`/api/project/${e.params.id}/connections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({default_database:Y.value,default_storage_bucket:de.value,databases:A,storage_buckets:b})})).json();Te.success?i.success("Connections Saved","Connection configuration has been updated"):i.error("Save Failed",Te.error||"Failed to save connections")}catch(A){i.error("Save Failed",A.message)}finally{ye.value=!1}},Bb=async()=>{if(C.value.length<2){X.value=[],D.value=-1;return}Oe.value=!0;try{const b=await(await fetch(`/api/packages/search?q=${encodeURIComponent(C.value)}`)).json();console.log("Package search results:",b),X.value=b.packages||[],D.value=X.value.length>0?0:-1}catch(A){console.error("Failed to search packages:",A),X.value=[],D.value=-1}finally{Oe.value=!1}},Nb=A=>{X.value.length!==0&&(A.key==="ArrowDown"?(A.preventDefault(),D.value=Math.min(D.value+1,X.value.length-1)):A.key==="ArrowUp"?(A.preventDefault(),D.value=Math.max(D.value-1,0)):A.key==="Enter"&&D.value>=0?(A.preventDefault(),Uf(X.value[D.value])):A.key==="Escape"&&(X.value=[],D.value=-1))},Uf=A=>{T.value.name=A.name,T.value.source=A.source,C.value="",X.value=[],D.value=-1},Ub=()=>{T.value.name.trim()&&(Ke.value.push({name:T.value.name.trim(),source:T.value.source,auto_attach:T.value.auto_attach}),dt.value=!1,i.success("Package Added",`${T.value.name} added to package list`))},Fb=()=>{st.value=!1,U.value="untrack",J.value=""},zb=async()=>{if(!ze.value){console.log("[DELETE] Cannot delete - canDelete is false");return}console.log("[DELETE] Starting delete with option:",U.value),console.log("[DELETE] Project ID:",e.params.id);try{const A=U.value==="delete"?`/api/projects/${e.params.id}/delete`:`/api/projects/${e.params.id}/untrack`;console.log("[DELETE] Calling endpoint:",A);const b=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"}});if(console.log("[DELETE] Response status:",b.status),!b.ok){const Be=await b.json();throw console.error("[DELETE] Error response:",Be),new Error(Be.message||"Failed to delete project")}const L=await b.json();console.log("[DELETE] Success result:",L);const Te=U.value==="delete"?"deleted":"removed from Framework";i.success("Project Removed",`${n.value.name} has been ${Te}`),setTimeout(()=>{window.location.href="/projects"},500)}catch(A){console.error("[DELETE] Failed to delete project:",A),i.error("Delete Failed",A.message||"Could not delete project")}},Hb=A=>A?Array.isArray(A)?Array.from(new Set(A.map(b=>String(b)))):typeof A=="string"?[A]:[]:[],Ff=async A=>{let b=`/api/project/${e.params.id}/ai`;if(A){const Te=new URLSearchParams;Te.set("canonical_file",A),b+=`?${Te.toString()}`}const L=await fetch(b);if(!L.ok)throw new Error("Failed to load AI settings");return L.json()},dl=async()=>{$e.value=!0,Fe.value=null;try{const A=await Ff();if(A.error){Fe.value=A.error,qe.value=!1;return}const b=A.ai||{};xs=!0;const L={enabled:!!b.enabled,canonical_file:b.canonical_file||"CLAUDE.md",canonical_content:b.canonical_content||"",assistants:Hb(b.assistants)};ke.value=L,xt.value={file:b.content_file||b.canonical_file||"CLAUDE.md",exists:!!b.content_exists},xs=!1,await Hf(L.canonical_file,{preserveContentIfMissing:!1}),qe.value=!0}catch(A){Fe.value=A.message||"Failed to load AI settings",qe.value=!1}finally{xs=!1,$e.value=!1,Ze.value=!1}},fl=async()=>{ne.value=!0,R.value=null;try{const b=await(await fetch(`/api/project/${e.params.id}/git`)).json();if(b.error){R.value=b.error,le.value=!1;return}const L=b.git||{};oe.value={initialize:L.initialize!==void 0?!!L.initialize:!0,user_name:L.user_name||"",user_email:L.user_email||"",hooks:{ai_sync:L.hooks?.ai_sync||!1,data_security:L.hooks?.data_security||!1,check_sensitive_dirs:L.hooks?.check_sensitive_dirs||!1}},le.value=!0}catch(A){R.value=A.message||"Failed to load Git settings",le.value=!1}finally{ne.value=!1}},zf=W({get(){return{initialize:oe.value.initialize,user_name:oe.value.user_name||"",user_email:oe.value.user_email||"",hooks:{ai_sync:oe.value.hooks?.ai_sync||!1,data_security:oe.value.hooks?.data_security||!1,check_sensitive_dirs:oe.value.hooks?.check_sensitive_dirs||!1}}},set(A){oe.value={initialize:A.initialize,user_name:A.user_name,user_email:A.user_email,hooks:{ai_sync:A.hooks.ai_sync,data_security:A.hooks.data_security,check_sensitive_dirs:A.hooks.check_sensitive_dirs}}}}),Hf=async(A,{preserveContentIfMissing:b=!0}={})=>{if(A){Ze.value=!0;try{const L=await Ff(A);if(L.error){i.error("Load Failed",L.error);return}const Te=L.ai||{};xt.value={file:Te.content_file||A,exists:!!Te.content_exists},(Te.content_exists||!b)&&(ke.value.canonical_content=Te.canonical_content||"")}catch(L){i.error("Load Failed",L.message||"Unable to load canonical file")}finally{Ze.value=!1}}},Wb=A=>{const b=typeof A=="string"&&A.length>0?A:"CLAUDE.md";Hf(b,{preserveContentIfMissing:!0})},Wf=async()=>{it.value=!0;try{const b=await(await fetch(`/api/project/${e.params.id}/ai`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:ke.value.enabled,canonical_file:ke.value.canonical_file,assistants:ke.value.assistants,canonical_content:ke.value.canonical_content})})).json();b.success?(i.success("AI Settings Saved","AI assistant configuration has been updated"),qe.value=!1,await dl()):i.error("Save Failed",b.error||"Failed to save AI settings")}catch(A){i.error("Save Failed",A.message||"Failed to save AI settings")}finally{it.value=!1}},Kf=async()=>{se.value=!0;try{const b=await(await fetch(`/api/project/${e.params.id}/git`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initialize:oe.value.initialize,user_name:oe.value.user_name,user_email:oe.value.user_email,hooks:oe.value.hooks})})).json();b.success?(i.success("Git Settings Saved","Repository configuration has been updated"),le.value=!1,await fl()):i.error("Save Failed",b.error||"Failed to save Git settings")}catch(A){i.error("Save Failed",A.message||"Failed to save Git settings")}finally{se.value=!1}},Qn=async()=>{if(ce.value||xe.value){console.log("[loadEnv] Blocked: already loading or loaded",{loading:ce.value,loaded:xe.value});return}ce.value=!0,Ce.value=null;try{const b=await(await fetch(`/api/project/${e.params.id}/env`)).json();b.error?(Ce.value=b.error,xe.value=!1):(li=!0,console.log("[loadEnv] Updating env values with suppressEnvWatch = true"),xe.value=!0,F.value=b.variables||{},re.value=b.groups||{},ue.value=b.raw_content||"",li=!1,console.log("[loadEnv] Env values updated, suppressEnvWatch = false"))}catch(A){Ce.value="Failed to load .env: "+A.message,xe.value=!1}finally{li=!1,ce.value=!1}},gu=async()=>{we.value=!0;try{const A=Q.value==="raw"?{raw_content:ue.value}:{variables:F.value,regroup:Re.value},L=await(await fetch(`/api/project/${e.params.id}/env`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).json();L.success?(i.success(".env Saved","Environment variables have been updated"),xe.value=!1,await Qn()):i.error("Save Failed",L.error||"Failed to save .env")}catch(A){i.error("Save Failed",A.message)}finally{we.value=!1}},qf=A=>{(A.metaKey||A.ctrlKey)&&A.key==="s"&&(A.preventDefault(),l.value==="settings"||l.value==="scaffold"?mu():l.value==="connections"?Nf():l.value==="packages"?Bf():l.value==="git"?Kf():l.value==="ai"?Wf():l.value==="directories"?saveDirectories():l.value==="env"&&gu())};return ls(()=>{ks(),Lf(),Rf(),ul(),cl(),dl(),fl(),Qn(),window.addEventListener("keydown",qf)}),Pr(()=>{window.removeEventListener("keydown",qf)}),Ne(()=>e.params.id,(A,b)=>{A&&A!==b&&(l.value="overview",n.value=null,B.value=null,N.value={},_.value=null,O.value=!1,Ke.value=[],_e.value={use_renv:!1,default_packages:[]},rt.value=null,Le.value=!1,c.value=null,p.value=new Set,x.value=null,m.value=null,F.value={},re.value={},ue.value="",Ce.value=null,ce.value=!1,Q.value="grouped",Re.value=!1,oe.value={initialize:!0,user_name:"",user_email:"",hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1}},le.value=!1,R.value=null,ne.value=!1,xs=!0,ke.value={enabled:!1,canonical_file:"CLAUDE.md",canonical_content:"",assistants:[]},xt.value={file:"CLAUDE.md",exists:!0},qe.value=!1,Fe.value=null,$e.value=!1,Ze.value=!1,xs=!1,xe.value=!1,Ce.value=null,ce.value=!1,c.value=null,ks(),Lf(),Rf(),ul(),cl(),dl(),fl(),Qn())}),(A,b)=>(g(),v("div",null,[r.value?(g(),v("div",ZO,[...b[47]||(b[47]=[f("div",{class:"text-zinc-600 dark:text-zinc-400"},"Loading project...",-1)])])):o.value?(g(),v("div",eP,[w(Os,{type:"error",title:"Error Loading Project",description:o.value},null,8,["description"])])):n.value?(g(),v("div",tP,[f("nav",sP,[f("div",iP,[f("h2",nP,ee(n.value.name),1),f("div",rP,[f("span",oP,ee(n.value.path),1),w(pr,{value:n.value.path,variant:"ghost",successMessage:"Path copied",class:"shrink-0"},null,8,["value"])])]),f("div",lP,[f("a",{href:"#overview",onClick:b[0]||(b[0]=Ht(L=>l.value="overview",["prevent"])),class:Ae(Tt("overview"))},[w(vt(Za),{class:"h-4 w-4"}),b[48]||(b[48]=he(" Overview ",-1))],2),w(La,null,{default:Z(()=>[...b[49]||(b[49]=[he("Settings",-1)])]),_:1}),f("a",{href:"#basics",onClick:b[1]||(b[1]=Ht(L=>l.value="basics",["prevent"])),class:Ae(Tt("basics"))},[w(vt(zd),{class:"h-4 w-4"}),b[50]||(b[50]=he(" Basics ",-1))],2),f("a",{href:"#settings",onClick:b[2]||(b[2]=Ht(L=>l.value="settings",["prevent"])),class:Ae(Tt("settings"))},[w(vt(ma),{class:"h-4 w-4"}),b[51]||(b[51]=he(" Project Structure ",-1))],2),f("a",{href:"#packages",onClick:b[3]||(b[3]=Ht(L=>l.value="packages",["prevent"])),class:Ae(Tt("packages"))},[w(vt(Hd),{class:"h-4 w-4"}),b[52]||(b[52]=he(" Packages ",-1))],2),f("a",{href:"#ai",onClick:b[4]||(b[4]=Ht(L=>l.value="ai",["prevent"])),class:Ae(Tt("ai"))},[w(vt(Rw),{class:"h-4 w-4"}),b[53]||(b[53]=he(" AI Assistants ",-1))],2),f("a",{href:"#git",onClick:b[5]||(b[5]=Ht(L=>l.value="git",["prevent"])),class:Ae(Tt("git"))},[...b[54]||(b[54]=[f("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1),he(" Git & Hooks ",-1)])],2),f("a",{href:"#connections",onClick:b[6]||(b[6]=Ht(L=>l.value="connections",["prevent"])),class:Ae(Tt("connections"))},[w(vt(Wd),{class:"h-4 w-4"}),b[55]||(b[55]=he(" Connections ",-1))],2),f("a",{href:"#env",onClick:b[7]||(b[7]=Ht(L=>l.value="env",["prevent"])),class:Ae(Tt("env"))},[w(vt(eu),{class:"h-4 w-4"}),b[56]||(b[56]=he(" .env Defaults ",-1))],2),f("a",{href:"#scaffold",onClick:b[8]||(b[8]=Ht(L=>l.value="scaffold",["prevent"])),class:Ae(Tt("scaffold"))},[w(vt(Ew),{class:"h-4 w-4"}),b[57]||(b[57]=he(" Scaffold Behavior ",-1))],2),w(La,null,{default:Z(()=>[...b[58]||(b[58]=[he("Project",-1)])]),_:1}),f("a",{href:"#data",onClick:b[9]||(b[9]=Ht(L=>l.value="data",["prevent"])),class:Ae(Tt("data"))},[w(vt(Ow),{class:"h-4 w-4"}),b[59]||(b[59]=he(" Data ",-1))],2),l.value==="data"&&Ur.value.length?(g(),v("div",aP,[(g(!0),v(me,null,Ee(Ur.value,L=>(g(),v("a",{key:L.anchorId,href:`#${L.anchorId}`,onClick:Ht(Te=>Rb(L),["prevent"]),class:"flex items-center justify-between gap-2 rounded-md px-3 py-1 text-xs text-gray-600 transition hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800"},[f("span",cP,ee(L.label),1),L.count?(g(),v("span",dP,ee(L.count),1)):I("",!0)],8,uP))),128))])):I("",!0),f("a",{href:"#notebooks",onClick:b[10]||(b[10]=Ht(L=>l.value="notebooks",["prevent"])),class:Ae(Tt("notebooks"))},[w(vt(Ac),{class:"h-4 w-4"}),b[60]||(b[60]=he(" Notebooks ",-1))],2)]),f("div",fP,[w(Ye,{variant:"primary",onClick:Lb,disabled:K.value||ct.value||we.value||it.value||se.value||ye.value,class:"w-full"},{default:Z(()=>[he(ee(K.value||ct.value||we.value||it.value||se.value||ye.value?"Saving...":"Save"),1)]),_:1},8,["disabled"])]),f("div",hP,[f("div",pP,[f("button",{onClick:b[11]||(b[11]=L=>st.value=!0),class:"text-xs text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition"}," Delete Project ")])])]),f("div",mP,[nt(f("div",gP,[b[61]||(b[61]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Overview",-1)),b[62]||(b[62]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Quick overview of your project settings. ",-1)),w(Tf,{cards:yt.value,onNavigate:b[12]||(b[12]=L=>l.value=L)},null,8,["cards"])],512),[[mt,l.value==="overview"]]),nt(f("div",vP,[O.value?(g(),v("div",yP,[...b[63]||(b[63]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(g(),v("div",bP,[w(Os,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):(g(),v("div",kP,[b[69]||(b[69]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Basics",-1)),b[70]||(b[70]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Essential project settings. ",-1)),f("div",xP,[N.value.scaffold?(g(),v("div",wP,[w(ae,{modelValue:n.value.name,"onUpdate:modelValue":b[13]||(b[13]=L=>n.value.name=L),label:"Project Name",hint:"Changing this will rename the project directory"},null,8,["modelValue"]),f("div",null,[b[64]||(b[64]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Filesystem Location ",-1)),f("div",SP,[f("code",_P,ee(n.value.path),1),w(pr,{value:n.value.path,successMessage:"Path copied"},null,8,["value"])])]),f("div",null,[b[66]||(b[66]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),w(sn,{modelValue:N.value.scaffold.positron,"onUpdate:modelValue":b[14]||(b[14]=L=>N.value.scaffold.positron=L),id:"support-positron-edit",description:"Enable Positron-specific workspace and settings files"},{default:Z(()=>[...b[65]||(b[65]=[he(" Positron ",-1)])]),_:1},8,["modelValue"]),b[67]||(b[67]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),w(si,{modelValue:N.value.scaffold.notebook_format,"onUpdate:modelValue":b[15]||(b[15]=L=>N.value.scaffold.notebook_format=L),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...b[68]||(b[68]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["modelValue"]),N.value.author?(g(),v("div",CP,[w(Vf,{modelValue:N.value.author,"onUpdate:modelValue":b[16]||(b[16]=L=>N.value.author=L)},null,8,["modelValue"])])):I("",!0)])):I("",!0)])]))],512),[[mt,l.value==="basics"]]),nt(f("div",AP,[O.value?(g(),v("div",MP,[...b[71]||(b[71]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(g(),v("div",DP,[w(Os,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):B.value?(g(),v("div",EP,[b[74]||(b[74]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Project Structure",-1)),f("p",TP,[b[72]||(b[72]=he(" This project uses the ",-1)),f("strong",null,ee(pe.value),1),b[73]||(b[73]=he(" structure. ",-1))]),w(Os,{type:"info",title:"Append-Only Mode",description:"You can enable disabled directories and add new custom directories. Directories that are already enabled cannot be turned off to prevent accidental data loss.",class:"mb-6"}),w(Ab,{"project-type":n.value.type,directories:N.value.directories||{},"render-dirs":N.value.render_dirs||{},enabled:N.value.enabled||ve.value,"extra-directories":N.value.extra_directories||[],settings:N.value,gitignore:N.value.gitignore||"",catalog:G.value?.project_types?.[n.value.type]||{},"new-extra-ids":V.value,"allow-destruction":!1,"onUpdate:directories":b[17]||(b[17]=L=>N.value.directories=L),"onUpdate:renderDirs":b[18]||(b[18]=L=>N.value.render_dirs=L),"onUpdate:enabled":b[19]||(b[19]=L=>N.value.enabled=L),"onUpdate:extraDirectories":b[20]||(b[20]=L=>N.value.extra_directories=L),"onUpdate:gitignore":b[21]||(b[21]=L=>N.value.gitignore=L),"onUpdate:newExtraIds":b[22]||(b[22]=L=>V.value=L)},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):I("",!0)],512),[[mt,l.value==="settings"]]),nt(f("div",VP,[b[76]||(b[76]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Rendered Notebooks",-1)),b[77]||(b[77]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Browse and access your rendered Quarto/RMarkdown notebooks. ",-1)),f("div",OP,[w(vt(Ac),{class:"h-12 w-12 mx-auto mb-4 text-gray-400"}),b[75]||(b[75]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Notebook browser coming soon... ",-1))])],512),[[mt,l.value==="notebooks"]]),nt(f("div",PP,[f("div",$P,[b[79]||(b[79]=f("div",null,[f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white"},"Data Catalog"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Browse your project's data sources with copy commands. ")],-1)),w(Ye,{variant:"primary",size:"sm",class:"inline-flex items-center gap-2",onClick:Db},{default:Z(()=>[w(vt(Lw),{class:"h-4 w-4"}),b[78]||(b[78]=he(" Add Data Source ",-1))]),_:1})]),f("div",jP,[w(ae,{modelValue:u.value,"onUpdate:modelValue":b[23]||(b[23]=L=>u.value=L),label:"Search data sources",placeholder:"Filter by name, prefix, or file path"},null,8,["modelValue"])]),ui.value.length>0?(g(),v("div",LP,[(g(!0),v(me,null,Ee(ui.value,L=>(g(),be(tO,{key:L.fullKey,node:L,"expanded-keys":d.value,"auto-expanded-keys":ll.value,"toggle-group":jb,"search-term":u.value,hierarchical:H.value,"pending-deletes":p.value,onEdit:Mb,onDelete:Pb},null,8,["node","expanded-keys","auto-expanded-keys","search-term","hierarchical","pending-deletes"]))),128))])):I("",!0),Yn.value?(g(),v("div",RP,[f("div",IP,[f("div",null,[f("p",BP,ee(Fr.value)+" data source"+ee(Fr.value===1?"":"s")+" marked for deletion. ",1),b[80]||(b[80]=f("p",{class:"text-xs text-red-600 dark:text-red-200/80"}," Changes will be applied when you save. ",-1))]),f("div",NP,[w(Ye,{variant:"secondary",size:"sm",class:"shadow-none",disabled:j.value,onClick:$b},{default:Z(()=>[...b[81]||(b[81]=[he(" Cancel ",-1)])]),_:1},8,["disabled"]),w(Ye,{size:"sm",class:"bg-red-600 text-white hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400",disabled:j.value,onClick:Ob},{default:Z(()=>[he(ee(j.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),f("ul",UP,[(g(!0),v(me,null,Ee(zr.value,L=>(g(),v("li",{key:L},ee(L),1))),128))])])):al.value?(g(),v("div",FP,[f("p",zP,' No data sources match "'+ee(u.value)+'". ',1),b[82]||(b[82]=f("p",{class:"mt-2 text-xs text-zinc-500 dark:text-zinc-400"}," Try adjusting your search terms or clearing the filter. ",-1))])):(g(),v(me,{key:3},[!Yn.value&&(!c.value||Object.keys(c.value||{}).length===0)?(g(),be(LT,{key:0,title:"No Data Sources",description:"This project doesn't have any data sources defined in its settings",icon:"database"})):I("",!0)],64))],512),[[mt,l.value==="data"]]),w(oV,{mode:S.value?"create":"edit",modelValue:h.value,"onUpdate:modelValue":[b[24]||(b[24]=L=>h.value=L),Eb],entry:m.value,saving:y.value,error:x.value,onSave:Tb},null,8,["mode","modelValue","entry","saving","error"]),nt(f("div",HP,[b[83]||(b[83]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Connections",-1)),b[84]||(b[84]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Database and storage connections for this project. ",-1)),w($f,{"database-connections":$.value,"onUpdate:databaseConnections":b[25]||(b[25]=L=>$.value=L),"s3-connections":q.value,"onUpdate:s3Connections":b[26]||(b[26]=L=>q.value=L),"default-database":Y.value,"onUpdate:defaultDatabase":b[27]||(b[27]=L=>Y.value=L),"default-storage-bucket":de.value,"onUpdate:defaultStorageBucket":b[28]||(b[28]=L=>de.value=L)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[mt,l.value==="connections"]]),nt(f("div",WP,[Le.value?(g(),v("div",KP,[...b[85]||(b[85]=[f("div",{class:"text-center py-12"},[f("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Loading packages...")],-1)])])):rt.value?(g(),v("div",qP,[w(Os,{type:"error",title:"Error Loading Packages",description:rt.value},null,8,["description"])])):(g(),v("div",GP,[b[86]||(b[86]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Packages & Dependencies",-1)),b[87]||(b[87]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure package management and default packages for this project. ",-1)),w(wb,{modelValue:_e.value,"onUpdate:modelValue":b[29]||(b[29]=L=>_e.value=L),"show-renv-toggle":!0,flush:!1},null,8,["modelValue"])]))],512),[[mt,l.value==="packages"]]),nt(f("div",JP,[$e.value?(g(),v("div",YP,[...b[88]||(b[88]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading AI settings...",-1)])])):Fe.value?(g(),v("div",QP,[w(Os,{type:"error",title:"Error Loading AI Settings",description:Fe.value},null,8,["description"])])):(g(),v("div",XP,[b[89]||(b[89]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"AI Assistants",-1)),b[90]||(b[90]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Framework maintains context files for selected assistants and keeps them in sync before commits. ",-1)),w(Sb,{modelValue:ke.value,"onUpdate:modelValue":b[30]||(b[30]=L=>ke.value=L),flush:!1,"show-editor":!0,"editor-height":"400px","editor-disabled":Ze.value,"editor-loading":Ze.value},{"editor-alert":Z(()=>[xt.value.exists?I("",!0):(g(),be(Os,{key:0,type:"info",title:"New canonical file",description:`Saving copies the current instructions into ${ke.value.canonical_file||"CLAUDE.md"}. The original file stays on disk; if AI sync hooks are enabled they mirror everything from the new canonical file.`,class:"mb-4"},null,8,["description"]))]),_:1},8,["modelValue","editor-disabled","editor-loading"])]))],512),[[mt,l.value==="ai"]]),nt(f("div",ZP,[ne.value?(g(),v("div",e$,[...b[91]||(b[91]=[f("div",{class:"text-center py-12 text-sm text-gray-500 dark:text-gray-400"},"Loading git settings...",-1)])])):R.value?(g(),v("div",t$,[w(Os,{type:"error",title:"Error Loading Git Settings",description:R.value},null,8,["description"])])):(g(),v("div",s$,[b[93]||(b[93]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Git & Hooks",-1)),b[94]||(b[94]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Configure repository initialization, commit identity, git hooks, and security scanning. ",-1)),w(Of,{modelValue:zf.value,"onUpdate:modelValue":b[31]||(b[31]=L=>zf.value=L)},{note:Z(()=>[...b[92]||(b[92]=[he(" Project-specific .gitignore templates can be customized in Project Defaults. ",-1)])]),_:1},8,["modelValue"])]))],512),[[mt,l.value==="git"]]),nt(f("div",i$,[O.value?(g(),v("div",n$,[...b[95]||(b[95]=[f("div",{class:"text-center py-12 text-zinc-500 dark:text-zinc-400"}," Loading settings... ",-1)])])):_.value?(g(),v("div",r$,[w(Os,{type:"error",title:"Error Loading Settings",description:_.value},null,8,["description"])])):(g(),v("div",o$,[b[96]||(b[96]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Scaffold Behavior",-1)),b[97]||(b[97]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[he(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),he(" runs to initialize your project environment. ")],-1)),f("div",l$,[N.value.scaffold?(g(),be(Pf,{key:0,modelValue:N.value.scaffold,"onUpdate:modelValue":b[32]||(b[32]=L=>N.value.scaffold=L),flush:""},null,8,["modelValue"])):I("",!0)])]))],512),[[mt,l.value==="scaffold"]]),nt(f("div",a$,[b[98]||(b[98]=f("h2",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"Environment Variables",-1)),b[99]||(b[99]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"}," Manage environment variables for this project (.env file). ",-1)),w(jf,{loading:ce.value,error:Ce.value,groups:re.value,variables:F.value,"onUpdate:variables":b[33]||(b[33]=L=>F.value=L),"raw-content":ue.value,"onUpdate:rawContent":b[34]||(b[34]=L=>ue.value=L),"view-mode":Q.value,"onUpdate:viewMode":b[35]||(b[35]=L=>Q.value=L),"regroup-on-save":Re.value,"onUpdate:regroupOnSave":b[36]||(b[36]=L=>Re.value=L),onSave:gu},null,8,["loading","error","groups","variables","raw-content","view-mode","regroup-on-save"])],512),[[mt,l.value==="env"]])])])):I("",!0),w(un,{modelValue:dt.value,"onUpdate:modelValue":b[42]||(b[42]=L=>dt.value=L),title:"Add Package",size:"md",variant:"left"},{actions:Z(()=>[w(Ye,{variant:"primary",onClick:Ub,disabled:!T.value.name.trim()},{default:Z(()=>[...b[105]||(b[105]=[he(" Add Package ",-1)])]),_:1},8,["disabled"]),w(Ye,{variant:"secondary",onClick:b[41]||(b[41]=L=>dt.value=!1)},{default:Z(()=>[...b[106]||(b[106]=[he(" Cancel ",-1)])]),_:1})]),default:Z(()=>[f("div",u$,[f("div",null,[b[100]||(b[100]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Search CRAN Packages ",-1)),nt(f("input",{"onUpdate:modelValue":b[37]||(b[37]=L=>C.value=L),onKeydown:Nb,type:"text",placeholder:"Type to search CRAN...",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,544),[[kr,C.value]])]),X.value.length>0?(g(),v("div",c$,[(g(!0),v(me,null,Ee(X.value,(L,Te)=>(g(),v("button",{key:L.name,onClick:Be=>Uf(L),onMouseenter:Be=>D.value=Te,class:Ae(["w-full px-3 py-2 text-left border-b border-gray-200 dark:border-gray-700 last:border-b-0 transition",D.value===Te?"bg-sky-50 dark:bg-sky-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"])},[f("div",f$,[f("div",h$,[f("div",p$,ee(L.name),1),L.title?(g(),v("div",m$,ee(L.title),1)):I("",!0),L.author?(g(),v("div",g$,ee(L.author),1)):I("",!0)]),f("div",v$," v"+ee(L.version),1)])],42,d$))),128))])):I("",!0),f("div",null,[b[101]||(b[101]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Package Name ",-1)),nt(f("input",{"onUpdate:modelValue":b[38]||(b[38]=L=>T.value.name=L),type:"text",placeholder:"dplyr",class:"w-full rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 font-mono focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},null,512),[[kr,T.value.name]]),T.value.source==="github"?(g(),v("p",y$," GitHub: user/repo (e.g., tidyverse/dplyr) ")):I("",!0),T.value.source==="bioc"?(g(),v("p",b$," Bioconductor: name only (e.g., DESeq2) ")):I("",!0)]),f("div",null,[b[104]||(b[104]=f("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Source ",-1)),f("div",k$,[nt(f("select",{"onUpdate:modelValue":b[39]||(b[39]=L=>T.value.source=L),class:"w-full appearance-none rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 pl-3 pr-10 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-sky-500 focus:outline-none focus:ring-1 focus:ring-sky-500"},[...b[102]||(b[102]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioc"},"Bioconductor",-1)])],512),[[n0,T.value.source]]),b[103]||(b[103]=f("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[f("svg",{class:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),f("p",x$,[T.value.source==="cran"?(g(),v(me,{key:0},[he("CRAN: name only (e.g., dplyr)")],64)):T.value.source==="github"?(g(),v(me,{key:1},[he("GitHub: user/repo (e.g., tidyverse/dplyr)")],64)):T.value.source==="bioc"?(g(),v(me,{key:2},[he("Bioconductor: name only (e.g., DESeq2)")],64)):I("",!0)])]),f("div",null,[w(Ue,{modelValue:T.value.auto_attach,"onUpdate:modelValue":b[40]||(b[40]=L=>T.value.auto_attach=L),label:"Auto-attach on scaffold()"},null,8,["modelValue"])])])]),_:1},8,["modelValue"]),w(un,{modelValue:st.value,"onUpdate:modelValue":b[46]||(b[46]=L=>st.value=L),title:"Delete Project",size:"md"},{actions:Z(()=>[w(Ye,{variant:"secondary",onClick:Fb},{default:Z(()=>[...b[112]||(b[112]=[he(" Cancel ",-1)])]),_:1}),w(Ye,{variant:"primary",onClick:zb,disabled:!ze.value,class:"bg-red-600 hover:bg-red-500 focus-visible:outline-red-600 dark:bg-red-500 dark:hover:bg-red-400"},{default:Z(()=>[he(ee(U.value==="delete"?"Delete Project":"Remove from Framework"),1)]),_:1},8,["disabled"])]),default:Z(()=>[f("div",w$,[b[111]||(b[111]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Choose how you want to remove this project: ",-1)),f("label",{class:Ae(["block cursor-pointer rounded-lg border-2 p-4 transition",U.value==="untrack"?"border-sky-500 bg-sky-50 dark:border-sky-600 dark:bg-sky-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[f("div",S$,[nt(f("input",{type:"radio",id:"delete-untrack",value:"untrack","onUpdate:modelValue":b[43]||(b[43]=L=>U.value=L),class:"mt-1"},null,512),[[xc,U.value]]),b[107]||(b[107]=f("div",{class:"flex-1"},[f("div",{class:"font-medium text-gray-900 dark:text-white"}," Remove from Framework "),f("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Stop tracking this project in Framework. Files remain on disk. ")],-1))])],2),f("label",{class:Ae(["block cursor-pointer rounded-lg border-2 p-4 transition",U.value==="delete"?"border-red-500 bg-red-50 dark:border-red-700 dark:bg-red-950/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[f("div",_$,[nt(f("input",{type:"radio",id:"delete-files",value:"delete","onUpdate:modelValue":b[44]||(b[44]=L=>U.value=L),class:"mt-1"},null,512),[[xc,U.value]]),b[108]||(b[108]=f("div",{class:"flex-1"},[f("div",{class:"font-medium text-red-700 dark:text-red-400"}," Delete Entire Project "),f("div",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Permanently delete all files and folders. This cannot be undone. ")],-1))]),U.value==="delete"?(g(),v("div",C$,[f("div",A$,[b[109]||(b[109]=he(" Type ",-1)),f("span",M$,ee(n.value?.name),1),b[110]||(b[110]=he(" to confirm: ",-1))]),w(ae,{modelValue:J.value,"onUpdate:modelValue":b[45]||(b[45]=L=>J.value=L),placeholder:"Project name",class:"font-mono"},null,8,["modelValue"])])):I("",!0)],2)])]),_:1},8,["modelValue"])]))}},E$={class:"space-y-5"},T$={__name:"EditorAndNotebookPanel",props:{positron:{type:Boolean,default:!1},notebookFormat:{type:String,default:"quarto"}},emits:["update:positron","update:notebookFormat"],setup(s){return(e,t)=>(g(),v("div",E$,[f("div",null,[t[3]||(t[3]=f("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-3"}," Supported Editors ",-1)),w(sn,{"model-value":s.positron,"onUpdate:modelValue":t[0]||(t[0]=i=>e.$emit("update:positron",i)),id:"support-positron",description:"Enable Positron-specific workspace and settings files"},{default:Z(()=>[...t[2]||(t[2]=[he(" Positron ",-1)])]),_:1},8,["model-value"]),t[4]||(t[4]=f("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-3"}," RStudio supported by default ",-1))]),w(si,{"model-value":s.notebookFormat,"onUpdate:modelValue":t[1]||(t[1]=i=>e.$emit("update:notebookFormat",i)),label:"Default Notebook Format",hint:"Format used when creating new notebooks"},{default:Z(()=>[...t[5]||(t[5]=[f("option",{value:"quarto"},"Quarto (.qmd)",-1),f("option",{value:"rmarkdown"},"R Markdown (.Rmd)",-1)])]),_:1},8,["model-value"])]))}},V$={class:"flex min-h-screen"},O$={class:"w-64 shrink-0 border-r border-gray-200 p-6 dark:border-gray-800"},P$={class:"space-y-1"},$$=["href","onClick"],j$=["fill","viewBox","stroke"],L$=["stroke-linecap","stroke-linejoin","stroke-width","fill","d"],R$={key:1,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},I$=["href","onClick"],B$={key:2,class:"ml-4 mt-2 space-y-0.5 border-l border-gray-200 pl-3 dark:border-gray-700"},N$=["href","onClick"],U$={class:"rounded-md bg-gray-900 p-4 text-xs text-gray-200"},F$={class:"mt-4 flex justify-end"},z$={class:"mt-6 px-3"},H$={key:0,class:"flex-1 flex items-center justify-center"},W$={class:"flex-1 p-10 pb-24"},K$={class:"mt-8 space-y-10"},q$={id:"overview"},G$={id:"connections-defaults"},J$={id:"env-defaults"},Y$={class:"mt-6 flex justify-end"},Q$={id:"basics"},X$={class:"space-y-5"},Z$={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},ej={id:"structure",class:"space-y-8"},tj={key:0,class:"space-y-6"},sj={class:"space-y-3"},ij=["onClick"],nj={class:"flex items-start gap-3"},rj={class:"font-semibold text-gray-900 dark:text-white"},oj={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},lj={key:1},aj={id:"git"},uj={id:"scaffold"},cj={id:"packages"},dj={key:0,class:"space-y-3"},fj={class:"flex flex-col gap-3"},hj={class:"grid gap-3 grid-cols-[1fr_160px]"},pj={class:"flex items-center justify-between"},mj={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mb-4"},gj={class:"mt-4"},vj={class:"text-sm text-gray-600 dark:text-gray-300 mb-4"},yj={class:"flex gap-3 justify-end"},bj={class:"text-sm text-gray-600 dark:text-gray-300"},kj={class:"flex gap-3 justify-end"},lc="overview",Bm="project",xj="Settings",wj="Manage defaults shared across new projects.",Sj=`# Framework environment defaults
# Populate these values before running scaffold() or publishing.

# PostgreSQL connection
POSTGRES_HOST=127.0.0.1
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_SCHEMA=public
POSTGRES_USER=postgres
POSTGRES_PASSWORD=


# S3-compatible storage (AWS S3, MinIO, etc.)
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=
S3_REGION=us-east-1
S3_ENDPOINT=`,_j={__name:"SettingsView",setup(s){const e=tu(),t=Xa(),i=$r(),n=[{id:"overview",label:"Overview",slug:"overview",icon:Za},{id:"basics",label:"Basics",slug:"basics",icon:zd},{id:"structure",label:"Project Structure",slug:"project-structure",icon:ma},{id:"packages",label:"Packages",slug:"packages-dependencies",icon:Hd},{id:"ai",label:"AI Assistants",slug:"ai-assistants",svgIcon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},{id:"git",label:"Git & Hooks",slug:"git-hooks",svgIcon:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"},{id:"connections-defaults",label:"Connections",slug:"connections",icon:Wd},{id:"env-defaults",label:".env Defaults",slug:"env",icon:eu},{id:"scaffold",label:"Scaffold Behavior",slug:"scaffold-behavior",svgIcon:"M256 64L576 64L576 576L64 576L64 192L256 192L256 64zM256 224L96 224L96 544L256 544L256 224zM288 544L544 544L544 96L288 96L288 544zM440 152L488 152L488 200L440 200L440 152zM392 152L392 200L344 200L344 152L392 152zM440 248L488 248L488 296L440 296L440 248zM392 248L392 296L344 296L344 248L392 248zM152 280L200 280L200 328L152 328L152 280zM392 344L392 392L344 392L344 344L392 344zM152 376L200 376L200 424L152 424L152 376zM488 344L488 392L440 392L440 344L488 344z",svgViewBox:"0 0 640 640",svgFill:"currentColor",svgStroke:"none",svgStrokeWidth:0,svgPathFill:"currentColor"},{id:"templates",label:"Templates",slug:"templates",icon:Ac}],r=Object.fromEntries(n.map(({id:P,slug:E})=>[P,E])),o=Object.fromEntries(n.map(({id:P,slug:E})=>[E,P])),l={project:{label:"Standard Project Structure",description:"General-purpose analysis project with notebooks, scripts, and shared outputs.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_raw:"inputs/raw",inputs_intermediate:"inputs/intermediate",inputs_final:"inputs/final",docs:"docs",outputs_tables:"outputs/tables",outputs_figures:"outputs/figures",outputs_models:"outputs/models",outputs_reports:"outputs/reports",cache:"outputs/cache",scratch:"scratch"},render_dirs:{notebooks:"outputs/notebooks",docs:"outputs/docs"},quarto:{render_dir:"outputs/notebooks"},notebook_template:"notebook",extra_directories:[]},project_sensitive:{label:"Privacy Sensitive Project Structure",description:"Projects handling PHI/PII with dedicated private/public data flows.",directories:{functions:"R/functions",notebooks:"notebooks",scripts:"scripts",inputs_private_raw:"inputs/private/raw",inputs_private_intermediate:"inputs/private/intermediate",inputs_private_final:"inputs/private/final",inputs_public_raw:"inputs/public/raw",inputs_public_intermediate:"inputs/public/intermediate",inputs_public_final:"inputs/public/final",outputs_private_tables:"outputs/private/tables",outputs_private_figures:"outputs/private/figures",outputs_private_models:"outputs/private/models",outputs_private_docs:"outputs/private/docs",outputs_private_data_final:"outputs/private/data_final",outputs_public_tables:"outputs/public/tables",outputs_public_figures:"outputs/public/figures",outputs_public_models:"outputs/public/models",outputs_public_docs:"outputs/public/docs",outputs_public_data_final:"outputs/public/data_final",cache:"outputs/private/cache",scratch:"scratch"},quarto:{render_dir:"outputs/public/docs"},notebook_template:"notebook",extra_directories:[]},presentation:{label:"Presentation Structure",description:"Single talk or slide deck with minimal analysis scaffolding.",directories:{presentation_source:"presentation.qmd",rendered_slides:"."},quarto:{render_dir:"."},notebook_template:"notebook",extra_directories:[]},course:{label:"Course Structure",description:"Courses with modules, assignments, and lecture materials.",directories:{data:"data",slides:"slides",assignments:"assignments",course_docs:"course_docs",readings:"readings",notebooks:"modules"},quarto:{render_dir:"course_docs"},notebook_template:"notebook",extra_directories:[]}},a=ie(JSON.parse(JSON.stringify(l))),c={project:"project",project_sensitive:"sensitive-project",presentation:"presentation",course:"course"},u=Object.fromEntries(Object.entries(c).map(([P,E])=>[E,P])),d={project:"Tune the standard analysis layoutfunctions, notebooks, inputs, and outputs live here by default.",project_sensitive:"Private and public inputs stay separate so sensitive data never leaves restricted folders.",presentation:"Control where your presentation source lives and where rendered slides are written.",course:"Adjust the folders used for slides, assignments, readings, and course documentation."},h=P=>String(P).replace(/_/g," ").replace(/\b\w/g,E=>E.toUpperCase()),m=ie(null),y=[{key:"notebooks",label:"Notebooks",hint:"Quarto or R Markdown notebooks for analysis.",defaultRenderDir:"outputs/notebooks"},{key:"docs",label:"Documentation",hint:"Codebooks, documentation, and other reference materials.",defaultRenderDir:"outputs/docs"}],x=[{key:"functions",label:"Functions",hint:"R files here are sourced by scaffold(), so helper functions are available in every project session."},{key:"scripts",label:"Scripts",hint:"Reusable R scripts, job runners, or automation tasks."}],S=[...y,...x],p=[{key:"inputs_raw",label:"Raw data",hint:"Read-only exports from source systems."},{key:"inputs_intermediate",label:"Intermediate data",hint:"Data after light cleaning or pre-processing steps."},{key:"inputs_final",label:"Analysis-ready data",hint:"Final inputs ready for modeling or reporting."}],j=[{key:"outputs_tables",label:"Tables",hint:"Publishable tables ready for reports or manuscripts."},{key:"outputs_figures",label:"Figures",hint:"Final plots and graphics."},{key:"outputs_models",label:"Models",hint:"Serialized models or model summaries."},{key:"outputs_reports",label:"Reports",hint:"Final reports and deliverables ready for publication."}],B=[{key:"cache",label:"Cache",hint:"Temporary artifacts (gitignored)."},{key:"scratch",label:"Scratch",hint:"Short-lived explorations (gitignored)."}],G=[{privateKey:"inputs_private_raw",publicKey:"inputs_public_raw",label:"Raw data",privateLabel:"Raw data (private)",publicLabel:"Raw data (public)"},{privateKey:"inputs_private_intermediate",publicKey:"inputs_public_intermediate",label:"Intermediate data",privateLabel:"Intermediate data (private)",publicLabel:"Intermediate data (public)"},{privateKey:"inputs_private_final",publicKey:"inputs_public_final",label:"Analysis-ready data",privateLabel:"Analysis-ready data (private)",publicLabel:"Analysis-ready data (public)"}],N=[{privateKey:"outputs_private_tables",publicKey:"outputs_public_tables",label:"Tables",privateLabel:"Tables (private)",publicLabel:"Tables (public)"},{privateKey:"outputs_private_figures",publicKey:"outputs_public_figures",label:"Figures",privateLabel:"Figures (private)",publicLabel:"Figures (public)"},{privateKey:"outputs_private_models",publicKey:"outputs_public_models",label:"Models",privateLabel:"Models (private)",publicLabel:"Models (public)"},{privateKey:"outputs_private_reports",publicKey:"outputs_public_reports",label:"Reports",privateLabel:"Reports (private)",publicLabel:"Reports (public)"}],O=(P,E)=>m.value?.project_types?.[P]?.directories?.[E]||{},_=(P,E)=>E.map(H=>{const pe=O(P,H.key);return{key:H.key,label:pe.label||H.label,hint:pe.hint||H.hint||""}});W(()=>_("project",S)),W(()=>_("project",y).map(P=>({...P,defaultRenderDir:y.find(E=>E.key===P.key)?.defaultRenderDir||""}))),W(()=>_("project",x)),W(()=>_("project",p)),W(()=>_("project",j)),W(()=>_("project",B));const V=P=>P.map(E=>{const H=O("project_sensitive",E.privateKey),pe=O("project_sensitive",E.publicKey);return{...E,privateLabel:H.label||E.privateLabel,publicLabel:pe.label||E.publicLabel}});W(()=>V(G)),W(()=>V(N)),W(()=>{const P=Q.value;return!P||!m.value?.project_types?.[P]?.settings?[]:m.value.project_types[P].settings});const K={include_inputs:"data",include_scripts:"scripts",include_functions:"functions"},oe=W(()=>{const P=m.value?.project_types?.presentation?.optional_toggles||{};return{inputs:P.include_inputs?.default_path||K.include_inputs,scripts:P.include_scripts?.default_path||K.include_scripts,functions:P.include_functions?.default_path||K.include_functions}}),ne={"CLAUDE.md":"ai_claude","AGENTS.md":"ai_agents",".github/copilot-instructions.md":"ai_copilot"},R=ie(lc),le=ie(!1),se=ie(new Set),$=ie({projects_root:"",project_types:JSON.parse(JSON.stringify(a.value)),author:{name:"",email:"",affiliation:""},defaults:{project_type:"project",notebook_format:"quarto",ide:"vscode",positron:!1,use_git:!0,use_renv:!1,seed:"",seed_on_scaffold:!1,ai_support:!0,ai_assistants:["claude"],ai_canonical_file:"CLAUDE.md",scaffold:{source_all_functions:!0,set_theme_on_scaffold:!0,ggplot_theme:"theme_minimal",seed_on_scaffold:!1,seed:""},directories:JSON.parse(JSON.stringify(a.value.project.directories)),git_hooks:{ai_sync:!1,data_security:!1,check_sensitive_dirs:!1},packages:{use_renv:!1,default_packages:[{name:"dplyr",source:"cran",auto_attach:!0},{name:"ggplot2",source:"cran",auto_attach:!0}]},env:{raw:""}},git:{user_name:"",user_email:""},privacy:{secret_scan:!1,gitignore_template:"gitignore"}}),q=Is({includeInputs:!1,includeScripts:!1,includeFunctions:!1}),Y=Is({project:{},project_sensitive:{},course:{},presentation:{}}),de=P=>(Y[P]||(Y[P]={}),Y[P]),ye=ie(!1),Ke=Is({claude:!0,agents:!1,copilot:!1}),_e=Is({open:!1,name:"",title:"",description:"",contents:"",loading:!1}),Le=ie(""),rt=ie({}),ct=ie("grouped"),dt=ie(!1),st=ie({}),U=ie(!1),J=W(()=>Object.keys(rt.value||{}).length),C=P=>m.value?.project_types?.[P]?.label||P,X=W(()=>{const P=$.value.projects_root||"",E=$.value.author?.name||"",H=$.value.defaults?.project_type||"project",pe=C(H),ve=$.value.defaults?.notebook_format||"quarto",ze=$.value.ai_config?.enabled||!1,Se=$.value.ai_config?.provider||"",Ie=$.value.ai_config?.canonical_file||"",Ct=$.value.git?.auto_init||!1,Je=$.value.packages?.length||0,qi=J.value;return[{id:"basics",title:"Basics",section:"basics",content:`${P}  ${E}`},{id:"structure",title:"Project Structure",section:"structure",content:pe},{id:"notebooks",title:"Notebooks & Scripts",section:"scaffold",content:ve},{id:"packages",title:"Packages",section:"packages",content:Je===0?"No default packages":`${Je} packages`},{id:"env",title:".env Defaults",section:"env-defaults",content:`${qi} variables`},{id:"ai",title:"AI Assistants",section:"ai",content:ze?`<span class="text-green-600 dark:text-green-400">${Se}  ${Ie}</span>`:'<span class="text-gray-600 dark:text-gray-400">Disabled</span>'},{id:"git",title:"Git & Hooks",section:"git",content:Ct?"Auto-initialize repositories":"Manual initialization"}]}),Oe=ie([]),D=ie([]),T=ie(null),F=ie(null),re=Is({open:!1,projectTypeKey:null,projectTypeName:""}),ue=Is({notebook:{loading:!1,contents:""},script:{loading:!1,contents:""},presentation:{loading:!1,contents:""},canonical:{loading:!1,contents:""},gitignore_project:{loading:!1,contents:""},gitignore_project_sensitive:{loading:!1,contents:""},gitignore_course:{loading:!1,contents:""},gitignore_presentation:{loading:!1,contents:""}}),ce=W(()=>Object.entries($.value.project_types||{})),Ce=W(()=>ce.value.map(([P,E])=>({key:P,label:(E.label||h(P)).replace(/ Structure$/i,""),slug:c[P]||P}))),xe=[{id:"templates-notebook",label:"Notebook"},{id:"templates-script",label:"Script"},{id:"templates-presentation",label:"Presentation"}],we=W(()=>"# Connections section temporarily disabled for debugging"),Q=W(()=>{const P=i.params.subsection;return P?u[P]||Bm:null}),Re=W(()=>{const P=Q.value;return P&&$.value.project_types?.[P]||null}),ke={overview:{title:"Overview",description:"Overview of your Framework global settings and preferences."},"connections-defaults":{title:"Connections",description:"Database and storage connections that every new project will inherit."},basics:{title:"Basics",description:"Essential settings for new projects."},author:{title:"Author Information",description:"Defaults that populate README files and notebook headers when scaffold() runs."},workflow:{title:"Editor & Workflow",description:"Control how Framework scaffolds projects in your preferred tools."},structure:{title:"Project Structure Defaults",description:"Choose a project type to configure its directory structure and default settings."},templates:{title:"Templates",description:"Edit the starter templates Framework uses for notebooks, scripts, and presentations."},ai:{title:"AI Assistants",description:"Manage assistant support, canonical context files, and sync hooks."},git:{title:"Git & Hooks",description:"Configure repository initialization, commit identity, git hooks, and security scanning."},scaffold:{title:"Scaffold Behavior",description:"Automatic actions Framework performs when scaffold() runs."},packages:{title:"Packages & Dependencies",description:"Define dependency defaults and auto-attach behavior for new projects."},"env-defaults":{title:".env Defaults",description:"Template applied to every new project so core connections work immediately."}},$e=W(()=>ke[R.value]||{title:xj,description:wj}),Fe=W(()=>R.value==="structure"&&Re.value?Re.value.label||h(Q.value):$e.value.title),qe=W(()=>R.value==="structure"&&Re.value&&(Re.value.description||d[Q.value])||$e.value.description);W(()=>$.value.privacy.gitignore_template||"gitignore"),W(()=>{const P=new Set,E=$.value.project_types||{},H=E.project_sensitive?.directories||{};for(const ve of Object.values(H))typeof ve=="string"&&ve.trim()&&ve.includes("private")&&P.add(ve.replace(/^\/+/,""));const pe=E.project?.directories||{};return["cache","scratch"].forEach(ve=>{const ze=pe[ve];typeof ze=="string"&&ze.trim()&&P.add(ze.replace(/^\/+/,""))}),Array.from(P).sort()});const it=W(()=>ne[$.value.defaults.ai_canonical_file]||"ai_claude"),Ze=(P,E)=>{const H={section:P||void 0};return E&&(H.subsection=E),t.resolve({name:"settings",params:H}).href},xt=(P,E)=>{const H={};P&&(H.section=P),E&&(H.subsection=E);const pe=i.params.section||void 0,ve=i.params.subsection||void 0,ze=H.section||void 0,Se=H.subsection||void 0;return pe===ze&&ve===Se?Promise.resolve():t.replace({name:"settings",params:H}).catch(()=>{})};Ne(()=>i.params.section,P=>{if(!P){xt(r[lc],void 0);return}const E=o[P]||lc;if(R.value=E,!o[P]){xt(r[E],void 0);return}},{immediate:!0});const He=(P,E="")=>Array.isArray(P)?P.length>0?He(P[0],E):E:P??E,z=(P,E=!1)=>{const H=He(P,E);return typeof H=="boolean"?H:typeof H=="string"?["true","1","yes"].includes(H.toLowerCase()):!!H},M=P=>Array.isArray(P)?P.flatMap(E=>Array.isArray(E)?E:[E]).filter(Boolean):[],k=(P={},E={})=>{const H={...E};for(const[pe,ve]of Object.entries(P||{})){const ze=He(ve,null);ze===null||ze===""?delete H[pe]:H[pe]=ze}return H},te=(P,E)=>{const H=a.value[P]||{render_dirs:{},quarto:{},extra_directories:[]};return{label:He(E?.label,H.label||h(P)),description:He(E?.description,H.description||""),ggplot_theme:He(E?.ggplot_theme,"theme_minimal"),set_theme_on_scaffold:z(E?.set_theme_on_scaffold,!0),directories:k(E?.directories,{}),render_dirs:k(E?.render_dirs,H.render_dirs||{}),quarto:{render_dir:He(E?.quarto?.render_dir,H.quarto?.render_dir||".")},notebook_template:He(E?.notebook_template,H.notebook_template||"notebook"),extra_directories:Array.isArray(E?.extra_directories)?E.extra_directories:H.extra_directories||[]}},ge=P=>{if(!P||!P.project_types)return;const E={};for(const[H,pe]of Object.entries(P.project_types)){const ve=l[H]||{},ze={};for(const[Ie,Ct]of Object.entries(pe.directories||{})){const Je=ve.directories?.[Ie]||"";ze[Ie]=He(Ct?.default,Je)}const Se={};for(const[Ie,Ct]of Object.entries(pe.render_dirs||{})){const Je=ve.render_dirs?.[Ie]||"";Se[Ie]=He(Ct?.default,Je)}E[H]={label:He(pe.label,ve.label||h(H)),description:He(pe.description,ve.description||""),directories:ze,render_dirs:Se,quarto:{render_dir:He(pe.quarto?.render_dir?.default,ve.quarto?.render_dir||".")},notebook_template:He(pe.notebook_template?.default,ve.notebook_template||"notebook"),optional_toggles:pe.optional_toggles||{}}}for(const[H,pe]of Object.entries(l))E[H]||(E[H]=JSON.parse(JSON.stringify(pe)));a.value=E},tt=(P,E,H)=>{if(!$.value.project_types?.presentation)return;const pe=$.value.project_types.presentation.directories||($.value.project_types.presentation.directories={});E?(!pe[P]||pe[P]==="")&&(pe[P]=H):Object.prototype.hasOwnProperty.call(pe,P)&&delete pe[P]},Ot=async(P,E=P)=>{if(ue[E]){ue[E].loading=!0;try{const H=await fetch(`/api/templates/${P}`);if(!H.ok)throw new Error("Request failed");const pe=await H.json();ue[E].contents=pe.contents||""}catch{e.error("Template Error","Unable to load template contents.")}finally{ue[E].loading=!1}}};Ne(Ke,P=>{if(ye.value){console.log("[watch:aiAssistants] Skipped - loading");return}console.log("[watch:aiAssistants] Triggered",P);const E=[];P.claude&&E.push("claude"),P.copilot&&E.push("copilot"),P.agents&&E.push("agents"),$.value.defaults.ai_assistants=E},{deep:!0}),Ne(()=>$.value.defaults.ai_canonical_file,async()=>{ye.value||await Ot(it.value,"canonical")}),Ne(()=>$.value.defaults.git_hooks.data_security,P=>{ye.value||$.value.privacy.secret_scan!==P&&($.value.privacy.secret_scan=P)}),Ne(()=>$.value.privacy.secret_scan,P=>{ye.value||$.value.defaults.git_hooks.data_security!==P&&($.value.defaults.git_hooks.data_security=P)}),Ne(()=>q.includeInputs,P=>{ye.value||tt("inputs",P,oe.value.inputs)}),Ne(()=>q.includeScripts,P=>{ye.value||tt("scripts",P,oe.value.scripts)}),Ne(()=>q.includeFunctions,P=>{ye.value||tt("functions",P,oe.value.functions)}),Ne(Y,P=>{if(!ye.value)for(const[E,H]of Object.entries(P)){if(!$.value.project_types?.[E])continue;const pe=$.value.project_types[E].directories||{},ve=$.value.project_types[E].render_dirs||{},ze=m.value?.project_types?.[E]?.directories||{},Se=m.value?.project_types?.[E]?.render_dirs||{};for(const[Ie,Ct]of Object.entries(H))if(Ct===!1)Object.prototype.hasOwnProperty.call(pe,Ie)&&delete $.value.project_types[E].directories[Ie],Object.prototype.hasOwnProperty.call(ve,Ie)&&delete $.value.project_types[E].render_dirs[Ie];else if(Ct===!0){if(!Object.prototype.hasOwnProperty.call(pe,Ie)){const Je=ze[Ie]?.default||"";$.value.project_types[E].directories[Ie]=Je}if(Se[Ie]&&!Object.prototype.hasOwnProperty.call(ve,Ie)){const Je=Se[Ie]?.default||"";Je&&($.value.project_types[E].render_dirs[Ie]=Je)}}}},{deep:!0}),Ne(rt,P=>{ye.value||(st.value=Ur(P))},{deep:!0});const yt=P=>{(P.metaKey||P.ctrlKey)&&P.key==="s"&&(P.preventDefault(),zr())},Tt=(P,E)=>{const H=$.value.project_types?.[P]?.directories;return!!H&&Object.prototype.hasOwnProperty.call(H,E)},ks=P=>{a.value[P]&&(re.projectTypeKey=P,re.projectTypeName=$.value.project_types[P]?.label||h(P),re.open=!0)},xs=()=>{const P=re.projectTypeKey;a.value[P]&&($.value.project_types[P]=JSON.parse(JSON.stringify(a.value[P])),P==="presentation"&&(q.includeInputs=!1,q.includeScripts=!1,q.includeFunctions=!1),re.open=!1,e.success("Reset Complete",`${re.projectTypeName} has been reset to defaults`))},li=async()=>{try{_e.loading=!0,await fetch(`/api/templates/${_e.name}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:_e.contents})}),e.success("Template Saved","Your changes have been saved."),_e.open=!1}catch{e.error("Save Failed","Could not save template changes.")}finally{_e.loading=!1}},xn=()=>{$.value.defaults.packages.default_packages||($.value.defaults.packages.default_packages=[]),$.value.defaults.packages.default_packages.push({name:"",source:"cran",auto_attach:!1})},Wi=P=>{$.value.defaults.packages.default_packages.splice(P,1)},es=P=>{const E=document.getElementById(P);E&&E.scrollIntoView({behavior:"smooth",block:"start"})},Ai=P=>{switch(P){case"project":return`project-${P}-inputs`;case"project_sensitive":return`project-${P}-workspaces`;case"presentation":return`project-${P}-primary`;case"course":return`project-${P}-core`;default:return`project-${P}`}},Jn=async P=>{const E=n.find(pe=>pe.id===P);if(!E)return;const H=(E.id==="structure",void 0);await xt(E.slug,H),await Qs(),es(E.id)},Ki=async P=>{const E=c[P]||c[Bm];await xt("project-structure",E),await Qs(),es(Ai(P))};Ne(()=>Q.value,(P,E)=>{R.value==="structure"&&(!P||P===E||Qs(()=>es(Ai(P))))});const Br=async()=>{try{console.log("[loadSettings] Starting load, setting isLoadingSettings = true"),ye.value=!0;const[P,E]=await Promise.all([fetch("/api/settings/catalog"),fetch("/api/settings/get")]);if(!P.ok)throw new Error("Failed to load settings catalog");if(!E.ok)throw new Error("Failed to load settings payload");console.log("[loadSettings] Responses received, parsing JSON");const H=await P.json();m.value=H,ge(H);const pe=await E.json();if(console.log("[loadSettings] Settings data:",pe),$.value.projects_root=He(pe.global?.projects_root||pe.projects_root,""),pe.project_types){const ve={},ze={...a.value,...pe.project_types};for(const[Se,Ie]of Object.entries(ze))ve[Se]=te(Se,Ie);$.value.project_types=ve;for(const Se of Object.keys($.value.project_types))$.value.project_types[Se].render_dirs||($.value.project_types[Se].render_dirs={})}q.includeInputs=Tt("presentation","inputs"),q.includeScripts=Tt("presentation","scripts"),q.includeFunctions=Tt("presentation","functions");for(const ve of["project","project_sensitive","course","presentation"]){const ze=$.value.project_types?.[ve]?.directories||{},Se=H?.project_types?.[ve]?.directories||{},Ie=de(ve);for(const Je of Object.keys(Se))Ie[Je]=Object.prototype.hasOwnProperty.call(ze,Je);for(const Je of Object.keys(ze))Object.prototype.hasOwnProperty.call(Se,Je)||(Ie[Je]=!0);($.value.project_types?.[ve]?.extra_directories||[]).forEach(Je=>{Je.key&&($.value.project_types[ve].directories_enabled&&$.value.project_types[ve].directories_enabled[Je.key]===!1?Ie[Je.key]=!1:Ie[Je.key]=!0)})}if(pe.author&&($.value.author={name:He(pe.author.name,""),email:He(pe.author.email,""),affiliation:He(pe.author.affiliation,"")}),pe.defaults){const ve=pe.defaults;$.value.defaults.project_type=He(ve.project_type,"project"),$.value.defaults.notebook_format=He(ve.notebook_format,"quarto"),$.value.defaults.ide=He(ve.ide,"vscode"),$.value.defaults.positron=z(ve.positron,!1),$.value.defaults.use_git=z(ve.use_git,!0),$.value.defaults.use_renv=z(ve.use_renv,!1),$.value.defaults.ai_support=z(ve.ai_support,!0),$.value.defaults.ai_canonical_file=He(ve.ai_canonical_file,"CLAUDE.md");const ze=M(ve.ai_assistants);ze.length&&($.value.defaults.ai_assistants=ze,Ke.claude=ze.includes("claude"),Ke.copilot=ze.includes("copilot"),Ke.agents=ze.includes("agents")),ve.git_hooks&&($.value.defaults.git_hooks={...$.value.defaults.git_hooks,...Object.fromEntries(Object.entries(ve.git_hooks).map(([Se,Ie])=>[Se,z(Ie,$.value.defaults.git_hooks[Se])]))},$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security),ve.scaffold&&($.value.defaults.scaffold={source_all_functions:z(ve.scaffold.source_all_functions,!0),set_theme_on_scaffold:z(ve.scaffold.set_theme_on_scaffold,!0),ggplot_theme:He(ve.scaffold.ggplot_theme,"theme_minimal"),seed_on_scaffold:z(ve.scaffold.seed_on_scaffold,!1),seed:He(ve.scaffold.seed,"")}),ve.packages&&(ve.packages.default_packages?$.value.defaults.packages={use_renv:z(ve.packages.use_renv,!1),default_packages:(ve.packages.default_packages||[]).map(Se=>({name:He(Se.name,""),source:He(Se.source,"cran"),auto_attach:z(Se.auto_attach,!1)}))}:Array.isArray(ve.packages)&&($.value.defaults.packages={use_renv:!1,default_packages:ve.packages.map(Se=>({name:He(Se.name,""),source:He(Se.source,"cran"),auto_attach:z(Se.auto_attach,!1)}))})),ve.directories?$.value.defaults.directories={...$.value.defaults.directories,...Object.fromEntries(Object.entries(ve.directories).map(([Se,Ie])=>[Se,He(Ie,$.value.defaults.directories[Se]||"")]))}:$.value.project_types.project&&($.value.defaults.directories={...$.value.defaults.directories,...$.value.project_types.project.directories}),Yn(ve.env),Fr(ve.connections)}pe.defaults||(Yn(null),Fr(null)),pe.git&&($.value.git={user_name:He(pe.git.user_name,""),user_email:He(pe.git.user_email,"")}),pe.privacy?($.value.privacy.secret_scan=z(pe.privacy.secret_scan,$.value.defaults.git_hooks.data_security),$.value.privacy.gitignore_template=He(pe.privacy.gitignore_template,"gitignore")):$.value.privacy.secret_scan=$.value.defaults.git_hooks.data_security,await Ot(it.value,"canonical"),console.log("[loadSettings] Load complete, about to set isLoadingSettings = false")}catch(P){console.error("[loadSettings] Error during load:",P),e.error("Load Failed","Unable to load current settings.")}finally{ye.value=!1,console.log("[loadSettings] isLoadingSettings now false")}},Nr=W({get(){const P=$.value.defaults||{},E=P.git_hooks||{},H=$.value.git||{};return{initialize:P.use_git!==!1,user_name:H.user_name||"",user_email:H.user_email||"",hooks:{ai_sync:E.ai_sync||!1,data_security:E.data_security||!1,check_sensitive_dirs:E.check_sensitive_dirs||!1}}},set(P){if(ye.value){console.log("[gitPanelModel setter] Blocked during load");return}$.value.defaults.use_git=P.initialize,$.value.git=$.value.git||{},$.value.git.user_name=P.user_name,$.value.git.user_email=P.user_email,$.value.defaults.git_hooks=$.value.defaults.git_hooks||{},$.value.defaults.git_hooks.ai_sync=P.hooks.ai_sync,$.value.defaults.git_hooks.data_security=P.hooks.data_security,$.value.defaults.git_hooks.check_sensitive_dirs=P.hooks.check_sensitive_dirs}}),wn=W({get(){const P=$.value.defaults?.scaffold||{};return{source_all_functions:P.source_all_functions!==!1,set_theme_on_scaffold:P.set_theme_on_scaffold!==!1,ggplot_theme:P.ggplot_theme||"theme_minimal",seed_on_scaffold:P.seed_on_scaffold||!1,seed:P.seed||""}},set(P){if(ye.value){console.log("[scaffoldPanelModel setter] Blocked during load");return}$.value.defaults.scaffold={...$.value.defaults.scaffold||{},source_all_functions:P.source_all_functions,set_theme_on_scaffold:P.set_theme_on_scaffold,ggplot_theme:P.ggplot_theme,seed_on_scaffold:P.seed_on_scaffold,seed:P.seed}}}),ai=(P,E)=>{const H=$.value.project_types[P];return!H||!Array.isArray(H.extra_directories)?[]:H.extra_directories.filter(pe=>pe.type===E&&!se.value.has(pe._id))},cs=(P,E)=>{const H=$.value.project_types[P];return!H||!Array.isArray(H.extra_directories)?[]:H.extra_directories.filter(pe=>pe.type===E&&se.value.has(pe._id))},ui=(P,E,H)=>{const pe=$.value.project_types[P];if(!pe)return;Array.isArray(pe.extra_directories)||(pe.extra_directories=[]);const ve=pe.extra_directories.filter(Se=>Se&&Se.type!==E),ze=H.map(Se=>({...Se,type:E}));pe.extra_directories=[...ve,...ze]};W({get(){return cs(Q.value,"input_private")},set(P){if(!$.value.project_types[Q.value])return;cs(Q.value,"input_private").filter(Se=>!P.some(Ie=>Ie._id===Se._id)).forEach(Se=>{Se._id&&se.value.delete(Se._id)});const ze=[...ai(Q.value,"input_private"),...P];ui(Q.value,"input_private",ze),P.forEach(Se=>{Se._id&&!se.value.has(Se._id)&&se.value.add(Se._id)})}}),W({get(){return cs(Q.value,"input_public")},set(P){if(!$.value.project_types[Q.value])return;cs(Q.value,"input_public").filter(Se=>!P.some(Ie=>Ie._id===Se._id)).forEach(Se=>{Se._id&&se.value.delete(Se._id)});const ze=[...ai(Q.value,"input_public"),...P];ui(Q.value,"input_public",ze),P.forEach(Se=>{Se._id&&!se.value.has(Se._id)&&se.value.add(Se._id)})}}),W({get(){return cs(Q.value,"output_private")},set(P){if(!$.value.project_types[Q.value])return;const pe=[...ai(Q.value,"output_private"),...P];ui(Q.value,"output_private",pe),P.forEach(ve=>{ve._id&&!se.value.has(ve._id)&&se.value.add(ve._id)})}}),W({get(){return cs(Q.value,"output_public")},set(P){if(!$.value.project_types[Q.value])return;const pe=[...ai(Q.value,"output_public"),...P];ui(Q.value,"output_public",pe),P.forEach(ve=>{ve._id&&!se.value.has(ve._id)&&se.value.add(ve._id)})}}),W({get(){return cs(Q.value,"workspace")},set(P){if(!$.value.project_types[Q.value])return;cs(Q.value,"workspace").filter(Se=>!P.some(Ie=>Ie._id===Se._id)).forEach(Se=>{Se._id&&se.value.delete(Se._id)});const ze=[...ai(Q.value,"workspace"),...P];ui(Q.value,"workspace",ze),P.forEach(Se=>{Se._id&&!se.value.has(Se._id)&&se.value.add(Se._id)})}}),W({get(){return cs(Q.value,"input")},set(P){if(!$.value.project_types[Q.value])return;cs(Q.value,"input").filter(Se=>!P.some(Ie=>Ie._id===Se._id)).forEach(Se=>{Se._id&&se.value.delete(Se._id)});const ze=[...ai(Q.value,"input"),...P];ui(Q.value,"input",ze),P.forEach(Se=>{Se._id&&!se.value.has(Se._id)&&se.value.add(Se._id)})}}),W({get(){return cs(Q.value,"output")},set(P){if(!$.value.project_types[Q.value])return;cs(Q.value,"output").filter(Se=>!P.some(Ie=>Ie._id===Se._id)).forEach(Se=>{Se._id&&se.value.delete(Se._id)});const ze=[...ai(Q.value,"output"),...P];ui(Q.value,"output",ze),P.forEach(Se=>{Se._id&&!se.value.has(Se._id)&&se.value.add(Se._id)})}});const ll=(P="")=>{const E={};return P.split(/\r?\n/).forEach(H=>{const pe=H.trim();if(!pe||pe.startsWith("#")||!pe.includes("="))return;const[ve,...ze]=pe.split("=");E[ve.trim()]=ze.join("=").replace(/^"|"$/g,"")}),E},al=(P={})=>Object.entries(P).map(([E,H])=>`${E}=${H??""}`).join(`
`);function Ur(P={}){const E=Object.entries(P);return E.length?E.reduce((H,[pe,ve])=>{const ze=pe.includes("_")?pe.split("_")[0]:"Other";return H[ze]||(H[ze]={}),H[ze][pe]={defined:!!ve,used:!1,used_in:[],value:ve},H},{}):{}}const Yn=P=>{let E=Sj;typeof P=="string"?E=P:P?.raw?E=P.raw:P?.variables&&(E=al(P.variables)),Le.value=E,rt.value=ll(E),st.value=Ur(ll(E)),ct.value="grouped"},Fr=P=>{const E=P?.databases||{},H=P?.storage_buckets||{};T.value=P?.default_database||null,F.value=P?.default_storage_bucket||null;const pe=Object.entries(E).filter(([ze])=>ze!=="framework_db").map(([ze,Se])=>({_id:ze,name:ze,...Se})),ve=Object.entries(H).map(([ze,Se])=>({_id:ze,name:ze,...Se}));Oe.value=pe,D.value=ve},zr=async()=>{try{le.value=!0;const P=$.value.projects_root?.trim()||"",E=JSON.parse(JSON.stringify($.value));E.global||(E.global={}),E.global.projects_root=P||null,delete E.projects_root,E.defaults.scaffold&&(E.defaults.scaffold.seed=E.defaults.scaffold.seed===""?null:E.defaults.scaffold.seed),E.defaults.seed=E.defaults.seed===""?null:E.defaults.seed,E.defaults.packages&&E.defaults.packages.default_packages&&(E.defaults.packages.default_packages=(E.defaults.packages.default_packages||[]).filter(Ie=>Ie.name&&Ie.name.trim()!=="")),E.defaults.env={raw:Le.value||""};const H={};Oe.value.forEach(Ie=>{const{_id:Ct,name:Je,...qi}=Ie;H[Je]=qi});const pe={};D.value.forEach(Ie=>{const{_id:Ct,name:Je,...qi}=Ie;pe[Je]=qi}),E.defaults.connections={default_database:T.value,default_storage_bucket:F.value,databases:H,storage_buckets:pe},E.defaults.directories=E.project_types?.project?.directories||E.defaults.directories,E.defaults.git_hooks.data_security=E.privacy.secret_scan,E.git=E.git||{user_name:"",user_email:""};for(const Ie in Y)E.project_types[Ie]&&(E.project_types[Ie].directories_enabled={...Y[Ie]});for(const Ie in E.project_types){const Ct=E.project_types[Ie];Ct.extra_directories&&Array.isArray(Ct.extra_directories)&&(console.log(`[Save] Before filter (${Ie}):`,{count:Ct.extra_directories.length,items:Ct.extra_directories.map(Je=>({key:Je.key,enabled:Ct.directories_enabled?.[Je.key]}))}),Ct.extra_directories=Ct.extra_directories.filter(Je=>!Je.key||Je.key.trim()===""||!Je.label||Je.label.trim()===""||!Je.path||Je.path.trim()===""||!Je.type||Je.type.trim()===""?(console.log("[Save] Filtering out incomplete item:",Je.key),!1):Ct.directories_enabled&&Ct.directories_enabled[Je.key]===!1?(console.log("[Save] Filtering out disabled item:",Je.key),!1):!0),console.log(`[Save] After filter (${Ie}):`,{count:Ct.extra_directories.length,items:Ct.extra_directories.map(Je=>Je.key)}))}const ve=await fetch("/api/settings/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});if(!ve.ok){const Ie=await ve.text();throw new Error("Failed to save settings")}const ze=await ve.json();if((await Promise.all([fetch("/api/templates/notebook",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.notebook.contents})}),fetch("/api/templates/script",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.script.contents})}),fetch("/api/templates/presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.presentation.contents})}),fetch("/api/templates/gitignore-project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.gitignore_project.contents})}),fetch("/api/templates/gitignore-project_sensitive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.gitignore_project_sensitive.contents})}),fetch("/api/templates/gitignore-course",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.gitignore_course.contents})}),fetch("/api/templates/gitignore-presentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:ue.gitignore_presentation.contents})})])).some(Ie=>!Ie.ok))throw new Error("Template save failed");se.value.clear(),await Br(),e.success("Settings Saved","Your global defaults were updated.")}catch(P){console.error("Failed to save settings:",P),e.error("Save Failed",P?.message||"Review your changes and try again.")}finally{le.value=!1}};return ls(()=>{Br(),Ot("notebook"),Ot("script"),Ot("presentation"),Ot("gitignore-project","gitignore_project"),Ot("gitignore-project_sensitive","gitignore_project_sensitive"),Ot("gitignore-course","gitignore_course"),Ot("gitignore-presentation","gitignore_presentation"),Ot(it.value,"canonical"),window.addEventListener("keydown",yt)}),Pr(()=>{window.removeEventListener("keydown",yt)}),(P,E)=>(g(),v("div",V$,[f("nav",O$,[E[34]||(E[34]=f("h2",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"New Project Defaults",-1)),f("div",P$,[(g(),v(me,null,Ee(n,H=>f("div",{key:H.id},[H.id==="basics"?(g(),be(La,{key:0},{default:Z(()=>[...E[31]||(E[31]=[he("Settings",-1)])]),_:1})):I("",!0),f("a",{href:Ze(H.slug),onClick:Ht(pe=>Jn(H.id),["prevent"]),class:Ae(["flex items-center gap-2 px-3 py-2 rounded-md text-sm transition",R.value===H.id?"bg-sky-50 text-sky-700 font-medium dark:bg-sky-900/20 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800"])},[H.icon?(g(),be(Es(H.icon),{key:0,class:"h-4 w-4"})):H.svgIcon?(g(),v("svg",{key:1,class:"h-4 w-4",fill:H.svgFill??"none",viewBox:H.svgViewBox??"0 0 24 24",stroke:H.svgStroke??"currentColor"},[f("path",{"stroke-linecap":H.svgStrokeLinecap??"round","stroke-linejoin":H.svgStrokeLinejoin??"round","stroke-width":H.svgStrokeWidth??2,fill:H.svgPathFill??"none",d:H.svgIcon},null,8,L$)],8,j$)):I("",!0),he(" "+ee(H.label),1)],10,$$),H.id==="structure"&&R.value==="structure"?(g(),v("div",R$,[(g(!0),v(me,null,Ee(Ce.value,pe=>(g(),v("a",{key:pe.key,href:Ze("project-structure",pe.slug),onClick:Ht(ve=>Ki(pe.key),["prevent"]),class:Ae(["block rounded-md py-1 pl-4 pr-2 text-xs font-medium transition",Q.value===pe.key?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"])},ee(pe.label),11,I$))),128))])):H.id==="templates"&&R.value==="templates"?(g(),v("div",B$,[(g(),v(me,null,Ee(xe,pe=>f("a",{key:pe.id,href:`#${pe.id}`,onClick:Ht(ve=>es(pe.id),["prevent"]),class:"block rounded-md py-1 pl-4 pr-2 text-xs font-medium text-gray-600 transition hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800"},ee(pe.label),9,N$)),64))])):I("",!0)])),64)),w(un,{modelValue:U.value,"onUpdate:modelValue":E[1]||(E[1]=H=>U.value=H),title:".env Variables Preview"},{default:Z(()=>[E[33]||(E[33]=f("p",{class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},[he(" Copy these entries into your projects "),f("code",null,".env"),he(" file so the connections above resolve properly. ")],-1)),f("pre",U$,ee(we.value),1),f("div",F$,[w(Ye,{variant:"primary",onClick:E[0]||(E[0]=H=>U.value=!1)},{default:Z(()=>[...E[32]||(E[32]=[he("Close",-1)])]),_:1})])]),_:1},8,["modelValue"])]),f("div",z$,[w(Ye,{variant:"primary",size:"md",disabled:le.value,onClick:zr,class:"w-full"},{default:Z(()=>[he(ee(le.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),ye.value?(g(),v("div",H$,[...E[35]||(E[35]=[f("div",{class:"text-center"},[f("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-sky-600 border-r-transparent"}),f("p",{class:"mt-4 text-sm text-gray-600 dark:text-gray-400"},"Loading settings...")],-1)])])):I("",!0),nt(f("div",W$,[w(jr,{title:Fe.value,description:qe.value},null,8,["title","description"]),f("div",K$,[nt(f("div",q$,[w(Tf,{cards:X.value,onNavigate:E[2]||(E[2]=H=>R.value=H)},null,8,["cards"])],512),[[mt,R.value==="overview"]]),nt(f("div",G$,[w($f,{"database-connections":Oe.value,"onUpdate:databaseConnections":E[3]||(E[3]=H=>Oe.value=H),"s3-connections":D.value,"onUpdate:s3Connections":E[4]||(E[4]=H=>D.value=H),"default-database":T.value,"onUpdate:defaultDatabase":E[5]||(E[5]=H=>T.value=H),"default-storage-bucket":F.value,"onUpdate:defaultStorageBucket":E[6]||(E[6]=H=>F.value=H)},null,8,["database-connections","s3-connections","default-database","default-storage-bucket"])],512),[[mt,R.value==="connections-defaults"]]),nt(f("div",J$,[w($s,{flush:""},{default:Z(()=>[w(jf,{groups:st.value,variables:rt.value,"onUpdate:variables":E[7]||(E[7]=H=>rt.value=H),"raw-content":Le.value,"onUpdate:rawContent":E[8]||(E[8]=H=>Le.value=H),"view-mode":ct.value,"onUpdate:viewMode":E[9]||(E[9]=H=>ct.value=H),"regroup-on-save":dt.value,"onUpdate:regroupOnSave":E[10]||(E[10]=H=>dt.value=H),"show-save-button":!1,"allow-show-values-toggle":!0},null,8,["groups","variables","raw-content","view-mode","regroup-on-save"]),f("div",Y$,[w(Ye,{variant:"primary",onClick:zr,disabled:le.value},{default:Z(()=>[he(ee(le.value?"Saving":"Save Changes"),1)]),_:1},8,["disabled"])])]),_:1})],512),[[mt,R.value==="env-defaults"]]),nt(f("div",Q$,[w($s,null,{default:Z(()=>[w(xo,null,{default:Z(()=>[f("div",X$,[w(ae,{modelValue:$.value.projects_root,"onUpdate:modelValue":E[11]||(E[11]=H=>$.value.projects_root=H),label:"Default Projects Directory",hint:"New projects will be created in this directory by default",placeholder:"e.g., ~/projects or /Users/yourname/code"},null,8,["modelValue"]),w(T$,{positron:$.value.defaults.positron,"onUpdate:positron":E[12]||(E[12]=H=>$.value.defaults.positron=H),"notebook-format":$.value.defaults.notebook_format,"onUpdate:notebookFormat":E[13]||(E[13]=H=>$.value.defaults.notebook_format=H)},null,8,["positron","notebook-format"]),f("div",Z$,[w(Vf,{modelValue:$.value.author,"onUpdate:modelValue":E[14]||(E[14]=H=>$.value.author=H)},null,8,["modelValue"])])])]),_:1})]),_:1})],512),[[mt,R.value==="basics"]]),nt(f("div",ej,[Q.value?Re.value&&m.value?(g(),v("div",lj,[w(Ab,{"project-type":Q.value,directories:$.value.project_types[Q.value].directories,"onUpdate:directories":E[15]||(E[15]=H=>$.value.project_types[Q.value].directories=H),"render-dirs":$.value.project_types[Q.value].render_dirs,"onUpdate:renderDirs":E[16]||(E[16]=H=>$.value.project_types[Q.value].render_dirs=H),enabled:Y[Q.value],"onUpdate:enabled":E[17]||(E[17]=H=>Y[Q.value]=H),"extra-directories":$.value.project_types[Q.value].extra_directories,"onUpdate:extraDirectories":E[18]||(E[18]=H=>$.value.project_types[Q.value].extra_directories=H),settings:$.value.project_types[Q.value],"onUpdate:settings":E[19]||(E[19]=H=>$.value.project_types[Q.value]=H),gitignore:$.value.project_types[Q.value].gitignore,"onUpdate:gitignore":E[20]||(E[20]=H=>$.value.project_types[Q.value].gitignore=H),catalog:m.value.project_types[Q.value]||{},"new-extra-ids":se.value,"onUpdate:newExtraIds":E[21]||(E[21]=H=>se.value=H),onReset:E[22]||(E[22]=H=>ks(Q.value))},null,8,["project-type","directories","render-dirs","enabled","extra-directories","settings","gitignore","catalog","new-extra-ids"])])):I("",!0):(g(),v("div",tj,[f("div",sj,[(g(!0),v(me,null,Ee(Ce.value,H=>(g(),v("button",{key:H.key,onClick:pe=>Ki(H.key),class:"group relative w-full rounded-lg border border-gray-200 p-6 text-left transition hover:border-sky-300 dark:border-gray-700 dark:hover:border-sky-600"},[f("div",nj,[w(vt(ma),{class:"h-6 w-6 flex-shrink-0 text-gray-400 transition group-hover:text-sky-600 dark:group-hover:text-sky-400"}),f("div",null,[f("h3",rj,ee(H.label),1),f("p",oj,ee($.value.project_types[H.key]?.description||""),1)])])],8,ij))),128))])]))],512),[[mt,R.value==="structure"]]),nt(f("div",aj,[w($s,null,{default:Z(()=>[w(Of,{modelValue:Nr.value,"onUpdate:modelValue":E[23]||(E[23]=H=>Nr.value=H),flush:""},{note:Z(()=>[...E[36]||(E[36]=[he(" Project-specific .gitignore templates can be customized in ",-1),f("a",{href:"#/settings/project-defaults",class:"text-sky-600 dark:text-sky-400 hover:underline"}," Project Defaults ",-1),he(". ",-1)])]),_:1},8,["modelValue"])]),_:1})],512),[[mt,R.value==="git"]]),nt(f("div",uj,[w($s,null,{default:Z(()=>[E[37]||(E[37]=f("div",null,[f("h3",{class:"text-sm font-semibold text-gray-900 dark:text-white mb-4"},"Scaffold Behavior"),f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-6"},[he(" Automatic actions when "),f("code",{class:"px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700 rounded text-xs"},"scaffold()"),he(" runs to initialize your project environment. ")])],-1)),w(Pf,{modelValue:wn.value,"onUpdate:modelValue":E[24]||(E[24]=H=>wn.value=H),flush:""},null,8,["modelValue"])]),_:1})],512),[[mt,R.value==="scaffold"]]),nt(f("div",cj,[w($s,null,{default:Z(()=>[w(xo,null,{default:Z(()=>[w(Ue,{modelValue:$.value.defaults.packages.use_renv,"onUpdate:modelValue":E[25]||(E[25]=H=>$.value.defaults.packages.use_renv=H),label:"Enable renv",description:"Create renv environments for new projects."},null,8,["modelValue"])]),_:1}),w(xo,{title:"Default packages",description:"Installed (and optionally attached) when scaffold() runs."},{default:Z(()=>[E[41]||(E[41]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-4"},"Use this list to preseed notebooks with your preferred helpers.",-1)),$.value.defaults.packages.default_packages&&$.value.defaults.packages.default_packages.length?(g(),v("div",dj,[(g(!0),v(me,null,Ee($.value.defaults.packages.default_packages,(H,pe)=>(g(),v("div",{key:`pkg-${pe}`,class:"rounded-md border border-gray-200 p-4 dark:border-gray-700"},[f("div",fj,[f("div",hj,[H.source==="cran"||H.source==="bioconductor"?(g(),be(xb,{key:0,modelValue:H.name,"onUpdate:modelValue":ve=>H.name=ve,source:H.source,label:"Package",placeholder:H.source==="cran"?"Search CRAN...":"Search Bioconductor...",onSelect:ve=>H.name=ve.name},null,8,["modelValue","onUpdate:modelValue","source","placeholder","onSelect"])):(g(),be(ae,{key:1,modelValue:H.name,"onUpdate:modelValue":ve=>H.name=ve,label:"Package",placeholder:"user/repo"},null,8,["modelValue","onUpdate:modelValue"])),w(si,{modelValue:H.source,"onUpdate:modelValue":ve=>H.source=ve,label:"Source"},{default:Z(()=>[...E[38]||(E[38]=[f("option",{value:"cran"},"CRAN",-1),f("option",{value:"github"},"GitHub",-1),f("option",{value:"bioconductor"},"Bioconductor",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),f("div",pj,[w(Ue,{modelValue:H.auto_attach,"onUpdate:modelValue":ve=>H.auto_attach=ve,label:"Auto-Attach",description:"Call library() when scaffold() runs."},null,8,["modelValue","onUpdate:modelValue"]),w(Ye,{size:"sm",variant:"secondary",onClick:ve=>Wi(pe)},{default:Z(()=>[...E[39]||(E[39]=[he("Remove",-1)])]),_:1},8,["onClick"])])])]))),128))])):(g(),v("p",mj,"No packages configured. Add packages to include tidyverse helpers or internal utilities automatically.")),f("div",gj,[w(Ye,{size:"sm",variant:"secondary",onClick:xn},{default:Z(()=>[...E[40]||(E[40]=[he("Add Package",-1)])]),_:1})])]),_:1})]),_:1})],512),[[mt,R.value==="packages"]])])],512),[[mt,!ye.value]]),w(un,{modelValue:_e.open,"onUpdate:modelValue":E[28]||(E[28]=H=>_e.open=H),size:"lg",title:_e.title},{default:Z(()=>[f("p",vj,ee(_e.description),1),w(Ra,{modelValue:_e.contents,"onUpdate:modelValue":E[26]||(E[26]=H=>_e.contents=H),rows:18,monospace:""},null,8,["modelValue"])]),actions:Z(()=>[f("div",yj,[w(Ye,{variant:"secondary",onClick:E[27]||(E[27]=H=>_e.open=!1)},{default:Z(()=>[...E[42]||(E[42]=[he("Cancel",-1)])]),_:1}),w(Ye,{variant:"primary",disabled:_e.loading,onClick:li},{default:Z(()=>[he(ee(_e.loading?"Saving":"Save Template"),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","title"]),w(un,{modelValue:re.open,"onUpdate:modelValue":E[30]||(E[30]=H=>re.open=H),size:"md",title:"Reset to Defaults",icon:"warning"},{default:Z(()=>[f("p",bj,[E[43]||(E[43]=he(" Are you sure you want to reset ",-1)),f("strong",null,ee(re.projectTypeName),1),E[44]||(E[44]=he(" to default settings? This will discard all your customizations for this project type. ",-1))])]),actions:Z(()=>[f("div",kj,[w(Ye,{variant:"secondary",onClick:E[29]||(E[29]=H=>re.open=!1)},{default:Z(()=>[...E[45]||(E[45]=[he("Cancel",-1)])]),_:1}),w(Ye,{variant:"primary",onClick:xs},{default:Z(()=>[...E[46]||(E[46]=[he(" Reset to Defaults ",-1)])]),_:1})])]),_:1},8,["modelValue"])]))}},Cj={class:"mx-auto max-w-5xl p-10"},Aj={__name:"ProjectPackagesView",setup(s){return ie([]),ls(async()=>{}),(e,t)=>(g(),v("div",Cj,[w(jr,{title:"Packages",description:"Manage R packages for this project."}),t[0]||(t[0]=Ga('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Package Configuration</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Package management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Add and remove project packages </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify package versions </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Toggle renv integration </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Install and update packages </li></ul></div></div>',1))]))}},Mj={class:"mx-auto max-w-5xl p-10"},Dj={__name:"ProjectDataView",setup(s){return ie([]),ls(async()=>{}),(e,t)=>(g(),v("div",Mj,[w(jr,{title:"Data",description:"Manage data catalog and sources for this project."}),t[0]||(t[0]=Ga('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Data Catalog</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Data catalog management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Define data sources in the catalog </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Specify data formats (CSV, RDS, etc.) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure encryption settings </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Track data integrity via digests </li></ul></div></div>',1))]))}},Ej={class:"mx-auto max-w-5xl p-10"},Tj={__name:"ProjectConnectionsView",setup(s){return ie([]),ls(async()=>{}),(e,t)=>(g(),v("div",Ej,[w(jr,{title:"Connections",description:"Manage database connections for this project."}),t[0]||(t[0]=Ga('<div class="mt-10 rounded-2xl border border-zinc-200 bg-white p-8 shadow-sm dark:border-zinc-800 dark:bg-zinc-900"><div class="flex items-center gap-3 border-b border-zinc-100 pb-6 dark:border-zinc-800"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-sky-600 shadow-lg shadow-sky-500/20"><svg class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-xl font-bold text-zinc-900 dark:text-white">Database Connections</h3></div><div class="mt-8"><p class="text-sm text-zinc-600 dark:text-zinc-400"> Connection management interface coming soon. This page will allow you to: </p><ul class="mt-4 space-y-2 text-sm text-zinc-600 dark:text-zinc-400"><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Configure database connections (SQLite, PostgreSQL) </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Store connection credentials securely </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Test database connectivity </li><li class="flex items-center gap-2"><svg class="h-4 w-4 text-sky-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Manage connection pooling settings </li></ul></div></div>',1))]))}},Vj=[{path:"/",redirect:"/projects"},{path:"/docs",name:"docs",component:Xh},{path:"/docs/:functionName",name:"doc-detail",component:Xh,props:!0},{path:"/projects",name:"projects",component:s4},{path:"/projects/new",name:"project-create",component:TT},{path:"/project/:id",name:"project-detail",component:D$,props:!0},{path:"/settings/:section?/:subsection?",name:"settings",component:_j,props:!0},{path:"/project/packages",name:"project-packages",component:Aj},{path:"/project/data",name:"project-data",component:Dj},{path:"/project/connections",name:"project-connections",component:Tj}],Oj=Mw({history:rw(),routes:Vj});vx(p2).use(Oj).mount("#app");
