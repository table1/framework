% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/connection_pool.R
\name{connection_with_pool}
\alias{connection_with_pool}
\title{Execute code with a connection pool}
\usage{
connection_with_pool(connection_name, code, ...)
}
\arguments{
\item{connection_name}{Character. Name of the connection in settings.yml}

\item{code}{Expression to evaluate with the pool}

\item{...}{Additional arguments passed to \code{connection_pool()}}
}
\value{
The result of evaluating \code{code}
}
\description{
Convenience wrapper for working with connection pools. Gets or creates a pool
and makes it available as \code{pool} within the code block.
}
\examples{
\dontrun{
# Simple usage
users <- connection_with_pool("my_db", {
  DBI::dbGetQuery(pool, "SELECT * FROM users WHERE active = TRUE")
})

# Multiple operations
result <- connection_with_pool("my_db", {
  users <- DBI::dbGetQuery(pool, "SELECT * FROM users")
  posts <- DBI::dbGetQuery(pool, "SELECT * FROM posts")
  list(users = users, posts = posts)
})
}

}
